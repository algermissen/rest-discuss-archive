<style>pre {white-space: pre-wrap;}</style>
-----------------------------------------------------------------------------------<br>
Post ID:19237<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-01-06 21:10:51<br>
Subject:Re: [apps-discuss] Fwd: New Version Notification for draft-hausenblas-csv-fragment-01<br>
Message:<br><br>
<pre>hello dominik.

thanks for the feedback!

On 2012-12-30 13:59 , Dominik Tomaszuk wrote:
&gt; I propose to add "regexp" scheme. For example:
&gt; http://example.com/data.csv#regexp:place=/^G/
&gt; Following the listing in Â§ 2, the above CSV fragment selects a slice,
&gt; yielding another CSV table as follows:
&gt; date,temperature,place
&gt; 2011-01-01,1,Galway
&gt; 2011-01-02,-1,Galway
&gt; 2011-01-03,0,Galway

adding regex support could be regarded as a logical step up in 
functionality from the current slices which use strict matches only. 
however, the general design question is whether sophisticated 
content-based identification is worth the effort, and what the use cases 
are. generally speaking, fragids shouldn't be seen as some form of 
"search mechanism", this can be left to clients by themselves. they 
should mainly focus on identification, and there identifying by location 
usually works fine. we are considering dropping splices all together, 
because they already cross the line into "search land".

interestingly, we had the same discussions when we designed fragids for 
plain text files (http://tools.ietf.org/html/rfc5147). we had the same 
proposals to add regexes and maybe even more sophisticated mechanisms 
(string distance measures, for example) for identifiers that are robust 
against some changes. however, in the end these mechanisms did not make 
the 80/20 cut, and instead an integrity check mechanism was added 
(http://tools.ietf.org/html/rfc5147#section-3.1), so that it's at least 
possible to detect changes in the resource representation.

cheers,

dret.

-- 
erik wilde | mailto:dret@...  -  tel:+1-510-2061079 |
            | UC Berkeley  -  School of Information (ISchool) |
            | http://dret.net/netdret http://twitter.com/dret |

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19238<br>
Sender:Mark Baker &lt;distobj@...&gt;<br>
Post Date/Time:2013-01-07 17:21:43<br>
Subject:Re: [rest-discuss] Atom + Member URIs<br>
Message:<br><br>
<pre>On Thu, Dec 27, 2012 at 8:27 AM, Greg Young &lt;gregoryyoung1@...&gt; wrote:
&gt;
&gt;
&gt;
&gt; We have been having an interesting discussion here regarding the AtomPub protocol.
&gt;
&gt; Is it ok to change the MemberUri on a put? EG: Return a Location header and then point to a new MemberUri?
&gt;
&gt; Example:
&gt; You have
&gt; /feed/0
&gt;
&gt; you put new data
&gt;
&gt; it returns
&gt; Location: /feed/74

No, you can't return 2xx because you didn't update the state of the
resource targeted by the client. You might consider using a redirect.

Mark.

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19239<br>
Sender:Greg Young &lt;gregoryyoung1@...&gt;<br>
Post Date/Time:2013-01-07 22:48:40<br>
Subject:Re: Atom + Member URIs<br>
Message:<br><br>
<pre>So on the post return a redirect to /feed/74

On Monday, January 7, 2013, Mark Baker wrote:

&gt; On Thu, Dec 27, 2012 at 8:27 AM, Greg Young &lt;gregoryyoung1@...&lt;javascript:;&gt;&gt;
&gt; wrote:
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; We have been having an interesting discussion here regarding the AtomPub
&gt; protocol.
&gt; &gt;
&gt; &gt; Is it ok to change the MemberUri on a put? EG: Return a Location header
&gt; and then point to a new MemberUri?
&gt; &gt;
&gt; &gt; Example:
&gt; &gt; You have
&gt; &gt; /feed/0
&gt; &gt;
&gt; &gt; you put new data
&gt; &gt;
&gt; &gt; it returns
&gt; &gt; Location: /feed/74
&gt;
&gt; No, you can't return 2xx because you didn't update the state of the
&gt; resource targeted by the client. You might consider using a redirect.
&gt;
&gt; Mark.
&gt;


-- 
Le doute n'est pas une condition agréable, mais la certitude est absurde.
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19240<br>
Sender:"erewh0n" &lt;keith.hassen@...&gt;<br>
Post Date/Time:2013-01-07 23:39:44<br>
Subject:API versioning<br>
Message:<br><br>
<pre>When versioning an API a common approach is to specify version information in the URI.  I'm curious how others have solved (or would solve) this problem from a RESTful perspective.  I'm aware of the recommendation to use the content-type header for specifying version information, however I am concerned that routing and load balancing features would suffer.  So for example if we versioned an API with api.example.com/orders/v1 and api.example.com/orders/v2, it is straightforward to route requests for v1 to one set of web servers and route requests for v2 to another set of web servers.  Facilitating this based on HTTP headers is more complex and requires more "plumbing".  This is also true in-code, where URI mapping semantics are first-order concerns for many libraries (e.g. using Web API or ServiceStack, etc, it is straightforward to map URIs to controllers or contracts).

Anyway, it would be interesting to hear other people's feedback on this issue.

Thanks.




</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19241<br>
Sender:Mike Kelly &lt;mikekelly321@...&gt;<br>
Post Date/Time:2013-01-08 00:04:23<br>
Subject:Re: [rest-discuss] API versioning<br>
Message:<br><br>
<pre>If you have to do it, you may want to look at versioning using a subdomain
i.e:

v1.api.example.com/orders

that'll let you take advantage of DNS, should you need to split the traffic
in the future.

Cheers,
M


On Mon, Jan 7, 2013 at 11:39 PM, erewh0n &lt;keith.hassen@...&gt; wrote:

&gt; **
&gt;
&gt;
&gt; When versioning an API a common approach is to specify version information
&gt; in the URI. I'm curious how others have solved (or would solve) this
&gt; problem from a RESTful perspective. I'm aware of the recommendation to use
&gt; the content-type header for specifying version information, however I am
&gt; concerned that routing and load balancing features would suffer. So for
&gt; example if we versioned an API with api.example.com/orders/v1 and
&gt; api.example.com/orders/v2, it is straightforward to route requests for v1
&gt; to one set of web servers and route requests for v2 to another set of web
&gt; servers. Facilitating this based on HTTP headers is more complex and
&gt; requires more "plumbing". This is also true in-code, where URI mapping
&gt; semantics are first-order concerns for many libraries (e.g. using Web API
&gt; or ServiceStack, etc, it is straightforward to map URIs to controllers or
&gt; contracts).
&gt;
&gt; Anyway, it would be interesting to hear other people's feedback on this
&gt; issue.
&gt;
&gt; Thanks.
&gt;
&gt;  
&gt;



-- 
Mike

http://twitter.com/mikekelly85
http://github.com/mikekelly
http://linkedin.com/in/mikekelly123
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19242<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-01-08 03:37:19<br>
Subject:Re: [rest-discuss] API versioning<br>
Message:<br><br>
<pre>"erewh0n" wrote:
&gt;
&gt; I'm aware of the recommendation to use the content-type header for
&gt; specifying version information...
&gt;

If you're using a whole different "language" to describe your API each
time it changes, you're missing the point of REST...

&gt;
&gt; So for example if we versioned an API with api.example.com/orders/v1
&gt; and api.example.com/orders/v2, it is straightforward to route requests
&gt; for v1 to one set of web servers and route requests for v2 to another
&gt; set of web servers.
&gt;

Likewise, if you need a whole 'nother server farm each time your API is
modified...

&gt;
&gt; This is also true in-code, where URI mapping semantics are first-
&gt; order concerns for many libraries (e.g. using Web API or ServiceStack,
&gt; etc, it is straightforward to map URIs to controllers or contracts).
&gt; 

Aha!  HTTP frameworks do encourage solving problems at the protocol
layer.  What they aren't much good for, unfortunately, is thinking in
hypertext.  I don't want to say there's no versioning in REST, in fact
if I PUT an existing image to my server, the old image is renamed not
removed; there's a "versioned" API inherent in this strategy.

As to API versioning, do just that, version your hypertext API -- not
your URLs, your conceptual mappings aren't changing.  Neither should
your media type -- I mostly use XHTML to define APIs, that's as detailed
a description of the actual API as intermediaries need in order to
participate in the communication (which they won't do if you're just
"re-labeling" XHTML as custom, versioned media types to conneg around
proper hypertext API design).

Anything else is up to the user-agent to work out.  This is actually
easier for m2m than h2m; a v1 m2m client should already ignore any
hypertext it doesn't understand, rolling out v2 can then re-use any
non-deprecated bits of the API already present plus the new stuff, and
ignore the deprecated stuff.  Can't it?

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19243<br>
Sender:Keith Hassen &lt;keith.hassen@...&gt;<br>
Post Date/Time:2013-01-08 04:36:37<br>
Subject:Re: [rest-discuss] API versioning<br>
Message:<br><br>
<pre>&gt; If you're using a whole different "language" to describe your API each
&gt; time it changes, you're missing the point of REST...


Hmm.  I wouldn't say I'm using a different "language", I'm very explicitly using the Content-Type to negotiate the media format (say "vnd.example.com.order+json").  I can imagine a breaking change to the representation of the resource at the URI api.example.com/order/[order-id] that can be represented by returning a Content-Type of "vnd.example.com.order+json;version=2" or something similar.  Similarly, clients can request that specific version of the resource with the Accept header set correctly.

This seems to be a recommended practice that I've encountered in reading about RESTful implementations.

&gt; Anything else is up to the user-agent to work out.  This is actually
&gt; easier for m2m than h2m; a v1 m2m client should already ignore any
&gt; hypertext it doesn't understand, rolling out v2 can then re-use any
&gt; non-deprecated bits of the API already present plus the new stuff, and
&gt; ignore the deprecated stuff.  Can't it?

Not always, at least not in my experience. :)  I have found that while breaking changes don't happen often, they *do* happen.  Add to this the possibility of different types of API consumers that start off implementing your APIs the same way, but slowly (or rapidly!) diverge over time.  In some cases new resources (and thus new URIs) will suffice, but in other cases what we are doing is very specifically *evolving* the resource representation to accommodate new requirements.


On 2013-01-07, at 10:37 PM, Eric J. Bowman wrote:

&gt; "erewh0n" wrote:
&gt;&gt; 
&gt;&gt; I'm aware of the recommendation to use the content-type header for
&gt;&gt; specifying version information...
&gt;&gt; 
&gt; 
&gt; If you're using a whole different "language" to describe your API each
&gt; time it changes, you're missing the point of REST...
&gt; 
&gt;&gt; 
&gt;&gt; So for example if we versioned an API with api.example.com/orders/v1
&gt;&gt; and api.example.com/orders/v2, it is straightforward to route requests
&gt;&gt; for v1 to one set of web servers and route requests for v2 to another
&gt;&gt; set of web servers.
&gt;&gt; 
&gt; 
&gt; Likewise, if you need a whole 'nother server farm each time your API is
&gt; modified...
&gt; 
&gt;&gt; 
&gt;&gt; This is also true in-code, where URI mapping semantics are first-
&gt;&gt; order concerns for many libraries (e.g. using Web API or ServiceStack,
&gt;&gt; etc, it is straightforward to map URIs to controllers or contracts).
&gt;&gt; 
&gt; 
&gt; Aha!  HTTP frameworks do encourage solving problems at the protocol
&gt; layer.  What they aren't much good for, unfortunately, is thinking in
&gt; hypertext.  I don't want to say there's no versioning in REST, in fact
&gt; if I PUT an existing image to my server, the old image is renamed not
&gt; removed; there's a "versioned" API inherent in this strategy.
&gt; 
&gt; As to API versioning, do just that, version your hypertext API -- not
&gt; your URLs, your conceptual mappings aren't changing.  Neither should
&gt; your media type -- I mostly use XHTML to define APIs, that's as detailed
&gt; a description of the actual API as intermediaries need in order to
&gt; participate in the communication (which they won't do if you're just
&gt; "re-labeling" XHTML as custom, versioned media types to conneg around
&gt; proper hypertext API design).
&gt; 
&gt; Anything else is up to the user-agent to work out.  This is actually
&gt; easier for m2m than h2m; a v1 m2m client should already ignore any
&gt; hypertext it doesn't understand, rolling out v2 can then re-use any
&gt; non-deprecated bits of the API already present plus the new stuff, and
&gt; ignore the deprecated stuff.  Can't it?
&gt; 
&gt; -Eric


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19244<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-01-08 05:57:13<br>
Subject:Re: [rest-discuss] API versioning<br>
Message:<br><br>
<pre>Keith Hassen wrote:
&gt; 
&gt; This seems to be a recommended practice that I've encountered in
&gt; reading about RESTful implementations.
&gt; 

Perfectly good HTTP API practice; REST, not so much.  The point of
media types is to provide loose coupling based on shared understanding
of how the representation is to be decoded.  Not tight coupling based
on interpreting the content of the representation.  I've never seen an
order API that couldn't be represented as HTML; despite any number of
variations on this theme (or versions within), the media type doesn't
vary between more order APIs on the Web than I can count.

REST has no notion of resource "type" let alone of exposing same on the
wire, so I've never understood why this solution is so prevalent in REST
discussions.  Just media types, which are agnostic as to what "type" of
resource is being represented (with rare exceptions as parameters).

&gt;
&gt; &gt; Anything else is up to the user-agent to work out.  This is actually
&gt; &gt; easier for m2m than h2m; a v1 m2m client should already ignore any
&gt; &gt; hypertext it doesn't understand, rolling out v2 can then re-use any
&gt; &gt; non-deprecated bits of the API already present plus the new stuff,
&gt; &gt; and ignore the deprecated stuff.  Can't it?
&gt; 
&gt; Not always, at least not in my experience. :)  I have found that
&gt; while breaking changes don't happen often, they *do* happen.  Add to
&gt; this the possibility of different types of API consumers that start
&gt; off implementing your APIs the same way, but slowly (or rapidly!)
&gt; diverge over time.  In some cases new resources (and thus new URIs)
&gt; will suffice, but in other cases what we are doing is very
&gt; specifically *evolving* the resource representation to accommodate
&gt; new requirements.
&gt; 

Then design for graceful degradation (or progressive enhancement) using
client-side feature detection.  Just saying there's no need to swing
the conneg hammer to turn this particular screw.

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19245<br>
Sender:=?ISO-8859-1?Q?J=F8rn_Wildt?= &lt;jw@...&gt;<br>
Post Date/Time:2013-01-08 08:03:53<br>
Subject:Re: [rest-discuss] API versioning<br>
Message:<br><br>
<pre>Hi Eric

&gt; REST has no notion of resource "type" let alone of exposing same on the
wire, so I've never understood why this solution is so prevalent in REST
discussions. Just media types, which are agnostic as to what "type" of
resource is being represented (with rare exceptions as parameters).

I remember your stance on this from previous discussions. And, yes, a
"sales order" or what ever other "type" you need can certainly be
represented as (X)HTML. Sure, I am in no way questioning that.

My question is though - from where does the client get the information it
needs to extract, say, the order sum, delivery address, order lines
quantity and so on from the generic payload?

Let me expand with an example:

- A client of mine sends me a link to a sales order and I want to import
that into my local ERP system.

- If the sales order is only available in (X)HTML, JSON or similar generic
media type, how would I then be able to understand the content in enough
detail to import it?

- If the sales order was available in ATOM, I could at least import it as a
document having a title and some content. But, okay, you can do that with
(X)HTML too - albeit not with JSON and XML.

- If the sales order was available in an even more domain specific media
type, I could do an even better import of data.

- ... and so on for various levels of domain specific media types ...

Having a domain specific media type does although not imply any specific
"type" of the resource itself - it only says "this particular resource can
(also) be represented as XXX" - where XXX is an official application
specific media type, for instance vCard or vCal which would allow the
client to derive contact and calendar information from a resource - without
making *any* kind of assumption about the underlying "type" of the it.

Actually, I would argue that a generic media type is more "typed" than a
domain specific media type. Okay, that sounds like rubbish, I know - but
let me explain:

- as I stated above, a domain specific media type lets you derived useful
information from a resource without making any assumptions about its
underlying type.

- whereas a generic media type forces the client to magically assume the
resource has a specific type with specific properties you can extract from
the generic payload.

Well, that is my current view on this issue ... and I have been swinging
back and forth between your viewpoint and the above viewpoint during the
last couple of years :-) Still open for new inputs!

Thanks, Jørn


On Tue, Jan 8, 2013 at 6:57 AM, Eric J. Bowman &lt;eric@...&gt;wrote:

&gt; **
&gt;
&gt;
&gt; Keith Hassen wrote:
&gt; &gt;
&gt; &gt; This seems to be a recommended practice that I've encountered in
&gt; &gt; reading about RESTful implementations.
&gt; &gt;
&gt;
&gt; Perfectly good HTTP API practice; REST, not so much. The point of
&gt; media types is to provide loose coupling based on shared understanding
&gt; of how the representation is to be decoded. Not tight coupling based
&gt; on interpreting the content of the representation. I've never seen an
&gt; order API that couldn't be represented as HTML; despite any number of
&gt; variations on this theme (or versions within), the media type doesn't
&gt; vary between more order APIs on the Web than I can count.
&gt;
&gt; REST has no notion of resource "type" let alone of exposing same on the
&gt; wire, so I've never understood why this solution is so prevalent in REST
&gt; discussions. Just media types, which are agnostic as to what "type" of
&gt; resource is being represented (with rare exceptions as parameters).
&gt;
&gt;
&gt; &gt;
&gt; &gt; &gt; Anything else is up to the user-agent to work out. This is actually
&gt; &gt; &gt; easier for m2m than h2m; a v1 m2m client should already ignore any
&gt; &gt; &gt; hypertext it doesn't understand, rolling out v2 can then re-use any
&gt; &gt; &gt; non-deprecated bits of the API already present plus the new stuff,
&gt; &gt; &gt; and ignore the deprecated stuff. Can't it?
&gt; &gt;
&gt; &gt; Not always, at least not in my experience. :) I have found that
&gt; &gt; while breaking changes don't happen often, they *do* happen. Add to
&gt; &gt; this the possibility of different types of API consumers that start
&gt; &gt; off implementing your APIs the same way, but slowly (or rapidly!)
&gt; &gt; diverge over time. In some cases new resources (and thus new URIs)
&gt; &gt; will suffice, but in other cases what we are doing is very
&gt; &gt; specifically *evolving* the resource representation to accommodate
&gt; &gt; new requirements.
&gt; &gt;
&gt;
&gt; Then design for graceful degradation (or progressive enhancement) using
&gt; client-side feature detection. Just saying there's no need to swing
&gt; the conneg hammer to turn this particular screw.
&gt;
&gt; -Eric
&gt;
&gt;  
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19246<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-01-08 10:42:47<br>
Subject:Re: [rest-discuss] API versioning<br>
Message:<br><br>
<pre>Jørn Wildt wrote:
&gt; 
&gt; My question is though - from where does the client get the
&gt; information it needs to extract, say, the order sum, delivery
&gt; address, order lines quantity and so on from the generic payload?
&gt; 

From hypertext.  NOT from knowledge of resource type coupled via custom
media type (vnd.order*).  It seems like you're asking how to inform the
client that this resource type is "order" -- which is simply not
relevant to REST, where the only client knowledge required is of the
*interface* to the resource, not the *meaning* of the resource.

If my order-form &lt;table&gt; has a &lt;th&gt;quantity&lt;/th&gt; column, then the
quantity of any item ID is the corresponding &lt;td&gt;, i.e. you code the
client with the XPATH expression which yields the answer you're looking
for, assuming XHTML.  If Xforms is used, this XPATH expression is right
there in the form control binding, i.e. a self-documenting API.

&gt;
&gt; Actually, I would argue that a generic media type is more "typed"
&gt; than a domain specific media type. Okay, that sounds like rubbish, I
&gt; know - but let me explain:
&gt; 
&gt; - as I stated above, a domain specific media type lets you derived
&gt; useful information from a resource without making any assumptions
&gt; about its underlying type.
&gt; 

I might agree with that, if generic media types didn't have
extensibility mechanisms like, oh I dunno, link relations...  AFAIC,
domain-specific media types _are_ assumptions about the underlying
type, i.e. an "order" is too unique a snowflake to express generically;
what other conclusion *can* be drawn about how vnd.order* types are
used in practice?

&gt;
&gt; - whereas a generic media type forces the client to magically assume
&gt; the resource has a specific type with specific properties you can
&gt; extract from the generic payload.
&gt; 

OK, this is where these discussions always lose me.  A browser needs to
know *nothing* about resource type, to allow a user to place an order
from, like, a bazillion different websites.  In REST, the client just
needs to know how to manipulate generic hypertext controls.  What is it
about order processing that makes folks think the client needs to know
that it's processing an order?

-Eric

Now playing, ***** stars for sure:
http://archive.org/details/gd1970-11-06.aud.evans.3338.sbefail.shnf

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19247<br>
Sender:=?ISO-8859-1?Q?J=F8rn_Wildt?= &lt;jw@...&gt;<br>
Post Date/Time:2013-01-08 21:39:30<br>
Subject:Re: [rest-discuss] API versioning<br>
Message:<br><br>
<pre>&gt; the client just
&gt; needs to know how to manipulate generic hypertext controls.
&gt; What is it
&gt; about order processing that makes folks think the client needs to know
&gt; that it's processing an order?

This is my mistake, using the term "client" wrongly, sorry. According to
the dissertation, a client is the library that connects to the web - and
the thing driving the client is the user agent.

And that sort of explains it all ... yes, the client "just needs to know
how to manipulate generic hypertext controls.". Let me rephrase my question:

&gt; &gt; from where does the ***user agent*** get the
&gt; &gt; information it needs to extract, say, the order sum, delivery
&gt; &gt; address, order lines quantity and so on from the generic payload?

But now we are are out of REST country. This is more about application
specific details. REST is concerned with the interaction between the client
and the server - it does not provide any guidance on how to implement the
user agent.

Thanks for your feedback - I had actually prepared two long e-mails before
I got to this point, so you certainly got me thinking (as has happened
before when reading your replies :-)

/Jørn
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19248<br>
Sender:Keith Hassen &lt;keith.hassen@...&gt;<br>
Post Date/Time:2013-01-09 05:25:38<br>
Subject:Re: [rest-discuss] API versioning<br>
Message:<br><br>
<pre>First of all, thanks for the replies and perspective on REST.

Backing up to the original question it seems like your particular take on it is that there's no need to version URIs or the resource representations provided that a cautious approach is taken to resource evolution.

To be honest I'm still not sure how this would be handled if two clients diverge in their understanding of the same resource.  Perhaps that divergence leads us to different concepts and thus different resources and I've just been thinking about the problem incorrectly. :)

Back to your most recent response...

&gt;&gt; This seems to be a recommended practice that I've encountered in
&gt;&gt; reading about RESTful implementations.
&gt;&gt; 
&gt; 
&gt; Perfectly good HTTP API practice; REST, not so much.  The point of
&gt; media types is to provide loose coupling based on shared understanding
&gt; of how the representation is to be decoded.  

I think I'm actually talking about loose coupling, but this area seems a little fuzzy.  Comprehensive coverage of media type seems to be missing from Fielding's dissertation.  The media type I specified was definitely too specific (vnd.example.com might be a better choice rather than vnd.example.com.order, the latter effectively binding the media type to the representation and starts smelling like RPC modelling rather than the loose coupling promoted by the RESTful style).

So how tight should this coupling be?  And what about versioning?  I'm tempted to say that if versioning is required, do so in the URi rather than the media type.  The media type seems to be more of an assertion/expectation regarding application context rather than a specification of the resource.

It's amazing (or maybe not at all amazing) how divided this subject appears to be on the web.  This: http://www.informit.com/articles/article.aspx?p=1566460 is a pretty typical example.

Thanks again for the feedback.

K


On 2013-01-08, at 12:57 AM, Eric J. Bowman wrote:

&gt; Keith Hassen wrote:
&gt;&gt; 
&gt;&gt; This seems to be a recommended practice that I've encountered in
&gt;&gt; reading about RESTful implementations.
&gt;&gt; 
&gt; 
&gt; Perfectly good HTTP API practice; REST, not so much.  The point of
&gt; media types is to provide loose coupling based on shared understanding
&gt; of how the representation is to be decoded.  Not tight coupling based
&gt; on interpreting the content of the representation.  I've never seen an
&gt; order API that couldn't be represented as HTML; despite any number of
&gt; variations on this theme (or versions within), the media type doesn't
&gt; vary between more order APIs on the Web than I can count.
&gt; 
&gt; REST has no notion of resource "type" let alone of exposing same on the
&gt; wire, so I've never understood why this solution is so prevalent in REST
&gt; discussions.  Just media types, which are agnostic as to what "type" of
&gt; resource is being represented (with rare exceptions as parameters).
&gt; 
&gt;&gt; 
&gt;&gt;&gt; Anything else is up to the user-agent to work out.  This is actually
&gt;&gt;&gt; easier for m2m than h2m; a v1 m2m client should already ignore any
&gt;&gt;&gt; hypertext it doesn't understand, rolling out v2 can then re-use any
&gt;&gt;&gt; non-deprecated bits of the API already present plus the new stuff,
&gt;&gt;&gt; and ignore the deprecated stuff.  Can't it?
&gt;&gt; 
&gt;&gt; Not always, at least not in my experience. :)  I have found that
&gt;&gt; while breaking changes don't happen often, they *do* happen.  Add to
&gt;&gt; this the possibility of different types of API consumers that start
&gt;&gt; off implementing your APIs the same way, but slowly (or rapidly!)
&gt;&gt; diverge over time.  In some cases new resources (and thus new URIs)
&gt;&gt; will suffice, but in other cases what we are doing is very
&gt;&gt; specifically *evolving* the resource representation to accommodate
&gt;&gt; new requirements.
&gt;&gt; 
&gt; 
&gt; Then design for graceful degradation (or progressive enhancement) using
&gt; client-side feature detection.  Just saying there's no need to swing
&gt; the conneg hammer to turn this particular screw.
&gt; 
&gt; -Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19249<br>
Sender:Alexander Johannesen &lt;alexander.johannesen@...&gt;<br>
Post Date/Time:2013-01-09 05:48:44<br>
Subject:Re: [rest-discuss] API versioning<br>
Message:<br><br>
<pre>Hiya,

&gt; To be honest I'm still not sure how this would be handled if two clients
&gt; diverge in their understanding of the same resource.

I think there needs to be made some distinctions between a shared
understanding of models and a shared understanding of a resource in that
model. Very often the model stays the same, and so the entities of that
models shouldn't change, or at best, provide a framework for dealing with
small changes (like backwards compatibility of models).

What many confuse as an API change in terms of REST is really a model
change, not a change to the language itself, which is REST. Even if the
internal representation of a resource changes, its place in the model most
often does not, and neither does the interface. True REST (TM) is
representational through hyperlinks, and applications should be guided
through the model rather than having knowledge of it, at least in an ideal
world (but people tend to think the overhead is too great for the world of
computing to deal with). There's no point in changing the interface nor the
model if only representation changes. That is probably better dealt with
through content negotiation, or, at worst, inside the representation level
itself.

What's being stressed here is that the separation of interface, model and
internal representation most often do not require versioning, at least not
on the model and interface level. So;

   /user/johnson
   /invoice/1023
   /process/345/participants

These are URIs that probably don't change with "versions". So why version
them at this level? The model is probably fine, only semantics and
representations change, so why not deal with it at that level instead?

Hope that makes sense. :) If not, gives us some examples of a change from
one version to the next, and let's talk about various ways to deal with the
changes in question.


Regards,

Alex








On Wed, Jan 9, 2013 at 4:25 PM, Keith Hassen &lt;keith.hassen@...&gt; wrote:

&gt; **
&gt;
&gt;
&gt; First of all, thanks for the replies and perspective on REST.
&gt;
&gt; Backing up to the original question it seems like your particular take on
&gt; it is that there's no need to version URIs or the resource representations
&gt; provided that a cautious approach is taken to resource evolution.
&gt;
&gt; To be honest I'm still not sure how this would be handled if two clients
&gt; diverge in their understanding of the same resource.  Perhaps that
&gt; divergence leads us to different concepts and thus different resources and
&gt; I've just been thinking about the problem incorrectly. :)
&gt;
&gt; Back to your most recent response...
&gt;
&gt; This seems to be a recommended practice that I've encountered in
&gt;
&gt; reading about RESTful implementations.
&gt;
&gt;
&gt;
&gt; Perfectly good HTTP API practice; REST, not so much.  The point of
&gt; media types is to provide loose coupling based on shared understanding
&gt; of how the representation is to be decoded.
&gt;
&gt;
&gt; I think I'm actually talking about loose coupling, but this area seems a
&gt; little fuzzy.  Comprehensive coverage of media type seems to be missing
&gt; from Fielding's dissertation.  The media type I specified was definitely
&gt; too specific (vnd.example.com might be a better choice rather than
&gt; vnd.example.com.order, the latter effectively binding the media type to the
&gt; representation and starts smelling like RPC modelling rather than the loose
&gt; coupling promoted by the RESTful style).
&gt;
&gt; So how tight should this coupling be?  And what about versioning?  I'm
&gt; tempted to say that if versioning is required, do so in the URi rather than
&gt; the media type.  The media type seems to be more of an
&gt; assertion/expectation regarding application context rather than a
&gt; specification of the resource.
&gt;
&gt; It's amazing (or maybe not at all amazing) how divided this subject
&gt; appears to be on the web.  This:
&gt; http://www.informit.com/articles/article.aspx?p=1566460 is a pretty
&gt; typical example.
&gt;
&gt; Thanks again for the feedback.
&gt;
&gt; K
&gt;
&gt;
&gt; On 2013-01-08, at 12:57 AM, Eric J. Bowman wrote:
&gt;
&gt; Keith Hassen wrote:
&gt;
&gt;
&gt; This seems to be a recommended practice that I've encountered in
&gt;
&gt; reading about RESTful implementations.
&gt;
&gt;
&gt;
&gt; Perfectly good HTTP API practice; REST, not so much.  The point of
&gt; media types is to provide loose coupling based on shared understanding
&gt; of how the representation is to be decoded.  Not tight coupling based
&gt; on interpreting the content of the representation.  I've never seen an
&gt; order API that couldn't be represented as HTML; despite any number of
&gt; variations on this theme (or versions within), the media type doesn't
&gt; vary between more order APIs on the Web than I can count.
&gt;
&gt; REST has no notion of resource "type" let alone of exposing same on the
&gt; wire, so I've never understood why this solution is so prevalent in REST
&gt; discussions.  Just media types, which are agnostic as to what "type" of
&gt; resource is being represented (with rare exceptions as parameters).
&gt;
&gt;
&gt; Anything else is up to the user-agent to work out.  This is actually
&gt;
&gt; easier for m2m than h2m; a v1 m2m client should already ignore any
&gt;
&gt; hypertext it doesn't understand, rolling out v2 can then re-use any
&gt;
&gt; non-deprecated bits of the API already present plus the new stuff,
&gt;
&gt; and ignore the deprecated stuff.  Can't it?
&gt;
&gt;
&gt; Not always, at least not in my experience. :)  I have found that
&gt;
&gt; while breaking changes don't happen often, they *do* happen.  Add to
&gt;
&gt; this the possibility of different types of API consumers that start
&gt;
&gt; off implementing your APIs the same way, but slowly (or rapidly!)
&gt;
&gt; diverge over time.  In some cases new resources (and thus new URIs)
&gt;
&gt; will suffice, but in other cases what we are doing is very
&gt;
&gt; specifically *evolving* the resource representation to accommodate
&gt;
&gt; new requirements.
&gt;
&gt;
&gt;
&gt; Then design for graceful degradation (or progressive enhancement) using
&gt; client-side feature detection.  Just saying there's no need to swing
&gt; the conneg hammer to turn this particular screw.
&gt;
&gt; -Eric
&gt;
&gt;
&gt;  
&gt;



-- 
 Project Wrangler, SOA, Information Alchemist, UX, RESTafarian, Topic Maps
--- http://shelter.nu/blog/ ----------------------------------------------
------------------ http://www.google.com/profiles/alexander.johannesen ---
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19250<br>
Sender:=?ISO-8859-1?Q?J=F8rn_Wildt?= &lt;jw@...&gt;<br>
Post Date/Time:2013-01-09 06:45:04<br>
Subject:Re: [rest-discuss] API versioning<br>
Message:<br><br>
<pre>If you work with generic media types like plain XML, JSON and(X)HTML (and
others) then there is absolutely no reason to version those through the
content-type and content negotiation. I mean, when did the processing rules
for XML and JSON last change? Oh, well, the rules for HTML does change -
but this is not handled through the media type, but rather through a
versioning mechanism inside the payload (the DOCTYPE).

"Unfortunately" there is a lot of domain specific media types out there -
and since domains changes regularly over time, well, you start thinking
that versioning must be done through the media type. And this is where
things start to break down. If you avoid domain specific media types (like
vnd.order+xml and so on), then you can avoid versioning through the media
type.

But, of course, your application still evolves over time. Then what?

Try these guidelines (and check also Nottingham's blog
http://www.mnot.net/blog/2011/10/25/web_api_versioning_smackdown):

- Do not expose your internal business objects directly on the wire (for
instance by JSON serializing them directly). Do wrap your business objects
in a (more) stable external format, such that you are free to change the
underlying business objects without the public facing format changing too.
Keep that transformation in sync with your internal changes.

- Don't make breaking changes to your public format.

- Add versioning information inside the payload.

- If you have to introduce breaking changes then create a new resource for
the new version.

- Put links to never versions of the resource into the original resource
(for instance using the Link header). Never clients can look for these
links and move on to the new and improved version.

- Introduce new links, in addition to the old ones, where other resources
are linking to your resource (if possible), using new link relation names
or similar mechanism. Newer clients will know which of the links to follow
- older clients will continue with the link that they have always used.

- URLs are not identities for your business data - they are identities for
various representations of your business data. I mean,
api-v1.example.com/person/1234 is obviously not the same resource as
api-v2.example.com/person/1234 - but it can certainly represent exactly the
same piece of business data.

(and, yes, this is quite the opposite of what I argued in my first post in
this thread)

/Jørn
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19251<br>
Sender:Keith Hassen &lt;keith.hassen@...&gt;<br>
Post Date/Time:2013-01-09 12:37:12<br>
Subject:Re: [rest-discuss] API versioning<br>
Message:<br><br>
<pre>Yeah we definitely make the distinction between the internal representation and the representation exposed to clients.  The changes I'm thinking about are those dictated by consumers, so in my case I'm thinking of a scenario where two consumers start with the same requirements for a representation of a resource (the thing that is returned to the client when issuing a GET on a certain resource), but then diverge over time.

I'm actually having a hard time thinking of a *breaking* change for consumers that can't be accommodated by some kind of additive transformation to the original.  In the worst case, you may have data duplication, for example a user might start off being:

{ name:"John Smith", address:"123 nowhere ave." }

but due to changing requirements needs to change to:

{ name:"John Smith", address:{street_address:"123 nowhere ave.", postal:"12345", phone:"555-5555"}}

In which case the new "address" representation could be added to the original representation using a different name:

{ name:"John Smith", address:"123 nowhere ave.", full_address:{...}}

This allows for compatibility between old and new client requirements.


On 2013-01-09, at 12:48 AM, Alexander Johannesen wrote:

&gt; Hiya,
&gt; 
&gt; &gt; To be honest I'm still not sure how this would be handled if two clients 
&gt; &gt; diverge in their understanding of the same resource.
&gt; 
&gt; I think there needs to be made some distinctions between a shared understanding of models and a shared understanding of a resource in that model. Very often the model stays the same, and so the entities of that models shouldn't change, or at best, provide a framework for dealing with small changes (like backwards compatibility of models).
&gt; 
&gt; What many confuse as an API change in terms of REST is really a model change, not a change to the language itself, which is REST. Even if the internal representation of a resource changes, its place in the model most often does not, and neither does the interface. True REST (TM) is representational through hyperlinks, and applications should be guided through the model rather than having knowledge of it, at least in an ideal world (but people tend to think the overhead is too great for the world of computing to deal with). There's no point in changing the interface nor the model if only representation changes. That is probably better dealt with through content negotiation, or, at worst, inside the representation level itself.
&gt; 
&gt; What's being stressed here is that the separation of interface, model and internal representation most often do not require versioning, at least not on the model and interface level. So;
&gt; 
&gt;    /user/johnson
&gt;    /invoice/1023
&gt;    /process/345/participants
&gt; 
&gt; These are URIs that probably don't change with "versions". So why version them at this level? The model is probably fine, only semantics and representations change, so why not deal with it at that level instead?
&gt; 
&gt; Hope that makes sense. :) If not, gives us some examples of a change from one version to the next, and let's talk about various ways to deal with the changes in question.
&gt; 
&gt; 
&gt; Regards,
&gt; 
&gt; Alex
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; On Wed, Jan 9, 2013 at 4:25 PM, Keith Hassen &lt;keith.hassen@...&gt; wrote:
&gt;  
&gt; 
&gt; First of all, thanks for the replies and perspective on REST.
&gt; 
&gt; Backing up to the original question it seems like your particular take on it is that there's no need to version URIs or the resource representations provided that a cautious approach is taken to resource evolution.
&gt; 
&gt; To be honest I'm still not sure how this would be handled if two clients diverge in their understanding of the same resource.  Perhaps that divergence leads us to different concepts and thus different resources and I've just been thinking about the problem incorrectly. :)
&gt; 
&gt; Back to your most recent response...
&gt; 
&gt;&gt;&gt; This seems to be a recommended practice that I've encountered in
&gt;&gt;&gt; reading about RESTful implementations.
&gt;&gt;&gt; 
&gt;&gt; 
&gt;&gt; Perfectly good HTTP API practice; REST, not so much.  The point of
&gt;&gt; media types is to provide loose coupling based on shared understanding
&gt;&gt; of how the representation is to be decoded.  
&gt; 
&gt; I think I'm actually talking about loose coupling, but this area seems a little fuzzy.  Comprehensive coverage of media type seems to be missing from Fielding's dissertation.  The media type I specified was definitely too specific (vnd.example.com might be a better choice rather than vnd.example.com.order, the latter effectively binding the media type to the representation and starts smelling like RPC modelling rather than the loose coupling promoted by the RESTful style).
&gt; 
&gt; So how tight should this coupling be?  And what about versioning?  I'm tempted to say that if versioning is required, do so in the URi rather than the media type.  The media type seems to be more of an assertion/expectation regarding application context rather than a specification of the resource.
&gt; 
&gt; It's amazing (or maybe not at all amazing) how divided this subject appears to be on the web.  This: http://www.informit.com/articles/article.aspx?p=1566460 is a pretty typical example.
&gt; 
&gt; Thanks again for the feedback.
&gt; 
&gt; K
&gt; 
&gt; 
&gt; On 2013-01-08, at 12:57 AM, Eric J. Bowman wrote:
&gt; 
&gt;&gt; Keith Hassen wrote:
&gt;&gt;&gt; 
&gt;&gt;&gt; This seems to be a recommended practice that I've encountered in
&gt;&gt;&gt; reading about RESTful implementations.
&gt;&gt;&gt; 
&gt;&gt; 
&gt;&gt; Perfectly good HTTP API practice; REST, not so much.  The point of
&gt;&gt; media types is to provide loose coupling based on shared understanding
&gt;&gt; of how the representation is to be decoded.  Not tight coupling based
&gt;&gt; on interpreting the content of the representation.  I've never seen an
&gt;&gt; order API that couldn't be represented as HTML; despite any number of
&gt;&gt; variations on this theme (or versions within), the media type doesn't
&gt;&gt; vary between more order APIs on the Web than I can count.
&gt;&gt; 
&gt;&gt; REST has no notion of resource "type" let alone of exposing same on the
&gt;&gt; wire, so I've never understood why this solution is so prevalent in REST
&gt;&gt; discussions.  Just media types, which are agnostic as to what "type" of
&gt;&gt; resource is being represented (with rare exceptions as parameters).
&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; Anything else is up to the user-agent to work out.  This is actually
&gt;&gt;&gt;&gt; easier for m2m than h2m; a v1 m2m client should already ignore any
&gt;&gt;&gt;&gt; hypertext it doesn't understand, rolling out v2 can then re-use any
&gt;&gt;&gt;&gt; non-deprecated bits of the API already present plus the new stuff,
&gt;&gt;&gt;&gt; and ignore the deprecated stuff.  Can't it?
&gt;&gt;&gt; 
&gt;&gt;&gt; Not always, at least not in my experience. :)  I have found that
&gt;&gt;&gt; while breaking changes don't happen often, they *do* happen.  Add to
&gt;&gt;&gt; this the possibility of different types of API consumers that start
&gt;&gt;&gt; off implementing your APIs the same way, but slowly (or rapidly!)
&gt;&gt;&gt; diverge over time.  In some cases new resources (and thus new URIs)
&gt;&gt;&gt; will suffice, but in other cases what we are doing is very
&gt;&gt;&gt; specifically *evolving* the resource representation to accommodate
&gt;&gt;&gt; new requirements.
&gt;&gt;&gt; 
&gt;&gt; 
&gt;&gt; Then design for graceful degradation (or progressive enhancement) using
&gt;&gt; client-side feature detection.  Just saying there's no need to swing
&gt;&gt; the conneg hammer to turn this particular screw.
&gt;&gt; 
&gt;&gt; -Eric
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt;  Project Wrangler, SOA, Information Alchemist, UX, RESTafarian, Topic Maps
&gt; --- http://shelter.nu/blog/ ----------------------------------------------
&gt; ------------------ http://www.google.com/profiles/alexander.johannesen ---

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19252<br>
Sender:Keith Hassen &lt;keith.hassen@...&gt;<br>
Post Date/Time:2013-01-09 12:48:40<br>
Subject:Re: [rest-discuss] API versioning<br>
Message:<br><br>
<pre>Thanks, the link below is interesting.  I think the rules you listed below are good ones and generally make sense.  Maybe it is *almost* always true that we can find a way to either a) make the change non-breaking or b) create a new resource.  In the rare cases where it must be done, then specifying a version in the URI might be necessary, but should be limited to very exceptional cases that I'm having a hard time devising. :)

K


On 2013-01-09, at 1:45 AM, Jørn Wildt wrote:

&gt; If you work with generic media types like plain XML, JSON and(X)HTML (and others) then there is absolutely no reason to version those through the content-type and content negotiation. I mean, when did the processing rules for XML and JSON last change? Oh, well, the rules for HTML does change - but this is not handled through the media type, but rather through a versioning mechanism inside the payload (the DOCTYPE).
&gt; 
&gt; "Unfortunately" there is a lot of domain specific media types out there - and since domains changes regularly over time, well, you start thinking that versioning must be done through the media type. And this is where things start to break down. If you avoid domain specific media types (like vnd.order+xml and so on), then you can avoid versioning through the media type.
&gt; 
&gt; But, of course, your application still evolves over time. Then what?
&gt; 
&gt; Try these guidelines (and check also Nottingham's blog http://www.mnot.net/blog/2011/10/25/web_api_versioning_smackdown):
&gt; 
&gt; - Do not expose your internal business objects directly on the wire (for instance by JSON serializing them directly). Do wrap your business objects in a (more) stable external format, such that you are free to change the underlying business objects without the public facing format changing too. Keep that transformation in sync with your internal changes.
&gt; 
&gt; - Don't make breaking changes to your public format.
&gt; 
&gt; - Add versioning information inside the payload.
&gt; 
&gt; - If you have to introduce breaking changes then create a new resource for the new version.
&gt; 
&gt; - Put links to never versions of the resource into the original resource (for instance using the Link header). Never clients can look for these links and move on to the new and improved version.
&gt; 
&gt; - Introduce new links, in addition to the old ones, where other resources are linking to your resource (if possible), using new link relation names or similar mechanism. Newer clients will know which of the links to follow - older clients will continue with the link that they have always used.
&gt; 
&gt; - URLs are not identities for your business data - they are identities for various representations of your business data. I mean, api-v1.example.com/person/1234 is obviously not the same resource as api-v2.example.com/person/1234 - but it can certainly represent exactly the same piece of business data.
&gt; 
&gt; (and, yes, this is quite the opposite of what I argued in my first post in this thread)
&gt; 
&gt; /Jørn
&gt; 
&gt; 

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19253<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-01-12 13:48:01<br>
Subject:New Version Notification for draft-hausenblas-csv-fragment-02.txt<br>
Message:<br><br>
<pre>A new version of I-D, draft-hausenblas-csv-fragment-02.txt
has been successfully submitted by Erik Wilde and posted to the
IETF repository.

Filename:	 draft-hausenblas-csv-fragment
Revision:	 02
Title:		 URI Fragment Identifiers for the text/csv Media Type
Creation date:	 2013-01-12
WG ID:		 Individual Submission
Number of pages: 11
URL: 
http://www.ietf.org/internet-drafts/draft-hausenblas-csv-fragment-02.txt
Status: 
http://datatracker.ietf.org/doc/draft-hausenblas-csv-fragment
Htmlized:        http://tools.ietf.org/html/draft-hausenblas-csv-fragment-02
Diff: 
http://www.ietf.org/rfcdiff?url2=draft-hausenblas-csv-fragment-02

Abstract:
    This memo defines URI fragment identifiers for text/csv MIME
    entities.  These fragment identifiers make it possible to refer to
    parts of a text/csv MIME entity, identified by row, column, or cell.
    Fragment identification can use single items, or ranges.

Note to Readers

    This draft should be discussed on the apps-discuss mailing list [1].
    Online access to all versions and files is available at github [2].

[1] https://www.ietf.org/mailman/listinfo/apps-discuss
[2] https://github.com/dret/I-D/tree/master/csv-fragment

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19254<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-01-14 10:09:51<br>
Subject:Fwd: New Version Notification for draft-wilde-xml-patch-00.txt<br>
Message:<br><br>
<pre>A new version of I-D, draft-wilde-xml-patch-00.txt has been successfully 
submitted by Erik Wilde and posted to the IETF repository.

Filename:	 draft-wilde-xml-patch
Revision:	 00
Title:		 A Media Type for XML Patch Operations
Creation date:	 2013-01-14
WG ID:		 Individual Submission
Number of pages: 9
URL: 
http://www.ietf.org/internet-drafts/draft-wilde-xml-patch-00.txt
Status:          http://datatracker.ietf.org/doc/draft-wilde-xml-patch
Htmlized:        http://tools.ietf.org/html/draft-wilde-xml-patch-00


Abstract:
    The XML Patch media type "application/xml-patch" defines an XML
    document structure for expressing a sequence of patch operations that
    are applied to an XML document.  The XML Patch document format's
    foundations are defined in RFC 5261, this specification defines a
    document format and a media type registration, so that XML Patch
    documents can be labeled with a media type, for example in HTTP
    conversations.

Note to Readers

    This draft should be discussed on the apps-discuss mailing list [8].
    Online access to all versions and files is available at github [9].

    [8]  https://www.ietf.org/mailman/listinfo/apps-discuss
    [9]  https://github.com/dret/I-D/tree/master/xml-patch

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19255<br>
Sender:"risseraka" &lt;risseraka@...&gt;<br>
Post Date/Time:2013-01-14 10:10:50<br>
Subject:[rest-discuss] Collections and special cases<br>
Message:<br><br>
<pre>HELO all,

Let me first say that this mail list, combined with a great amount of blog posts scattered here and there, is a gold mine!
I intend to not only be a digger in the future and be more of the precious metal, if I can.

That being said, I wonder if this goes yet again out of scope of REST as I've read multiple times here that being said about URL design, but well, better ask a possibly dumb question than staying stupid your whole life, I guess.
I've browsed quite a few threads already and used the search engine to no avail, alas.


The study case is where you have a collection of programs and you are trying to get the currently running program out of this collection.

Till now, I have come up with two solutions:

1. /programs?current
2. /programs/live

1. can be understood like applying a sort of filter on the "programs" collection using a "current" query parameter.

2. uses the /entities/{id} schema with a non numerical id, "live".

Whereas my personal preference goes for the first solution, my guts get a bit fuzzy with trying to get a single item hitting directly on the collection end-point.

In both cases a 302 Moved Temporarily is performed(?) to redirect to the live program's URI, /programs/1234 with "1234" being the current program's id.

I hope I'm not making a complete fool out of myself and the entire REST community.
Thanks in advance for your patience!

Adrien.


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19256<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-01-15 07:30:08<br>
Subject:Re: [rest-discuss] Collections and special cases<br>
Message:<br><br>
<pre>
On 14.01.2013, at 11:10, "risseraka" &lt;risseraka@...&gt; wrote:

&gt; The study case is where you have a collection of programs and you are trying to get the currently running program out of this collection.
&gt; 
&gt; Till now, I have come up with two solutions:
&gt; 
&gt; 1. /programs?current
&gt; 2. /programs/live
&gt; 
&gt; 1. can be understood like applying a sort of filter on the "programs" collection using a "current" query parameter.

Yes. You can think of query parameters to work sort of like the WHERE-condition in an SQL select statement.

&gt; 
&gt; 2. uses the /entities/{id} schema with a non numerical id, "live".

The issue with using a new URL path segment is that the path segment hierarchy in a URL *does* have a meaning - '/' is not just *any* character. So you can think of /{id} in your case to be a sub-'bucket' of your overall 'entities' space.

&gt; 
&gt; Whereas my personal preference goes for the first solution, my guts get a bit fuzzy with trying to get a single item hitting directly on the collection end-point.

Agreed - your scenario is 'indexing' into the collection not a 'sub bucket'. You could, of course, argue about this a lot - here are two things to consider:

- do you maybe have more filters that work in parallel? This makes the first solution obviously better.
- Implementation-wise the first solution is usually cleaner, because {id} will always denote an ID in your code, no special if(id == "live") needed.

&gt; 
&gt; In both cases a 302 Moved Temporarily is performed(?) to redirect to the live program's URI, /programs/1234 with "1234" being the current program's id.

Yes, makes sense.


Jan


&gt; 
&gt; I hope I'm not making a complete fool out of myself and the entire REST community.
&gt; Thanks in advance for your patience!
&gt; 
&gt; Adrien.
&gt; 
&gt; 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19257<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-01-16 10:57:02<br>
Subject:Fwd: New Version Notification for draft-wilde-xml-patch-01<br>
Message:<br><br>
<pre>hello.

the two main changes in this updated version are as follows:

- the media type now is application/xml-patch+xml, since the new media 
type suffix registry says that media types should use registered suffixes.

- http://tools.ietf.org/html/draft-wilde-xml-patch-01#appendix-B now 
contains an ABNF grammar that has been reverse-engineered from the 
XSD-based grammar in RFC 5261. this should make it easier to implement 
the spec.

thanks and cheers,

dret.


-------- Original Message --------
Subject: New Version Notification for draft-wilde-xml-patch-01.txt
Date: Wed, 16 Jan 2013 02:43:50 -0800
From: internet-drafts@...


A new version of I-D, draft-wilde-xml-patch-01.txt
has been successfully submitted by Erik Wilde and posted to the
IETF repository.

Filename:	 draft-wilde-xml-patch
Revision:	 01
Title:		 A Media Type for XML Patch Operations
Creation date:	 2013-01-16
WG ID:		 Individual Submission
Number of pages: 10
URL: 
http://www.ietf.org/internet-drafts/draft-wilde-xml-patch-01.txt
Status:          http://datatracker.ietf.org/doc/draft-wilde-xml-patch
Htmlized:        http://tools.ietf.org/html/draft-wilde-xml-patch-01
Diff:            http://www.ietf.org/rfcdiff?url2=draft-wilde-xml-patch-01

Abstract:
    The XML Patch media type "application/xml-patch+xml" defines an XML
    document structure for expressing a sequence of patch operations that
    are applied to an XML document.  The XML Patch document format's
    foundations are defined in RFC 5261, this specification defines a
    document format and a media type registration, so that XML Patch
    documents can be labeled with a media type, for example in HTTP
    conversations.

Note to Readers

    This draft should be discussed on the apps-discuss mailing list [8].
    Online access to all versions and files is available at github [9].

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19258<br>
Sender:"Dey, Santanu" &lt;dey.santanu@...&gt;<br>
Post Date/Time:2013-01-19 08:18:46<br>
Subject:API Facade Pattern Webinar<br>
Message:<br><br>
<pre>Friends,

Your comments and reviews welcome on my recent webinar effort on REST APIs.
This is the last one on the series.

API Facade Pattern: Synchronous to Asynchronous&lt;http://youtu.be/1dlKllkKg6M&gt;

Regards
Santanu
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19259<br>
Sender:"risseraka" &lt;risseraka@...&gt;<br>
Post Date/Time:2013-01-24 13:03:16<br>
Subject:Re: Collections and special cases<br>
Message:<br><br>
<pre>--- In rest-discuss@yahoogroups.com, Jan Algermissen  wrote:
&gt;
&gt; 
&gt; On 14.01.2013, at 11:10, "risseraka"  wrote:
&gt; &gt; Whereas my personal preference goes for the first solution, my guts get a bit fuzzy with trying to get a single item hitting directly on the collection end-point.
&gt; 
&gt; Agreed - your scenario is 'indexing' into the collection not a 'sub bucket'. You could, of course, argue about this a lot - here are two things to consider:
&gt; 
&gt; - do you maybe have more filters that work in parallel? This makes the first solution obviously better.

I'm not sure if you mean parallel as in "mutualy exclusive" or as in "combinative".

There is a case where a program is looked up by a timestamp with an "at" parameter.
If "current" and "at" parameters are used together, "current" will take precedence over "at" and redirect accordingly to the current program.

I have pondered on solutions like /programs?at=1359000000 and /programs?at=now but am not convinced.

&gt; - Implementation-wise the first solution is usually cleaner, because {id} will always denote an ID in your code, no special if(id == "live") needed.

Indeed, if(id == "live") is a pain whereas if(query.current) is much smoother.

&gt; &gt; 
&gt; &gt; In both cases a 302 Moved Temporarily is performed(?) to redirect to the live program's URI, /programs/1234 with "1234" being the current program's id.
&gt; 
&gt; Yes, makes sense.
&gt; 
&gt; 
&gt; Jan

Adrien.


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19260<br>
Sender:"Skills" &lt;skillsmatter@...&gt;<br>
Post Date/Time:2013-01-28 12:37:09<br>
Subject:Restful Objects - A Hypermedia API For Domain Object Models<br>
Message:<br><br>
<pre>REST architectures are becoming increasingly more common, both on the internet and within the enterprise. Behind most of these REST APIs is a domain model (some anaemic, some less so); the wiring up of that REST API to the model involves lots of boilerplate and lots of testing.

http://skillsmatter.com/podcast/design-architecture/restful-objects

#REST #ROL #SOA 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19261<br>
Sender:"unmesh_joshi" &lt;unmeshjoshi@...&gt;<br>
Post Date/Time:2013-02-08 06:03:16<br>
Subject:HMAC based authorization - Security for REST services<br>
Message:<br><br>
<pre>Hi,

For building secure RESTful services, its common practice to have digital signature (HMAC hash) in the Authorization Header, along with the secret key id. The implementation seems fairly standard where
1. Client adds Date: header to the request.
2. Client builds digital signature with url path parameters and query parameters and headers. 
3. Client puts Authorization Header as 
   Authorization: &lt;Client Secret Key ID&gt;:&lt;HMAC hash for stringtosign&gt;

On Server side.
1. Server checks existence of required header.
2. Server retrieves the private key for the secrete key id provided in the Authorization Header (Note: This can be typically done by calling a Key Management service over SSL, which is deployed in a secured network)
3. Server computes HMAC has with the same method that client has used.
4. Server matches the hash with the one provided by the client.
5. If the hash matches, server forwards the request for further processing.
6. If hashes dont match, server returns 401 UnAuthorized response to client.

It is also a standard patterns in Web Services world to use Message Interceptor Gateway (listed in http://www.coresecuritypatterns.com/patterns.htm).
This way security gateway is a separate tier between client and the actual web service endpoint.

This logic is very standard and I think this can be implemented as a Apache plugin, which can intercept the request before forwarding it to Application Server.

Is there any such standard plugin developed for Apache or any other web server?


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19262<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-02-08 10:59:08<br>
Subject:Fwd: New Version Notification for draft-wilde-xml-patch-02.txt<br>
Message:<br><br>
<pre>A new version of I-D, draft-wilde-xml-patch-02.txt
has been successfully submitted by Erik Wilde and posted to the
IETF repository.

Filename:	 draft-wilde-xml-patch
Revision:	 02
Title:		 A Media Type for XML Patch Operations
Creation date:	 2013-02-08
WG ID:		 Individual Submission
Number of pages: 13
URL: 
http://www.ietf.org/internet-drafts/draft-wilde-xml-patch-02.txt
Status:          http://datatracker.ietf.org/doc/draft-wilde-xml-patch
Htmlized:        http://tools.ietf.org/html/draft-wilde-xml-patch-02
Diff:            http://www.ietf.org/rfcdiff?url2=draft-wilde-xml-patch-02

Abstract:
    The XML Patch media type "application/xml-patch+xml" defines an XML
    document structure for expressing a sequence of patch operations that
    are applied to an XML document.  The XML Patch document format's
    foundations are defined in RFC 5261, this specification defines a
    document format and a media type registration, so that XML Patch
    documents can be labeled with a media type, for example in HTTP
    conversations.

Note to Readers

    This draft should be discussed on the apps-discuss mailing list [13].
    Online access to all versions and files is available at github [14].

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19263<br>
Sender:Erlend Hamnaberg &lt;ngarthl@...&gt;<br>
Post Date/Time:2013-02-08 11:36:48<br>
Subject:Re: [rest-discuss] HMAC based authorization - Security for REST services<br>
Message:<br><br>
<pre>Check out varnish (no affiliation), vmod-digest.

https://github.com/varnish/libvmod-digest

--
Erlend


On Fri, Feb 8, 2013 at 7:03 AM, unmesh_joshi &lt;unmeshjoshi@...&gt; wrote:

&gt; **
&gt;
&gt;
&gt; Hi,
&gt;
&gt; For building secure RESTful services, its common practice to have digital
&gt; signature (HMAC hash) in the Authorization Header, along with the secret
&gt; key id. The implementation seems fairly standard where
&gt; 1. Client adds Date: header to the request.
&gt; 2. Client builds digital signature with url path parameters and query
&gt; parameters and headers.
&gt; 3. Client puts Authorization Header as
&gt; Authorization: :
&gt;
&gt; On Server side.
&gt; 1. Server checks existence of required header.
&gt; 2. Server retrieves the private key for the secrete key id provided in the
&gt; Authorization Header (Note: This can be typically done by calling a Key
&gt; Management service over SSL, which is deployed in a secured network)
&gt; 3. Server computes HMAC has with the same method that client has used.
&gt; 4. Server matches the hash with the one provided by the client.
&gt; 5. If the hash matches, server forwards the request for further processing.
&gt; 6. If hashes dont match, server returns 401 UnAuthorized response to
&gt; client.
&gt;
&gt; It is also a standard patterns in Web Services world to use Message
&gt; Interceptor Gateway (listed in
&gt; http://www.coresecuritypatterns.com/patterns.htm).
&gt; This way security gateway is a separate tier between client and the actual
&gt; web service endpoint.
&gt;
&gt; This logic is very standard and I think this can be implemented as a
&gt; Apache plugin, which can intercept the request before forwarding it to
&gt; Application Server.
&gt;
&gt; Is there any such standard plugin developed for Apache or any other web
&gt; server?
&gt;
&gt;  
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19264<br>
Sender:Unmesh Joshi &lt;unmeshjoshi@...&gt;<br>
Post Date/Time:2013-02-08 23:22:12<br>
Subject:Re: [rest-discuss] HMAC based authorization - Security for REST services<br>
Message:<br><br>
<pre>Thats useful is we are using varnish. But nothing for Apache. One
reasonable way seems to be using something like noodle or j2ep and add hmac
authorization code there. This also seems to be a standard pattern 'Message
Interceptor Gateway' in web services security world.


On Fri, Feb 8, 2013 at 5:06 PM, Erlend Hamnaberg &lt;ngarthl@...&gt; wrote:

&gt; Check out varnish (no affiliation), vmod-digest.
&gt;
&gt; https://github.com/varnish/libvmod-digest
&gt;
&gt; --
&gt; Erlend
&gt;
&gt;
&gt; On Fri, Feb 8, 2013 at 7:03 AM, unmesh_joshi &lt;unmeshjoshi@...&gt;wrote:
&gt;
&gt;&gt; **
&gt;&gt;
&gt;&gt;
&gt;&gt; Hi,
&gt;&gt;
&gt;&gt; For building secure RESTful services, its common practice to have digital
&gt;&gt; signature (HMAC hash) in the Authorization Header, along with the secret
&gt;&gt; key id. The implementation seems fairly standard where
&gt;&gt; 1. Client adds Date: header to the request.
&gt;&gt; 2. Client builds digital signature with url path parameters and query
&gt;&gt; parameters and headers.
&gt;&gt; 3. Client puts Authorization Header as
&gt;&gt; Authorization: :
&gt;&gt;
&gt;&gt; On Server side.
&gt;&gt; 1. Server checks existence of required header.
&gt;&gt; 2. Server retrieves the private key for the secrete key id provided in
&gt;&gt; the Authorization Header (Note: This can be typically done by calling a Key
&gt;&gt; Management service over SSL, which is deployed in a secured network)
&gt;&gt; 3. Server computes HMAC has with the same method that client has used.
&gt;&gt; 4. Server matches the hash with the one provided by the client.
&gt;&gt; 5. If the hash matches, server forwards the request for further
&gt;&gt; processing.
&gt;&gt; 6. If hashes dont match, server returns 401 UnAuthorized response to
&gt;&gt; client.
&gt;&gt;
&gt;&gt; It is also a standard patterns in Web Services world to use Message
&gt;&gt; Interceptor Gateway (listed in
&gt;&gt; http://www.coresecuritypatterns.com/patterns.htm).
&gt;&gt; This way security gateway is a separate tier between client and the
&gt;&gt; actual web service endpoint.
&gt;&gt;
&gt;&gt; This logic is very standard and I think this can be implemented as a
&gt;&gt; Apache plugin, which can intercept the request before forwarding it to
&gt;&gt; Application Server.
&gt;&gt;
&gt;&gt; Is there any such standard plugin developed for Apache or any other web
&gt;&gt; server?
&gt;&gt;
&gt;&gt;  
&gt;&gt;
&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19265<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-02-11 05:05:46<br>
Subject:Generic vs specific patch formats<br>
Message:<br><br>
<pre>Hi,

trying to wrap my head around the implications of using generic patch media types (e.g. json-patch[1]) vs. specific ones, e.g. application/vnd.bigco.customer-patch.

Generic JSON patch looks sort of fine, but I can make myself stop feeling it's tunneling out of band knowledge.

When the client constructs the patch document, it makes assumptions about the (abstract) structure of the target resource that is essentially out of band knowledge.

You might argue, that the client will have learnt the structure from a previous GET...

GET /customers/42
Accept: application/vnd.bigco.customer+json

200 Ok
Content-Type: application/vnd.bigco.customer+json
ETag: "..."

... and that understanding the *specific* media type (and having an ETag) acts as a counter measure for the patch format being generic.

Alas ... I am not fully convinced.

Thoughts?

Jan


[1] http://tools.ietf.org/html/draft-ietf-appsawg-json-patch
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19266<br>
Sender:Mike Kelly &lt;mikekelly321@...&gt;<br>
Post Date/Time:2013-02-11 07:44:03<br>
Subject:Re: [rest-discuss] Generic vs specific patch formats<br>
Message:<br><br>
<pre>On 11 Feb 2013 05:05, "Jan Algermissen" &lt;jan.algermissen@...&gt; wrote:
&gt;
&gt;
&gt;
&gt; Hi,
&gt;
&gt; trying to wrap my head around the implications of using generic patch
media types (e.g. json-patch[1]) vs. specific ones, e.g.
application/vnd.bigco.customer-patch.
&gt;
&gt; Generic JSON patch looks sort of fine, but I can make myself stop feeling
it's tunneling out of band knowledge.
&gt;
&gt; When the client constructs the patch document, it makes assumptions about
the (abstract) structure of the target resource that is essentially out of
band knowledge.
&gt;
&gt; You might argue, that the client will have learnt the structure from a
previous GET...
&gt;
&gt; GET /customers/42
&gt; Accept: application/vnd.bigco.customer+json
&gt;
&gt; 200 Ok
&gt; Content-Type: application/vnd.bigco.customer+json
&gt; ETag: "..."
&gt;
&gt; ... and that understanding the *specific* media type (and having an ETag)
acts as a counter measure for the patch format being generic.
&gt;
&gt; Alas ... I am not fully convinced.
&gt;
&gt; Thoughts?
&gt;

Hi Jan,

Assuming hypermedia is driving your application, then the client will have
the necessary context (via some preceding link relation) telling it what
and how it can traverse to the resource and patch its state.

That link was contained within some response from the application, so the
control is in band. The semantics are in band provided there is some
uniform way of determining them from the link relation's value. The common
way to achieve this is to use a URL for the rel value and expose a
description document there.

This works for any kind of interaction (other than hitting entry points)
and is why there is, usually, no need for an API to use any custom media
types at all.

Cheers,
M
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19267<br>
Sender:Mike Kelly &lt;mikekelly321@...&gt;<br>
Post Date/Time:2013-02-12 07:53:29<br>
Subject:New Internet-Draft: JSON Hypertext Application Language<br>
Message:<br><br>
<pre>Hello all,

fyi, I have updated the following internet draft:

http://www.ietf.org/id/draft-kelly-json-hal-04.txt

All thoughts, comments, suggestions, etc welcome

Cheers,
Mike

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19268<br>
Sender:Mike Kelly &lt;mikekelly321@...&gt;<br>
Post Date/Time:2013-02-12 21:52:03<br>
Subject:Re: New Internet-Draft: JSON Hypertext Application Language<br>
Message:<br><br>
<pre>Here's a slightly more useful link than the previous one!

http://tools.ietf.org/html/draft-kelly-json-hal-05

On Tue, Feb 12, 2013 at 7:53 AM, Mike Kelly &lt;mikekelly321@...&gt; wrote:
&gt; Hello all,
&gt;
&gt; fyi, I have updated the following internet draft:
&gt;
&gt; http://www.ietf.org/id/draft-kelly-json-hal-04.txt
&gt;
&gt; All thoughts, comments, suggestions, etc welcome
&gt;
&gt; Cheers,
&gt; Mike



--
Mike

http://twitter.com/mikekelly85
http://github.com/mikekelly
http://linkedin.com/in/mikekelly123

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19269<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-02-13 14:47:26<br>
Subject:conneg considered harmful<br>
Message:<br><br>
<pre>Catching up on http-wg, I came across this Roy quote:

"Regarding proactive negotiation in HTTP/2, I'll note that Waka
strips all negotiation fields.  I find the entire feature revolting,
from every architectural perspective, and would take the opportunity
of 2.x to remove it entirely."

http://lists.w3.org/Archives/Public/ietf-http-wg/2013JanMar/0286.html

I'm not seeing how a resource/representation architecture gets around
needing a feature like conneg, was hoping maybe Roy could enlighten us?

-Eric



</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19270<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-02-13 16:04:04<br>
Subject:Re: [rest-discuss] conneg considered harmful<br>
Message:<br><br>
<pre>Mark Baker wrote:
&gt;
&gt; There are multiple forms of conneg and I think Roy has been pretty
&gt; clear about his disdain for server driven. Larry Masinter even
&gt; apologized in recent years for pushing for it back in the day.
&gt; 

Would be nice to have some links, such discussions have eluded me.  My
apologies for overreacting, I took Roy's meaning as an argument against
the late binding of representation to resource altogether, as I lacked
such context.

&gt;
&gt; Besides, client driven uses hypermedia so is way more RESTful.
&gt;

Adding a round-trip, unless there's some way to make user preferences
"sticky" for subsequent requests (like negotiation headers). Leading to
sessions, at least as far as HTTP 1.1's concerned, so "more RESTful" is
debatable as to real-world implementation.  But, I see where other
protocols could do things differently, avoiding such results.

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19271<br>
Sender:Craig McClanahan &lt;craigmcc@...&gt;<br>
Post Date/Time:2013-02-13 17:35:53<br>
Subject:Re: [rest-discuss] Re: New Internet-Draft: JSON Hypertext Application Language<br>
Message:<br><br>
<pre>I've written several APIs lately that contain a similar concept to the
"links" abstraction with a useful extension -- we also include an "allowed"
field that contains an array of the HTTP verbs that this user is allowed to
perform against the URL specified by "href".  Essentially, we're saving the
client the need to do an OPTIONS call to determine what verbs are supported
for that user.

A use case for this is when displaying content that may or may not be
editable (or can be deleted) by the requesting user.  If so, the "allowed"
field would say '[ "GET", "PUT", "DELETE" ]'.  If not, it would just say '[
"GET" ]'.  A client UI can use this information to decide whether or not to
display enabled "Edit" or "Delete" buttons.

Craig McClanahan

On Tue, Feb 12, 2013 at 1:52 PM, Mike Kelly &lt;mikekelly321@...&gt; wrote:

&gt; **
&gt;
&gt;
&gt; Here's a slightly more useful link than the previous one!
&gt;
&gt; http://tools.ietf.org/html/draft-kelly-json-hal-05
&gt;
&gt; On Tue, Feb 12, 2013 at 7:53 AM, Mike Kelly mikekelly321@...&gt; wrote:
&gt; &gt; Hello all,
&gt; &gt;
&gt; &gt; fyi, I have updated the following internet draft:
&gt; &gt;
&gt; &gt; http://www.ietf.org/id/draft-kelly-json-hal-04.txt
&gt; &gt;
&gt; &gt; All thoughts, comments, suggestions, etc welcome
&gt; &gt;
&gt; &gt; Cheers,
&gt; &gt; Mike
&gt;
&gt; --
&gt; Mike
&gt;
&gt; http://twitter.com/mikekelly85
&gt; http://github.com/mikekelly
&gt; http://linkedin.com/in/mikekelly123
&gt;  
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19272<br>
Sender:Mike Kelly &lt;mikekelly321@...&gt;<br>
Post Date/Time:2013-02-13 17:59:38<br>
Subject:Re: [rest-discuss] Re: New Internet-Draft: JSON Hypertext Application Language<br>
Message:<br><br>
<pre>Hi Craig,

Thanks for your response.

The problem with that approach is you have to force your access model
around the HTTP verbs. So if you have different transitions possible for a
PUT or POST request on a given resource, and each have different access
rules, then you're out of options (no pun intended).

Another approach is to create permission resources that represent the roles
the requesting user has for particular activities. The roles can be more
descriptive, flexible, and intuitive to clients that way.

Are there some compelling reasons to work around HTTP that i'm missing.

Along the same lines, I'm a bit concerned about absorbing HTTP stuff into
the media type. Which I think this technique is guilty of. A while back I
considered adding etag info for embedded resources but canned it because of
the same concern.. Out of interest how would you feel about that etag
approach?

Cheers,
M

On 13 Feb 2013 17:35, "Craig McClanahan" &lt;craigmcc@...&gt; wrote:
&gt;
&gt; I've written several APIs lately that contain a similar concept to the
"links" abstraction with a useful extension -- we also include an "allowed"
field that contains an array of the HTTP verbs that this user is allowed to
perform against the URL specified by "href".  Essentially, we're saving the
client the need to do an OPTIONS call to determine what verbs are supported
for that user.
&gt;
&gt; A use case for this is when displaying content that may or may not be
editable (or can be deleted) by the requesting user.  If so, the "allowed"
field would say '[ "GET", "PUT", "DELETE" ]'.  If not, it would just say '[
"GET" ]'.  A client UI can use this information to decide whether or not to
display enabled "Edit" or "Delete" buttons.
&gt;
&gt; Craig McClanahan
&gt;
&gt; On Tue, Feb 12, 2013 at 1:52 PM, Mike Kelly &lt;mikekelly321@gmail.com&gt;
wrote:
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Here's a slightly more useful link than the previous one!
&gt;&gt;
&gt;&gt; http://tools.ietf.org/html/draft-kelly-json-hal-05
&gt;&gt;
&gt;&gt; On Tue, Feb 12, 2013 at 7:53 AM, Mike Kelly mikekelly321@...&gt;
wrote:
&gt;&gt; &gt; Hello all,
&gt;&gt; &gt;
&gt;&gt; &gt; fyi, I have updated the following internet draft:
&gt;&gt; &gt;
&gt;&gt; &gt; http://www.ietf.org/id/draft-kelly-json-hal-04.txt
&gt;&gt; &gt;
&gt;&gt; &gt; All thoughts, comments, suggestions, etc welcome
&gt;&gt; &gt;
&gt;&gt; &gt; Cheers,
&gt;&gt; &gt; Mike
&gt;&gt;
&gt;&gt; --
&gt;&gt; Mike
&gt;&gt;
&gt;&gt; http://twitter.com/mikekelly85
&gt;&gt; http://github.com/mikekelly
&gt;&gt; http://linkedin.com/in/mikekelly123
&gt;&gt;
&gt;&gt; 
&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19273<br>
Sender:Craig McClanahan &lt;craigmcc@...&gt;<br>
Post Date/Time:2013-02-13 21:42:20<br>
Subject:Re: [rest-discuss] Re: New Internet-Draft: JSON Hypertext Application Language<br>
Message:<br><br>
<pre>On Wed, Feb 13, 2013 at 9:59 AM, Mike Kelly &lt;mikekelly321@...&gt; wrote:

&gt; Hi Craig,
&gt;
&gt; Thanks for your response.
&gt;
&gt; The problem with that approach is you have to force your access model
&gt; around the HTTP verbs. So if you have different transitions possible for a
&gt; PUT or POST request on a given resource, and each have different access
&gt; rules, then you're out of options (no pun intended).
&gt;
Well, my task was to define public HTTP APIs for our resources, so binding
to HTTP semantics didn't really bother me :-).


&gt; Another approach is to create permission resources that represent the
&gt; roles the requesting user has for particular activities. The roles can be
&gt; more descriptive, flexible, and intuitive to clients that way.
&gt;
&gt; Are there some compelling reasons to work around HTTP that i'm missing.
&gt;
&gt; Along the same lines, I'm a bit concerned about absorbing HTTP stuff into
&gt; the media type. Which I think this technique is guilty of. A while back I
&gt; considered adding etag info for embedded resources but canned it because of
&gt; the same concern.. Out of interest how would you feel about that etag
&gt; approach?
&gt;
I think there are (at least) two things to consider:

* Syntax/semantics for defining permissions

* In band (that is, part of the resource representation)
  or out of band (in an HTTP case, typically transmitted
  via headers).

For the 'permissions' concern, a trivial extension to what I suggested
would be to allow arbitrary values for the "allowed" field, which could be
role names with semantics that are agreed upon between client and server.
 For a client that *is* using HTTP, that would then require some
understanding of how to map roles to HTTP verbs.  For our use case, we use
the verbs consistently and conventionally across all of our endpoints (POST
to a collection URI == create, PUT to an individual endpoint == update, and
so on), so we're relying on the client to understand that convention -- but
it seems easier to understand, at least for simple CRUD type operations.

On the topic of in band versus out of band, the latter would probably be
more "pure" -- but in band is much easier for client developers to deal
with.  They have to access the JSON or XML or whatever content of the
response body anyway.  Requiring them to deal with HTTP headers or whatever
as well is extra work.

I know of at least one effort[1] to formalize out of band link
relationships with better semantic information ("rel") -- but this still
doesn't address the issue of "what can this particular client do with this
URI"?

Craig

[1] http://tools.ietf.org/html/draft-snell-link-method-01


&gt;  Cheers,
&gt; M
&gt;
&gt; On 13 Feb 2013 17:35, "Craig McClanahan" &lt;craigmcc@...&gt; wrote:
&gt; &gt;
&gt; &gt; I've written several APIs lately that contain a similar concept to the
&gt; "links" abstraction with a useful extension -- we also include an "allowed"
&gt; field that contains an array of the HTTP verbs that this user is allowed to
&gt; perform against the URL specified by "href".  Essentially, we're saving the
&gt; client the need to do an OPTIONS call to determine what verbs are supported
&gt; for that user.
&gt; &gt;
&gt; &gt; A use case for this is when displaying content that may or may not be
&gt; editable (or can be deleted) by the requesting user.  If so, the "allowed"
&gt; field would say '[ "GET", "PUT", "DELETE" ]'.  If not, it would just say '[
&gt; "GET" ]'.  A client UI can use this information to decide whether or not to
&gt; display enabled "Edit" or "Delete" buttons.
&gt; &gt;
&gt; &gt; Craig McClanahan
&gt; &gt;
&gt; &gt; On Tue, Feb 12, 2013 at 1:52 PM, Mike Kelly &lt;mikekelly321@...&gt;
&gt; wrote:
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; Here's a slightly more useful link than the previous one!
&gt; &gt;&gt;
&gt; &gt;&gt; http://tools.ietf.org/html/draft-kelly-json-hal-05
&gt; &gt;&gt;
&gt; &gt;&gt; On Tue, Feb 12, 2013 at 7:53 AM, Mike Kelly mikekelly321@...&gt;
&gt; wrote:
&gt; &gt;&gt; &gt; Hello all,
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; fyi, I have updated the following internet draft:
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; http://www.ietf.org/id/draft-kelly-json-hal-04.txt
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; All thoughts, comments, suggestions, etc welcome
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; Cheers,
&gt; &gt;&gt; &gt; Mike
&gt; &gt;&gt;
&gt; &gt;&gt; --
&gt; &gt;&gt; Mike
&gt; &gt;&gt;
&gt; &gt;&gt; http://twitter.com/mikekelly85
&gt; &gt;&gt; http://github.com/mikekelly
&gt; &gt;&gt; http://linkedin.com/in/mikekelly123
&gt; &gt;&gt;
&gt; &gt;&gt; 
&gt; &gt;
&gt; &gt;
&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19274<br>
Sender:Peter Williams &lt;pezra@...&gt;<br>
Post Date/Time:2013-02-15 20:21:01<br>
Subject:Re: [rest-discuss] conneg considered harmful<br>
Message:<br><br>
<pre>Eric,

That is an interesting quote. I have occasionally heard
unsubstantiated claims regarding the badness of accept header based
content negotiation. It is interesting that Roy perceives it as
"revolting".

Personally, i rather like it but perhaps i am missing something
important. I'd definitely like to hear someone (or multiple someones)
actually articulate what they perceive as problematic about it. So far
i don't recall ever reading a discussion of the downsides that got
beyond "i don't like it" or "it is hard for me to implement" (neither
of which resonate with me).

On Wed, Feb 13, 2013 at 9:04 AM, Eric J. Bowman &lt;eric@...&gt; wrote:
&gt; Mark Baker wrote:
&gt;&gt;
&gt;&gt; Besides, client driven uses hypermedia so is way more RESTful.

Mark, can you explain a bit more why you think this? It is not clear
to me why avoiding this particular part of http's uniform interface
would make a client more RESTful.

Peter
barelyenough.org

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19275<br>
Sender:Alan Dean &lt;alan.dean@...&gt;<br>
Post Date/Time:2013-02-15 22:31:21<br>
Subject:Re: [rest-discuss] conneg considered harmful<br>
Message:<br><br>
<pre>Perhaps it is worth referencing some other other Fielding quotes on the
subject:

https://delicious.com/alan.dean/Roy.Fielding+conneg

Regards,
Alan Dean


On Fri, Feb 15, 2013 at 8:21 PM, Peter Williams &lt;pezra@barelyenough.org&gt;wrote:

&gt; **
&gt;
&gt;
&gt; Eric,
&gt;
&gt; That is an interesting quote. I have occasionally heard
&gt; unsubstantiated claims regarding the badness of accept header based
&gt; content negotiation. It is interesting that Roy perceives it as
&gt; "revolting".
&gt;
&gt; Personally, i rather like it but perhaps i am missing something
&gt; important. I'd definitely like to hear someone (or multiple someones)
&gt; actually articulate what they perceive as problematic about it. So far
&gt; i don't recall ever reading a discussion of the downsides that got
&gt; beyond "i don't like it" or "it is hard for me to implement" (neither
&gt; of which resonate with me).
&gt;
&gt;
&gt; On Wed, Feb 13, 2013 at 9:04 AM, Eric J. Bowman eric@...&gt;
&gt; wrote:
&gt; &gt; Mark Baker wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; Besides, client driven uses hypermedia so is way more RESTful.
&gt;
&gt; Mark, can you explain a bit more why you think this? It is not clear
&gt; to me why avoiding this particular part of http's uniform interface
&gt; would make a client more RESTful.
&gt;
&gt; Peter
&gt; barelyenough.org
&gt;
&gt;  
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19276<br>
Sender:Peter Williams &lt;pezra@...&gt;<br>
Post Date/Time:2013-02-16 06:01:54<br>
Subject:Re: [rest-discuss] conneg considered harmful<br>
Message:<br><br>
<pre>Most of those don't talk about why using content negotiation is bad in
general.  Instead they talk about how truly different resources should have
their own uris even if they are variants of one another (eg articles about
the same subject written in different human languages). That seems very
reasonable.  However, those arguments don't apply to situations where
multiple, truly mechanically translatable, representations of a single
resource exist.

One of those mention that conneg has a negative effect on caching. Is being
harder to cache the only ill effect of sever driven conneg?

Peter
Barelyenough.org
On Feb 15, 2013 3:31 PM, "Alan Dean" &lt;alan.dean@...&gt; wrote:

&gt; Perhaps it is worth referencing some other other Fielding quotes on the
&gt; subject:
&gt;
&gt; https://delicious.com/alan.dean/Roy.Fielding+conneg
&gt;
&gt; Regards,
&gt; Alan Dean
&gt;
&gt;
&gt; On Fri, Feb 15, 2013 at 8:21 PM, Peter Williams &lt;pezra@...&gt;wrote:
&gt;
&gt;&gt; **
&gt;&gt;
&gt;&gt;
&gt;&gt; Eric,
&gt;&gt;
&gt;&gt; That is an interesting quote. I have occasionally heard
&gt;&gt; unsubstantiated claims regarding the badness of accept header based
&gt;&gt; content negotiation. It is interesting that Roy perceives it as
&gt;&gt; "revolting".
&gt;&gt;
&gt;&gt; Personally, i rather like it but perhaps i am missing something
&gt;&gt; important. I'd definitely like to hear someone (or multiple someones)
&gt;&gt; actually articulate what they perceive as problematic about it. So far
&gt;&gt; i don't recall ever reading a discussion of the downsides that got
&gt;&gt; beyond "i don't like it" or "it is hard for me to implement" (neither
&gt;&gt; of which resonate with me).
&gt;&gt;
&gt;&gt;
&gt;&gt; On Wed, Feb 13, 2013 at 9:04 AM, Eric J. Bowman eric@...&gt;
&gt;&gt; wrote:
&gt;&gt; &gt; Mark Baker wrote:
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; Besides, client driven uses hypermedia so is way more RESTful.
&gt;&gt;
&gt;&gt; Mark, can you explain a bit more why you think this? It is not clear
&gt;&gt; to me why avoiding this particular part of http's uniform interface
&gt;&gt; would make a client more RESTful.
&gt;&gt;
&gt;&gt; Peter
&gt;&gt; barelyenough.org
&gt;&gt;
&gt;&gt;  
&gt;&gt;
&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19277<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-02-16 06:53:17<br>
Subject:Re: [rest-discuss] conneg considered harmful<br>
Message:<br><br>
<pre>On Feb 16, 2013, at 1:01 AM, Peter Williams &lt;pezra@...&gt; wrote:
&gt; Most of those don't talk about why using content negotiation is bad in general.  Instead they talk about how truly different resources should have their own uris even if they are variants of one another (eg articles about the same subject written in different human languages). That seems very reasonable.  However, those arguments don't apply to situations where multiple, truly mechanically translatable, representations of a single resource exist.
&gt; One of those mention that conneg has a negative effect on caching. Is being harder to cache the only ill effect of sever driven conneg?
&gt; 
Here are just some additional references about content negotiation:

http://trac.tools.ietf.org/wg/httpbis/trac/ticket/81
http://trac.tools.ietf.org/wg/httpbis/trac/changeset/745
http://tools.ietf.org/id/draft-masinter-mime-web-info-00.html#anchor6
http://lists.w3.org/Archives/Public/www-tag/2009Feb/0074.html

There are numerous references that I found while searching to conneg being a "bad idea but okay in some contexts" but AFAICF no description of use-cases for which some say it does make sense.  

-Mike



On Feb 16, 2013, at 1:01 AM, Peter Williams &lt;pezra@...&gt; wrote:

&gt; 
&gt; Most of those don't talk about why using content negotiation is bad in general.  Instead they talk about how truly different resources should have their own uris even if they are variants of one another (eg articles about the same subject written in different human languages). That seems very reasonable.  However, those arguments don't apply to situations where multiple, truly mechanically translatable, representations of a single resource exist.
&gt; 
&gt; One of those mention that conneg has a negative effect on caching. Is being harder to cache the only ill effect of sever driven conneg?
&gt; 
&gt; Peter
&gt; Barelyenough.org
&gt; 
&gt; On Feb 15, 2013 3:31 PM, "Alan Dean" &lt;alan.dean@gmail.com&gt; wrote:
&gt; Perhaps it is worth referencing some other other Fielding quotes on the subject:
&gt; 
&gt; https://delicious.com/alan.dean/Roy.Fielding+conneg
&gt; 
&gt; Regards,
&gt; Alan Dean
&gt; 
&gt; 
&gt; On Fri, Feb 15, 2013 at 8:21 PM, Peter Williams &lt;pezra@...&gt; wrote:
&gt;  
&gt; Eric,
&gt; 
&gt; That is an interesting quote. I have occasionally heard
&gt; unsubstantiated claims regarding the badness of accept header based
&gt; content negotiation. It is interesting that Roy perceives it as
&gt; "revolting".
&gt; 
&gt; Personally, i rather like it but perhaps i am missing something
&gt; important. I'd definitely like to hear someone (or multiple someones)
&gt; actually articulate what they perceive as problematic about it. So far
&gt; i don't recall ever reading a discussion of the downsides that got
&gt; beyond "i don't like it" or "it is hard for me to implement" (neither
&gt; of which resonate with me).
&gt; 
&gt; 
&gt; 
&gt; On Wed, Feb 13, 2013 at 9:04 AM, Eric J. Bowman eric@...&gt; wrote:
&gt; &gt; Mark Baker wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; Besides, client driven uses hypermedia so is way more RESTful.
&gt; 
&gt; Mark, can you explain a bit more why you think this? It is not clear
&gt; to me why avoiding this particular part of http's uniform interface
&gt; would make a client more RESTful.
&gt; 
&gt; Peter
&gt; barelyenough.org
&gt; 
&gt; 
&gt; 
&gt; 

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19278<br>
Sender:Alan Dean &lt;alan.dean@...&gt;<br>
Post Date/Time:2013-02-16 10:01:21<br>
Subject:Re: [rest-discuss] conneg considered harmful<br>
Message:<br><br>
<pre>To be clear what Roy actually said was "In general, I avoid content
negotiation *without redirects* like the plague because of its effect on
caching." *(my emphasis)*

Regards,
Alan Dean


On Sat, Feb 16, 2013 at 6:01 AM, Peter Williams &lt;pezra@...&gt;wrote:

&gt; Most of those don't talk about why using content negotiation is bad in
&gt; general.  Instead they talk about how truly different resources should have
&gt; their own uris even if they are variants of one another (eg articles about
&gt; the same subject written in different human languages). That seems very
&gt; reasonable.  However, those arguments don't apply to situations where
&gt; multiple, truly mechanically translatable, representations of a single
&gt; resource exist.
&gt;
&gt; One of those mention that conneg has a negative effect on caching. Is
&gt; being harder to cache the only ill effect of sever driven conneg?
&gt;
&gt; Peter
&gt; Barelyenough.org
&gt; On Feb 15, 2013 3:31 PM, "Alan Dean" &lt;alan.dean@...&gt; wrote:
&gt;
&gt;&gt; Perhaps it is worth referencing some other other Fielding quotes on the
&gt;&gt; subject:
&gt;&gt;
&gt;&gt; https://delicious.com/alan.dean/Roy.Fielding+conneg
&gt;&gt;
&gt;&gt; Regards,
&gt;&gt; Alan Dean
&gt;&gt;
&gt;&gt;
&gt;&gt; On Fri, Feb 15, 2013 at 8:21 PM, Peter Williams &lt;pezra@...&gt;wrote:
&gt;&gt;
&gt;&gt;&gt; **
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Eric,
&gt;&gt;&gt;
&gt;&gt;&gt; That is an interesting quote. I have occasionally heard
&gt;&gt;&gt; unsubstantiated claims regarding the badness of accept header based
&gt;&gt;&gt; content negotiation. It is interesting that Roy perceives it as
&gt;&gt;&gt; "revolting".
&gt;&gt;&gt;
&gt;&gt;&gt; Personally, i rather like it but perhaps i am missing something
&gt;&gt;&gt; important. I'd definitely like to hear someone (or multiple someones)
&gt;&gt;&gt; actually articulate what they perceive as problematic about it. So far
&gt;&gt;&gt; i don't recall ever reading a discussion of the downsides that got
&gt;&gt;&gt; beyond "i don't like it" or "it is hard for me to implement" (neither
&gt;&gt;&gt; of which resonate with me).
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Wed, Feb 13, 2013 at 9:04 AM, Eric J. Bowman eric@bisonsystems.net&gt;
&gt;&gt;&gt; wrote:
&gt;&gt;&gt; &gt; Mark Baker wrote:
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; Besides, client driven uses hypermedia so is way more RESTful.
&gt;&gt;&gt;
&gt;&gt;&gt; Mark, can you explain a bit more why you think this? It is not clear
&gt;&gt;&gt; to me why avoiding this particular part of http's uniform interface
&gt;&gt;&gt; would make a client more RESTful.
&gt;&gt;&gt;
&gt;&gt;&gt; Peter
&gt;&gt;&gt; barelyenough.org
&gt;&gt;&gt;
&gt;&gt;&gt;  
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19280<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-02-20 14:08:55<br>
Subject:Fwd: New Version Notification for draft-wilde-xml-patch-03.txt<br>
Message:<br><br>
<pre>hello.

draft-wilde-xml-patch is ready for last call by now, apart from 
questions about how to best deal with dependencies with an underlying 
RFC (5261) and errata for it, which i will address in a separate email.

since i believe this draft is ready for publication, and this is an 
independent submission, if i recall correctly the next step is to find a 
sponsor for this draft. i'd be grateful if somebody would be willing to 
take on this role.

thanks and cheers,

dret.


-------- Original Message --------
Subject: New Version Notification for draft-wilde-xml-patch-03.txt
Date: Wed, 20 Feb 2013 05:42:57 -0800
From: internet-drafts@...


A new version of I-D, draft-wilde-xml-patch-03.txt
has been successfully submitted by Erik Wilde and posted to the
IETF repository.

Filename:	 draft-wilde-xml-patch
Revision:	 03
Title:		 A Media Type for XML Patch Operations
Creation date:	 2013-02-20
Group:		 Individual Submission
Number of pages: 14
URL: 
http://www.ietf.org/internet-drafts/draft-wilde-xml-patch-03.txt
Status:          http://datatracker.ietf.org/doc/draft-wilde-xml-patch
Htmlized:        http://tools.ietf.org/html/draft-wilde-xml-patch-03
Diff:            http://www.ietf.org/rfcdiff?url2=draft-wilde-xml-patch-03

Abstract:
    The XML Patch media type "application/xml-patch+xml" defines an XML
    document structure for expressing a sequence of patch operations that
    are applied to an XML document.  The XML Patch document format's
    foundations are defined in RFC 5261, this specification defines a
    document format and a media type registration, so that XML Patch
    documents can be labeled with a media type, for example in HTTP
    conversations.

Note to Readers

    This draft should be discussed on the apps-discuss mailing list [14].
    Online access to all versions and files is available on github [15].

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19281<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-02-21 14:59:00<br>
Subject:Re: [apps-discuss] process and editing questions: RFC errata<br>
Message:<br><br>
<pre>hello tom.

thanks a lot for your response! it was very useful to get a menu of 
options how to proceed.

On 2013-02-21 12:04 , t.petch wrote:
&gt;&gt; - how to best sync draft development, and the submitted errata. there
&gt;&gt; seems to be no way to predict when and how errata are processed, in
&gt;&gt; particular for RFC 5261 because the author seems to be unreachable.
&gt;
&gt; Indeed!  Bear in mind that the text of an RFC is available for further
&gt; processing within the IETF so while it is desirable that the original
&gt; author is involved in any updates thereto, that is not a requirement
&gt; thereof so if you cannot get any response from them, then submitting an
&gt; RFC5261-bis yourself is quite in order; but quite a lot of work.
&gt;
&gt; A simpler approach is to include the relevant changes in
&gt; draft-wilde-xml-patch
&gt; and state that this is an update to the relevant sections of  RFC5261.
&gt; These should give more context than the errata do but need not be much
&gt; longer.
&gt;
&gt; Or you can include sections that clarify the issues you have identified
&gt; in RFC5261 and state in your I-D that your I-D is based on this
&gt; interpretation ie you are not updating RFC5261 for the world at large
&gt; but are modifiying the content thereof for the purposes of your I-D.
&gt;
&gt; Or you can make normative references to errata by URL once they are
&gt; approved.  I think this the most fraught approach and so the least
&gt; desirable.

after thinking about these options for a while, i decided to go with the 
second option. http://tools.ietf.org/html/draft-wilde-xml-patch-04 is 
the updated draft and now officially updates RFC 5261. 
http://tools.ietf.org/html/draft-wilde-xml-patch-04#appendix-A lists all 
the changes to that RFC, and i have based this appendix mostly on the 
errata i had filed before. this approach seems to be much less work than 
republishing RFC 5261, and since the changes are rather small, the 
updates aren't that hard to read and apply, when you have to read them 
in addition to RFC 5261.

thanks again and kind regards,

dret.

-- 
erik wilde | mailto:dret@...  -  tel:+1-510-2061079 |
            | UC Berkeley  -  School of Information (ISchool) |
            | http://dret.net/netdret http://twitter.com/dret |

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19282<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-02-21 16:35:32<br>
Subject:Fwd: New Version Notification for draft-wilde-xml-patch-04.txt<br>
Message:<br><br>
<pre>hello.

this version is almost identical with the previous one, but instead of 
linking to errata, the draft now is written as an update of RFC 5261. 
http://tools.ietf.org/html/draft-wilde-xml-patch-04#appendix-A lists all 
the updates to the RFC, and the XML Patch draft then refers to these 
updates where it needs to. this should make the draft more 
self-contained, so that it can progress without any dependencies on 
errata. it also makes it easier for implementers, all they need to do is 
read the spec, and RFC 5261. as usual, feedback is very welcome.

cheers,

dret.


-------- Original Message --------
Subject: New Version Notification for draft-wilde-xml-patch-04.txt
Date: Thu, 21 Feb 2013 06:54:04 -0800
From: internet-drafts@...


A new version of I-D, draft-wilde-xml-patch-04.txt
has been successfully submitted by Erik Wilde and posted to the
IETF repository.

Filename:	 draft-wilde-xml-patch
Revision:	 04
Title:		 A Media Type for XML Patch Operations
Creation date:	 2013-02-21
Group:		 Individual Submission
Number of pages: 17
URL: 
http://www.ietf.org/internet-drafts/draft-wilde-xml-patch-04.txt
Status:          http://datatracker.ietf.org/doc/draft-wilde-xml-patch
Htmlized:        http://tools.ietf.org/html/draft-wilde-xml-patch-04
Diff:            http://www.ietf.org/rfcdiff?url2=draft-wilde-xml-patch-04

Abstract:
    The XML Patch media type "application/xml-patch+xml" defines an XML
    document structure for expressing a sequence of patch operations that
    are applied to an XML document.  The XML Patch document format's
    foundations are defined in RFC 5261, this specification defines a
    document format and a media type registration, so that XML Patch
    documents can be labeled with a media type, for example in HTTP
    conversations.

    In addition to the media type registration, this specification also
    updates RFC 5261 in some aspects, limiting these updates to cases
    where RFC 5261 needed to be fixed, or was hard to understand.

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19283<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-02-23 16:24:00<br>
Subject:Re: [apps-discuss] process and editing questions: RFC errata<br>
Message:<br><br>
<pre>hello tom.

On 2013-02-21 17:40 , t.petch wrote:
&gt; In passing, some lines of formal definition exceed the permitted length
&gt; for an RFC line so a little reorganising will be needed, probably best
&gt; sooner rather than later as they will need validating before the I-D can
&gt; advance and reorganising can introduce syntax errors.

thanks for noting, 
https://raw.github.com/dret/I-D/master/xml-patch/draft-wilde-xml-patch-05.txt 
should look better (not yet submitted).

&gt; I may have missed the errata but I cannot recall a reference to them on
&gt; the apps-discuss list.  If they are modified and then approved, which
&gt; usually happens, then your I-D should follow suit so the sooner they are
&gt; processed the better.  Which might mean you requesting the AD to set the
&gt; wheels in motion, explaining why timeliness matters.

the errata are still just in the "reported" state, 
http://www.rfc-editor.org/errata_search.php?rfc=5261 lists the 4 i have 
submitted. 3 of those now are actually part of the updates to RFC 5261 
in the draft, so i am wondering whether these errata are needed anymore? 
ideally, my draft would update RFC 5261, and then the errata would be 
redundant, right?

&gt; And, out of curiosity, do you expect people to use XPath 1.0 or 2.0?  I
&gt; ask because in Netconf, I was keen to specify 2.0 and not 1.0, the
&gt; handling of namespaces in 2.0 seemed superior, but was told we could not
&gt; because there were no implementations for people to use, that 2.0 was a
&gt; great idea that had not happened (mmm IPv6?).  The Normative reference
&gt; for Yang remains the 1999 version.

2.0 is a vast improvement over 1.0, but it also is much more complex to 
implement. when 1.0 was released, XML was all the rage and there were a 
lot of people implementing specs. when 2.0 was released, the XML hyper 
curve already trended downward, plus it's just harder to implement. as a 
result it's true that it's surprisingly hard to find implementations of 
2.0. so while personally, i always use 2.0 because you can write better 
code, it's true that in specs, if you can get away with 1.0, it may be a 
good idea to stick to it.

cheers,

dret.

-- 
erik wilde | mailto:dret@...  -  tel:+1-510-2061079 |
            | UC Berkeley  -  School of Information (ISchool) |
            | http://dret.net/netdret http://twitter.com/dret |

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19284<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-02-27 21:52:58<br>
Subject:Information hiding?<br>
Message:<br><br>
<pre>From REST, 5.2.1:

"allows information hiding through a generic interface"

I took a stab at a precise definition of "information hiding" but struck
out.  What information is hidden from whom?  Anyone?

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19285<br>
Sender:"Markus Lanthaler" &lt;markus.lanthaler@...&gt;<br>
Post Date/Time:2013-02-27 22:20:17<br>
Subject:RE: [rest-discuss] Information hiding?<br>
Message:<br><br>
<pre>&gt; From REST, 5.2.1:
&gt; 
&gt; "allows information hiding through a generic interface"
&gt; 
&gt; I took a stab at a precise definition of "information hiding" but
&gt; struck
&gt; out.  What information is hidden from whom?  Anyone?

The server's implementation details are hidden from the client. RPC, e.g.,
usually exposes all the methods exactly in the way they are implemented by
the server. This tightly couples the client to the server's internals. REST
in contrast has a well defined interface so that the client doesn't (and
doesn't have to) know anything about the server's internals.


Cheers,
Markus


--
Markus Lanthaler
@markuslanthaler


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19286<br>
Sender:Alan Dean &lt;alan.dean@...&gt;<br>
Post Date/Time:2013-02-27 22:22:45<br>
Subject:Re: [rest-discuss] Information hiding?<br>
Message:<br><br>
<pre>Eric,

Looking at the preceding two paragraphs for context, I would
guess/think/say that the term "information hiding" refers to the hiding of
the server internal storage &amp; retrieval mechanisms and formats by
transforming the data into representations using 'generic' (syn.
well-known) data formats and discoverable (via hypermedia) retrieval
mechanisms.

Regards,
Alan Dean

On Wed, Feb 27, 2013 at 9:52 PM, Eric J. Bowman &lt;eric@...&gt;wrote:

&gt; **
&gt;
&gt;
&gt; From REST, 5.2.1:
&gt;
&gt; "allows information hiding through a generic interface"
&gt;
&gt; I took a stab at a precise definition of "information hiding" but struck
&gt; out. What information is hidden from whom? Anyone?
&gt;
&gt; -Eric
&gt;  
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19287<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-02-27 22:46:09<br>
Subject:Re: [rest-discuss] Information hiding?<br>
Message:<br><br>
<pre>OK, Alan, Markus, that's what I came up with also.  But then I second-
guessed myself, because Roy also uses "implementation details are
opaque behind the generic interface" and he doesn't usually mean
precisely the same thing with two different terms, like "uniform" and
"generic."

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19288<br>
Sender:Alan Dean &lt;alan.dean@...&gt;<br>
Post Date/Time:2013-02-27 22:56:29<br>
Subject:Re: [rest-discuss] Information hiding?<br>
Message:<br><br>
<pre>Eric,

Hmmm ... not sure where you are referring to there.

I can see *"The resource implementation details are hidden behind the
interface."* in [1] but that doesn't seem to be in conflict with *"allows
information hiding through a generic interface"* to me.

[1]
https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm#sec_5_2_3

Alan

On Wed, Feb 27, 2013 at 10:46 PM, Eric J. Bowman &lt;eric@...&gt;wrote:

&gt; implementation details are
&gt; opaque
&gt;



Regards,
Alan Dean
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19289<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-02-27 23:23:31<br>
Subject:Re: [rest-discuss] Information hiding?<br>
Message:<br><br>
<pre>Alan Dean wrote:
&gt; 
&gt; I can see *"The resource implementation details are hidden behind the
&gt; interface."* in [1] but that doesn't seem to be in conflict with
&gt; *"allows information hiding through a generic interface"* to me.
&gt; 

So "information hiding" is shorthand for "implementation-detail hiding"?
I guess I was thinking "uses SQL" is an implementation detail, while
the results of a SQL query would be "information," and I was missing
some subtlety.

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19290<br>
Sender:"Roy T. Fielding" &lt;fielding@...&gt;<br>
Post Date/Time:2013-02-28 08:13:37<br>
Subject:Re: [rest-discuss] Information hiding?<br>
Message:<br><br>
<pre>On Feb 27, 2013, at 3:23 PM, Eric J. Bowman wrote:

&gt; Alan Dean wrote:
&gt;&gt; 
&gt;&gt; I can see *"The resource implementation details are hidden behind the
&gt;&gt; interface."* in [1] but that doesn't seem to be in conflict with
&gt;&gt; *"allows information hiding through a generic interface"* to me.
&gt;&gt; 
&gt; 
&gt; So "information hiding" is shorthand for "implementation-detail hiding"?
&gt; I guess I was thinking "uses SQL" is an implementation detail, while
&gt; the results of a SQL query would be "information," and I was missing
&gt; some subtlety.

Information hiding is one of the first software engineering
principles learned when systems became large enough to require
modularity.

http://www.itmweb.com/essay550.htm

....Roy


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19291<br>
Sender:Nick Gall &lt;nick.gall@...&gt;<br>
Post Date/Time:2013-02-28 15:01:03<br>
Subject:Re: [rest-discuss] Information hiding?<br>
Message:<br><br>
<pre>My favorite expression of information hiding is this passage from the
closing section of David Parnas's seminal essay, "On the Criteria To Be
Used in Decomposing Systems into Modules": "...it is almost always
incorrect to begin the decomposition of a system into modules on the basis
of a flowchart. We propose instead that one begins with a list of difficult
design decisions or design decisions which are likely to change. Each
module is then designed to hide such a decision from the others.
http://en.wikipedia.org/wiki/David_Parnas#Quotations
Parnas D.L. (December 1972). "On the Criteria To Be Used in Decomposing
Systems into Modules". Comm ACM 15 (12): 10538. doi:10.1145/361598.361623

In other words, information hiding is the hiding of design
decisions--especially those design decisions likely to change. Information
hiding is NOT just about hiding implementation details; it is much more
about hiding (an at least indirecting--a form of hiding) design issues. But
here we are 40 years later, still starting our designs by decomposing
systems into steps in a process diagram.

-- Nick

Nick Gall
Phone: +1.781.608.5871
Other Contact Info: http://bit.ly/nickgall


On Thu, Feb 28, 2013 at 3:13 AM, Roy T. Fielding &lt;fielding@...&gt; wrote:

&gt; On Feb 27, 2013, at 3:23 PM, Eric J. Bowman wrote:
&gt;
&gt; &gt; Alan Dean wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; I can see *"The resource implementation details are hidden behind the
&gt; &gt;&gt; interface."* in [1] but that doesn't seem to be in conflict with
&gt; &gt;&gt; *"allows information hiding through a generic interface"* to me.
&gt; &gt;&gt;
&gt; &gt;
&gt; &gt; So "information hiding" is shorthand for "implementation-detail hiding"?
&gt; &gt; I guess I was thinking "uses SQL" is an implementation detail, while
&gt; &gt; the results of a SQL query would be "information," and I was missing
&gt; &gt; some subtlety.
&gt;
&gt; Information hiding is one of the first software engineering
&gt; principles learned when systems became large enough to require
&gt; modularity.
&gt;
&gt; http://www.itmweb.com/essay550.htm
&gt;
&gt; ....Roy
&gt;
&gt;
&gt;
&gt; ------------------------------------
&gt;
&gt; Yahoo! Groups Links
&gt;
&gt;
&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19292<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-02-28 16:33:36<br>
Subject:Re: [rest-discuss] Information hiding?<br>
Message:<br><br>
<pre>"Roy T. Fielding" wrote:
&gt; 
&gt; Information hiding is one of the first software engineering
&gt; principles learned when systems became large enough to require
&gt; modularity.
&gt; 
&gt; http://www.itmweb.com/essay550.htm
&gt; 

There's the subtlety I was missing; thanks, Roy.

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19293<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-02-28 17:09:24<br>
Subject:Re: [rest-discuss] Information hiding?<br>
Message:<br><br>
<pre>Nick Gall wrote:
&gt; 
&gt; But here we are 40 years later, still starting our designs by
&gt; decomposing systems into steps in a process diagram.
&gt; 

My lack of formal training may be an advantage, because that's not how
I did it.  I'm writing a modular httpd, where a NIO "listener" just
makes connections, and passes the socket's file descriptor off to a
vhost process; I define a vhost as one or more IP's / FQDN's which
share a configuration, the vhost is just a threaded cache incapable of
generating content.

Static files are served by a standalone FastCGI app, which maintains
multiplexed connections to those vhosts which use it.  That's three
modules whose boundaries were determined by design decision -- the
listener is shaking out as procedural, vhost as OOP, file server as
functional, written in different languages.

&gt;
&gt; Parnas D.L. (December 1972). "On the Criteria To Be Used in
&gt; Decomposing Systems into Modules". Comm ACM 15 (12): 1053â8.
&gt; doi:10.1145/361598.361623
&gt; 

Guess I'd better give that a read while I can still start over.  Just
because I don't know what I'm doing, doesn't mean I can't learn!  So
thanks for (unknowingly) pointing me the right direction. I wasn't even
going to mention my httpd project, except this is topical and timely to
what it is I'm doing.

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19294<br>
Sender:"Markus Lanthaler" &lt;markus.lanthaler@...&gt;<br>
Post Date/Time:2013-02-28 18:00:23<br>
Subject:RE: [rest-discuss] Information hiding?<br>
Message:<br><br>
<pre>Thanks for the great pointer Nick.

 

While hiding "functionality" isn't really surprising giving REST's uniform
interface it is much less apparent when looking at the data model - at least
for me.

 

Sure, you can decouple your internal data model from your external one by
creating (and standardizing) a media type. But what are guidelines to create
such a type? Which data do you expose and which do you hide? What if you
decide to remove some data in the future or it is just not reasonable
anymore to expose it?

 

 

Cheers,

Markus

 

 

--

Markus Lanthaler

@markuslanthaler

 

 

 

From: rest-discuss@yahoogroups.com [mailto:rest-discuss@yahoogroups.com] On
Behalf Of Nick Gall
Sent: Thursday, February 28, 2013 4:01 PM
To: Rest List
Subject: Re: [rest-discuss] Information hiding?

 

My favorite expression of information hiding is this passage from the
closing section of David Parnas's seminal essay, "On the Criteria To Be Used
in Decomposing Systems into Modules": "...it is almost always incorrect to
begin the decomposition of a system into modules on the basis of a
flowchart. We propose instead that one begins with a list of difficult
design decisions or design decisions which are likely to change. Each module
is then designed to hide such a decision from the others.

http://en.wikipedia.org/wiki/David_Parnas#Quotations

Parnas D.L. (December 1972). "On the Criteria To Be Used in Decomposing
Systems into Modules". Comm ACM 15 (12): 1053-8. doi:10.1145/361598.361623

 

In other words, information hiding is the hiding of design
decisions--especially those design decisions likely to change. Information
hiding is NOT just about hiding implementation details; it is much more
about hiding (an at least indirecting--a form of hiding) design issues. But
here we are 40 years later, still starting our designs by decomposing
systems into steps in a process diagram.

 

-- Nick




Nick Gall
Phone: +1.781.608.5871
Other Contact Info: http://bit.ly/nickgall

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19295<br>
Sender:Keith Hassen &lt;keith.hassen@...&gt;<br>
Post Date/Time:2013-02-28 18:57:14<br>
Subject:Re: [rest-discuss] Information hiding?<br>
Message:<br><br>
<pre>Very interesting topic. :)

This might just be a philosophical tangent, but ... I wonder if some of the lessons from evolutionary theory would be applicable ... systems that can interact successfully (APIs? agents of the web?), produce offspring (e.g. web systems that learn from each other and produce new, more flexible systems), with the occasional mutation (experimentation by design).  You may start in a very dark place but provided you define the right fitness goals (the measure of success), it could be that the answer to these kinds of questions are necessarily hidden from us and are best solved by encouraging interaction and growth. :)

K


On 2013-02-28, at 1:00 PM, Markus Lanthaler wrote:

&gt; 
&gt; Thanks for the great pointer Nick.
&gt; 
&gt;  
&gt; 
&gt; While hiding functionality isnt really surprising giving RESTs uniform interface it is much less apparent when looking at the data model - at least for me.
&gt; 
&gt;  
&gt; 
&gt; Sure, you can decouple your internal data model from your external one by creating (and standardizing) a media type. But what are guidelines to create such a type? Which data do you expose and which do you hide? What if you decide to remove some data in the future or it is just not reasonable anymore to expose it?
&gt; 
&gt;  
&gt; 
&gt;  
&gt; 
&gt; Cheers,
&gt; 
&gt; Markus
&gt; 
&gt;  
&gt; 
&gt;  
&gt; 
&gt; --
&gt; 
&gt; Markus Lanthaler
&gt; 
&gt; @markuslanthaler
&gt; 
&gt;  
&gt; 
&gt;  
&gt; 
&gt;  
&gt; 
&gt; From: rest-discuss@yahoogroups.com [mailto:rest-discuss@yahoogroups.com] On Behalf Of Nick Gall
&gt; Sent: Thursday, February 28, 2013 4:01 PM
&gt; To: Rest List
&gt; Subject: Re: [rest-discuss] Information hiding?
&gt; 
&gt;  
&gt; 
&gt; My favorite expression of information hiding is this passage from the closing section of David Parnas's seminal essay, "On the Criteria To Be Used in Decomposing Systems into Modules": "...it is almost always incorrect to begin the decomposition of a system into modules on the basis of a flowchart. We propose instead that one begins with a list of difficult design decisions or design decisions which are likely to change. Each module is then designed to hide such a decision from the others.
&gt; 
&gt; http://en.wikipedia.org/wiki/David_Parnas#Quotations
&gt; 
&gt; Parnas D.L. (December 1972). "On the Criteria To Be Used in Decomposing Systems into Modules". Comm ACM 15 (12): 10538. doi:10.1145/361598.361623
&gt; 
&gt;  
&gt; 
&gt; In other words, information hiding is the hiding of design decisions--especially those design decisions likely to change. Information hiding is NOT just about hiding implementation details; it is much more about hiding (an at least indirecting--a form of hiding) design issues. But here we are 40 years later, still starting our designs by decomposing systems into steps in a process diagram.
&gt; 
&gt;  
&gt; 
&gt; -- Nick
&gt; 
&gt; 
&gt; 
&gt; Nick Gall
&gt; Phone: +1.781.608.5871
&gt; Other Contact Info: http://bit.ly/nickgall
&gt; 
&gt; 
&gt; 

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19296<br>
Sender:Nick Gall &lt;nick.gall@...&gt;<br>
Post Date/Time:2013-02-28 19:56:00<br>
Subject:Re: [rest-discuss] Information hiding?<br>
Message:<br><br>
<pre>On Thu, Feb 28, 2013 at 1:00 PM, Markus Lanthaler
&lt;markus.lanthaler@...&gt;wrote:

&gt;
&gt; Sure, you can decouple your internal data model from your external one by
&gt; creating (and standardizing) a media type. But what are guidelines to
&gt; create such a type? Which data do you expose and which do you hide? What if
&gt; you decide to remove some data in the future or it is just not reasonable
&gt; anymore to expose it?
&gt;

Parnas gave this general advice in his same paper: "A data structure, its
internal linkings, accessing procedures and modifying procedures are part
of a single module. They are not shared by many modules as is
conventionally done. This notion is perhaps just an elaboration of the
assumptions behind the papers of Balzer [9] and Mealy [10]. Design with
this in mind is clearly behind the design of BLISS [11]."

What I like about this advice is it gets across that "module" as the unit
of change according to Parnas does not mean a function, or a method, or a
subroutine. A module means the entire set of dependencies that should
change together. I think only aspect-oriented folk really get Parnas's
sense of modularity.

Of course this begs the question of which parts of a data model, especially
a shared one like a media type, "change together." I know of only a few
general, cross-domain, principles regarding this issue. The rate of change
of different parts of a data model are IME very domain-specific. That's why
good data modeling is not a technical exercise, it is a business (or
similar domain) exercise--only domain experts have a deep sense of the
varying rates of change of the aspects of their domain.

That said, one of the few powerful general principles for factoring
interfaces into "modules" whose components are more likely to change at the
same rate comes from the AWWWv1:
http://www.w3.org/TR/webarch/#orthogonal-specs . "Identification,
interaction, and representation are orthogonal concepts, meaning that
technologies used for identification, interaction, and representation may
evolve independently." Or as I like to put it: IFaPs (Identifiers, Formats,
&amp; Protocols) should be as loosely coupled as possible because they are
likely to change at different rates. Protocols change the slowest,
identifiers next, and formats the most quickly.

"Architects can mature from being artists of space to become artists of
time."  Stewart Brand

-- Nick
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19297<br>
Sender:"Markus Lanthaler" &lt;markus.lanthaler@...&gt;<br>
Post Date/Time:2013-03-01 11:14:47<br>
Subject:RE: [rest-discuss] Information hiding?<br>
Message:<br><br>
<pre>On Thursday, February 28, 2013 8:56 PM, Nick Gall wrote:

&gt; That said, one of the few powerful general principles for
&gt; factoring interfaces into "modules" whose components are
&gt; more likely to change at the same rate comes from the
&gt; AWWWv1: http://www.w3.org/TR/webarch/#orthogonal-specs.
&gt; "Identification, interaction, and representation are
&gt; orthogonal concepts, meaning that technologies used for
&gt; identification, interaction, and representation may evolve
&gt; independently." Or as I like to put it: IFaPs (Identifiers,
&gt; Formats, &amp; Protocols) should be as loosely coupled as possible
&gt; because they are likely to change at different rates. Protocols
&gt; change the slowest, identifiers next, and formats the most quickly.

Yeah.. that's one of the aspects that is still not 100% clear to me. (Most)
media types not only define a serialization (representation) format but also
interaction models and sometimes specific semantic. Some are domain-specific
(to various degrees) while others are completely generic.

I tend more towards the use of completely domain-agnostic media types. Of
course, such media types need to provide some mechanism to express concrete
semantics (and thus hypermedia controls). The form doesn't really matter..
whether, e.g., XML-namespaces are used or a profile is associated with a
JSON file (preferably as media type parameter so that it's usable in conneg)
doesn't make a difference. I think this separation of concerns makes it much
easier to evolve systems in the long term since the parts may change at
different rates.

Maybe Roy could share his view on this as well.. I know he ran out of time
doing so a couple of years ago :-)


Thanks a lot,
Markus


--
Markus Lanthaler
@markuslanthaler


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19298<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-04-02 00:35:30<br>
Subject:Fwd: New Version Notification for draft-wilde-home-xml-00.txt<br>
Message:<br><br>
<pre>A new version of I-D, draft-wilde-home-xml-00.txt
has been successfully submitted by Erik Wilde and posted to the
IETF repository.

Filename:	 draft-wilde-home-xml
Revision:	 00
Title:		 Home Documents for HTTP Services: XML Syntax
Creation date:	 2013-04-01
Group:		 Individual Submission
Number of pages: 8
URL: 
http://www.ietf.org/internet-drafts/draft-wilde-home-xml-00.txt
Status:          http://datatracker.ietf.org/doc/draft-wilde-home-xml
Htmlized:        http://tools.ietf.org/html/draft-wilde-home-xml-00


Abstract:
    The current draft for HTTP Home Documents provides a JSON syntax
    only.  This draft provides an XML syntax for the same underlying data
    model, so that the concept of HTTP Home Documents can be consistently
    exposed in both JSON- and XML-based HTTP services.

Note to Readers

    Please discuss this draft on the apps-discuss mailing list [5].
    Online access to all versions and files is available on github [6].

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19299<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-04-03 08:45:27<br>
Subject:Tracking client-applications using User-Agent<br>
Message:<br><br>
<pre>Hi,

suppose, you expose a REST-API and want to keep track clients which you gave access to the API. Each client is given a client ID.

Straight-forward solution would be to use the Authentication (think OAuth) header to extract the client ID.

However, suppose there are some resource you do not want to protect to enable public caching.

What about asking the client developers to put the client ID in the User-Agent header. Yes, they would not have to, but let's suppose they are closely enough associated to be reliable enough. If this occasionally slips, that's no big deal. It is for monitoring purposes only. No payment-per-ID or throttling involved.

Do you have any thoughts or experiences doing something similar?

Jan
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19300<br>
Sender:Mike Kelly &lt;mikekelly321@...&gt;<br>
Post Date/Time:2013-04-03 08:52:55<br>
Subject:Re: [rest-discuss] Tracking client-applications using User-Agent<br>
Message:<br><br>
<pre>If the request hits a cache your origin server isn't going to see the
request so how would that work?

I think I would just stick to doing auth via the auth header. But I might
be missing something?

Cheers,
M
On 3 Apr 2013 09:46, "Jan Algermissen" &lt;jan.algermissen@...&gt; wrote:

&gt; **
&gt;
&gt;
&gt; Hi,
&gt;
&gt; suppose, you expose a REST-API and want to keep track clients which you
&gt; gave access to the API. Each client is given a client ID.
&gt;
&gt; Straight-forward solution would be to use the Authentication (think OAuth)
&gt; header to extract the client ID.
&gt;
&gt; However, suppose there are some resource you do not want to protect to
&gt; enable public caching.
&gt;
&gt; What about asking the client developers to put the client ID in the
&gt; User-Agent header. Yes, they would not have to, but let's suppose they are
&gt; closely enough associated to be reliable enough. If this occasionally
&gt; slips, that's no big deal. It is for monitoring purposes only. No
&gt; payment-per-ID or throttling involved.
&gt;
&gt; Do you have any thoughts or experiences doing something similar?
&gt;
&gt; Jan
&gt;  
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19301<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-04-03 09:01:02<br>
Subject:Re: [rest-discuss] Tracking client-applications using User-Agent<br>
Message:<br><br>
<pre>
On 03.04.2013, at 10:52, Mike Kelly &lt;mikekelly321@...&gt; wrote:

&gt; If the request hits a cache your origin server isn't going to see the request so how would that work?

Ha! Classic facepalm.org . (Should say it was just a trick question...)


Let's assume I control the cache because it is inside a large corporation.

Yeah - I could offload the auth at that point, too. I know...

Still curious.

Jan


&gt; 
&gt; I think I would just stick to doing auth via the auth header. But I might be missing something?
&gt; 
&gt; Cheers,
&gt; M
&gt; 
&gt; On 3 Apr 2013 09:46, "Jan Algermissen" &lt;jan.algermissen@...&gt; wrote:
&gt;  
&gt; Hi,
&gt; 
&gt; suppose, you expose a REST-API and want to keep track clients which you gave access to the API. Each client is given a client ID.
&gt; 
&gt; Straight-forward solution would be to use the Authentication (think OAuth) header to extract the client ID.
&gt; 
&gt; However, suppose there are some resource you do not want to protect to enable public caching.
&gt; 
&gt; What about asking the client developers to put the client ID in the User-Agent header. Yes, they would not have to, but let's suppose they are closely enough associated to be reliable enough. If this occasionally slips, that's no big deal. It is for monitoring purposes only. No payment-per-ID or throttling involved.
&gt; 
&gt; Do you have any thoughts or experiences doing something similar?
&gt; 
&gt; Jan
&gt; 
&gt; 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19302<br>
Sender:Paul Cohen &lt;pacoispaco@...&gt;<br>
Post Date/Time:2013-04-03 09:14:38<br>
Subject:Re: [rest-discuss] Tracking client-applications using User-Agent<br>
Message:<br><br>
<pre>On Wed, Apr 3, 2013 at 10:45 AM, Jan Algermissen
&lt;jan.algermissen@...m&gt; wrote:
&gt;
&gt; suppose, you expose a REST-API and want to keep track clients which you gave access to the API. Each client is given a client ID.
&gt;
&gt; Straight-forward solution would be to use the Authentication (think OAuth) header to extract the client ID.
&gt;
&gt; However, suppose there are some resource you do not want to protect to enable public caching.
&gt;
&gt; What about asking the client developers to put the client ID in the User-Agent header. Yes, they would not have to, but let's suppose they are closely enough associated to be reliable enough. If this occasionally slips, that's no big deal. It is for monitoring purposes only. No payment-per-ID or throttling involved.
&gt;
&gt; Do you have any thoughts or experiences doing something similar?

In my case we will have multiple installations of the same software
clients accessing our API. My idea is to use User-Agent for
identifying the software and its version but use Authentication header
or possibly an application key passed as a query parameter to identify
a specific client (instance or installation).

It seems there are three types of client identity that can be relevant
for an API to keep track of; software identity, software installation
identity and end user identity. In my case we have no current use case
where end user identity is required but we are interested in the first
two types of client identity.

/Paul

--
Paul Cohen
www.seibostudios.se
mobile: +46 730 787 035
e-mail: paul.cohen@...

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19303<br>
Sender:"Markus Lanthaler" &lt;markus.lanthaler@...&gt;<br>
Post Date/Time:2013-04-03 11:36:34<br>
Subject:FW: I-D Action: draft-lanthaler-profile-registry-00.txt<br>
Message:<br><br>
<pre>I've just submitted my first Internet Draft trying to establish a registry
for profile URIs. Any feedback would be much appreciated.


Cheers,
Markus



------- Original Message ------

A New Internet-Draft is available from the on-line Internet-Drafts
directories.


	Title           : The IETF Profile URI Registry
	Author(s)       : Markus Lanthaler
	Filename        : draft-lanthaler-profile-registry-00.txt
	Pages           : 6
	Date            : 2013-04-03

Abstract:
   This document defines a registry for profile URIs and establishes an
   IETF URN Sub-namespace to be used in specifications standardizing
   profiles.


The IETF datatracker status page for this draft is:
https://datatracker.ietf.org/doc/draft-lanthaler-profile-registry

There's also a htmlized version available at:
http://tools.ietf.org/html/draft-lanthaler-profile-registry-00


Internet-Drafts are also available by anonymous FTP at:
ftp://ftp.ietf.org/internet-drafts/



--
Markus Lanthaler
@markuslanthaler




</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19304<br>
Sender:"Markus Lanthaler" &lt;markus.lanthaler@...&gt;<br>
Post Date/Time:2013-04-03 17:26:13<br>
Subject:RE: [apps-discuss] FW: I-D Action: draft-lanthaler-profile-registry-00.txt<br>
Message:<br><br>
<pre>On Wednesday, April 03, 2013 3:31 PM, Dave Cridland wrote:

&gt; Seems reasonable, though I had to read it twice to
&gt; appreciate that non-URNish URIs may also be registered.
&gt;
&gt; It might be reasonable to underline this point by having
&gt; the example registration (not the registration of the
&gt; example, which is different, though currently the same text)
&gt; in §3 register an http://example.com/profiles/example
&gt; instead of the urn:ietf:params:profile:example.
&gt;
&gt; Obviously the §5.2 registration should stay the same.

Thanks a lot for the feedback Dave. Ill try to make this clearer in the
next version.

Cheers,
Markus


--
Markus Lanthaler
@markuslanthaler






</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19305<br>
Sender:Shea Levy &lt;shea.levy@...&gt;<br>
Post Date/Time:2013-04-17 19:13:33<br>
Subject:Prefetching VS HATEOAS<br>
Message:<br><br>
<pre>Hi all,

Often when designing REST interfaces for relational resources, I run 
into a tension between the efficiency of prefetching a related resource 
when one is requested on the one hand and the simplicity, elegance, and 
generality of referencing related resources via hypermedia. Does anyone 
have any advice on how best to manage that tension?

Thanks,
Shea Levy

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19306<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-04-17 19:21:53<br>
Subject:Re: [rest-discuss] Prefetching VS HATEOAS<br>
Message:<br><br>
<pre>hello shea.

On 2013-04-17 12:13 , Shea Levy wrote:
&gt; Often when designing REST interfaces for relational resources, I run
&gt; into a tension between the efficiency of prefetching a related resource
&gt; when one is requested on the one hand and the simplicity, elegance, and
&gt; generality of referencing related resources via hypermedia. Does anyone
&gt; have any advice on how best to manage that tension?

maybe i am misreading what you're saying, but i don't really see a 
tension in the sense of a conflict, more a design trade-off. prefetching 
is on the implementation level (it seems), and you would prefetch 
something based on the assumption that a request to a linked resource 
would be received soon, right? the tricky part probably is to avoid 
making prefetching stateful, assuming that the request for the related 
resource will be processed by the same server (if you have more than 
one). so if you make prefetching stateful, you run the risk of making it 
unlikely to actually provide you the benefit it can provide in a more 
stateful setting. so i guess in the end my answer would be: don't start 
implementing stateful patterns based on perceived performance benefits 
that rely on your service behaving in a stateful way.

cheers,

dret.

-- 
erik wilde | mailto:dret@...  -  tel:+1-510-2061079 |
            | UC Berkeley  -  School of Information (ISchool) |
            | http://dret.net/netdret http://twitter.com/dret |

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19307<br>
Sender:Shea Levy &lt;shea.levy@...&gt;<br>
Post Date/Time:2013-04-17 19:23:39<br>
Subject:Re: [rest-discuss] Prefetching VS HATEOAS<br>
Message:<br><br>
<pre>On 04/17/2013 03:20 PM, Nathan Sharfi wrote:
&gt; On Apr 17, 2013, at 12:13 PM, Shea Levy &lt;shea.levy@...&gt; wrote:
&gt;
&gt;&gt; Hi all,
&gt;&gt;
&gt;&gt; Often when designing REST interfaces for relational resources, I run
&gt;&gt; into a tension between the efficiency of prefetching a related resource
&gt;&gt; when one is requested on the one hand and the simplicity, elegance, and
&gt;&gt; generality of referencing related resources via hypermedia. Does anyone
&gt;&gt; have any advice on how best to manage that tension?
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt; Shea Levy
&gt; The two don't seem to be in conflict with each other; Firefox has supported &lt;link rel='prefetch' href='ï¿½'&gt; for quite a while now. Do you have a different use in mind?
I hadn't heard of that, thanks! Though it does still require an extra 
HTTP request, so in high-volume performance-critical stuff it might lose 
out to a completely server-side prefetch.

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19308<br>
Sender:Shea Levy &lt;shea.levy@...&gt;<br>
Post Date/Time:2013-04-17 19:25:42<br>
Subject:Re: [rest-discuss] Prefetching VS HATEOAS<br>
Message:<br><br>
<pre>On 04/17/2013 03:21 PM, Erik Wilde wrote:
&gt; hello shea.
&gt;
&gt; On 2013-04-17 12:13 , Shea Levy wrote:
&gt;&gt; Often when designing REST interfaces for relational resources, I run
&gt;&gt; into a tension between the efficiency of prefetching a related resource
&gt;&gt; when one is requested on the one hand and the simplicity, elegance, and
&gt;&gt; generality of referencing related resources via hypermedia. Does anyone
&gt;&gt; have any advice on how best to manage that tension?
&gt;
&gt; maybe i am misreading what you're saying, but i don't really see a 
&gt; tension in the sense of a conflict, more a design trade-off. 
&gt; prefetching is on the implementation level (it seems)

Well, yes and no. I was specifically thinking of a server-side prefetch, 
where a single request returns multiple resources (rather than a client 
intelligently pulling more than it needs). That's a difference in 
interface, not just implementation.

&gt; , and you would prefetch something based on the assumption that a 
&gt; request to a linked resource would be received soon, right? the tricky 
&gt; part probably is to avoid making prefetching stateful, assuming that 
&gt; the request for the related resource will be processed by the same 
&gt; server (if you have more than one). so if you make prefetching 
&gt; stateful, you run the risk of making it unlikely to actually provide 
&gt; you the benefit it can provide in a more stateful setting. so i guess 
&gt; in the end my answer would be: don't start implementing stateful 
&gt; patterns based on perceived performance benefits that rely on your 
&gt; service behaving in a stateful way.
&gt;
&gt; cheers,
&gt;
&gt; dret.
&gt;


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19309<br>
Sender:Brian Craft &lt;craft.brian@...&gt;<br>
Post Date/Time:2013-04-20 14:33:48<br>
Subject:the meaning of stateless<br>
Message:<br><br>
<pre>I don't understand how the word "stateless" is being used in REST.
Obviously POST and PUT create state on the server. Obviously, requests
after a state change depend on that state change (e.g. by using a URL that
was not valid before the state change).

I can almost live with this usage of "stateless" for persistent objects
stored on the server, because it can be thought of as not being "session
state": it lasts longer than a session. But in any moderately complex web
app, if you try to design a REST API you will quickly hit GET size limits
when doing complex queries. And then the suggestion is to do something like
POST the query parameters, returning a Location header for a "query" object
that can be fetched with GET. How is that not storing session data on the
server? How is that different from non-REST solutions?

There are three obvious differences between POSTing a query and just
generically using POST instead of GET. POSTing a query requires two
round-trips to the server, bad for latency. POSTing a query and using a
Location header limits the response to the creation of a single object,
which is fine for 1990's full-page-load design, but is unrealistic for any
moderately complex ajax app, where an API call will result in the creation
of multiple objects (e.g. creating related images). And POSTing a query
requires the tracking of large numbers of transient "query" objects, hugely
complicating both client and server, the very thing REST is supposed to
avoid.

Perhaps to clarify what is meant in REST by "stateless" someone could give
examples of things that *aren't* "stateless", and contrast them to REST.
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19310<br>
Sender:mike amundsen &lt;mamund@...&gt;<br>
Post Date/Time:2013-04-21 00:20:03<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>Fielding's definition of stateless is:

&gt;
&gt; "[C]ommunication must be stateless in nature ... such that each request
&gt; from client to server must contain all of the information necessary to
&gt; understand the request, and cannot take advantage of any stored context on
&gt; the server."[1]
&gt;
&gt; This constraint is not about how resources state is changed on the server
&gt; (clients send representations to the server) or how application state
&gt; changed on the client (servers send representations to the client).
&gt; Instead, this constraint is about the nature of the messages
&gt; (representations via entity-bodies + metadata via headers) that are sent
&gt; between client and server when changing each other's state.
&gt;
&gt; Each message stands alone and does not depend upon previous messages.
&gt;
&gt; &lt;snip&gt;
&gt; Perhaps to clarify what is meant in REST by "stateless" someone could give
&gt; examples of things that *aren't* "stateless", and contrast them to REST.
&gt; &lt;/snip&gt;
&gt;
&gt; HTTP servers that maintain persistent session state for each client during
&gt; the life of the client-server interaction set are not stateless.
&gt;
&gt; FTP servers that allow clients to change directories relative to the
&gt; results of a directory change in a previous request (cd ../..) are not
&gt; stateless.
&gt;
&gt; Hopefully, this gives you some helpful ideas.
&gt;
&gt;
&gt; [1]
&gt; http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm#sec_5_1_3
&gt;
&gt;
&gt;
&gt; mca
&gt; +1.859.757.1449
&gt; skype: mca.amundsen
&gt; http://amundsen.com/blog/
&gt; http://twitter.com/mamund
&gt; https://github.com/mamund
&gt; http://www.linkedin.com/in/mikeamundsen
&gt;
&gt;
&gt;
&gt; On Sat, Apr 20, 2013 at 10:33 AM, Brian Craft &lt;craft.brian@...&gt;wrote:
&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; I don't understand how the word "stateless" is being used in REST.
&gt;&gt; Obviously POST and PUT create state on the server. Obviously, requests
&gt;&gt; after a state change depend on that state change (e.g. by using a URL that
&gt;&gt; was not valid before the state change).
&gt;&gt;
&gt;&gt; I can almost live with this usage of "stateless" for persistent objects
&gt;&gt; stored on the server, because it can be thought of as not being "session
&gt;&gt; state": it lasts longer than a session. But in any moderately complex web
&gt;&gt; app, if you try to design a REST API you will quickly hit GET size limits
&gt;&gt; when doing complex queries. And then the suggestion is to do something like
&gt;&gt; POST the query parameters, returning a Location header for a "query" object
&gt;&gt; that can be fetched with GET. How is that not storing session data on the
&gt;&gt; server? How is that different from non-REST solutions?
&gt;&gt;
&gt;&gt; There are three obvious differences between POSTing a query and just
&gt;&gt; generically using POST instead of GET. POSTing a query requires two
&gt;&gt; round-trips to the server, bad for latency. POSTing a query and using a
&gt;&gt; Location header limits the response to the creation of a single object,
&gt;&gt; which is fine for 1990's full-page-load design, but is unrealistic for any
&gt;&gt; moderately complex ajax app, where an API call will result in the creation
&gt;&gt; of multiple objects (e.g. creating related images). And POSTing a query
&gt;&gt; requires the tracking of large numbers of transient "query" objects, hugely
&gt;&gt; complicating both client and server, the very thing REST is supposed to
&gt;&gt; avoid.
&gt;&gt;
&gt;&gt; Perhaps to clarify what is meant in REST by "stateless" someone could
&gt;&gt; give examples of things that *aren't* "stateless", and contrast them to
&gt;&gt; REST.
&gt;&gt;
&gt;&gt;
&gt;&gt; 
&gt;
&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19311<br>
Sender:Mohan Radhakrishnan &lt;radhakrishnan.mohan@...&gt;<br>
Post Date/Time:2013-04-21 02:08:51<br>
Subject:Security<br>
Message:<br><br>
<pre>Hi,

What are the recommendations for securing REST calls ? I searched and found
http://answers.oreilly.com/topic/2180-rest-in-practice-http-security-essentials/

So what I understand is that when people say that REST does not have
security they are probably thinking of WS-Security. I am not contrasting
SOAP with REST here but just trying to get various ideas for REST HTTP
protocol security. I understand HTTPS is separate.

Thanks,
Mohan
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19312<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-04-21 07:38:53<br>
Subject:Re: [rest-discuss] Security<br>
Message:<br><br>
<pre>Hi Mohan,

On 21.04.2013, at 04:08, Mohan Radhakrishnan &lt;radhakrishnan.mohan@...&gt; wrote:

&gt; 
&gt; Hi,
&gt; 
&gt; What are the recommendations for securing REST calls ?

I recommend OAuth1[1] 2-legged[2] for now and I recommend watching Oz[3] which, among other things, solves the scalability issues of OAuth1.

Jan


[1] http://tools.ietf.org/html/rfc5849
[2] http://oauth.googlecode.com/svn/spec/ext/consumer_request/1.0/drafts/1/spec.html
[3] https://github.com/hueniverse/oz



&gt; I searched and found http://answers.oreilly.com/topic/2180-rest-in-practice-http-security-essentials/
&gt; 
&gt; So what I understand is that when people say that REST does not have security they are probably thinking of WS-Security. I am not contrasting SOAP with REST here but just trying to get various ideas for REST HTTP protocol security. I understand HTTPS is separate.
&gt; 
&gt; Thanks,
&gt; Mohan
&gt; 
&gt; 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19313<br>
Sender:Brian Craft &lt;craft.brian@...&gt;<br>
Post Date/Time:2013-04-21 17:12:43<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>Storing session information isn't negotiable, and is orthogonal to API
design. For example, no one sits down to design an API and says "Oh, a
restful API is stateless, so I can't use HTTPS, because it stores session
state on the server." The API design occurs independent of the statefulness
of the communication, which is dictated  by security concerns.  And the API
can be redeployed without change to HTTP, so the statefulness had no
bearing on it.

The FTP example is more enlightening.  It's only slightly different than
the "query by POST" technique that is said to be RESTful. The main
difference is that in "query by POST" an id for the query is returned by
the server. So in the FTP example, if the server returned an id for the
target directory of a "cd", and future requests referenced this id, would
it then be "stateless" and "RESTful"? And if so, how does that jibe with
the claims in the dissertation that statelessness means "session state is
kept entirely on the client", and "Scalability is improved because not
having to store state between requests allows the server component to
quickly free resources and further simplifies implementation." The server
does, in fact,  store and manage resources for the session.


On Sat, Apr 20, 2013 at 4:51 PM, mca &lt;mca@...&gt; wrote:

&gt; Fielding's definition of stateless is:
&gt;
&gt; "[C]ommunication must be stateless in nature ... such that each request
&gt; from client to server must contain all of the information necessary to
&gt; understand the request, and cannot take advantage of any stored context on
&gt; the server."[1]
&gt;
&gt; This constraint is not about how resources state is changed on the server
&gt; (clients send representations to the server) or how application state
&gt; changed on the client (servers send representations to the client).
&gt; Instead, this constraint is about the nature of the messages
&gt; (representations via entity-bodies + metadata via headers) that are sent
&gt; between client and server when changing each other's state.
&gt;
&gt; Each message stands alone and does not depend upon previous messages.
&gt;
&gt; &lt;snip&gt;
&gt; Perhaps to clarify what is meant in REST by "stateless" someone could give
&gt; examples of things that *aren't* "stateless", and contrast them to REST.
&gt; &lt;/snip&gt;
&gt;
&gt; HTTP servers that maintain persistent session state for each client during
&gt; the life of the client-server interaction set are not stateless.
&gt;
&gt; FTP servers that allow clients to change directories relative to the
&gt; results of a directory change in a previous request (cd ../..) are not
&gt; stateless.
&gt;
&gt; Hopefully, this gives you some helpful ideas.
&gt;
&gt;
&gt; [1]
&gt; http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm#sec_5_1_3
&gt;
&gt;
&gt;
&gt; mca
&gt; +1.859.757.1449
&gt; skype: mca.amundsen
&gt; http://amundsen.com/blog/
&gt; http://twitter.com/mamund
&gt; https://github.com/mamund
&gt; http://www.linkedin.com/in/mikeamundsen
&gt;
&gt;
&gt;
&gt; On Sat, Apr 20, 2013 at 10:33 AM, Brian Craft &lt;craft.brian@...&gt;wrote:
&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; I don't understand how the word "stateless" is being used in REST.
&gt;&gt; Obviously POST and PUT create state on the server. Obviously, requests
&gt;&gt; after a state change depend on that state change (e.g. by using a URL that
&gt;&gt; was not valid before the state change).
&gt;&gt;
&gt;&gt; I can almost live with this usage of "stateless" for persistent objects
&gt;&gt; stored on the server, because it can be thought of as not being "session
&gt;&gt; state": it lasts longer than a session. But in any moderately complex web
&gt;&gt; app, if you try to design a REST API you will quickly hit GET size limits
&gt;&gt; when doing complex queries. And then the suggestion is to do something like
&gt;&gt; POST the query parameters, returning a Location header for a "query" object
&gt;&gt; that can be fetched with GET. How is that not storing session data on the
&gt;&gt; server? How is that different from non-REST solutions?
&gt;&gt;
&gt;&gt; There are three obvious differences between POSTing a query and just
&gt;&gt; generically using POST instead of GET. POSTing a query requires two
&gt;&gt; round-trips to the server, bad for latency. POSTing a query and using a
&gt;&gt; Location header limits the response to the creation of a single object,
&gt;&gt; which is fine for 1990's full-page-load design, but is unrealistic for any
&gt;&gt; moderately complex ajax app, where an API call will result in the creation
&gt;&gt; of multiple objects (e.g. creating related images). And POSTing a query
&gt;&gt; requires the tracking of large numbers of transient "query" objects, hugely
&gt;&gt; complicating both client and server, the very thing REST is supposed to
&gt;&gt; avoid.
&gt;&gt;
&gt;&gt; Perhaps to clarify what is meant in REST by "stateless" someone could
&gt;&gt; give examples of things that *aren't* "stateless", and contrast them to
&gt;&gt; REST.
&gt;&gt;
&gt;&gt;
&gt;&gt; 
&gt;
&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19314<br>
Sender:Mike Kelly &lt;mikekelly321@...&gt;<br>
Post Date/Time:2013-04-21 17:38:42<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On 21 Apr 2013 18:12, "Brian Craft" &lt;craft.brian@...&gt; wrote:
&gt;
&gt;
&gt;
&gt; Storing session information isn't negotiable, and is orthogonal to API
design. For example, no one sits down to design an API and says "Oh, a
restful API is stateless, so I can't use HTTPS, because it stores session
state on the server." The API design occurs independent of the statefulness
of the communication, which is dictated  by security concerns.

Actually I know people do actually do this.

Making resources in your app that are publicly accessible non-https means
that the cacheability of those resources is significantly increased
precisely because the stateless constraint is being conformed with and
therefore shared network intermediaries (I.e. caches) can transparently act
on behalf of the server.

Afaict, that is a valid design choice.

Cheers,
M
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19315<br>
Sender:Brian Craft &lt;craft.brian@...&gt;<br>
Post Date/Time:2013-04-21 23:52:12<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>Fielding's definition didn't do much for me, because the terms aren't
adequately defined, and there aren't enough examples to clarify his intent.
Also, some of the claims seem to be at odds with practice. Again, the "POST
to query" thing involves storing state between requests, while Fielding
says RESTful APIs are better because of "not having to store state between
requests". Well, which is it?

Regarding what I'm after, that's a rather broad question. I'd specifically
like to see any example of a RESTful API over high-dimensional data, e.g.
data with at least tens of thousands of dimensions. The examples I find are
barely more difficult than Todo MVC. So, sure, you can make toys with REST.
Can you make substantial applications with REST?

And more generally, I'm trying to understand what REST is all about. It's
clear that the overwhelming majority of people who use the term REST
actually mean nothing more than AJAX. They merely haven't investigated at
all what it is supposed to mean. Of the small minority who mean something
more than AJAX, one gets the impression that there isn't any set of three
people who agree on what it means. So, it's a popular buzzword, and perhaps
a religion, but is it actually a design pattern, and is it actually useful,
and can it actually be used to design a substantial application with
existing technologies?


On Sun, Apr 21, 2013 at 2:20 PM, mca &lt;mca@...&gt; wrote:

&gt; Brian:
&gt;
&gt; I'm not actually very clear on what you're after here. You challenging my
&gt; _interpretation_ of Fielding's stateless constraint? Challenging Fielding's
&gt; definition itself?
&gt;
&gt; Maybe you're just idly pondering multiple meanings of the word "session"?
&gt; For example, the opening phrase in your response "Session state" is not
&gt; using the word "session" in the same way as the closing line: "resources
&gt; for the session." (note in my previous response I used "interaction set" to
&gt; avoid the very same mistake).
&gt;
&gt; Maybe (as you _state_ at the top of this latest thread in this _session_
&gt; [sorry, was too easy]) you want to make the claim that there is no such
&gt; thing as "statelessness"?
&gt;
&gt;
&gt;
&gt; mca
&gt; +1.859.757.1449
&gt; skype: mca.amundsen
&gt; http://amundsen.com/blog/
&gt; http://twitter.com/mamund
&gt; https://github.com/mamund
&gt; http://www.linkedin.com/in/mikeamundsen
&gt;
&gt;
&gt;
&gt; On Sun, Apr 21, 2013 at 1:12 PM, Brian Craft &lt;craft.brian@...&gt;wrote:
&gt;
&gt;&gt; Storing session information isn't negotiable, and is orthogonal to API
&gt;&gt; design. For example, no one sits down to design an API and says "Oh, a
&gt;&gt; restful API is stateless, so I can't use HTTPS, because it stores session
&gt;&gt; state on the server." The API design occurs independent of the statefulness
&gt;&gt; of the communication, which is dictated  by security concerns.  And the API
&gt;&gt; can be redeployed without change to HTTP, so the statefulness had no
&gt;&gt; bearing on it.
&gt;&gt;
&gt;&gt; The FTP example is more enlightening.  It's only slightly different than
&gt;&gt; the "query by POST" technique that is said to be RESTful. The main
&gt;&gt; difference is that in "query by POST" an id for the query is returned by
&gt;&gt; the server. So in the FTP example, if the server returned an id for the
&gt;&gt; target directory of a "cd", and future requests referenced this id, would
&gt;&gt; it then be "stateless" and "RESTful"? And if so, how does that jibe with
&gt;&gt; the claims in the dissertation that statelessness means "session state is
&gt;&gt; kept entirely on the client", and "Scalability is improved because not
&gt;&gt; having to store state between requests allows the server component to
&gt;&gt; quickly free resources and further simplifies implementation." The server
&gt;&gt; does, in fact,  store and manage resources for the session.
&gt;&gt;
&gt;&gt;
&gt;&gt; On Sat, Apr 20, 2013 at 4:51 PM, mca &lt;mca@...&gt; wrote:
&gt;&gt;
&gt;&gt;&gt; Fielding's definition of stateless is:
&gt;&gt;&gt;
&gt;&gt;&gt; "[C]ommunication must be stateless in nature ... such that each request
&gt;&gt;&gt; from client to server must contain all of the information necessary to
&gt;&gt;&gt; understand the request, and cannot take advantage of any stored context on
&gt;&gt;&gt; the server."[1]
&gt;&gt;&gt;
&gt;&gt;&gt; This constraint is not about how resources state is changed on the
&gt;&gt;&gt; server (clients send representations to the server) or how application
&gt;&gt;&gt; state changed on the client (servers send representations to the client).
&gt;&gt;&gt; Instead, this constraint is about the nature of the messages
&gt;&gt;&gt; (representations via entity-bodies + metadata via headers) that are sent
&gt;&gt;&gt; between client and server when changing each other's state.
&gt;&gt;&gt;
&gt;&gt;&gt; Each message stands alone and does not depend upon previous messages.
&gt;&gt;&gt;
&gt;&gt;&gt; &lt;snip&gt;
&gt;&gt;&gt; Perhaps to clarify what is meant in REST by "stateless" someone could
&gt;&gt;&gt; give examples of things that *aren't* "stateless", and contrast them to
&gt;&gt;&gt; REST.
&gt;&gt;&gt; &lt;/snip&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; HTTP servers that maintain persistent session state for each client
&gt;&gt;&gt; during the life of the client-server interaction set are not stateless.
&gt;&gt;&gt;
&gt;&gt;&gt; FTP servers that allow clients to change directories relative to the
&gt;&gt;&gt; results of a directory change in a previous request (cd ../..) are not
&gt;&gt;&gt; stateless.
&gt;&gt;&gt;
&gt;&gt;&gt; Hopefully, this gives you some helpful ideas.
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; [1]
&gt;&gt;&gt; http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm#sec_5_1_3
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; mca
&gt;&gt;&gt; +1.859.757.1449
&gt;&gt;&gt; skype: mca.amundsen
&gt;&gt;&gt; http://amundsen.com/blog/
&gt;&gt;&gt; http://twitter.com/mamund
&gt;&gt;&gt; https://github.com/mamund
&gt;&gt;&gt; http://www.linkedin.com/in/mikeamundsen
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Sat, Apr 20, 2013 at 10:33 AM, Brian Craft &lt;craft.brian@...&gt;wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I don't understand how the word "stateless" is being used in REST.
&gt;&gt;&gt;&gt; Obviously POST and PUT create state on the server. Obviously, requests
&gt;&gt;&gt;&gt; after a state change depend on that state change (e.g. by using a URL that
&gt;&gt;&gt;&gt; was not valid before the state change).
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I can almost live with this usage of "stateless" for persistent objects
&gt;&gt;&gt;&gt; stored on the server, because it can be thought of as not being "session
&gt;&gt;&gt;&gt; state": it lasts longer than a session. But in any moderately complex web
&gt;&gt;&gt;&gt; app, if you try to design a REST API you will quickly hit GET size limits
&gt;&gt;&gt;&gt; when doing complex queries. And then the suggestion is to do something like
&gt;&gt;&gt;&gt; POST the query parameters, returning a Location header for a "query" object
&gt;&gt;&gt;&gt; that can be fetched with GET. How is that not storing session data on the
&gt;&gt;&gt;&gt; server? How is that different from non-REST solutions?
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; There are three obvious differences between POSTing a query and just
&gt;&gt;&gt;&gt; generically using POST instead of GET. POSTing a query requires two
&gt;&gt;&gt;&gt; round-trips to the server, bad for latency. POSTing a query and using a
&gt;&gt;&gt;&gt; Location header limits the response to the creation of a single object,
&gt;&gt;&gt;&gt; which is fine for 1990's full-page-load design, but is unrealistic for any
&gt;&gt;&gt;&gt; moderately complex ajax app, where an API call will result in the creation
&gt;&gt;&gt;&gt; of multiple objects (e.g. creating related images). And POSTing a query
&gt;&gt;&gt;&gt; requires the tracking of large numbers of transient "query" objects, hugely
&gt;&gt;&gt;&gt; complicating both client and server, the very thing REST is supposed to
&gt;&gt;&gt;&gt; avoid.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Perhaps to clarify what is meant in REST by "stateless" someone could
&gt;&gt;&gt;&gt; give examples of things that *aren't* "stateless", and contrast them to
&gt;&gt;&gt;&gt; REST.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19316<br>
Sender:Jonathan Ballard &lt;dzonatas@...&gt;<br>
Post Date/Time:2013-04-20 22:27:44<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>HTTPS is not stateless because, simply, that expects credentials, session
data, metadata, and or any secure transport layer.

Dynamic resources are useful for stateless HTTP with less round-trips.
Simply again, the POST could create the resource and redirect response
instead of store session cookies. These are useful in contrast for further
POST, GET, PUT, and DELETE methods.

Also note that ReST does not need to be directly implemented on top of
HTTP. Queue analysis may further optimize round trips before transport.



On Sat, Apr 20, 2013 at 7:33 AM, Brian Craft &lt;craft.brian@...&gt; wrote:

&gt; **
&gt;
&gt;
&gt; I don't understand how the word "stateless" is being used in REST.
&gt; Obviously POST and PUT create state on the server. Obviously, requests
&gt; after a state change depend on that state change (e.g. by using a URL that
&gt; was not valid before the state change).
&gt;
&gt; I can almost live with this usage of "stateless" for persistent objects
&gt; stored on the server, because it can be thought of as not being "session
&gt; state": it lasts longer than a session. But in any moderately complex web
&gt; app, if you try to design a REST API you will quickly hit GET size limits
&gt; when doing complex queries. And then the suggestion is to do something like
&gt; POST the query parameters, returning a Location header for a "query" object
&gt; that can be fetched with GET. How is that not storing session data on the
&gt; server? How is that different from non-REST solutions?
&gt;
&gt; There are three obvious differences between POSTing a query and just
&gt; generically using POST instead of GET. POSTing a query requires two
&gt; round-trips to the server, bad for latency. POSTing a query and using a
&gt; Location header limits the response to the creation of a single object,
&gt; which is fine for 1990's full-page-load design, but is unrealistic for any
&gt; moderately complex ajax app, where an API call will result in the creation
&gt; of multiple objects (e.g. creating related images). And POSTing a query
&gt; requires the tracking of large numbers of transient "query" objects, hugely
&gt; complicating both client and server, the very thing REST is supposed to
&gt; avoid.
&gt;
&gt; Perhaps to clarify what is meant in REST by "stateless" someone could give
&gt; examples of things that *aren't* "stateless", and contrast them to REST.
&gt;
&gt;  
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19317<br>
Sender:Alexander Johannesen &lt;alexander.johannesen@...&gt;<br>
Post Date/Time:2013-04-22 02:50:02<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>Hiya,

Brian Craft &lt;craft.brian@...&gt; wrote:
&gt; Fielding's definition didn't do much for me, because
&gt; the terms aren't adequately defined

What isn't defined adequately? Also; have you checked his dissertation
to make sure it doesn't contain all the definitions you're missing?

&gt; Again, the "POST to query" thing involves storing state between requests

Why?

&gt; [...] over high-dimensional data, e.g. data with at least
&gt; tens of thousands of dimensions.

Can you adequately define "dimensions"? I have no idea what you're referring to.

&gt; Can you make substantial applications with REST?

Oh no, you're right; nothing on the Internet which uses REST through
HTTP is in an applicable state of being substantial. C'mon, quit
trolling.

&gt; It's clear that the overwhelming majority of people who use the
&gt; term REST actually mean nothing more than AJAX.

Can you provide an example?

&gt; They merely haven't investigated at all what it is supposed to mean.

Who's "they"?

&gt; one gets the impression that there isn't any set of three people who
&gt; agree on what it means.

I'm pretty sure that I can find at least three people on this
mailing-list that would agree to "what it is."

&gt; So, it's a popular buzzword, and perhaps a religion

... aaaaaaand, we've reached the end of another wasteful trollin'
session. Why should we waste our time on you after this ridiculous
nonsense?


Tartidly yours,

Alex
--
 Project Wrangler, SOA, Information Alchemist, UX, RESTafarian, Topic Maps
--- http://shelter.nu/blog/ ----------------------------------------------
------------------ http://www.google.com/profiles/alexander.johannesen ---

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19318<br>
Sender:Matt McClure &lt;matthewlmcclure@...&gt;<br>
Post Date/Time:2013-04-22 10:09:04<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Apr 21, 2013, at 7:52 PM, Brian Craft &lt;craft.brian@...&gt; wrote:



Fielding's definition didn't do much for me, because the terms aren't
adequately defined, and there aren't enough examples to clarify his intent.
Also, some of the claims seem to be at odds with practice. Again, the "POST
to query" thing involves storing state between requests, while Fielding
says RESTful APIs are better because of "not having to store state between
requests". Well, which is it?


I think a key distinction is creating and destroying resources vs. other
kinds of state. The former is a key feature of REST.

And more generally, I'm trying to understand what REST is all about. It's
clear that the overwhelming majority of people who use the term REST
actually mean nothing more than AJAX. They merely haven't investigated at
all what it is supposed to mean. Of the small minority who mean something
more than AJAX, one gets the impression that there isn't any set of three
people who agree on what it means. So, it's a popular buzzword, and perhaps
a religion, but is it actually a design pattern, and is it actually useful,
and can it actually be used to design a substantial application with
existing technologies?


I recommend researching "hypermedia" for a higher signal to noise ratio
about REST.


Matt McClure
http://matthewlmcclure.com
http://www.mapmyfitness.com/profile/matthewlmcclure


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19319<br>
Sender:Brian Craft &lt;craft.brian@...&gt;<br>
Post Date/Time:2013-04-22 17:13:24<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Mon, Apr 22, 2013 at 3:09 AM, Matt McClure &lt;matthewlmcclure@...&gt;wrote:

&gt; On Apr 21, 2013, at 7:52 PM, Brian Craft &lt;craft.brian@...&gt; wrote:
&gt;
&gt;
&gt;
&gt; Fielding's definition didn't do much for me, because the terms aren't
&gt; adequately defined, and there aren't enough examples to clarify his intent.
&gt; Also, some of the claims seem to be at odds with practice. Again, the "POST
&gt; to query" thing involves storing state between requests, while Fielding
&gt; says RESTful APIs are better because of "not having to store state between
&gt; requests". Well, which is it?
&gt;
&gt;
&gt; I think a key distinction is creating and destroying resources vs. other
&gt; kinds of state. The former is a key feature of REST.
&gt;
&gt;
That's very much the impression I'm getting: that it's not generically
server-side state that is the key issue. It's something to do with the
difference between explicitly created state that can be directly referenced
with a URL vs. implicit state. If that is what it's about, then "stateless"
should be qualified, and some of the claims should be relaxed.
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19320<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-04-22 17:43:53<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>
On 22.04.2013, at 19:13, Brian Craft &lt;craft.brian@...&gt; wrote:
&gt; 
&gt; That's very much the impression I'm getting: that it's not generically server-side state that is the key issue.

Here you go:

http://www.ics.uci.edu/~fielding/pubs/dissertation/net_arch_styles.htm#sec_3_4_3

Jan


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19321<br>
Sender:Will Hartung &lt;willh@...&gt;<br>
Post Date/Time:2013-04-22 17:45:45<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>From a REST perspective, HTTPS is absolutely stateless, because it is
orthogonal to the application state. TCP itself is a stateful protocol. We
just don't see it at the application level. The application is ignorant
that I've dialed the modem, had it connect it's carrier waves and that it's
handshake and compression are working before I tunneled PPP over it in
order to stand HTTPS on top of that.

All of those are stateful in their own right, but have no effect on the
application.

These are separate issues.



On Mon, Apr 22, 2013 at 10:13 AM, Brian Craft &lt;craft.brian@...&gt; wrote:

&gt; **
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; On Mon, Apr 22, 2013 at 3:09 AM, Matt McClure &lt;matthewlmcclure@...&gt;wrote:
&gt;
&gt;&gt; On Apr 21, 2013, at 7:52 PM, Brian Craft &lt;craft.brian@...&gt; wrote:
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Fielding's definition didn't do much for me, because the terms aren't
&gt;&gt; adequately defined, and there aren't enough examples to clarify his intent.
&gt;&gt; Also, some of the claims seem to be at odds with practice. Again, the "POST
&gt;&gt; to query" thing involves storing state between requests, while Fielding
&gt;&gt; says RESTful APIs are better because of "not having to store state between
&gt;&gt; requests". Well, which is it?
&gt;&gt;
&gt;&gt;
&gt;&gt; I think a key distinction is creating and destroying resources vs. other
&gt;&gt; kinds of state. The former is a key feature of REST.
&gt;&gt;
&gt;&gt;
&gt; That's very much the impression I'm getting: that it's not generically
&gt; server-side state that is the key issue. It's something to do with the
&gt; difference between explicitly created state that can be directly referenced
&gt; with a URL vs. implicit state. If that is what it's about, then "stateless"
&gt; should be qualified, and some of the claims should be relaxed.
&gt;
&gt;  
&gt;

-- 
CONFIDENTIALITY NOTICE: The information contained in this electronic 
transmission may be confidential. If you are not an intended recipient, be 
aware that any disclosure, copying, distribution or use of the information 
contained in this transmission is prohibited and may be unlawful. If you 
have received this transmission in error, please notify us by email reply 
and then erase it from your computer system.
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19322<br>
Sender:Brian Craft &lt;craft.brian@...&gt;<br>
Post Date/Time:2013-04-22 18:40:39<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Mon, Apr 22, 2013 at 10:45 AM, Will Hartung &lt;willh@...&gt; wrote:

&gt; TCP itself is a stateful protocol. We just don't see it at the application
&gt; level. The application is ignorant that I've dialed the modem, had it
&gt; connect it's carrier waves and that it's handshake and compression are
&gt; working before I tunneled PPP over it in order to stand HTTPS on top of
&gt; that.
&gt;
&gt; All of those are stateful in their own right, but have no effect on the
&gt; application.
&gt;
&gt; These are separate issues.
&gt;
&gt;
Yes, exactly.
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19323<br>
Sender:"scott vernon" &lt;vern33nova@...&gt;<br>
Post Date/Time:2013-04-22 18:56:11<br>
Subject:Re: the meaning of stateless<br>
Message:<br><br>
<pre>I'm having this same debate with my development team as I try to convince them to switch from SOAP to REST.  One of the functions requires quite a few input parameters so providing it all in the GET request would not work.  I suggest they do a POST and provide the URI back to the user.  The problem is currently there isn't a backend database, so where would we store the intermediate data?  If it is in memory does that reduce the ability to scale?

Any advice would be appreciated.

Thank you,
Scott

--- In rest-discuss@yahoogroups.com, Matt McClure &lt;matthewlmcclure@...&gt; wrote:
&gt;
&gt; On Apr 21, 2013, at 7:52 PM, Brian Craft &lt;craft.brian@...&gt; wrote:
&gt; 
&gt; 
&gt; 
&gt; Fielding's definition didn't do much for me, because the terms aren't
&gt; adequately defined, and there aren't enough examples to clarify his intent.
&gt; Also, some of the claims seem to be at odds with practice. Again, the "POST
&gt; to query" thing involves storing state between requests, while Fielding
&gt; says RESTful APIs are better because of "not having to store state between
&gt; requests". Well, which is it?
&gt; 
&gt; 
&gt; I think a key distinction is creating and destroying resources vs. other
&gt; kinds of state. The former is a key feature of REST.
&gt; 
&gt; And more generally, I'm trying to understand what REST is all about. It's
&gt; clear that the overwhelming majority of people who use the term REST
&gt; actually mean nothing more than AJAX. They merely haven't investigated at
&gt; all what it is supposed to mean. Of the small minority who mean something
&gt; more than AJAX, one gets the impression that there isn't any set of three
&gt; people who agree on what it means. So, it's a popular buzzword, and perhaps
&gt; a religion, but is it actually a design pattern, and is it actually useful,
&gt; and can it actually be used to design a substantial application with
&gt; existing technologies?
&gt; 
&gt; 
&gt; I recommend researching "hypermedia" for a higher signal to noise ratio
&gt; about REST.
&gt; 
&gt; 
&gt; Matt McClure
&gt; http://matthewlmcclure.com
&gt; http://www.mapmyfitness.com/profile/matthewlmcclure
&gt;



</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19324<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-04-22 19:32:59<br>
Subject:Re: [rest-discuss] Re: the meaning of stateless<br>
Message:<br><br>
<pre>
On 22.04.2013, at 20:56, "scott vernon" &lt;vern33nova@...&gt; wrote:

&gt; I'm having this same debate with my development team as I try to convince them to switch from SOAP to REST. One of the functions requires quite a few input parameters so providing it all in the GET request would not work. 

Can you give an example?

'would not work' is my favorite indicator of design potential :-)

What you should do in general is to find named concepts and hierarchies and then use the URI path hierarchy to drill down into the 'pile of data'.

E.g.

instead of 

GET /orders?status=pending&amp;region=US&amp;amount-from=79.00&amp;amount-to=999.00&amp;query=smith

do sth like this:

GET /orders/pending/us/amount-range-2?query=smith

or if it makes sens from a business domain POV:

GET /pending-us-orders/amount-range-2?query=smith

This improves API clarity.

Get the idea?


Jan



&gt; I suggest they do a POST and provide the URI back to the user. The problem is currently there isn't a backend database, so where would we store the intermediate data? If it is in memory does that reduce the ability to scale?
&gt; 
&gt; Any advice would be appreciated.
&gt; 
&gt; Thank you,
&gt; Scott
&gt; 
&gt; --- In rest-discuss@yahoogroups.com, Matt McClure &lt;matthewlmcclure@...&gt; wrote:
&gt; &gt;
&gt; &gt; On Apr 21, 2013, at 7:52 PM, Brian Craft &lt;craft.brian@...&gt; wrote:
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; Fielding's definition didn't do much for me, because the terms aren't
&gt; &gt; adequately defined, and there aren't enough examples to clarify his intent.
&gt; &gt; Also, some of the claims seem to be at odds with practice. Again, the "POST
&gt; &gt; to query" thing involves storing state between requests, while Fielding
&gt; &gt; says RESTful APIs are better because of "not having to store state between
&gt; &gt; requests". Well, which is it?
&gt; &gt; 
&gt; &gt; 
&gt; &gt; I think a key distinction is creating and destroying resources vs. other
&gt; &gt; kinds of state. The former is a key feature of REST.
&gt; &gt; 
&gt; &gt; And more generally, I'm trying to understand what REST is all about. It's
&gt; &gt; clear that the overwhelming majority of people who use the term REST
&gt; &gt; actually mean nothing more than AJAX. They merely haven't investigated at
&gt; &gt; all what it is supposed to mean. Of the small minority who mean something
&gt; &gt; more than AJAX, one gets the impression that there isn't any set of three
&gt; &gt; people who agree on what it means. So, it's a popular buzzword, and perhaps
&gt; &gt; a religion, but is it actually a design pattern, and is it actually useful,
&gt; &gt; and can it actually be used to design a substantial application with
&gt; &gt; existing technologies?
&gt; &gt; 
&gt; &gt; 
&gt; &gt; I recommend researching "hypermedia" for a higher signal to noise ratio
&gt; &gt; about REST.
&gt; &gt; 
&gt; &gt; 
&gt; &gt; Matt McClure
&gt; &gt; http://matthewlmcclure.com
&gt; &gt; http://www.mapmyfitness.com/profile/matthewlmcclure
&gt; &gt;
&gt; 
&gt; 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19325<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-04-22 19:36:04<br>
Subject:Re: [rest-discuss] Re: the meaning of stateless<br>
Message:<br><br>
<pre>And if you really have to:

On 22.04.2013, at 20:56, "scott vernon" &lt;vern33nova@...&gt; wrote:

&gt; so where would we store the intermediate data

Build up the state on the client. Why does the intermediate state need to be on the server in the first place? Why not just POST the large 'query'?

Jan



</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19326<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-04-22 19:42:18<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>This has been a really insightful thread.  Thank you Brian for starting it.

After 7 years of trying to fully understand REST I'm still discovering nuances that are not clear, such as "the meaning of stateless."  If I were better at understanding abstract explanations[1] I would probably be much farther along but I'm just no good without a lot of relevant examples that illustrate the associated principles.

To that end I'd like to ask about some examples?

1.) Shopping cart:  We have a web API that allows a user to add items and the server keeps track of the items in my shopping cart. For example a shopper would first add items to their shopping cart which behind the scenes would POST to a "new cart" resource, (B 1..n) POST to a "new item" resource for each item to be purchased, (C, D) PUT billing and shipping addresses to the cart, (E) PUT payment information and finally (F) PUT a "order-placed" value to the cart to place the order.

2.) Batch Operations: In "RESTful Web Services"[2] in the section[3] preceded a few pages by the section "Why Stateless Matters"[4] they recommend to use "Batch Operations" for transactions such as the archetypical "move funds between checking and savings accounts" example.  Specifically they suggest (A) POSTing to get an account transfer transaction ID, (B 1..n) PUTting the new balances to the different accounts, and then (C) PUTting to the account transfer transaction ID to complete the transaction. And they make no mention of this approach being stateful after just writing about statelessness.

Are these examples stateless, or not? Are they RESTful, even if they use resources and hypermedia, et. al.?  If they are not RESTful then does that mean they are doing it wrong from a use-case perspective or that RESTfulness needs to be evaluated like other criteria, i.e. performance, ease of development, et. al?

-Mike 
[1] http://www.ics.uci.edu/~fielding/pubs/dissertation/net_arch_styles.htm
[2] First Edition, Richardson &amp; Ruby 
[3] Page 230
[4] Page 222

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19327<br>
Sender:Will Hartung &lt;willh@...&gt;<br>
Post Date/Time:2013-04-22 20:44:51<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>These are both fine. The stateless attribute is an attribute of the
transaction in place, not a specific resource.

For example

It's safe to say that someone's name and address as a resource is a pretty
straight forward resource:

http://example.com/people/willhartung

It's also straight forward to consider that I can PUT a new copy of that
resource when I move, changing the city and state etc. within the resource.
Right?

It's also not inconceivable to have other operations that may make changes
to that resource. Perhaps if I add a business address through a separate
mechanism, the name resource may get added to it.

Now, if you replace the name/address resource with "Shopping Cart" it's the
same thing. A Shopping Cart is simply a combination Invoice and Pick List
that's being built up over time. There is machine logic to keep the
resource properly structured and semantically correct, but it's really a
single resource that just getting changed over time. No big deal.

However, each of the transactions that manage that resource are themselves
stateless. Resource value is not the same as state. You can easily see
having any of a zillion web servers fronting the resource store that
manages the Shopping Cart. Since there's no transaction state maintained
with any one server, you can switch back and forth across them without any
semantic change to the application.

Just like when you go to the Post Office. You get in line, and when you get
to the clerk you ask to change your address. They tell you to fill out a
form, and you go back in line. When you get back to a clerk, any clerk, the
process continues. The state itself is the form you're holding. You don't
have any requirement to go back to the same clerk.

The transaction is the same thing. Think of the transaction as renting
bowling shoes. In order to go bowling, you must have bowling shoes. So you
"check out" the token (bowling shoes), and give them YOUR shoes as an
"identifier", then you go back and swap them out. When you check your
bowling shoes back in, you're done bowling. Any person at the counter can
handle this transaction. The actual transactions themselves are stateless.
You're just pushing resources back and forth.



On Mon, Apr 22, 2013 at 12:42 PM, Mike Schinkel &lt;mike@...&gt; wrote:

&gt; **
&gt;
&gt;
&gt; This has been a really insightful thread.  Thank you Brian for starting it.
&gt;
&gt; After 7 years of trying to fully understand REST I'm still discovering
&gt; nuances that are not clear, such as "the meaning of stateless."  If I were
&gt; better at understanding abstract explanations[1] I would probably be much
&gt; farther along but I'm just no good without a lot of relevant examples that
&gt; illustrate the associated principles.
&gt;
&gt; To that end I'd like to ask about some examples?
&gt;
&gt;
&gt; 1.) *Shopping cart:*  We have a web API that allows a user to add items
&gt; and the server keeps track of the items in my shopping cart. For example a
&gt; shopper would first add items to their shopping cart which behind the
&gt; scenes would POST to a "new cart" resource, (B 1..n) POST to a "new item"
&gt; resource for each item to be purchased, (C, D) PUT billing and shipping
&gt; addresses to the cart, (E) PUT payment information and finally (F) PUT a
&gt; "order-placed" value to the cart to place the order.
&gt;
&gt; 2.) *Batch Operations:* In "RESTful Web Services"[2] in the section[3]
&gt; preceded a few pages by the section "Why Stateless Matters"[4] they
&gt; recommend to use "Batch Operations" for transactions such as the
&gt; archetypical "move funds between checking and savings accounts" example.
&gt;  Specifically they suggest (A) POSTing to get an account transfer
&gt; transaction ID, (B 1..n) PUTting the new balances to the different
&gt; accounts, and then (C) PUTting to the account transfer transaction ID to
&gt; complete the transaction. And they make no mention of this approach being
&gt; stateful after just writing about statelessness.
&gt;
&gt; Are these examples stateless, or not? Are they RESTful, even if they use
&gt; resources and hypermedia, et. al.?  If they are not RESTful then does that
&gt; mean they are doing it wrong from a use-case perspective or that
&gt; RESTfulness needs to be evaluated like other criteria, i.e. performance,
&gt; ease of development, et. al?
&gt;
&gt; -Mike
&gt; [1] http://www.ics.uci.edu/~fielding/pubs/dissertation/net_arch_styles.htm
&gt; [2] First Edition, Richardson &amp; Ruby
&gt; [3] Page 230
&gt; [4] Page 222
&gt;
&gt;  
&gt;

-- 
CONFIDENTIALITY NOTICE: The information contained in this electronic 
transmission may be confidential. If you are not an intended recipient, be 
aware that any disclosure, copying, distribution or use of the information 
contained in this transmission is prohibited and may be unlawful. If you 
have received this transmission in error, please notify us by email reply 
and then erase it from your computer system.
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19328<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-04-22 21:22:32<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Apr 22, 2013, at 4:44 PM, Will Hartung &lt;willh@...&gt; wrote:
&gt; Now, if you replace the name/address resource with "Shopping Cart" it's the same thing. A Shopping Cart is simply a combination Invoice and Pick List that's being built up over time. There is machine logic to keep the resource properly structured and semantically correct, but it's really a single resource that just getting changed over time. No big deal.

My current understanding of stateless is that there should not need to be "state" on the server that will cause a different behavior based on a user might take.  So POSTing to "new item" resource changes the server state because if a user then issues a PUT with a value of "status=order-submitted" something different happens than if they had NOT first POSTed to the new item resource. 

Further, if lots of users are adding items to shopping cart resources (think Amazon-scale) then the server has to scale up to hang on to these shopping cart states.

So how is that "stateless", honest question?

&gt; However, each of the transactions that manage that resource are themselves stateless. Resource value is not the same as state.

I don't follow the distinction between resource value and state.  Maybe I need an example of "resource value" that differs from what you are calling state?

&gt; You can easily see having any of a zillion web servers fronting the resource store that manages the Shopping Cart. Since there's no transaction state maintained with any one server, you can switch back and forth across them without any semantic change to the application.

But one database server has to keep track of the cart contents, right?

&gt; Just like when you go to the Post Office. You get in line, and when you get to the clerk you ask to change your address. They tell you to fill out a form, and you go back in line. When you get back to a clerk, any clerk, the process continues. The state itself is the form you're holding. You don't have any requirement to go back to the same clerk.

But the post office has a central database somewhere and maintains that as "state," no?

&gt; The transaction is the same thing. Think of the transaction as renting bowling shoes. In order to go bowling, you must have bowling shoes. So you "check out" the token (bowling shoes), and give them YOUR shoes as an "identifier", then you go back and swap them out. When you check your bowling shoes back in, you're done bowling. Any person at the counter can handle this transaction. The actual transactions themselves are stateless. You're just pushing resources back and forth.

So the "bowling shoes API" has to keep track of the "shoes" it lends with an internal IDs. 
How is this different from a session ID other that it's specific to aspects of the application vs. general? 

To be clear, I'm asking these questions to help understand not to challenge your assertions.

-Mike</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19329<br>
Sender:Will Hartung &lt;willh@...&gt;<br>
Post Date/Time:2013-04-22 22:21:01<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>All mentions of state within the context of REST is TRANSACTION state. A
TRANSACTION is a process that CHANGES (Creates, changes, or deletes) a
RESOURCE.

The value of a resource is NOT "STATE". The back end application as
represented by resources and resources have values, and REST systems then
offer up REPRESENTATIONS of those values.

Consider, you can have a Clock resource.

http://example.com/currenttime

The stateless nature of the application is NOT the values of the Resources
themselves. It's obvious in the case that the application is managing the
"current time" (which is even more fun because the value of this resource
continually changes) and can give however many REPRESENTATIONS of that
resource.

But the REST architecture mandates that the transactions themselves, those
units of work that query or change the value are stateless. That means that
all the information necessary to carry out the transaction, is contained
within the request itself.

The "Change of Address" transaction at the Post Office is a stateless
transaction, because the form, when properly filled out, is all of the
information that is necessary to perform the transaction. You can take that
form to ANY Post Office and the System will act upon it appropriately. You
don't have to do it from your original post office, from it's city, or
state. Any Post Office in the system can handle that request. There are no
prerequisites.

All it requires is a properly filled out form. If the form is not valid,
the System will reject the form. At which point you can go fix the form and
start over (get back in line). Or you can come back tomorrow. Or you can
mail it in. Or you can drive to Prudhoe Bay in Alaska and drop it off
there. The end effect is the same, your address will be changed. The fact
that you've tried before, and where you've tried before, has no bearing on
the request itself, nor who you gave the request too.

Of course the Post Office maintains, somewhere, somehow, the relationship
between you and where you live. But that is not "state" in this context. I
consider that the value of the resource. (To help disambiguate between the
two in discussions.)

If you want to consider the combination of Resource values managed by the
Application as "The State of the Application", then that's fine. But that
"State" is not the same "state" that we talk about when discussing the
"stateless" nature of REST architectures.




On Mon, Apr 22, 2013 at 2:22 PM, Mike Schinkel &lt;mike@...&gt; wrote:

&gt; **
&gt;
&gt;
&gt; On Apr 22, 2013, at 4:44 PM, Will Hartung &lt;willh@...&gt; wrote:
&gt;
&gt; Now, if you replace the name/address resource with "Shopping Cart" it's
&gt; the same thing. A Shopping Cart is simply a combination Invoice and Pick
&gt; List that's being built up over time. There is machine logic to keep the
&gt; resource properly structured and semantically correct, but it's really a
&gt; single resource that just getting changed over time. No big deal.
&gt;
&gt;
&gt; My current understanding of stateless is that there should not need to be
&gt; "state" on the server that will cause a different behavior based on a user
&gt; might take.  So POSTing to "new item" resource changes the server state
&gt; because if a user then issues a PUT with a value of
&gt; "status=order-submitted" something different happens than if they had NOT
&gt; first POSTed to the new item resource.
&gt;
&gt; Further, if lots of users are adding items to shopping cart resources
&gt; (think Amazon-scale) then the server has to scale up to hang on to these
&gt; shopping cart states.
&gt;
&gt; So how is that "stateless", honest question?
&gt;
&gt; However, each of the transactions that manage that resource are themselves
&gt; stateless. Resource value is not the same as state.
&gt;
&gt;
&gt; I don't follow the distinction between resource value and state.  Maybe I
&gt; need an example of "resource value" that differs from what you are calling
&gt; state?
&gt;
&gt;
&gt; You can easily see having any of a zillion web servers fronting the
&gt; resource store that manages the Shopping Cart. Since there's no transaction
&gt; state maintained with any one server, you can switch back and forth across
&gt; them without any semantic change to the application.
&gt;
&gt;
&gt; But one database server has to keep track of the cart contents, right?
&gt;
&gt;
&gt; Just like when you go to the Post Office. You get in line, and when you
&gt; get to the clerk you ask to change your address. They tell you to fill out
&gt; a form, and you go back in line. When you get back to a clerk, any clerk,
&gt; the process continues. The state itself is the form you're holding. You
&gt; don't have any requirement to go back to the same clerk.
&gt;
&gt;
&gt; But the post office has a central database somewhere and maintains that as
&gt; "state," no?
&gt;
&gt;
&gt; The transaction is the same thing. Think of the transaction as renting
&gt; bowling shoes. In order to go bowling, you must have bowling shoes. So you
&gt; "check out" the token (bowling shoes), and give them YOUR shoes as an
&gt; "identifier", then you go back and swap them out. When you check your
&gt; bowling shoes back in, you're done bowling. Any person at the counter can
&gt; handle this transaction. The actual transactions themselves are stateless.
&gt; You're just pushing resources back and forth.
&gt;
&gt;
&gt; So the "bowling shoes API" has to keep track of the "shoes" it lends with
&gt; an internal IDs.
&gt; How is this different from a session ID other that it's specific to
&gt; aspects of the application vs. general?
&gt;
&gt; To be clear, I'm asking these questions to help understand not to
&gt; challenge your assertions.
&gt;
&gt; -Mike
&gt;
&gt;  
&gt;

-- 
CONFIDENTIALITY NOTICE: The information contained in this electronic 
transmission may be confidential. If you are not an intended recipient, be 
aware that any disclosure, copying, distribution or use of the information 
contained in this transmission is prohibited and may be unlawful. If you 
have received this transmission in error, please notify us by email reply 
and then erase it from your computer system.
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19330<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-04-22 22:33:09<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Apr 22, 2013, at 6:21 PM, Will Hartung &lt;willh@...&gt; wrote:
&gt; All mentions of state within the context of REST is TRANSACTION state. A TRANSACTION is a process that CHANGES (Creates, changes, or deletes) a RESOURCE.
&gt; 

&gt; The value of a resource is NOT "STATE". The back end application as represented by resources and resources have values, and REST systems then offer up REPRESENTATIONS of those values. 

Okay, I think I'm narrowing in on understanding, but still need a bit more help.

&gt; If you want to consider the combination of Resource values managed by the Application as "The State of the Application", then that's fine. But that "State" is not the same "state" that we talk about when discussing the "stateless" nature of REST architectures.

I think I'm getting why these are not considered stateful, because you are differentiating between application state and some other kind of "bad" state, right?  So if "application" state differs, what adjective do we apply to the "bad" kind of state?

Also, can you give examples of bad state and explain why it's specifically bad in contrast to application state being okay?

Many thanks in advance. This is really helping, at least it's helping me.

-Mike
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19331<br>
Sender:Will Hartung &lt;willh@...&gt;<br>
Post Date/Time:2013-04-22 22:37:12<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>I've written a little on this before.

See if reading this helps at all, as it talks not so much to state
directly, but to sessions (which is what most folks are struggling
with when it comes to state in REST).

Feel free to hit back with questions.

http://stackoverflow.com/questions/1296421/rest-complex-applications/1297275#1297275


On Mon, Apr 22, 2013 at 3:33 PM, Mike Schinkel &lt;mike@...&gt; wrote:
&gt; On Apr 22, 2013, at 6:21 PM, Will Hartung &lt;willh@...&gt; wrote:
&gt;
&gt; All mentions of state within the context of REST is TRANSACTION state. A
&gt; TRANSACTION is a process that CHANGES (Creates, changes, or deletes) a
&gt; RESOURCE.
&gt;
&gt;
&gt; The value of a resource is NOT "STATE". The back end application as
&gt; represented by resources and resources have values, and REST systems then
&gt; offer up REPRESENTATIONS of those values.
&gt;
&gt;
&gt; Okay, I think I'm narrowing in on understanding, but still need a bit more
&gt; help.
&gt;
&gt;
&gt; If you want to consider the combination of Resource values managed by the
&gt; Application as "The State of the Application", then that's fine. But that
&gt; "State" is not the same "state" that we talk about when discussing the
&gt; "stateless" nature of REST architectures.
&gt;
&gt;
&gt; I think I'm getting why these are not considered stateful, because you are
&gt; differentiating between application state and some other kind of "bad"
&gt; state, right?  So if "application" state differs, what adjective do we apply
&gt; to the "bad" kind of state?
&gt;
&gt; Also, can you give examples of bad state and explain why it's specifically
&gt; bad in contrast to application state being okay?
&gt;
&gt; Many thanks in advance. This is really helping, at least it's helping me.
&gt;
&gt; -Mike

-- 
CONFIDENTIALITY NOTICE: The information contained in this electronic 
transmission may be confidential. If you are not an intended recipient, be 
aware that any disclosure, copying, distribution or use of the information 
contained in this transmission is prohibited and may be unlawful. If you 
have received this transmission in error, please notify us by email reply 
and then erase it from your computer system.

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19332<br>
Sender:Mark Baker &lt;distobj@...&gt;<br>
Post Date/Time:2013-04-22 23:18:55<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Sun, Apr 21, 2013 at 7:52 PM, Brian Craft &lt;craft.brian@...&gt; wrote:
&gt; Fielding's definition didn't do much for me, because the terms aren't adequately defined,

They are, and the definition is most definitely adequate, trust me on
that. IMO, it's a far, *far* better definition than the inevitably
ambiguous definitions that involve distinguishing between different
kinds of information stored on the server.

&gt; and there aren't enough examples to clarify his intent.

Well, it is a dissertation :P

As with everything REST, the best way to understand it is to focus on
the interface and ignore the implementation. More specifically when it
comes to state, focus only on the meaning of the message and how it
reflects the intent of the message sender.

This may or may not help;

http://www.markbaker.ca/blog/2007/11/users-and-self-description/

Mark.

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19333<br>
Sender:Kevin Duffey &lt;andjarnic@...&gt;<br>
Post Date/Time:2013-04-23 01:28:00<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>Will,

Correct me if I am wrong.. trying to see if I can help Mike with this but may also be incorrect in my understanding.

Mike.. let's say you have an address (application state) stored in your web application database. Now let's say your client has the user id and wants to change the phone number using the /address resource. This is say the same resource you use to create a new address by providing (as per Will's example sort of) the post office equivalent of the address form using a POST (or PUT depending on your flavor of create/update methods). In the case of updating the address, as I understand it you would not submit a PUT with the user id and just the phone number. You would first issue a GET /address with the user id to get the full "current" address. You would then send it back with a PUT and the updated phone number, so that the transaction state includes everything needed to update the address. Is this correct Will?

I ask this myself because lately I've been suing ext-js and Jersey to build MVC like web apps with Jersey acting as my server side controller via ajax requests from ext-js. In this scenario of mine, presently, I have a sort of mixed mode use of jersey/rest. I believe I am not truly using it as a pure rest framework but more like a Struts/Velocity/pick you server MVC framework flavor. I *should* (and will attempt to) use it more like a RESTful api. Presently I am still learning ext-js and just getting things to work so cutting corners.

A question I have is.. am I a bad citizen for using Jersey (or any REST framework for that matter) in this manner because of it's rather easy server side configuration and code? If I am.. I can live with it.. but I love how easy and fast it is to write jersey code. :)







&gt;________________________________
&gt; From: Will Hartung &lt;willh@...&gt;
&gt;To: Mike Schinkel &lt;mike@newclarity.net&gt; 
&gt;Cc: Rest List &lt;rest-discuss@yahoogroups.com&gt; 
&gt;Sent: Monday, April 22, 2013 3:37 PM
&gt;Subject: Re: [rest-discuss] the meaning of stateless
&gt; 
&gt;
&gt;
&gt;Â  
&gt;I've written a little on this before.
&gt;
&gt;See if reading this helps at all, as it talks not so much to state
&gt;directly, but to sessions (which is what most folks are struggling
&gt;with when it comes to state in REST).
&gt;
&gt;Feel free to hit back with questions.
&gt;
&gt;http://stackoverflow.com/questions/1296421/rest-complex-applications/1297275#1297275
&gt;
&gt;On Mon, Apr 22, 2013 at 3:33 PM, Mike Schinkel &lt;mike@...&gt; wrote:
&gt;&gt; On Apr 22, 2013, at 6:21 PM, Will Hartung &lt;willh@...&gt; wrote:
&gt;&gt;
&gt;&gt; All mentions of state within the context of REST is TRANSACTION state. A
&gt;&gt; TRANSACTION is a process that CHANGES (Creates, changes, or deletes) a
&gt;&gt; RESOURCE.
&gt;&gt;
&gt;&gt;
&gt;&gt; The value of a resource is NOT "STATE". The back end application as
&gt;&gt; represented by resources and resources have values, and REST systems then
&gt;&gt; offer up REPRESENTATIONS of those values.
&gt;&gt;
&gt;&gt;
&gt;&gt; Okay, I think I'm narrowing in on understanding, but still need a bit more
&gt;&gt; help.
&gt;&gt;
&gt;&gt;
&gt;&gt; If you want to consider the combination of Resource values managed by the
&gt;&gt; Application as "The State of the Application", then that's fine. But that
&gt;&gt; "State" is not the same "state" that we talk about when discussing the
&gt;&gt; "stateless" nature of REST architectures.
&gt;&gt;
&gt;&gt;
&gt;&gt; I think I'm getting why these are not considered stateful, because you are
&gt;&gt; differentiating between application state and some other kind of "bad"
&gt;&gt; state, right?  So if "application" state differs, what adjective do we apply
&gt;&gt; to the "bad" kind of state?
&gt;&gt;
&gt;&gt; Also, can you give examples of bad state and explain why it's specifically
&gt;&gt; bad in contrast to application state being okay?
&gt;&gt;
&gt;&gt; Many thanks in advance. This is really helping, at least it's helping me.
&gt;&gt;
&gt;&gt; -Mike
&gt;
&gt;-- 
&gt;CONFIDENTIALITY NOTICE: The information contained in this electronic 
&gt;transmission may be confidential. If you are not an intended recipient, be 
&gt;aware that any disclosure, copying, distribution or use of the information 
&gt;contained in this transmission is prohibited and may be unlawful. If you 
&gt;have received this transmission in error, please notify us by email reply 
&gt;and then erase it from your computer system.
&gt;
&gt; 
&gt;
&gt;</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19334<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-04-23 02:06:21<br>
Subject:REST is Kafkarchitecture<br>
Message:<br><br>
<pre>hello will.

On 2013-04-22 15:21 , Will Hartung wrote:
&gt; The "Change of Address" transaction at the Post Office is a stateless
&gt; transaction, because the form, when properly filled out, is all of the
&gt; information that is necessary to perform the transaction. You can take
&gt; that form to ANY Post Office and the System will act upon it
&gt; appropriately. You don't have to do it from your original post office,
&gt; from it's city, or state. Any Post Office in the system can handle that
&gt; request. There are no prerequisites.
&gt;
&gt; All it requires is a properly filled out form. If the form is not valid,
&gt; the System will reject the form. At which point you can go fix the form
&gt; and start over (get back in line). Or you can come back tomorrow. Or you
&gt; can mail it in. Or you can drive to Prudhoe Bay in Alaska and drop it
&gt; off there. The end effect is the same, your address will be changed. The
&gt; fact that you've tried before, and where you've tried before, has no
&gt; bearing on the request itself, nor who you gave the request too.
&gt;
&gt; Of course the Post Office maintains, somewhere, somehow, the
&gt; relationship between you and where you live. But that is not "state" in
&gt; this context. I consider that the value of the resource. (To help
&gt; disambiguate between the two in discussions.)

thanks for bringing up that example. i have decided for a while now that 
traditional (pre-electronic) forms-based business processes are *the* 
perfect example to explain everything there is to explain about REST. 
bureaucracy has always been about formalizing interactions, hiding 
implementations, and making all interactions self-contained. it can be a 
bit painful for clients ("but i just *told* you what i am asking 
about"), but it means that every office drone can go to lunch at any 
time. personally, i read kafka now as a description of a RESTful system, 
and how it perfectly hides everything that's going on inside.

for a little while, i was even tempted to write a book (or more 
modestly, start a site) that explains everything about REST with 19th 
century office stories. it would be a lot of fun, and probably much more 
useful than many of the over-abstract explanations. and of course there 
are limits in terms of form complexity and the number of workers you 
could implement, but that really doesn't take away the fact that REST 
simply defines the architectural style of bureaucracy (and i mean that 
in a flattering way).

here's a challenge: is there anything in REST that you think does not 
map fairly easily to that analogy? i'd be really curious to hear about 
what that might be.

thanks and cheers,

dret.

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19335<br>
Sender:"scott vernon" &lt;vern33nova@...&gt;<br>
Post Date/Time:2013-04-23 13:23:12<br>
Subject:Re: the meaning of stateless<br>
Message:<br><br>
<pre>Thank you for your response.

The function that we are exposing is a reimbursement calculation that
has many different fields (&gt; 200) that could alter the outcome.  Some of
the fields are basic flags and others are lists of items that could be
empty or up to as many as 100.  There isn't really any hierarchy to the
data or any value to expose them as resources individually.  Providing
the data in a POST would work but then the concern is we need to store
the output of the formula which also contains a good amount of fields on
the server in order to respond to the future GET.  We are eventually
going to feed this service into a larger application and would like to
be able to scale as we get large amounts of data fed through.  If the
result data is stored in memory, we would lose the ability to scale out,
and in essence make the system not "stateless".


--- In rest-discuss@yahoogroups.com, Jan Algermissen  wrote:
&gt;
&gt; And if you really have to:
&gt;
&gt; On 22.04.2013, at 20:56, "scott vernon" vern33nova@... wrote:
&gt;
&gt; &gt; so where would we store the intermediate data
&gt;
&gt; Build up the state on the client. Why does the intermediate state need
to be on the server in the first place? Why not just POST the large
'query'?
&gt;
&gt; Jan
&gt;



</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19336<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-04-23 13:24:55<br>
Subject:Re: [rest-discuss] Re: the meaning of stateless<br>
Message:<br><br>
<pre>On 22.04.2013, at 22:51, "scott vernon" &lt;vern33nova@...&gt; wrote:

&gt; Thank you for your response.
&gt; 
&gt; The function that we are exposing is a reimbursement calculation that
&gt; has many different fields (&gt; 50) that could alter the outcome.  Some of
&gt; the fields are basic flags and others are lists of items that could be
&gt; empty or up to as many as 100.  There isn't really any hierarchy to the
&gt; data or any value to expose them as resources individually.  Providing
&gt; the data in a POST would work but then the concern is we need to store
&gt; the output of the formula, which also contains a good amount of fields,
&gt; on the server in order to respond to the future GET.  

Which future GET? Why not just POST the query and consume the result? Yes, you loose visibility and thus cacheability of the result, but given the myriad of parameters reasonable cache hit ratio seems unlikely anyhow.

So, either I am missing the point, or you should just

POST /service/calculator
Content-Type: application/vnd.foo.reimbursement (or whatever)

&lt;calc-params&gt;
 ...
&lt;/calc-params&gt;

200 Ok
Content-Type: application/vnd.foo.reimbursement

&lt;calc-result&gt;
 ...
&lt;/calc-result&gt;

and be done. Add boxes at will to scale. It's ok, to just use POST.

If you need caching, because the result will be re-used, you could store the result (as a static file, maybe), assign it a URI and tell the client (and caches on the way) about it:


200 Ok
Content-Type: application/vnd.foo.reimbursement
Content-Location: http://static.foo.org/calculation-resuts/7qjy6s
Location: http://static.foo.org/calculation-resuts/7qjy6s

&lt;calc-result&gt;
 ...
&lt;/calc-result&gt;

That way, you could share the static resource with other 'users' and use a phalanx of caches (replicated using a standard cache protocol) to serve up the result in the future.  

----

In the end, you are right though. Keeping the result on the server creates server side state - but this is ok, if you assign it a URI. And yes, you essentially need to distribute that across all servers in order to scale. This is a normal situation, such as with accounts of new users or uploaded photos to Flickr.

One way to deal with that is caches that replicate, another is trading the 'C' of the CAP theorem for the 'A', use a NoSQL DB in the backend and deal with the (occasional if at all) lack of consistency.

Hope that helps.

Jan


&gt; We are eventually
&gt; going to feed this service into a larger application and would like to
&gt; be able to scale as we get large amounts of data fed through.  If the
&gt; result data is stored in memory, we would lose the ability to scale out,
&gt; and in essence would make the system not "stateless".
&gt; 
&gt; My developers think that using SOAP so that the result of formula can be
&gt; returned in one transaction is the best way to solve this problem.  I
&gt; believe in REST but I don't' know if adding a database to hold the
&gt; result data outweighs the benefits or if using a overloaded POST is
&gt; better than the SOAP solution.
&gt; 
&gt; 
&gt; --- In rest-discuss@yahoogroups.com, Jan Algermissen  wrote:
&gt;&gt; 
&gt;&gt; And if you really have to:
&gt;&gt; 
&gt;&gt; On 22.04.2013, at 20:56, "scott vernon" vern33nova@... wrote:
&gt;&gt; 
&gt;&gt;&gt; so where would we store the intermediate data
&gt;&gt; 
&gt;&gt; Build up the state on the client. Why does the intermediate state need
&gt; to be on the server in the first place? Why not just POST the large
&gt; 'query'?
&gt;&gt; 
&gt;&gt; Jan
&gt;&gt; 
&gt; 
&gt; 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19337<br>
Sender:"scott vernon" &lt;vern33nova@...&gt;<br>
Post Date/Time:2013-04-23 13:54:24<br>
Subject:Re: the meaning of stateless<br>
Message:<br><br>
<pre>Thank you Jan,  that was very helpful.

--- In rest-discuss@yahoogroups.com, Jan Algermissen  wrote:
&gt;
&gt; On 22.04.2013, at 22:51, "scott vernon" vern33nova@... wrote:
&gt;
&gt; &gt; Thank you for your response.
&gt; &gt;
&gt; &gt; The function that we are exposing is a reimbursement calculation
that
&gt; &gt; has many different fields (&gt; 50) that could alter the outcome.  Some
of
&gt; &gt; the fields are basic flags and others are lists of items that could
be
&gt; &gt; empty or up to as many as 100.  There isn't really any hierarchy to
the
&gt; &gt; data or any value to expose them as resources individually. 
Providing
&gt; &gt; the data in a POST would work but then the concern is we need to
store
&gt; &gt; the output of the formula, which also contains a good amount of
fields,
&gt; &gt; on the server in order to respond to the future GET.
&gt;
&gt; Which future GET? Why not just POST the query and consume the result?
Yes, you loose visibility and thus cacheability of the result, but given
the myriad of parameters reasonable cache hit ratio seems unlikely
anyhow.
&gt;
&gt; So, either I am missing the point, or you should just
&gt;
&gt; POST /service/calculator
&gt; Content-Type: application/vnd.foo.reimbursement (or whatever)
&gt;
&gt;
&gt;  ...
&gt;
&gt;
&gt; 200 Ok
&gt; Content-Type: application/vnd.foo.reimbursement
&gt;
&gt;
&gt;  ...
&gt;
&gt;
&gt; and be done. Add boxes at will to scale. It's ok, to just use POST.
&gt;
&gt; If you need caching, because the result will be re-used, you could
store the result (as a static file, maybe), assign it a URI and tell the
client (and caches on the way) about it:
&gt;
&gt;
&gt; 200 Ok
&gt; Content-Type: application/vnd.foo.reimbursement
&gt; Content-Location: http://static.foo.org/calculation-resuts/7qjy6s
&gt; Location: http://static.foo.org/calculation-resuts/7qjy6s
&gt;
&gt;
&gt;  ...
&gt;
&gt;
&gt; That way, you could share the static resource with other 'users' and
use a phalanx of caches (replicated using a standard cache protocol) to
serve up the result in the future.
&gt;
&gt; ----
&gt;
&gt; In the end, you are right though. Keeping the result on the server
creates server side state - but this is ok, if you assign it a URI. And
yes, you essentially need to distribute that across all servers in order
to scale. This is a normal situation, such as with accounts of new users
or uploaded photos to Flickr.
&gt;
&gt; One way to deal with that is caches that replicate, another is trading
the 'C' of the CAP theorem for the 'A', use a NoSQL DB in the backend
and deal with the (occasional if at all) lack of consistency.
&gt;
&gt; Hope that helps.
&gt;
&gt; Jan
&gt;
&gt;
&gt; &gt; We are eventually
&gt; &gt; going to feed this service into a larger application and would like
to
&gt; &gt; be able to scale as we get large amounts of data fed through.  If
the
&gt; &gt; result data is stored in memory, we would lose the ability to scale
out,
&gt; &gt; and in essence would make the system not "stateless".
&gt; &gt;
&gt; &gt; My developers think that using SOAP so that the result of formula
can be
&gt; &gt; returned in one transaction is the best way to solve this problem. 
I
&gt; &gt; believe in REST but I don't' know if adding a database to hold the
&gt; &gt; result data outweighs the benefits or if using a overloaded POST is
&gt; &gt; better than the SOAP solution.
&gt; &gt;
&gt; &gt;
&gt; &gt; --- In rest-discuss@yahoogroups.com, Jan Algermissen  wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; And if you really have to:
&gt; &gt;&gt;
&gt; &gt;&gt; On 22.04.2013, at 20:56, "scott vernon" vern33nova@ wrote:
&gt; &gt;&gt;
&gt; &gt;&gt;&gt; so where would we store the intermediate data
&gt; &gt;&gt;
&gt; &gt;&gt; Build up the state on the client. Why does the intermediate state
need
&gt; &gt; to be on the server in the first place? Why not just POST the large
&gt; &gt; 'query'?
&gt; &gt;&gt;
&gt; &gt;&gt; Jan
&gt; &gt;&gt;
&gt; &gt;
&gt; &gt;
&gt;



</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19338<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-04-23 14:16:31<br>
Subject:Re: [rest-discuss] Re: the meaning of stateless<br>
Message:<br><br>
<pre>On 23.04.2013, at 15:24, Jan Algermissen &lt;jan.algermissen@...&gt; wrote:

&gt; 200 Ok
&gt; Content-Type: application/vnd.foo.reimbursement
&gt; Content-Location: http://static.foo.org/calculation-resuts/7qjy6s
&gt; Location: http://static.foo.org/calculation-resuts/7qjy6s
&gt; 
&gt; &lt;calc-result&gt;
&gt; ...
&gt; &lt;/calc-result&gt;

Doh - that 200 should have been 201!


Jan

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19339<br>
Sender:Brian Craft &lt;craft.brian@...&gt;<br>
Post Date/Time:2013-04-23 16:14:31<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Mon, Apr 22, 2013 at 4:18 PM, Mark Baker &lt;distobj@...&gt; wrote:

&gt; On Sun, Apr 21, 2013 at 7:52 PM, Brian Craft &lt;craft.brian@...&gt;
&gt; wrote:
&gt; &gt; Fielding's definition didn't do much for me, because the terms aren't
&gt; adequately defined,
&gt;
&gt; They are, and the definition is most definitely adequate, trust me on
&gt; that.


I don't agree. Take this statement, for example:

"Each request from client to server must contain all of the information
necessary to understand the request, and cannot take advantage of any
stored context on the server. "

What does "understand" mean in this sentence? I'm not aware of a technical
definition of "understand" as it applies to computer systems, and it's not
defined in the paper. Again, take the "query by POST" pattern. The eventual
GET depends on a previous POST. Does the server "understand" a request that
depends on a previous request? What about "stored context"? One would
reasonably believe that POSTing a query creates stored context on the
server which later requests may take advantage of. But this sentence says
that it must not "take advantage of any stored context on the server." I
assume this apparent contradiction is due to some different use of terms,
that "stored context" doesn't mean what one would reasonably assume it
means, or something. If this is a different usage of the terms, they should
be defined somewhere.

My current guess is that "understand" means that the communications layer
can read the request and generate a valid response, including the case
where the POST goes missing and it must return a 404: that it still
"understands" the request even though the app can't process it since the
depends on a previous request.

But then it gets really odd with claims like "the server doesnt have to
manage resource usage across requests." How is a POSTed query not a
resource on the server that must be managed across requests? Again, if this
is to make sense then the terms must have something other than their usual
meaning. Is it "manage"? Maybe the server doesn't "manage" the resource
because the client directs the creation of it? But, then, the server will
have to manage the destruction of it, because a server can't allow clients
to create an unbounded number of transient "query" objects and count on the
clients to clean up after themselves. So what does that phrase mean?
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19340<br>
Sender:Will Hartung &lt;willh@...&gt;<br>
Post Date/Time:2013-04-23 16:30:42<br>
Subject:Re: REST is Kafkarchitecture<br>
Message:<br><br>
<pre>On Mon, Apr 22, 2013 at 7:06 PM, Erik Wilde &lt;dret@...&gt; wrote:

&gt; thanks for bringing up that example. i have decided for a while now that
&gt; traditional (pre-electronic) forms-based business processes are *the*
&gt; perfect example to explain everything there is to explain about REST.

Oh, I agree about the analogy, though I haven't put enough thought in
to a REST idiom that doesn't fit.

However, I have another example to share.

This considers the use of well known entry points.

The simple example is you want to go to the Hall of Records (as we
call them here) and get a copy of your Birth Certificate.

You find the Hall of Records ("everyone know where that is"), and you
hit the information kiosk. There, they give you a pamphlet that says
"Hall of Records Offices for the year 2013". It tells you that Birth
Certificates are on the 3rd floor, Office 304. And off you go.

Next  year, you come back, being as you managed to lose it again, and
need a new copy. Instead of stopping at the info kiosk, you refer to
your pamphlet that you kept. Mind, it's not 2014. You go straight to
room 304 -- The Regional Planning office. Oops. But look, there's a
sign: "Birth Records moved to room 417" Success, off you go.

Two years later, we're back...and off we go to 417 -- The Probation
Office. Oh no! And ever worse, no sign! The office moved over a year
ago and the sign is only kept up for 6 months. Now you're stuck
walking back down to the info kiosk and starting over.

This is an example of using a well know entry point, the ability to
cache information, as well as specifying the Cache Expiration date.

If you have reasonable caching on your main entry points, then clients
can fetch the "directory" once, and rely on it internally to look up
addresses, effectively giving you the same benefit of bookmarking the
absolute end point, but with the consent of the service so that it is
free to remain nimble and move things as they see fit. Internally, you
client should perform the same task: "GET http://example.com/entry",
but your internal infrastructure should realize it's cached, and
already marshaled and simply return a copy of the internal form rather
than requesting it again. Speedy.

It works as a good solution to "why do I have to constantly ask for
the same information?". If it is, in fact, "the same information",
then the service "knows that" and can (should) tell you a valid
lifespan for that information. It's a contract between the service and
the clients. If the service refuses to commit to this information,
then they deserve to be hammered with redundant requests and emails
from clients that "their server is too slow". Fix it.

By the same token, if a service decides to change an internal service
address "suddenly", then it's the client that's breaking the contract
-- let them eat 404s.

But, in general, I do look at REST systems much like paper based
systems. And if you want to add Asynchronous aspects to the system,
then you consider those old days of stuffing notes in carriers and
shoving them in to vacuum tubes. There -- an async architecture :)

-- 
CONFIDENTIALITY NOTICE: The information contained in this electronic 
transmission may be confidential. If you are not an intended recipient, be 
aware that any disclosure, copying, distribution or use of the information 
contained in this transmission is prohibited and may be unlawful. If you 
have received this transmission in error, please notify us by email reply 
and then erase it from your computer system.

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19341<br>
Sender:Mike Kelly &lt;mikekelly321@...&gt;<br>
Post Date/Time:2013-04-23 17:33:49<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>Stateless refers to shared state, meaning state that is "carried over"
implicitly between requests.

If the client posts a query, and the server responds with a link to a URL
identifying the specific result of that query as a resource that's normal
server persisted state..

But if the client posts to a /query endpoint and then makes a get to a
generic /result endpoint then the state (or context) is implicitly carried
over and therefore there is no visibility in the second request. I.e there
is shared state and the constraint is violated.

Cheers,
M
On 23 Apr 2013 17:14, "Brian Craft" &lt;craft.brian@...&gt; wrote:

&gt; **
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; On Mon, Apr 22, 2013 at 4:18 PM, Mark Baker &lt;distobj@...&gt; wrote:
&gt;
&gt;&gt; On Sun, Apr 21, 2013 at 7:52 PM, Brian Craft &lt;craft.brian@...&gt;
&gt;&gt; wrote:
&gt;&gt; &gt; Fielding's definition didn't do much for me, because the terms aren't
&gt;&gt; adequately defined,
&gt;&gt;
&gt;&gt; They are, and the definition is most definitely adequate, trust me on
&gt;&gt; that.
&gt;
&gt;
&gt; I don't agree. Take this statement, for example:
&gt;
&gt; "Each request from client to server must contain all of the information
&gt; necessary to understand the request, and cannot take advantage of any
&gt; stored context on the server. "
&gt;
&gt; What does "understand" mean in this sentence? I'm not aware of a technical
&gt; definition of "understand" as it applies to computer systems, and it's not
&gt; defined in the paper. Again, take the "query by POST" pattern. The eventual
&gt; GET depends on a previous POST. Does the server "understand" a request that
&gt; depends on a previous request? What about "stored context"? One would
&gt; reasonably believe that POSTing a query creates stored context on the
&gt; server which later requests may take advantage of. But this sentence says
&gt; that it must not "take advantage of any stored context on the server." I
&gt; assume this apparent contradiction is due to some different use of terms,
&gt; that "stored context" doesn't mean what one would reasonably assume it
&gt; means, or something. If this is a different usage of the terms, they should
&gt; be defined somewhere.
&gt;
&gt; My current guess is that "understand" means that the communications layer
&gt; can read the request and generate a valid response, including the case
&gt; where the POST goes missing and it must return a 404: that it still
&gt; "understands" the request even though the app can't process it since the
&gt; depends on a previous request.
&gt;
&gt; But then it gets really odd with claims like "the server doesnt have to
&gt; manage resource usage across requests." How is a POSTed query not a
&gt; resource on the server that must be managed across requests? Again, if this
&gt; is to make sense then the terms must have something other than their usual
&gt; meaning. Is it "manage"? Maybe the server doesn't "manage" the resource
&gt; because the client directs the creation of it? But, then, the server will
&gt; have to manage the destruction of it, because a server can't allow clients
&gt; to create an unbounded number of transient "query" objects and count on the
&gt; clients to clean up after themselves. So what does that phrase mean?
&gt;   
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19342<br>
Sender:Will Hartung &lt;willh@...&gt;<br>
Post Date/Time:2013-04-23 17:39:33<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Tue, Apr 23, 2013 at 9:14 AM, Brian Craft &lt;craft.brian@...&gt; wrote:

&gt; **
&gt; What does "understand" mean in this sentence? I'm not aware of a technical
&gt; definition of "understand" as it applies to computer systems, and it's not
&gt; defined in the paper. Again, take the "query by POST" pattern. The eventual
&gt; GET depends on a previous POST. Does the server "understand" a request that
&gt; depends on a previous request? What about "stored context"? One would
&gt; reasonably believe that POSTing a query creates stored context on the
&gt; server which later requests may take advantage of. But this sentence says
&gt; that it must not "take advantage of any stored context on the server." I
&gt; assume this apparent contradiction is due to some different use of terms,
&gt; that "stored context" doesn't mean what one would reasonably assume it
&gt; means, or something. If this is a different usage of the terms, they should
&gt; be defined somewhere.
&gt;

Let's take this as a specific example:

POST /createquery

&lt;lots of query information&gt;

returns
301
Location: /queryresult/1234

POSTing to create query creates a query result, and then redirects you to
that identifier. The query result is a resource, you can GET that result
all day long. Is that result dynamic? Is it a cached result set? That's up
to the service to decide. The system may well delete all query results
after 1hr. That's valid too.

It can also tie that result specifically to you, in that it only lets you,
who authorized as Brian, access query result 1234.

But you can see, that POST /createquery has clearly defined semantics -- it
creates a query result. Then, GET /queryresult/&lt;resultid&gt; returns that
information that was previously created.

Now, consider:

GET /latestqueryresult

Which returns "the most recent query result for the user".

Does this violate "cannot take advantage of any stored context on the
server"?

We can easily see the /createquery process creating not just a
/queryresult, but a /latestquery/brian result. There's no limitation about
a process creating affecting a single resource.

All of the information required to achieve the result is in the request:
the URL itself (/latestqueryresult) as well as the identification of the
user (Authorization: ...). It's also pretty well accepted that the
Authorization header can affect the outcome of a request. And if there's
anything that an Authorization header represents, it's store context on the
server.

Well, now, how does an Authorization header get any more credence to affect
an operation than a Cookie header?

So, what we're now stumbling in to is the definition of "Request". What
does a request consist of? Just the URL? URL and Authorization Header? What
about the Accept headers? They must count for something. So how is a cookie
any different? Or any other additional header?

The issue isn't so much the request itself, it's not an issue with cookies
per se. It's an issue of misuse on the server. Specifically Sessions.

It's a problem with hidden conversational state, however manifested (you
can represent a Session ID with a query fragment, for example). It goes
toward the goal of coarse, self contained transactions being a fundamental
core principal of the REST architecture. It's a "spirit of the rule" vs the
"letter of the law". As a general rule, you should be able to take requests
wholesale, hand them to any server in the system and get the proper result.
Making the requests work on first class resources, rather than
conversational state discreetly maintained, empowers things like proxies,
caching, serendipitous reuse.

For example, when you POST to /createquery, perhaps instead of creating a
new queryresult, the system realized it already had one that was "current
enough" and simply returns the URL to that one. You can easily see
something like Google doing that. Internally caching popular queries for a
minute.

But any item typically considered as conversational state can be uplifted
to a first class resource (the Transaction pattern being a germane
example). The loss of implicit stored server context makes you rethink the
problem and bring all of these attributes in to the open, where they can be
analyzed more readily, and perhaps repurposed later. Having first class
resources means that everything shares the same fundamental properties.
Improve the capabilities of these of that foundation, and you potentially
uplift the entire infrastructure.

-- 
CONFIDENTIALITY NOTICE: The information contained in this electronic 
transmission may be confidential. If you are not an intended recipient, be 
aware that any disclosure, copying, distribution or use of the information 
contained in this transmission is prohibited and may be unlawful. If you 
have received this transmission in error, please notify us by email reply 
and then erase it from your computer system.
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19343<br>
Sender:Stan Dyck &lt;stan.dyck@...&gt;<br>
Post Date/Time:2013-04-23 17:43:27<br>
Subject:Re: [rest-discuss] Re: REST is Kafkarchitecture<br>
Message:<br><br>
<pre>On 04/23/2013 09:30 AM, Will Hartung wrote:
&gt; On Mon, Apr 22, 2013 at 7:06 PM, Erik Wilde &lt;dret@... &lt;mailto:dret%40berkeley.edu&gt;&gt; wrote:
&gt;
&gt;  &gt; thanks for bringing up that example. i have decided for a while now that
&gt;  &gt; traditional (pre-electronic) forms-based business processes are *the*
&gt;  &gt; perfect example to explain everything there is to explain about REST.
&gt;
&gt; Oh, I agree about the analogy, though I haven't put enough thought in
&gt; to a REST idiom that doesn't fit.
&gt;
&gt; However, I have another example to share.
&gt;

I love this line of thinking. I confess I spend a lot of time thinking up these kind of examples. This is about the only 
place where I don't feel weird admitting that. Can I submit my favorite example?

Pretty much every (perhaps every?) interaction you have at the airport can be considered to be part of a huge RESTful 
system. Furthermore, it implements a lot of things people have trouble with wrt REST. Authentication, authorization and 
transaction ordering for example. Some interactions are idempotent (e.g. getting a boarding pass), some are not (e.g. 
boarding a plane). The back end processes (i.e. airport/airline/security people) may use stateful systems for various 
reasons, but you (the client) don't generally need any knowledge of them.

Baggage checking is kind of fun to think about. You make a POST-like request to a particular address (the airline 
counter) submitting your luggage and receive in return a ticket that is a kind of resource representation of your bags. 
At the other end of your flight you use that ticket to do a GET-like request to a different address (baggage carousel) 
to retrieve those bags. If the carousel doesn't return your baggage, you get redirected to a desk where you submit the 
same ticket to someone who will (hopefully) locate the resource.

There are lots more examples you can come up with the next time you're looking for something to do while sitting in an 
airport.

StanD.

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19344<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-04-23 18:14:23<br>
Subject:Re: [rest-discuss] Re: REST is Kafkarchitecture<br>
Message:<br><br>
<pre>hello stan.

&gt; I love this line of thinking. I confess I spend a lot of time thinking up these kind of examples. This is about the only
&gt; place where I don't feel weird admitting that. Can I submit my favorite example?

that's a good one! and essentially i guess you can see an airport as a 
loosely coupled decentralized bureaucracy apparatus that isn't all that 
different from 19th century offices (well, except for the airplanes 
instead of horse carriages, of course).

my favorite "RESTful airport" anecdote: i once lost my ticket (back in 
the days, when you still had to have a paper ticket for flying) and the 
airline people honestly wanted me to buy a complete new one, telling me 
(in REST terms) that the ticket state was all on my side and they did 
not have any record of it. which of course wasn't true and just a matter 
of policy, but that was their explanation. they ended up creating the 
obvious wrong explanation for their policy (which of course was 
implemented for money reasons, and not for technical reasons). you 
could, btw, fairly easily create passenger systems that would work like 
this, only keeping anonymized passenger state (for keeping passenger 
count) on the service side. again, a fun design exercise to think about, 
but i think the TSA might have something against implementing a system 
like that.

cheers,

dret.

-- 
erik wilde | mailto:dret@...  -  tel:+1-510-2061079 |
            | UC Berkeley  -  School of Information (ISchool) |
            | http://dret.net/netdret http://twitter.com/dret |

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19345<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-04-23 21:26:02<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Apr 22, 2013, at 6:37 PM, Will Hartung &lt;willh@...&gt; wrote:
&gt; See if reading this helps at all, as it talks not so much to state
&gt; directly, but to sessions (which is what most folks are struggling
&gt; with when it comes to state in REST).
&gt; 
&gt; Feel free to hit back with questions.
&gt; 
&gt; http://stackoverflow.com/questions/1296421/rest-complex-applications/1297275#1297275

Thanks.  It took several readings but I think I've got some better idea of issues with sessions but not with understanding state.

What I derived from your SO post is that the issue with session is that its use can change the meaning of resource identifiers, i.e. if a cookie has "user ID" and the URL is "/cart/new" then the URLs identify changes depending on the user but it would not change with "/carts/{user_ID}/new?"  

So it would appear that the issue with session is actually an issue with HTTP headers implicitly contributing to the identity of a resource?  If yes I think I can get my head around that but will need think about it when I encounter more use-cases to see if I can always apply it.

However I'm still struggling with the concept of "state," and "application" state being different from some other kind of "bad" state for which I can't seem to wrap my head around. Now I do understand how the HTTPS state is different; it's state is at a different layer of architecture and those of us programming at the HTTP level can just assume it. But what is an example of "bad" state at the application level? I know that "sessions" have been called "bad" state, but are there other examples of "bad" state?

And why are sessions bad?  Is it merely because of the identity problem mentioned above, or is it the fact that sessions disappear after a timeout and they would be okay if we created them explicitly and killed them explicitly?  Or is it something else?

Again, thanks for helping me understand this. If I can finally grok it then it will be much easier to explain it to people who come to me asking for help.

-Mike 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19346<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-04-23 21:33:50<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Apr 23, 2013, at 1:33 PM, Mike Kelly &lt;mikekelly321@...&gt; wrote:
&gt; if the client posts to a /query endpoint and then makes a get to a generic /result endpoint then the state (or context) is implicitly carried over and therefore there is no visibility in the second request. I.e there is shared state and the constraint is violated.
&gt; 
That's very helpful. 

But may I ask for how that shared state might be implemented in an API?  I understand how it is implemented on the web where people login and surf, and I can guess at how it might be implemented for an API but it would be instructive if you could give some explicit examples of implementations to avoid.  HTTP headers containing context?

Would it be accurate to say that "requests need to be context-free" or even "requests should not depend on HTTP headers for resource identification"  than "stateless" considering the overloaded use of state? When one considers that a client can change server state and future client requests to the service will cause different behaviors based on what the requests the client previously made, that muddies the waters of of the use of the term "stateless", no?

-Mike

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19347<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-04-23 21:43:04<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Apr 23, 2013, at 1:39 PM, Will Hartung &lt;willh@...&gt; wrote:
&gt; The issue isn't so much the request itself, it's not an issue with cookies per se. It's an issue of misuse on the server. Specifically Sessions.
&gt; 
&gt; It's a problem with hidden conversational state, however manifested (you can represent a Session ID with a query fragment, for example). It goes toward the goal of coarse, self contained transactions being a fundamental core principal of the REST architecture. It's a "spirit of the rule" vs the "letter of the law". As a general rule, you should be able to take requests wholesale, hand them to any server in the system and get the proper result. Making the requests work on first class resources, rather than conversational state discreetly maintained, empowers things like proxies, caching, serendipitous reuse. 
&gt; 
&gt; For example, when you POST to /createquery, perhaps instead of creating a new queryresult, the system realized it already had one that was "current enough" and simply returns the URL to that one. You can easily see something like Google doing that. Internally caching popular queries for a minute.
&gt; 
&gt; But any item typically considered as conversational state can be uplifted to a first class resource (the Transaction pattern being a germane example). The loss of implicit stored server context makes you rethink the problem and bring all of these attributes in to the open, where they can be analyzed more readily, and perhaps repurposed later. Having first class resources means that everything shares the same fundamental properties. Improve the capabilities of these of that foundation, and you potentially uplift the entire infrastructure.

I missed this prior to my other two recent emails to the list.

So the problem with sessions is "implicitness" and not HTTP headers because authentication headers are okay, right?

If we ensure all information needed to process an HTTP request is explicitly specified in the URL, the content body and/or the headers then we are "stateless" with respect to the requirements of REST; is that a correct statement?

-Mike
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19348<br>
Sender:"Jorn Wildt" &lt;jw@...&gt;<br>
Post Date/Time:2013-04-24 04:01:16<br>
Subject:Teaching REST - the missing link<br>
Message:<br><br>
<pre>It seems to me that most, if not all, examples of REST begins like this:
"Assume we have some service X with different kinds of resources R1, R2,
..., Rn". The better example will not go into details about URL
structures and some will even show how hyper media can be used to link
the resources together.

But something is fundamentally wrong with this approach; it has the
underlying assumption that service X is the one and only service on the
whole Internet that implements resources R1-Rn - and that assumption
makes it difficult for the readers to actually understand the core
drivers of REST as being a style for globally distributed systems. It
plain and simply misses the fact that many different servers, from
different independent organizations, may implement those resources
R1-Rn.

This approach fails to illustrate the problem of keeping many different
client and servers in sync. And it fails to illustrate why URLs and
especially hyper media are such good things. Why? Because singe service
URLs have static URL templates - and using hyper media on the client
side seems like totally overkill when the client might as well use the
templates directly.

So allow me to give a slightly different example. It begins like this:
"Assume we have resources R1, R2, ..., Rn hosted by different
independent services". Now we can start talking about the benefits of
hyper media since there would be no predefined URL templates to look at.

So how would such an example look? Let me try to present one:

In a (distributed) teaching application we have resources that represent
Schools, Classes, Teachers and Students. These resources are hosted on a
"per province" basis - meaning that each province in the country has its
own servers that hosts one or more schools belonging to the province.
These servers are implemented independently and by different vendors and
there is no central specification of any URL structures.

Now, given the URL to a single teacher we can GET a JSON representation
of her including references to the classes she teaches:

{
   Name: "Louise Nelson",
   Classes:
   [
     {
       Name: "Science",
       Self: "http://province-a.edu/moobar/classes/98x-yy"
     },
     {
       Name: "History",
       Self: "http://another-province.edu/~his/classes?cid=123"
     }
   ]
}

As can be seen from the concrete URL examples there is no URL template
in the world that a client of this system can depend on. Now it makes
much more sense to use hyper media - how else would the client know how
to get more information about the classes Louise Nelson teaches?

So, do you agree with this? Are existing examples really like I claim or
have I overlooked something? Should we, as the community of experienced
REST scholars, create new and better examples?

Thanks, Jørn


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19349<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-04-24 09:09:13<br>
Subject:Re: [rest-discuss] Teaching REST - the missing link<br>
Message:<br><br>
<pre>"Jorn Wildt" wrote:
&gt; 
&gt; So, do you agree with this? Are existing examples really like I claim
&gt; or have I overlooked something? Should we, as the community of
&gt; experienced REST scholars, create new and better examples?
&gt; 

Agree, mostly.  Good luck, though... see my similar thread from a few
years ago, which devolved into a months-long debate on media types...

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19350<br>
Sender:=?ISO-8859-1?Q?J=F8rn_Wildt?= &lt;jw@...&gt;<br>
Post Date/Time:2013-04-24 09:22:05<br>
Subject:Re: [rest-discuss] Teaching REST - the missing link<br>
Message:<br><br>
<pre>I was deliberately very cautious about NOT mentioning media types ;-)

"Don't mention the war ..." (http://en.wikipedia.org/wiki/The_Germans)

/Jørn


On Wed, Apr 24, 2013 at 11:09 AM, Eric J. Bowman &lt;eric@...&gt;wrote:

&gt; **
&gt;
&gt;
&gt; "Jorn Wildt" wrote:
&gt; &gt;
&gt; &gt; So, do you agree with this? Are existing examples really like I claim
&gt; &gt; or have I overlooked something? Should we, as the community of
&gt; &gt; experienced REST scholars, create new and better examples?
&gt; &gt;
&gt;
&gt; Agree, mostly. Good luck, though... see my similar thread from a few
&gt; years ago, which devolved into a months-long debate on media types...
&gt;
&gt; -Eric
&gt;
&gt;  
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19351<br>
Sender:"Markus Lanthaler" &lt;markus.lanthaler@...&gt;<br>
Post Date/Time:2013-04-24 17:23:26<br>
Subject:RE: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Tuesday, April 23, 2013 11:43 PM, Mike Schinkel wrote:

&gt; I missed this prior to my other two recent emails to the list.
&gt; 
&gt; So the problem with sessions is "implicitness" and not HTTP headers
&gt; because authentication headers are okay, right?

No, it's not their "implicitness" it is because the server has to keep track
of the clients. The server typically creates a small file (or DB entry) in
which he puts session information about the client. You need to replicate
that to all servers if you want to scale such a system.

Authentication headers on the other hand contain all the necessary
information to authenticate a user on every request (think username +
password). It doesn't have to keep any state about the client. The more
servers you add, the more client requests you are able to handle.


&gt; If we ensure all information needed to process an HTTP request is
&gt; explicitly specified in the URL, the content body and/or the headers
&gt; then we are "stateless" with respect to the requirements of REST; is
&gt; that a correct statement?

Yes.. you should also add that a request *must not* depend on a previous
request (the use of a session ID, e.g., does)


Cheers,
Markus


--
Markus Lanthaler
@markuslanthaler


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19352<br>
Sender:Mark Baker &lt;distobj@...&gt;<br>
Post Date/Time:2013-04-24 18:23:41<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Tue, Apr 23, 2013 at 12:14 PM, Brian Craft &lt;craft.brian@...&gt; wrote:
&gt;&gt; &gt; Fielding's definition didn't do much for me, because the terms aren't
&gt;&gt; &gt; adequately defined,
&gt;&gt;
&gt;&gt; They are, and the definition is most definitely adequate, trust me on
&gt;&gt; that.
&gt;
&gt;
&gt; I don't agree. Take this statement, for example:
&gt;
&gt; "Each request from client to server must contain all of the information
&gt; necessary to understand the request, and cannot take advantage of any stored
&gt; context on the server. "
&gt;
&gt; What does "understand" mean in this sentence? I'm not aware of a technical
&gt; definition of "understand" as it applies to computer systems, and it's not
&gt; defined in the paper.

This is what I'm talking about when I suggest focusing on the
interface, aka the message.

HTTP messages are generally sent between parties that know nothing of
each other, so "understand" here means exactly that; that the meaning
of the message can be understood by the recipient so its clear what
the sender is asking be done when it sends the message.

&gt; Again, take the "query by POST" pattern. The eventual
&gt; GET depends on a previous POST. Does the server "understand" a request that
&gt; depends on a previous request? What about "stored context"? One would
&gt; reasonably believe that POSTing a query creates stored context on the server
&gt; which later requests may take advantage of. But this sentence says that it
&gt; must not "take advantage of any stored context on the server." I assume this
&gt; apparent contradiction is due to some different use of terms, that "stored
&gt; context" doesn't mean what one would reasonably assume it means, or
&gt; something. If this is a different usage of the terms, they should be defined
&gt; somewhere.
&gt;
&gt; My current guess is that "understand" means that the communications layer
&gt; can read the request and generate a valid response, including the case where
&gt; the POST goes missing and it must return a 404: that it still "understands"
&gt; the request even though the app can't process it since the depends on a
&gt; previous request.
&gt;
&gt; But then it gets really odd with claims like "the server doesnt have to
&gt; manage resource usage across requests." How is a POSTed query not a resource
&gt; on the server that must be managed across requests?

It is, but the *meaning* of future messages doesn't change if the
state of that resource changes.

Mark.

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19353<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-04-24 21:25:26<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>Hi Mark,

I'm really struggling to get the nuances with this, hoping you can help.

On Apr 24, 2013, at 2:23 PM, Mark Baker &lt;distobj@...&gt; wrote:
&gt; It is, but the *meaning* of future messages doesn't change if the
&gt; state of that resource changes.

If that is absolutely true, then how can REST implement workflow or transactions? For example (admittedly trivial, but the pattern could be applied to something much less than trivial):

GET /client/abc123/accounts
---&gt; 200 ok, [ { "account": "checking", "balance": 500.00 },{ "account": "savings", "balance": 100.00 }]

POST /client/abc123/account-transfer/new
---&gt; 200 ok, Location: /account-transfer/12345

PUT /client/abc123/account-transfer/12345/checking
balance=350
---&gt; 200 ok

PUT /client/abc123/account-transfer/12345/savings
balance=250
---&gt; 200 ok

POST /client/abc123/account-transfer/12345
action=commit
---&gt; 200 ok

In the real world I can come up with all kind of other examples where an action based on a POST would be different based on POSTs and PUTs that came before it, or the thing that needs to be accomplished cannot be. So my intuition tells me that there must be some kind of state that is okay and some kind of state that is bad but the more questions I ask the less I'm confident that I understand the answer. Based on your comment I would be driven to think that systems cannot implement workflow or transactions and still be RESTful. 

So I'm hoping you can break the mental logjam for me.

-Mike</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19354<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-04-24 22:11:40<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Apr 24, 2013, at 1:23 PM, Markus Lanthaler &lt;markus.lanthaler@...&gt; wrote:
&gt; No, it's not their "implicitness" it is because the server has to keep track
&gt; of the clients. The server typically creates a small file (or DB entry) in
&gt; which he puts session information about the client. You need to replicate
&gt; that to all servers if you want to scale such a system.
&gt; 

So earlier in the thread I asked[1] if a shopping cart or transaction that creates a DB entry violates the stateless requirement and the only person who answered said it did not[2]. 

Is he wrong and if so then are RESTful systems not able to do workflow or transactions?  Or is he correct and there is some other nuance that differentiates between a session and a shopping cart or a transaction?
&gt; Yes.. you should also add that a request *must not* depend on a previous
&gt; request (the use of a session ID, e.g., does)
&gt; 

I just asked Mark Baker today about this giving an example transaction that does depend on a previous request[3] which was similar to what was recommended in Richardson &amp; Ruby's REST book. So I'll repeat the above question: are RESTful systems not able to do workflow or transactions?  Or is there some other nuance that differentiates between a session and a shopping cart or a transaction?

I'm not trolling, I'm honestly trying to come up with a way to understand Roy's Rules of REST in a concrete,  objective and unambiguous manner so I can be sure that I'm always employing them correctly and I don't feel I can do that yet.

-Mike

[1] http://tech.groups.yahoo.com/group/rest-discuss/message/19326
[2] http://tech.groups.yahoo.com/group/rest-discuss/message/19327
[3] http://tech.groups.yahoo.com/group/rest-discuss/message/19353</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19355<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-04-24 23:09:06<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>
On 25.04.2013, at 00:11, Mike Schinkel &lt;mike@...&gt; wrote:

&gt;&gt; 
&gt; I just asked Mark Baker today about this giving an example transaction that does depend on a previous request[3] which was similar to what was recommended in Richardson &amp; Ruby's REST book. So I'll repeat the above question: are RESTful systems not able to do workflow or transactions?  Or is there some other nuance that differentiates between a session and a shopping cart or a transaction?

Try this:
http://lists.w3.org/Archives/Public/www-tag/2010Oct/0100.html

Jan


&gt; 
&gt; I'm not trolling, I'm honestly trying to come up with a way to understand Roy's Rules of REST in a concrete,  objective and unambiguous manner so I can be sure that I'm always employing them correctly and I don't feel I can do that yet.
&gt; 
&gt; -Mike
&gt; 
&gt; [1] http://tech.groups.yahoo.com/group/rest-discuss/message/19326
&gt; [2] http://tech.groups.yahoo.com/group/rest-discuss/message/19327
&gt; [3] http://tech.groups.yahoo.com/group/rest-discuss/message/19353
&gt; 
&gt; 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19356<br>
Sender:Mark Baker &lt;distobj@...&gt;<br>
Post Date/Time:2013-04-25 00:37:06<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>Hi Mike,

On Wed, Apr 24, 2013 at 5:25 PM, Mike Schinkel &lt;mike@...&gt; wrote:
&gt; Hi Mark,
&gt;
&gt; I'm really struggling to get the nuances with this, hoping you can help.
&gt;
&gt; On Apr 24, 2013, at 2:23 PM, Mark Baker &lt;distobj@...&gt; wrote:
&gt;
&gt; It is, but the *meaning* of future messages doesn't change if the
&gt; state of that resource changes.
&gt;
&gt;
&gt; If that is absolutely true, then how can REST implement workflow or
&gt; transactions? For example (admittedly trivial, but the pattern could be
&gt; applied to something much less than trivial):
&gt;
&gt; GET /client/abc123/accounts
&gt; ---&gt; 200 ok, [ { "account": "checking", "balance": 500.00 },{ "account":
&gt; "savings", "balance": 100.00 }]
&gt;
&gt; POST /client/abc123/account-transfer/new
&gt; ---&gt; 200 ok, Location: /account-transfer/12345
&gt;
&gt; PUT /client/abc123/account-transfer/12345/checking
&gt; balance=350
&gt; ---&gt; 200 ok
&gt;
&gt; PUT /client/abc123/account-transfer/12345/savings
&gt; balance=250
&gt; ---&gt; 200 ok
&gt;
&gt; POST /client/abc123/account-transfer/12345
&gt; action=commit
&gt; ---&gt; 200 ok
&gt;
&gt;
&gt; In the real world I can come up with all kind of other examples where an
&gt; action based on a POST would be different based on POSTs and PUTs that came
&gt; before it, or the thing that needs to be accomplished cannot be. So my
&gt; intuition tells me that there must be some kind of state that is okay and
&gt; some kind of state that is bad but the more questions I ask the less I'm
&gt; confident that I understand the answer. Based on your comment I would be
&gt; driven to think that systems cannot implement workflow or transactions and
&gt; still be RESTful.

Well, it sounds like you have a far narrower view than I do of what
constitutes "workflow" or "transactions", but yah, what you've got
above is totally stateful.

Mark.

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19357<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-04-25 00:45:09<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Apr 24, 2013, at 8:37 PM, Mark Baker &lt;distobj@...&gt; wrote:
&gt; Well, it sounds like you have a far narrower view than I do of what
&gt; constitutes "workflow" or "transactions", but yah, what you've got
&gt; above is totally stateful.

Okay, can you explain a broader view?  An approach this is not stateful? 

-Mike

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19358<br>
Sender:Mark Baker &lt;distobj@...&gt;<br>
Post Date/Time:2013-04-25 01:34:16<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Wed, Apr 24, 2013 at 8:45 PM, Mike Schinkel &lt;mike@...&gt; wrote:
&gt; On Apr 24, 2013, at 8:37 PM, Mark Baker &lt;distobj@...&gt; wrote:
&gt;&gt; Well, it sounds like you have a far narrower view than I do of what
&gt;&gt; constitutes "workflow" or "transactions", but yah, what you've got
&gt;&gt; above is totally stateful.
&gt;
&gt; Okay, can you explain a broader view?  An approach this is not stateful?

Remember the days before electronic banking when we had to fill out
slips and submit them to a teller?

POST /transfer-request
{"from": "http://example.org/acct/12345",
 "to": "http://example.org/acct/12346",
 "amount": 300 }

Mark.

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19359<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-04-25 04:12:55<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Apr 24, 2013, at 9:34 PM, Mark Baker &lt;distobj@...&gt; wrote:

Thanks for the reply. 

&gt;&gt; Okay, can you explain a broader view?  An approach this is not stateful?
&gt; 
&gt; Remember the days before electronic banking when we had to fill out
&gt; slips and submit them to a teller?
&gt; 
&gt; POST /transfer-request
&gt; {"from": "http://example.org/acct/12345",
&gt; "to": "http://example.org/acct/12346",
&gt; "amount": 300 }


Yes, of course. 

But you did what I was afraid of as I was writing my question; you took my example where I deliberately broke out into multiple requests to *illustrate* situations where state across requests is required and you changed it to be trivial which seems to imply there are no applicable use-cases that need multiple requests.  

The 2nd reason I chose that example is because it was effectively the same as the recommendation for "batch operations" that Richardson &amp; Ruby used on page 230 of RESTful Web Services, First Edition which followed page 222 that explained why "stateless" is so important.  This implies either batch operations are not the same kind of state that Roy admonishes against, or that Richardson &amp; Ruby where blissfully unaware of the irony of that recommendation juxtaposed with the discussion of the stateless requirement just 8 pages apart. And if the latter then I would ask it is even possible to create a RESTful system that has batch operations?

Anyway, let me take your example which I assume is RESTful and ask my question another way. It seems to me that if I started with a state of "500" in account "12345" and "0" in account "12346" and do your POST example I end up with "200" and "300" in the accounts, respectively.

However if I now do your POST example *again* it will fail, because I don't have enough money in the "from" account to complete the transaction.  So how are the account balances not "state" in the context of Roy's "stateless" requirement?

If you tell me the reality is that most non-trivial uses-cases for a web APIs actually need to be stateful in some ways and that the "stateless" requirement for REST is an ideal that has benefits when it can be achieved but is often impossible to realize then I think I'd be finally coming to an understanding of the stateless requirement.  :-)

But if you say "No, stateless can be achieved in most cases" then I'm even more lost than when I started asking questions on this thread a few days ago. :-(

-Mike</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19360<br>
Sender:Greg Young &lt;gregoryyoung1@...&gt;<br>
Post Date/Time:2013-04-25 07:40:35<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>Remember back in the days when they had manilla envelopes and mail guys in
companies?

As an example they were bringing you an employee handbook. It was in a
manilla envelope with a piece of paper for you to sign. You took out the
manual signed the paper then looked back at the envelope...

Your Name
Your Boss's Name
The HR Person
Legal

You would scratch off your name from the top of the list then put it to the
mail guy would bring it to your boss to sign. Your boss would sign it and
then scratch off their name and it would go to the HR person who would do
the same and finally it would go to legal. We could also designate error
handling through this process by either backtracking or designating a route
for error conditions.

This pattern is capable of both handling transactional and workflow type
behaviours and is known as a saga. It can easily be implemented over a
RESTful API.

Cheers,

Greg

On Thu, Apr 25, 2013 at 7:12 AM, Mike Schinkel &lt;mike@...t&gt; wrote:

&gt; **
&gt;
&gt;
&gt; On Apr 24, 2013, at 9:34 PM, Mark Baker &lt;distobj@acm.org&gt; wrote:
&gt;
&gt; Thanks for the reply.
&gt;
&gt; Okay, can you explain a broader view?  An approach this is not stateful?
&gt;
&gt;
&gt; Remember the days before electronic banking when we had to fill out
&gt; slips and submit them to a teller?
&gt;
&gt; POST /transfer-request
&gt; {"from": "http://example.org/acct/12345",
&gt; "to": "http://example.org/acct/12346",
&gt; "amount": 300 }
&gt;
&gt;
&gt; Yes, of course.
&gt;
&gt; But you did what I was afraid of as I was writing my question; you took my
&gt; example where I deliberately broke out into multiple requests to
&gt; *illustrate* situations where state across requests is required and you
&gt; changed it to be trivial which seems to imply there are no applicable
&gt; use-cases that need multiple requests.
&gt;
&gt; The 2nd reason I chose that example is because it was effectively the same
&gt; as the recommendation for "batch operations" that Richardson &amp; Ruby used on
&gt; page 230 of RESTful Web Services, First Edition which followed page 222
&gt; that explained why "stateless" is so important.  This implies either batch
&gt; operations are not the same kind of state that Roy admonishes against, or
&gt; that Richardson &amp; Ruby where blissfully unaware of the irony of that
&gt; recommendation juxtaposed with the discussion of the stateless requirement
&gt; just 8 pages apart. And if the latter then I would ask it is even possible
&gt; to create a RESTful system that has batch operations?
&gt;
&gt; Anyway, let me take your example which I assume is RESTful and ask my
&gt; question another way. It seems to me that if I started with a state of
&gt; "500" in account "12345" and "0" in account "12346" and do your POST
&gt; example I end up with "200" and "300" in the accounts, respectively.
&gt;
&gt; However if I now do your POST example *again* it will fail, because I
&gt; don't have enough money in the "from" account to complete the transaction.
&gt;  So how are the account balances not "state" in the context of Roy's
&gt; "stateless" requirement?
&gt;
&gt; If you tell me the reality is that most non-trivial uses-cases for a web
&gt; APIs actually need to be stateful in some ways and that the "stateless"
&gt; requirement for REST is an ideal that has benefits when it can be achieved
&gt; but is often impossible to realize then I think I'd be finally coming to an
&gt; understanding of the stateless requirement.  :-)
&gt;
&gt; But if you say "No, stateless can be achieved in most cases" then I'm even
&gt; more lost than when I started asking questions on this thread a few days
&gt; ago. :-(
&gt;
&gt;
&gt; -Mike
&gt;
&gt;  
&gt;



-- 
Le doute n'est pas une condition agréable, mais la certitude est absurde.
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19361<br>
Sender:Alexander Johannesen &lt;alexander.johannesen@...&gt;<br>
Post Date/Time:2013-04-25 08:00:17<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>Hiya,

Mike Schinkel &lt;mike@...&gt; wrote:
&gt; But if you say "No, stateless can be achieved in most cases" then I'm
&gt; even more lost than when I started asking questions on this thread
&gt;  a few days ago. :-(

The state in question is really about how atomic the request is supposed to
be, and that it's not to rely on any other state not included in the
request. The typical example is doing a request that relies on information
stored in a session, for example.

Here's the simplest way to think about it; all that you need, you bring
with you. If the workflow is 10 steps, bring with you all 10 steps, and
mark them accordingly. The state of the workflow is all of them together,
and to change that state, you request them as a group, change the bits you
need to change, and put/post them all back.

Obviously, most people don't do this, even though it's the most RESTful
way, but this is why the manilla envelope is used; you bring the whole
thing with you, tick off your part of the 'workflow', and pass it on. This
way we make sure the state of the manilla envelope is correct. This
guarantees that state is transferred correctly. Yeah, there's the price of
the payload, but I haven't seen an example yet where that is an *actual*
problem rather than possible.

Hope that makes it a bit clearer for you.

Regards,

Alex
--
Project Wrangler, SOA, Information Alchemist, UX, RESTafarian, Topic Maps
--- http://shelter.nu/blog/ ----------------------------------------------
------------------ http://www.google.com/profiles/alexander.johannesen ---
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19362<br>
Sender:"Markus Lanthaler" &lt;markus.lanthaler@...&gt;<br>
Post Date/Time:2013-04-25 08:15:11<br>
Subject:RE: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>Hi Mike,

I'm trying to consolidate all your questions in the various sub-threads
answer them in a single mail.

&gt; If that is absolutely true, then how can REST implement workflow or
&gt; transactions? For example (admittedly trivial, but the pattern could
&gt; be applied to something much less than trivial):
&gt; 
&gt; GET /client/abc123/accounts
&gt; ---&gt; 200 ok, [ { "account": "checking", "balance": 500.00 },
&gt;                { "account": "savings", "balance": 100.00 }]
&gt; POST /client/abc123/account-transfer/new
&gt; ---&gt; 200 ok, Location: /account-transfer/12345
&gt; PUT /client/abc123/account-transfer/12345/checking
&gt; balance=350
&gt; ---&gt; 200 ok
&gt; 
&gt; PUT /client/abc123/account-transfer/12345/savings
&gt; balance=250
&gt; ---&gt; 200 ok
&gt; 
&gt; POST /client/abc123/account-transfer/12345
&gt; action=commit
&gt; ---&gt; 200 ok
&gt; 
&gt; In the real world I can come up with all kind of other examples where
&gt; an action based on a POST would be different based on POSTs and PUTs
&gt; that came before it, or the thing that needs to be accomplished cannot
&gt; be. So my intuition tells me that there must be some kind of state
&gt; that is okay and some kind of state that is bad but the more questions
&gt; I ask the less I'm confident that I understand the answer. Based on
&gt; your comment I would be driven to think that systems cannot implement
&gt; workflow or transactions and still be RESTful.

That's true and I think that's where your confusion comes from. There are
indeed two types of states: application state and resource state.

The statelessness of REST is about the application state. The client is
responsible for the application state. For example, if you browse through a
paginated collection the server must not keep track of the last page the
client visited. That's up to client. Obviously the server could store that
information in a session record but that would lead to reduced scalability.

On the other hand there's resource state. That's the state the server is
responsible for. Every HTML page you are able to retrieve on the Web
represents such resource state. The difference is that that state is not
bound to a single client but available to all clients (given they are
authorized).

The example above is stateless in that respect. Any client knowing the
account transfer ID can go and modify it. I would change the last POST to a
PUT because otherwise you wouldn't be able to repeat the commit if the POST
fails. If the server receives another commit for an already committed
transfer it can simply ignore it. Obviously cancelling a committed transfer
would have to result in an error. 


&gt; On Apr 24, 2013, at 1:23 PM, Markus Lanthaler wrote:
&gt; &gt; No, it's not their "implicitness" it is because the server has to keep
&gt; &gt; track of the clients. The server typically creates a small file (or DB
&gt; &gt; entry) in which he puts session information about the client. You need
&gt; &gt; to replicate that to all servers if you want to scale such a system.
&gt; 
&gt; So earlier in the thread I asked[1] if a shopping cart or transaction
&gt; that creates a DB entry violates the stateless requirement and the
&gt; only person who answered said it did not[2].

That's true. It does not because it is resource state. In a Web API a
shopping cart IMO however doesn't make much sense. Just create directly an
order.


&gt; Is he wrong and if so then are RESTful systems not able to do workflow
&gt; or transactions?  Or is he correct and there is some other nuance that
&gt; differentiates between a session and a shopping cart or a transaction?

Hope the explanation above answered this question.


&gt; &gt; Yes.. you should also add that a request *must not* depend on a
&gt; &gt; previous request (the use of a session ID, e.g., does)
&gt; 
&gt; I just asked Mark Baker today about this giving an example transaction
&gt; that does depend on a previous request[3] which was similar to what
&gt; was recommended in Richardson &amp; Ruby's REST book. So I'll repeat the
&gt; above question: are RESTful systems not able to do workflow or
&gt; transactions?  Or is there some other nuance that differentiates
&gt; between a session and a shopping cart or a transaction?

See above.


&gt; I'm not trolling, I'm honestly trying to come up with a way to
&gt; understand Roy's Rules of REST in a concrete,  objective and
&gt; unambiguous manner so I can be sure that I'm always employing them
&gt; correctly and I don't feel I can do that yet.

No need to apologize :-)


&gt; On Apr 24, 2013, at 9:34 PM, Mark Baker &lt;distobj@...&gt; wrote:
&gt; &gt; Remember the days before electronic banking when we had to fill out
&gt; &gt; slips and submit them to a teller?
&gt; &gt; 
&gt; &gt; POST /transfer-request
&gt; &gt; {"from": "http://example.org/acct/12345",
&gt; &gt; "to": "http://example.org/acct/12346",
&gt; &gt; "amount": 300 }

This is a particularly bad example IMHO. What would do if the POST fails?
For example if you lose your WiFi connection before you get a response?
Obviously you can't just repeat it. Mike's approach is much better in that
regard.


&gt; Anyway, let me take your example which I assume is RESTful and ask my
&gt; question another way. It seems to me that if I started with a state of
&gt; "500" in account "12345" and "0" in account "12346" and do your POST
&gt; example I end up with "200" and "300" in the accounts, respectively.
&gt; 
&gt; However if I now do your POST example *again* it will fail, because I
&gt; don't have enough money in the "from" account to complete the
&gt; transaction.  So how are the account balances not "state" in the
&gt; context of Roy's "stateless" requirement?

They are state - resource state however.


&gt; If you tell me the reality is that most non-trivial uses-cases for a
&gt; web APIs actually need to be stateful in some ways and that the
&gt; "stateless" requirement for REST is an ideal that has benefits when it
&gt; can be achieved but is often impossible to realize then I think I'd be
&gt; finally coming to an understanding of the stateless requirement.  :-)
&gt; 
&gt; But if you say "No, stateless can be achieved in most cases" then I'm
&gt; even more lost than when I started asking questions on this thread a
&gt; few days ago. :-(

All that counts is that the server doesn't need to keep track of client
state (= application state). As long as you do that, you can throw more
stateless boxes in front of your database (managing the resource state) to
scale your service. If the servers would need to manage client sessions
(again, application state) you can't do that so easily because.


Cheers,
Markus



--
Markus Lanthaler
@markuslanthaler


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19363<br>
Sender:Mark Baker &lt;distobj@...&gt;<br>
Post Date/Time:2013-04-25 14:37:26<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On 2013-04-25 12:12 AM, "Mike Schinkel" &lt;mike@...&gt; wrote:
&gt;
&gt;
&gt;
&gt; On Apr 24, 2013, at 9:34 PM, Mark Baker &lt;distobj@...&gt; wrote:
&gt;
&gt; Thanks for the reply.
&gt;
&gt;&gt;&gt; Okay, can you explain a broader view?  An approach this is not stateful?
&gt;&gt;
&gt;&gt;
&gt;&gt; Remember the days before electronic banking when we had to fill out
&gt;&gt; slips and submit them to a teller?
&gt;&gt;
&gt;&gt; POST /transfer-request
&gt;&gt; {"from": "http://example.org/acct/12345",
&gt;&gt; "to": "http://example.org/acct/12346",
&gt;&gt; "amount": 300 }
&gt;
&gt;
&gt;&gt; Yes, of course.
&gt;&gt;
&gt;&gt; But you did what I was afraid of as I was writing my question; you took my example where I deliberately broke out into multiple requests to *illustrate* situations where state across requests is required and you changed it to be trivial which seems to imply there are no applicable use-cases that need multiple requests.

I hear you, but part of the reason I did that was because I think it's
not required as often as you claim.


&gt;&gt;
&gt;&gt; The 2nd reason I chose that example is because it was effectively the same as the recommendation for "batch operations" that Richardson &amp; Ruby used on page 230 of RESTful Web Services, First Edition which followed page 222 that explained why "stateless" is so important.  This implies either batch operations are not the same kind of state that Roy admonishes against, or that Richardson &amp; Ruby where blissfully unaware of the irony of that recommendation juxtaposed with the discussion of the stateless requirement just 8 pages apart. And if the latter then I would ask it is even possible to create a RESTful system that has batch operations?

They sent me a free copy, but I admit to not having read that section.

As far as batch goes though, as a means of providing atomicity over a
stateless protocol, no, I can't imagine that it can be done RESTfully.
Somebody might prove me wrong though as I haven't given it much
thought.

If I can say, you seem to be coming from a very solution-driven place,
where you have a solution in mind and then try to map it back onto
REST. I would suggest trying the other way; starting only with your
"business" requirements and moving forward from there, staying within
the constraints of REST to inform you what a solution might look like.

&gt;&gt;
&gt;&gt; Anyway, let me take your example which I assume is RESTful and ask my question another way. It seems to me that if I started with a state of "500" in account "12345" and "0" in account "12346" and do your POST example I end up with "200" and "300" in the accounts, respectively.
&gt;&gt;
&gt;&gt; However if I now do your POST example *again* it will fail, because I don't have enough money in the "from" account to complete the transaction.  So how are the account balances not "state" in the context of Roy's "stateless" requirement?

That's getting to the point, but as I was suggesting to Brian, I don't
think that's a very productive question to ask.

The "fail" there is not a property of the message but of one
implementation's reaction to receiving and processing the message. The
latter is an implementation detail that REST cares nothing about. What
REST does care about is that the message itself is unambiguous about
its meaning, and that the meaning - "transfer 300 from A to B" -
doesn't change when the account balance changes. That's what makes it
stateless.

&gt;&gt;
&gt;&gt; If you tell me the reality is that most non-trivial uses-cases for a web APIs actually need to be stateful in some ways and that the "stateless" requirement for REST is an ideal that has benefits when it can be achieved but is often impossible to realize then I think I'd be finally coming to an understanding of the stateless requirement.  :-)
&gt;&gt;
&gt;&gt; But if you say "No, stateless can be achieved in most cases" then I'm even more lost than when I started asking questions on this thread a few days ago. :-(

I think it can be achieved in most cases, and IME, most of the cases
it *can't* are due to efficiency concerns, not because of any
conflicting business requirement.  Businesses have been communicating
(internally and externally) statelessly long before computers came
around.

Mark.

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19364<br>
Sender:"Robert Brewer" &lt;fumanchu@...&gt;<br>
Post Date/Time:2013-04-25 19:47:07<br>
Subject:RE: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>Hi Brian,

Markus came closest when he distinguished "application state" from "resource state". But even that doesn't quite go far enough until you define what an "application" is and understand what "state" is.

Lots of web developers think an "application" is "the code I wrote in Python or Ruby that runs on the server." But that is worlds apart from the way Roy uses it. He uses it in its original sense of "accomplishing a goal with something". Building a house is an application of (among other things) boards, nails, and a hammer.

Lots of web developers think that "state" means "data in my database". But that is worlds apart from the way Roy uses it. He uses it in its original sense of "the current node in a state machine." Let's say you supply boards and nails. If my application is "building a house", the "state" of my application is not how many boards and nails you have. It is not even how many boards and nails I have. It is how much of my house has been built. The state is advanced by building walls and assembling them together. Those have sub-states, some of which involve buying more boards and nails.

The interaction between me and you is "stateless" if I can buy boards and nails from you without you knowing anything about how much of my house has been built, or even if my application of what you provide is "building a house". If I have to talk to the same sales rep every time then it's not stateless. If I've bought 100 board feet and you pre-order another 900 board feet from your vendor because I'm building a house then it's not stateless. If you keep 1000 board feet on hand because building a house is a very common operation, then it might be stateless, because your business doesn't know anything about my application.

Now let's say you not only provide boards and nails, but also hammers, and plans, and labor, and installation. In fact, the house is built by you on your property. But I get to pick out the floorplan and curtain colors. The application has not changed. The state machine has not changed. The methods used to advance the application from one state to the next have not changed. What has changed?

    1) Who does which activity to advance the state machine. Most of it used to be me. Now most of it is you.
    2) Where the current node of the state machine is kept; that is, how much of my house has been built. That information used to be kept on my property. Now it is kept on your property.

The interaction between me and you can no longer be "stateless" because you know how much of my house has been built. If I ask you to change the floorplan or the curtain colors, first you have to authenticate me, and then you have to go to the property to inspect the state to see if you can comply with the request. That's two scalability problems you didn't have before. It doesn't mean you're not raking in the dough. But I'm no longer advancing the application state except at two points; in many cases, I'm not even doing that--I'm configuring the application state machine instead.


Robert Brewer
fumanchu@aminus.org
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19365<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-04-25 19:53:07<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>
On 25.04.2013, at 21:47, "Robert Brewer" &lt;fumanchu@...&gt; wrote:

&gt; Hi Brian, 
&gt; 
&gt; Markus came closest when he distinguished "application state" from "resource state". But even that doesn't quite go far enough until you define what an "application" is and understand what "state" is. 
&gt; 
&gt; Lots of web developers think an "application" is "the code I wrote in Python or Ruby that runs on the server." But that is worlds apart from the way Roy uses it. He uses it in its original sense of "accomplishing a goal with something". Building a house is an application of (among other things) boards, nails, and a hammer. 
&gt; 
&gt; Lots of web developers think that "state" means "data in my database". But that is worlds apart from the way Roy uses it. He uses it in its original sense of "the current node in a state machine." Let's say you supply boards and nails. If my application is "building a house", the "state" of my application is not how many boards and nails you have. It is not even how many boards and nails I have. It is how much of my house has been built. The state is advanced by building walls and assembling them together. Those have sub-states, some of which involve buying more boards and nails. 
&gt; 
&gt; The interaction between me and you is "stateless" if I can buy boards and nails from you without you knowing anything about how much of my house has been built, or even if my application of what you provide is "building a house". If I have to talk to the same sales rep every time then it's not stateless. If I've bought 100 board feet and you pre-order another 900 board feet from your vendor because I'm building a house then it's not stateless. If you keep 1000 board feet on hand because building a house is a very common operation, then it might be stateless, because your business doesn't know anything about my application. 
&gt; 
&gt; Now let's say you not only provide boards and nails, but also hammers, and plans, and labor, and installation. In fact, the house is built by you on your property. But I get to pick out the floorplan and curtain colors. The application has not changed. The state machine has not changed. The methods used to advance the application from one state to the next have not changed. What has changed? 
&gt; 
&gt; 1) Who does which activity to advance the state machine. Most of it used to be me. Now most of it is you. 
&gt; 2) Where the current node of the state machine is kept; that is, how much of my house has been built. That information used to be kept on my property. Now it is kept on your property. 
&gt; 
&gt; The interaction between me and you can no longer be "stateless" because you know how much of my house has been built. If I ask you to change the floorplan or the curtain colors, first you have to authenticate me, and then you have to go to the property to inspect the state to see if you can comply with the request. That's two scalability problems you didn't have before. It doesn't mean you're not raking in the dough. But I'm no longer advancing the application state except at two points; in many cases, I'm not even doing that--I'm configuring the application state machine instead.

Wow! What a great explanation of 'Application'.

+1

Jan

&gt; 
&gt; 
&gt; Robert Brewer 
&gt; fumanchu@... 
&gt; 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19366<br>
Sender:Brian Craft &lt;craft.brian@...&gt;<br>
Post Date/Time:2013-04-25 21:34:57<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>Thanks, everyone. This has been very informative.

b.c.


On Thu, Apr 25, 2013 at 12:53 PM, Jan Algermissen &lt;
jan.algermissen@...&gt; wrote:

&gt;
&gt; On 25.04.2013, at 21:47, "Robert Brewer" &lt;fumanchu@...&gt; wrote:
&gt;
&gt; &gt; Hi Brian,
&gt; &gt;
&gt; &gt; Markus came closest when he distinguished "application state" from
&gt; "resource state". But even that doesn't quite go far enough until you
&gt; define what an "application" is and understand what "state" is.
&gt; &gt;
&gt; &gt; Lots of web developers think an "application" is "the code I wrote in
&gt; Python or Ruby that runs on the server." But that is worlds apart from the
&gt; way Roy uses it. He uses it in its original sense of "accomplishing a goal
&gt; with something". Building a house is an application of (among other things)
&gt; boards, nails, and a hammer.
&gt; &gt;
&gt; &gt; Lots of web developers think that "state" means "data in my database".
&gt; But that is worlds apart from the way Roy uses it. He uses it in its
&gt; original sense of "the current node in a state machine." Let's say you
&gt; supply boards and nails. If my application is "building a house", the
&gt; "state" of my application is not how many boards and nails you have. It is
&gt; not even how many boards and nails I have. It is how much of my house has
&gt; been built. The state is advanced by building walls and assembling them
&gt; together. Those have sub-states, some of which involve buying more boards
&gt; and nails.
&gt; &gt;
&gt; &gt; The interaction between me and you is "stateless" if I can buy boards
&gt; and nails from you without you knowing anything about how much of my house
&gt; has been built, or even if my application of what you provide is "building
&gt; a house". If I have to talk to the same sales rep every time then it's not
&gt; stateless. If I've bought 100 board feet and you pre-order another 900
&gt; board feet from your vendor because I'm building a house then it's not
&gt; stateless. If you keep 1000 board feet on hand because building a house is
&gt; a very common operation, then it might be stateless, because your business
&gt; doesn't know anything about my application.
&gt; &gt;
&gt; &gt; Now let's say you not only provide boards and nails, but also hammers,
&gt; and plans, and labor, and installation. In fact, the house is built by you
&gt; on your property. But I get to pick out the floorplan and curtain colors.
&gt; The application has not changed. The state machine has not changed. The
&gt; methods used to advance the application from one state to the next have not
&gt; changed. What has changed?
&gt; &gt;
&gt; &gt; 1) Who does which activity to advance the state machine. Most of it used
&gt; to be me. Now most of it is you.
&gt; &gt; 2) Where the current node of the state machine is kept; that is, how
&gt; much of my house has been built. That information used to be kept on my
&gt; property. Now it is kept on your property.
&gt; &gt;
&gt; &gt; The interaction between me and you can no longer be "stateless" because
&gt; you know how much of my house has been built. If I ask you to change the
&gt; floorplan or the curtain colors, first you have to authenticate me, and
&gt; then you have to go to the property to inspect the state to see if you can
&gt; comply with the request. That's two scalability problems you didn't have
&gt; before. It doesn't mean you're not raking in the dough. But I'm no longer
&gt; advancing the application state except at two points; in many cases, I'm
&gt; not even doing that--I'm configuring the application state machine instead.
&gt;
&gt; Wow! What a great explanation of 'Application'.
&gt;
&gt; +1
&gt;
&gt; Jan
&gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; Robert Brewer
&gt; &gt; fumanchu@...
&gt; &gt; 
&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19367<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-04-25 22:27:04<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Apr 25, 2013, at 4:15 AM, Markus Lanthaler &lt;markus.lanthaler@...&gt; wrote:
&gt; That's true and I think that's where your confusion comes from. There are indeed two types of states: application state and resource state.
&gt; 

Finally! I think that comparison phrase "application state vs resource state" illuminates what I'm been struggling to understand, thank you.

I can now see that what I've been confused about fits into a "resource state."  Saying it's "application state" has been of no help without having a comparison other type of state such as "resource state."

&gt; For example, if you browse through a paginated collection the server must not keep track of the last page the client visited. That's up to client.
&gt; 
&gt; 

This was a helpful example.  I can see now that the page a client is viewing is nothing about the collection but instead it's about the client's current view of the collection. The fact the page changes does not change the collection in any way.

As a further example if I had a session that kept track of the layout the client wants to receive, i.e. tabular vs. card view that would also be application state.

OTOH, if the purpose of a session was ONLY to keep track of the ID of the user then that would seem to be no different from an auth header cookie that authenticates the user. And that kind of session would not be bad because it's about client identity and not application state, right?

&gt; No need to apologize :-)
&gt; 

Thanks again for humoring me on my quest for understanding.  I think I've gotten a much better handled on it on, thanks to you.

-Mike</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19368<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-04-25 22:43:49<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Apr 25, 2013, at 10:37 AM, Mark Baker &lt;distobj@...&gt; wrote:
&gt; I hear you, but part of the reason I did that was because I think it's
&gt; not required as often as you claim.

Fair enough.

&gt; As far as batch goes though, as a means of providing atomicity over a
&gt; stateless protocol, no, I can't imagine that it can be done RESTfully.
&gt; Somebody might prove me wrong though as I haven't given it much
&gt; thought.

If Markus Lanthaler's explanation was current then it is resource state and thus actually RESTful.  Or is that wrong?

&gt; If I can say, you seem to be coming from a very solution-driven place,
&gt; where you have a solution in mind and then try to map it back onto
&gt; REST. I would suggest trying the other way; starting only with your
&gt; "business" requirements and moving forward from there, staying within
&gt; the constraints of REST to inform you what a solution might look like.

No, bad assumption. I need examples to understand concepts; it's not possible for me to read abstract concepts like how Roy presents REST in his thesis and actually be able apply them practically unless of course I already understand the concepts, kind of a catch-22, no?  

So, I can't stay within the constraints of REST unless I actually fully understand them and can't understand them without first being able to review and comprehend good examples that apply.

&gt; That's getting to the point, but as I was suggesting to Brian, I don't
&gt; think that's a very productive question to ask.

Well, it's unproductive if you already understand. So IOW you are saying it' a stupid question? Haven't we been socialized to tell learners there are no stupid questions so as not to retard learning? :)  

But seriously, unless you disagree with Markus Lanthaler's "application state vs. resource state" I think I've finally got it figured out.   Also, sincerely, thanks for the help.

-Mike</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19369<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-04-25 22:50:40<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>Hi Robert,

Thanks for taking the time to explain.  

I sense that it's a really good explanation analogy but reading through it I got lost on how "you" and "me" and especially "sales rep" and who was actually building the house et. al. and how to all relates to "client" and "server" in a web API interaction.  I guess I'm just feeling a bit dense on this topic...

-Mike 


On Apr 25, 2013, at 3:47 PM, Robert Brewer &lt;fumanchu@...&gt; wrote:

&gt; Hi Brian, 
&gt; 
&gt; Markus came closest when he distinguished "application state" from "resource state". But even that doesn't quite go far enough until you define what an "application" is and understand what "state" is. 
&gt; 
&gt; Lots of web developers think an "application" is "the code I wrote in Python or Ruby that runs on the server." But that is worlds apart from the way Roy uses it. He uses it in its original sense of "accomplishing a goal with something". Building a house is an application of (among other things) boards, nails, and a hammer. 
&gt; 
&gt; Lots of web developers think that "state" means "data in my database". But that is worlds apart from the way Roy uses it. He uses it in its original sense of "the current node in a state machine." Let's say you supply boards and nails. If my application is "building a house", the "state" of my application is not how many boards and nails you have. It is not even how many boards and nails I have. It is how much of my house has been built. The state is advanced by building walls and assembling them together. Those have sub-states, some of which involve buying more boards and nails. 
&gt; 
&gt; The interaction between me and you is "stateless" if I can buy boards and nails from you without you knowing anything about how much of my house has been built, or even if my application of what you provide is "building a house". If I have to talk to the same sales rep every time then it's not stateless. If I've bought 100 board feet and you pre-order another 900 board feet from your vendor because I'm building a house then it's not stateless. If you keep 1000 board feet on hand because building a house is a very common operation, then it might be stateless, because your business doesn't know anything about my application. 
&gt; 
&gt; Now let's say you not only provide boards and nails, but also hammers, and plans, and labor, and installation. In fact, the house is built by you on your property. But I get to pick out the floorplan and curtain colors. The application has not changed. The state machine has not changed. The methods used to advance the application from one state to the next have not changed. What has changed? 
&gt; 
&gt; 1) Who does which activity to advance the state machine. Most of it used to be me. Now most of it is you. 
&gt; 2) Where the current node of the state machine is kept; that is, how much of my house has been built. That information used to be kept on my property. Now it is kept on your property. 
&gt; 
&gt; The interaction between me and you can no longer be "stateless" because you know how much of my house has been built. If I ask you to change the floorplan or the curtain colors, first you have to authenticate me, and then you have to go to the property to inspect the state to see if you can comply with the request. That's two scalability problems you didn't have before. It doesn't mean you're not raking in the dough. But I'm no longer advancing the application state except at two points; in many cases, I'm not even doing that--I'm configuring the application state machine instead. 
&gt; 
&gt; 
&gt; Robert Brewer 
&gt; fumanchu@... 
&gt; 

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19370<br>
Sender:"Markus Lanthaler" &lt;markus.lanthaler@...&gt;<br>
Post Date/Time:2013-04-26 07:24:46<br>
Subject:RE: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Friday, April 26, 2013 12:44 AM, Mike Schinkel wrote

&gt; On Apr 25, 2013, at 4:15 AM, Markus Lanthaler wrote:
&gt; &gt; That's true and I think that's where your confusion comes from.
&gt; &gt; There are indeed two types of states: application state and resource
&gt; &gt; state.
&gt; 
&gt; Finally! I think that comparison phrase "application state vs resource
&gt; state" illuminates what I'm been struggling to understand, thank you.

Great!


&gt; &gt; For example, if you browse through a paginated collection the server
&gt; &gt; must not keep track of the last page the client visited. That's up
&gt; &gt; to client.
&gt; 
&gt; This was a helpful example.  I can see now that the page a client is
&gt; viewing is nothing about the collection but instead it's about the
&gt; client's current view of the collection. The fact the page changes
&gt; does not change the collection in any way.
&gt; 
&gt; As a further example if I had a session that kept track of the layout
&gt; the client wants to receive, i.e. tabular vs. card view that would
&gt; also be application state.
&gt; 
&gt; OTOH, if the purpose of a session was ONLY to keep track of the ID of
&gt; the user then that would seem to be no different from an auth header
&gt; cookie that authenticates the user. And that kind of session would not
&gt; be bad because it's about client identity and not application state,
&gt; right?

Right, although in that case it isn't a session. It's simply a user
identifier that you are sending. If you map a session ID (with a limited
validity period) to a user ID then again it would be stateful.


&gt; &gt; No need to apologize :-) 
&gt;
&gt; Thanks again for humoring me on my quest for understanding.  I think
&gt; I've gotten a much better handled on it on, thanks to you.

Glad I could help.


&gt; As far as batch goes though, as a means of providing atomicity over a
&gt; stateless protocol, no, I can't imagine that it can be done RESTfully.
&gt; Somebody might prove me wrong though as I haven't given it much
&gt; thought.
&gt; 
&gt; If Markus Lanthaler's explanation was current then it is resource
&gt; state and thus actually RESTful.  Or is that wrong?

Of course you can achieve atomicity in a RESTful system. The easiest way is
to include all data in a single request. In the best case that request would
be idempotent so that you can safely repeat it.

What you mean however (I think) are transactions. If transactions span
multiple services I have to admit it gets tricky. But that's the case for
all distributed architectures and a reason why you try to avoid transactions
whenever you can. They do not scale. To get an idea how this could be done,
you might wanna have a look at Cesare's presentation:

http://slideshare.net/cesare.pautasso/atomic-transactions-for-the-rest-of-us


Cheers,
Markus



--
Markus Lanthaler
@markuslanthaler


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19371<br>
Sender:"jerome.louvel" &lt;jlouvel@...&gt;<br>
Post Date/Time:2013-05-02 11:24:47<br>
Subject:How much REST should your Web API get?<br>
Message:<br><br>
<pre>After living with REST for 10 years and introducing in 2005 the first REST framework for Java (http://restlet.org), I felt that by pushing REST too far we are just trying to make it solve problems it was designed for in the first place.

In this blog post, I tried to formalize a "Web API" architecture style and contrast it with REST, then introduce the idea of cross-device web sites as wrapping the power of both styles:
http://blog.restlet.com/2013/05/02/how-much-rest-should-your-web-api-get/

Interested in hearing what you think!

Best regards,
Jerome

PS: sorry for those also following the "API-Craft" mailing list, but the topic is right at the crossing of both communities.


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19372<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-05-02 11:47:04<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>
On 02.05.2013, at 13:24, "jerome.louvel" &lt;jlouvel@...&gt; wrote:

&gt; After living with REST for 10 years and introducing in 2005 the first REST framework for Java (http://restlet.org), I felt that by pushing REST too far we are just trying to make it solve problems it was designed for in the first place.
&gt; 
&gt; In this blog post, I tried to formalize a "Web API" architecture style and contrast it with REST, then introduce the idea of cross-device web sites as wrapping the power of both styles:
&gt; http://blog.restlet.com/2013/05/02/how-much-rest-should-your-web-api-get/
&gt; 
&gt; Interested in hearing what you think!

I remain a strong proponent of the idea that it is more fruitful to aim at rethinking the problem to fit a sound paradigm rather than to blame the paradigm for not fitting the problem (one's perceived view of it, that is).

Two concrete points:

I don't buy the efficiency argument regarding discovery and granularity of messages - unless you ignore caching and the possibility to tailor representations for specific devices.

You write about the 'Web API style' "requires coordination between clients and servers when changes are deployed" - doh... this eliminates *the* (**the**) primary benefit to apply REST.

Aside from systems that focus on sending fine grained control messages around in (near) realtime, I have yet to see a case where REST does not shine due to performance, scalability and the ability to decentralize management of the deployment and release cycles. 

Jan



&gt; 
&gt; Best regards,
&gt; Jerome
&gt; 
&gt; PS: sorry for those also following the "API-Craft" mailing list, but the topic is right at the crossing of both communities.
&gt; 
&gt; 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19373<br>
Sender:mike amundsen &lt;mamund@...&gt;<br>
Post Date/Time:2013-05-02 11:58:26<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>TL;DNR
- It's good to see some thinking about whether/how a single example arch
from over a decade ago maps to needs of current Internet apps.
- I think the approach in the blog post strays too far into a critique of
assumed failures of X and attempts to "fix that" w/ mods to get X-prime
- I'd like to see more work on using the "Taylor School" approach to
modeling software arch (Properties/Qualities, Requirements, and Constraints)

details for those who care...

GOOD IDEA
First, I like the general idea of crafting a style that meets the demands
of the local use" cases instead of just adopting a style based on fad. Of
course, that is the exact message of Fielding's dissertation:

"...consider how often we see software projects begin with adoption of the
latest fad in architectural design, and only later discover whether or not
the system requirements call for such an architecture. Design-by-buzzword
is a common occurrence." [1]

IMO, It's a bummer that so many ppl treat Fielding's Chapter 5 as a
solution instead of an example.

A METHODOLOGY
I also like Fielding's approach of keeping properties[2], requirements (of
the Web)[3], and constraints[4] in clear separate categories. IME, they are
all needed in order to craft a clear software architectural style. Too much
has been written about the last one (constraints) and not enough about the
first two (system properties and requirements). I am guilty of this myself.

With all that as pre-amble, my primary comment on your blog post is that
I'd like to see more narration on the requirements you wish to meet (I see
some of this in the final section, I think). I'd also like to see the
properties that meet those requirements (I can't really identify examples
of that in your blog post right now). Finally, I'd like to see a list of
constraints to adopt in order to induce the properties that meet the
requirements.

A RANT
IMO, after so many years of what I loving call the "UC Irvine School of
Software Architecture" or maybe the "Taylor School[6]", I am disappointed
that not more ppl talk about the general approach of identifying and
implementing "named styles." With luminaries such as Rohit Kahre[7], Roy
Fielding[8], Justin Erenkrantz[9] (to name just a few of the recognized
folks), Taylor's approach seems to incubate some incredible thinking in the
field of software architecture that we can all (I think) learn from and
consider emulating.

I think this is a good start, but much more can be done to identify the
desired properties and selected constraints that would result in an arch
style that matches a set of clear requirements. Let's see more!

Cheers.


[1] http://www.ics.uci.edu/~fielding/pubs/dissertation/introduction.htm
[2]
http://www.ics.uci.edu/~fielding/pubs/dissertation/net_app_arch.htm#sec_2_3
[3]
http://www.ics.uci.edu/~fielding/pubs/dissertation/web_arch_domain.htm#sec_4_1
[4]
http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm#sec_5_1
[5] http://www.isr.uci.edu/
[6] http://www.ics.uci.edu/~taylor/
[7] http://en.wikipedia.org/wiki/Rohit_Khare
[8] http://en.wikipedia.org/wiki/Roy_Fielding
[9] http://en.wikipedia.org/wiki/Justin_Erenkrantz


mamund
+1.859.757.1449
skype: mca.amundsen
http://amundsen.com/blog/
http://twitter.com/mamund
https://github.com/mamund
http://www.linkedin.com/in/mikeamundsen


On Thu, May 2, 2013 at 7:24 AM, jerome.louvel &lt;jlouvel@...&gt; wrote:

&gt; After living with REST for 10 years and introducing in 2005 the first REST
&gt; framework for Java (http://restlet.org), I felt that by pushing REST too
&gt; far we are just trying to make it solve problems it was designed for in the
&gt; first place.
&gt;
&gt; In this blog post, I tried to formalize a "Web API" architecture style and
&gt; contrast it with REST, then introduce the idea of cross-device web sites as
&gt; wrapping the power of both styles:
&gt; http://blog.restlet.com/2013/05/02/how-much-rest-should-your-web-api-get/
&gt;
&gt; Interested in hearing what you think!
&gt;
&gt; Best regards,
&gt; Jerome
&gt;
&gt; PS: sorry for those also following the "API-Craft" mailing list, but the
&gt; topic is right at the crossing of both communities.
&gt;
&gt;
&gt;
&gt; ------------------------------------
&gt;
&gt; Yahoo! Groups Links
&gt;
&gt;
&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19374<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-05-02 12:18:12<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>
On 02.05.2013, at 13:58, mike amundsen &lt;mamund@...&gt; wrote:

&gt; IMO, after so many years of what I loving call the "UC Irvine School of Software Architecture" or maybe the "Taylor School[6]", I am disappointed that not more ppl talk about the general approach of identifying and implementing "named styles." With luminaries such as Rohit Kahre[7], Roy Fielding[8], Justin Erenkrantz[9] (to name just a few of the recognized folks), Taylor's approach seems to incubate some incredible thinking in the field of software architecture that we can all (I think) learn from and consider emulating.

+1, well put.

What continues to shock me is that the "UC Irvine School of Software Architecture" (building upon Garlan/Shaw and Perry/Wolf) seems to be completely unknown to the vast majority of people studying (and working) in the field of software in general. Why is that not part of software engineering 101 courses all over the world?

The same goes for the idea of "principled design", namely that design decision should be driven by purpose instead of being ad-hoc. Your call for more detailed requirements (aka "properties of key interest") illustrates that.



Jan


&gt; 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19375<br>
Sender:mike amundsen &lt;mamund@...&gt;<br>
Post Date/Time:2013-05-02 12:33:42<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>Jan:

yep - most of us are focused on getting an instance up and running. going
through the conscious work of wolking through a methodology for selecting
properties, requirements, and constraints doesn't happen. like so many
other things in life, we fall back on what we know, mental shorthand, past
experience, and rely on short-term execute/eval loops[1] to get the job
done as efficiently as possible given the time allotted.

also, Fielding points out that the abstraction of architectural styles (not
just one, but the category of all of them!) is two abstractions away from
the implementation[2] and that's one too many abstractions for most folks
to deal with.

anyway, back on point, I think Jerome makes a solid point here. My POV is
to step back (or up, if you like), ask what requirements you REALLY have
(low-barrier to entry for API devs), what properties you REALLY want to
induce (fast  build &amp; release cycles), and what constraints you need to
impose in order to get the properties that meet the requirements
(convention over configuration constraints, etc.).

FWIW, another Q i ask clients is "what are we optimizing for?" for example
do we want to optimize first for runtime experience? user experience?
design-time experience? developer experience? governance experience? while
we may want all, what are the priorities here? (e.g. writing in assembler
can improve runtime experience, but is hell on dev experience!).


[1] http://www.it.bton.ac.uk/staff/rng/teaching/notes/NormanGulfs.html
[2] http://www.amundsen.com/blog/archives/369

mamund
+1.859.757.1449
skype: mca.amundsen
http://amundsen.com/blog/
http://twitter.com/mamund
https://github.com/mamund
http://www.linkedin.com/in/mikeamundsen


On Thu, May 2, 2013 at 8:18 AM, Jan Algermissen
&lt;jan.algermissen@...&gt;wrote:

&gt;
&gt; On 02.05.2013, at 13:58, mike amundsen &lt;mamund@...&gt; wrote:
&gt;
&gt; &gt; IMO, after so many years of what I loving call the "UC Irvine School of
&gt; Software Architecture" or maybe the "Taylor School[6]", I am disappointed
&gt; that not more ppl talk about the general approach of identifying and
&gt; implementing "named styles." With luminaries such as Rohit Kahre[7], Roy
&gt; Fielding[8], Justin Erenkrantz[9] (to name just a few of the recognized
&gt; folks), Taylor's approach seems to incubate some incredible thinking in the
&gt; field of software architecture that we can all (I think) learn from and
&gt; consider emulating.
&gt;
&gt; +1, well put.
&gt;
&gt; What continues to shock me is that the "UC Irvine School of Software
&gt; Architecture" (building upon Garlan/Shaw and Perry/Wolf) seems to be
&gt; completely unknown to the vast majority of people studying (and working) in
&gt; the field of software in general. Why is that not part of software
&gt; engineering 101 courses all over the world?
&gt;
&gt; The same goes for the idea of "principled design", namely that design
&gt; decision should be driven by purpose instead of being ad-hoc. Your call for
&gt; more detailed requirements (aka "properties of key interest") illustrates
&gt; that.
&gt;
&gt;
&gt;
&gt; Jan
&gt;
&gt;
&gt; &gt;
&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19376<br>
Sender:"Robert Brewer" &lt;fumanchu@...&gt;<br>
Post Date/Time:2013-05-02 14:11:10<br>
Subject:RE: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>mike amundsen wrote:
&gt; I'd like to see more work on using the "Taylor School" approach
&gt; to modeling software arch (Properties/Qualities, Requirements,
&gt; and Constraints)

Me too. And that will only be useful if folks are educated on the differences. Therefore...

In this case, the model needs to be fixed. "Mobility" is not a constraint, it's a requirement. Most of the bullet points in that section are requirements. "Off-line application mode" (I would rephrase it to "disconnected operation") would be the constraint. That constraint plus the cache constraint could lead to *an architecure* which syncs caches on reconnection, but that design decision is not part of the style.

Under "Custom Interface", it would be very informative to lay out in detail which of the properties are being traded off when selecting explicit versioning. Not to evangelize them over REST or vice-versa, but to understand in which situations each is appropriate.

Roy himself isn't a REST evangelist. He's an accomplished architect who has created multiple architectures using multiple styles, attempting to make them appropriate for the given requirements, both functional and non-functional (properties). We would all be wise to design our architectures with the same unbiased approach.


Robert Brewer
fumanchu@aminus.org
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19377<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-05-02 16:37:45<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>Hi Mike,
On May 2, 2013, at 7:58 AM, mike amundsen &lt;mamund@...&gt; wrote:
&gt; IMO, after so many years of what I loving call the "UC Irvine School of Software Architecture" or maybe the "Taylor School[6]"
&gt; [6] http://www.ics.uci.edu/~taylor/

404 -&gt; The requested URL /~taylor/ was not found on this server.

-Mike



</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19378<br>
Sender:=?ISO-8859-1?Q?J=E9r=F4me_Louvel?= &lt;jlouvel@...&gt;<br>
Post Date/Time:2013-05-02 17:48:07<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>Jan,

I remain a strong proponent of the idea that it is more fruitful to aim at
&gt; rethinking the problem to fit a sound paradigm rather than to blame the
&gt; paradigm for not fitting the problem (one's perceived view of it, that is).
&gt;

But when the paradigm isn't intended to solve a given problem, do you think
we should force the problem to fit into the paradigm?

REST was never designed to solve all software architecture problems. That's
quite the opposite and what makes it so powerful to scale the web of
hypermedia documents.

Two concrete points:
&gt;
&gt; I don't buy the efficiency argument regarding discovery and granularity of
&gt; messages - unless you ignore caching and the possibility to tailor
&gt; representations for specific devices.
&gt;

You could also add HTTP compression to the mix. I'm a fan of HTTP caching
and content negotiation as well. The "Web API" style proposed fully
leverages those features.


&gt; You write about the 'Web API style' "requires coordination between clients
&gt; and servers when changes are deployed" - doh... this eliminates *the*
&gt; (**the**) primary benefit to apply REST.
&gt;

Exactly, but if you ship a native mobile app or a connected hardware device
with no hypermedia capability at all (think about a dumb sensor), you
definitely need to coordinate the clients and servers even though you are
fully and properly using HTTP. This is why the vast majority of so-called
web APIs are versionned and based on stable URIs and representations
structures. They can't always afford to dynamically discover the user
interface.

You could say that native apps aren't needed and could be re-developped as
HTML 5 apps, but this isn't always possible or desirable.


&gt; Aside from systems that focus on sending fine grained control messages
&gt; around in (near) realtime, I have yet to see a case where REST does not
&gt; shine due to performance, scalability and the ability to decentralize
&gt; management of the deployment and release cycles.


Again, my point is to take the best of what REST brings but not try to
apply it in cases where a rich hypermedia client is available, but isn't so
uncommon. I'm just trying to do REST justice otherwise we'll get a
backslash when people finally realize that the vast majority of REST
endpoints/APIs/etc. can't be used in a dynamic way like HTML is used by web
browsers.

Best regards,
Jerome
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19379<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-05-02 18:34:56<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>
On 02.05.2013, at 19:48, Jérôme Louvel &lt;jlouvel@...&gt; wrote:

&gt; 
&gt; Jan,
&gt; 
&gt; I remain a strong proponent of the idea that it is more fruitful to aim at rethinking the problem to fit a sound paradigm rather than to blame the paradigm for not fitting the problem (one's perceived view of it, that is).
&gt; 
&gt; But when the paradigm isn't intended to solve a given problem, do you think we should force the problem to fit into the paradigm?

No, certainly not. What I am arguing against is what I experience so often: That people claim some paradigm is a bad fit for a problem instead of thinking thoroughly through the problem until they can make an educated choice.

&gt; 
&gt; REST was never designed to solve all software architecture problems. That's quite the opposite and what makes it so powerful to scale the web of hypermedia documents.

What does that mean: "and what makes it so powerful to scale the web of hypermedia documents"?

&gt; 
&gt; Two concrete points:
&gt; 
&gt; I don't buy the efficiency argument regarding discovery and granularity of messages - unless you ignore caching and the possibility to tailor representations for specific devices.
&gt; 
&gt; You could also add HTTP compression to the mix. I'm a fan of HTTP caching and content negotiation as well. The "Web API" style proposed fully leverages those features.

It just not as simple as taking half of REST and getting half the benefits. REST works as a whole, not in 'layers' or 'levels'.

&gt;  
&gt; You write about the 'Web API style' "requires coordination between clients and servers when changes are deployed" - doh... this eliminates *the* (**the**) primary benefit to apply REST.
&gt; 
&gt; Exactly, but if you ship a native mobile app or a connected hardware device with no hypermedia capability at all (think about a dumb sensor),

Now, there is quite a difference between a sensor and a mobile app. Who says a mobile app cannot have hypermedia capabilities? And who would make a sensor a REST client? I'd rather have the sensor send measurement data via, e.g. UDP.

&gt; you definitely need to coordinate the clients and servers even though you are fully and properly using HTTP.

Hmm, can you be more specific about what you mean here?

&gt; This is why the vast majority of so-called web APIs are versionned and based on stable URIs and representations structures. They can't always afford to dynamically discover the user interface.

I'd say, the vast majority of Web APIs fails to be RESTful because people simply did not follow the style. Show me a single example that has been deliberately designed  unRESTful on the basis of design principles. To me this is just the same old discussion over and over again: People make a (rather unedcuated) claim, mistake that for truth and come up with suboptimal design.

And that is not only true for wanna be REST services, unfortunately it is an all too common way to approach all sorts of IT problems.
  
In my experience, people learn best if we do not settle for 'premature agreement' but use, for example, a style to foster more flexible thinking. Usually, whoever endures that process is thankful in the end.

&gt; 
&gt; You could say that native apps aren't needed and could be re-developped as HTML 5 apps, but this isn't always possible or desirable.

Either way, a native app makes a perfectly RESTful client if you design it that way. Personally, I'd go a very long way to maintain the benefit of not having to coordinate client deployment with API changes....


&gt;  
&gt; Aside from systems that focus on sending fine grained control messages around in (near) realtime, I have yet to see a case where REST does not shine due to performance, scalability and the ability to decentralize management of the deployment and release cycles.
&gt; 
&gt; Again, my point is to take the best of what REST brings but not try to apply it in cases where a rich hypermedia client is available,

What is a "rich hypermedia client"? Can you be more specific about the situation that seems to be the root cause for the perceived need that you have to change the style?

&gt; but isn't so uncommon. I'm just trying to do REST justice otherwise we'll get a backslash when people finally realize that the vast majority of REST endpoints/APIs/etc. can't be used in a dynamic way like HTML is used by web browsers.

Can you explain what you mean by "a dynamic way like HTML is used by web browsers"?


To me it remains unclear what the problem is you are trying to solve. Please explain, I'm all ears.


Jan




&gt;  
&gt; Best regards,
&gt; Jerome
&gt; 
&gt; 
&gt; 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19380<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-05-02 19:15:37<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>On May 2, 2013, at 2:34 PM, Jan Algermissen &lt;jan.algermissen@...&gt; wrote:
&gt; I'd say, the vast majority of Web APIs fails to be RESTful because people simply did not follow the style. Show me a single example that has been deliberately designed  unRESTful on the basis of design principles.

I think that last statement is demonstrably provable to be false. To make a web API purely RESTful takes more effort on the part of the client and some who have published web APIs have on purpose chosen not to require that effort. I can't point to specific APIs at this moment but I know I've read posts from others on various other web API-related lists such as API Craft saying that pure REST makes it harder than they want for people to succeed at using their web API.  

Of course if they then call their web API RESTful they are in the wrong.

Further, and this (only) a slight tangent but the more I learn about pure REST the more I come to believe that the focus on hypermedia constraint it a red herring when an application-specific media type is not used. AFAICT very promoting hypermedia make the explicit point that hypermedia does not bring the benefits of REST without a dedicated media type. By itself hypermedia just adds complexity; with a dedicated media-type a client can be built that "knows" what do with the links found in the media type but I see (almost?) nobody advocating this besides some cryptic comments from Roy on his blog almost 5 years ago.

-Mike</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19381<br>
Sender:mike amundsen &lt;mamund@...&gt;<br>
Post Date/Time:2013-05-02 19:25:12<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>just jumping in here:

- CoAP[1] is a UDP-based protocol for small devices (sensors, etc.) that
has support for hypermedia [2].

Modifiability
As for handling "co-ordination" for releases/changes between client and
server, IME, this boils down to a desire for the system to support
safe modifiabilty.

- Erlang solved this problem using language constructs and a supervisor
model.
- Years ago (too long...) I worked on Intra-net implementations that relied
on shipping sandboxed code for client-side execution. We called it
"scriptable clients" and this was all before "browser" was a thing&lt;g&gt;.
- Gmail is one big pile of portable code that auto-installs as needed and
carries all the new funftionality
- I've worked in systems where the entire system was a ball of
configuration settings. new features were released via configuration only.
bear to manage each config, but quite reliable.

the above all all examples of "co-ordination" of release/updates w/o a
dependence on hypermedia.

If you focus on the properties you need instead of the techniques you use,
you find there are many, many ways to reach your goal.

[1] http://tools.ietf.org/html/draft-ietf-core-coap-16
[2] http://tools.ietf.org/html/rfc6690

Oh yeah, the Taylor link... http://www.ics.uci.edu/~taylor/


mamund
+1.859.757.1449
skype: mca.amundsen
http://amundsen.com/blog/
http://twitter.com/mamund
https://github.com/mamund
http://www.linkedin.com/in/mikeamundsen


On Thu, May 2, 2013 at 2:34 PM, Jan Algermissen
&lt;jan.algermissen@...&gt;wrote:

&gt;
&gt; On 02.05.2013, at 19:48, Jérôme Louvel &lt;jlouvel@...&gt; wrote:
&gt;
&gt; &gt;
&gt; &gt; Jan,
&gt; &gt;
&gt; &gt; I remain a strong proponent of the idea that it is more fruitful to aim
&gt; at rethinking the problem to fit a sound paradigm rather than to blame the
&gt; paradigm for not fitting the problem (one's perceived view of it, that is).
&gt; &gt;
&gt; &gt; But when the paradigm isn't intended to solve a given problem, do you
&gt; think we should force the problem to fit into the paradigm?
&gt;
&gt; No, certainly not. What I am arguing against is what I experience so
&gt; often: That people claim some paradigm is a bad fit for a problem instead
&gt; of thinking thoroughly through the problem until they can make an educated
&gt; choice.
&gt;
&gt; &gt;
&gt; &gt; REST was never designed to solve all software architecture problems.
&gt; That's quite the opposite and what makes it so powerful to scale the web of
&gt; hypermedia documents.
&gt;
&gt; What does that mean: "and what makes it so powerful to scale the web of
&gt; hypermedia documents"?
&gt;
&gt; &gt;
&gt; &gt; Two concrete points:
&gt; &gt;
&gt; &gt; I don't buy the efficiency argument regarding discovery and granularity
&gt; of messages - unless you ignore caching and the possibility to tailor
&gt; representations for specific devices.
&gt; &gt;
&gt; &gt; You could also add HTTP compression to the mix. I'm a fan of HTTP
&gt; caching and content negotiation as well. The "Web API" style proposed fully
&gt; leverages those features.
&gt;
&gt; It just not as simple as taking half of REST and getting half the
&gt; benefits. REST works as a whole, not in 'layers' or 'levels'.
&gt;
&gt; &gt;
&gt; &gt; You write about the 'Web API style' "requires coordination between
&gt; clients and servers when changes are deployed" - doh... this eliminates
&gt; *the* (**the**) primary benefit to apply REST.
&gt; &gt;
&gt; &gt; Exactly, but if you ship a native mobile app or a connected hardware
&gt; device with no hypermedia capability at all (think about a dumb sensor),
&gt;
&gt; Now, there is quite a difference between a sensor and a mobile app. Who
&gt; says a mobile app cannot have hypermedia capabilities? And who would make a
&gt; sensor a REST client? I'd rather have the sensor send measurement data via,
&gt; e.g. UDP.
&gt;
&gt; &gt; you definitely need to coordinate the clients and servers even though
&gt; you are fully and properly using HTTP.
&gt;
&gt; Hmm, can you be more specific about what you mean here?
&gt;
&gt; &gt; This is why the vast majority of so-called web APIs are versionned and
&gt; based on stable URIs and representations structures. They can't always
&gt; afford to dynamically discover the user interface.
&gt;
&gt; I'd say, the vast majority of Web APIs fails to be RESTful because people
&gt; simply did not follow the style. Show me a single example that has been
&gt; deliberately designed  unRESTful on the basis of design principles. To me
&gt; this is just the same old discussion over and over again: People make a
&gt; (rather unedcuated) claim, mistake that for truth and come up with
&gt; suboptimal design.
&gt;
&gt; And that is not only true for wanna be REST services, unfortunately it is
&gt; an all too common way to approach all sorts of IT problems.
&gt;
&gt; In my experience, people learn best if we do not settle for 'premature
&gt; agreement' but use, for example, a style to foster more flexible thinking.
&gt; Usually, whoever endures that process is thankful in the end.
&gt;
&gt; &gt;
&gt; &gt; You could say that native apps aren't needed and could be re-developped
&gt; as HTML 5 apps, but this isn't always possible or desirable.
&gt;
&gt; Either way, a native app makes a perfectly RESTful client if you design it
&gt; that way. Personally, I'd go a very long way to maintain the benefit of not
&gt; having to coordinate client deployment with API changes....
&gt;
&gt;
&gt; &gt;
&gt; &gt; Aside from systems that focus on sending fine grained control messages
&gt; around in (near) realtime, I have yet to see a case where REST does not
&gt; shine due to performance, scalability and the ability to decentralize
&gt; management of the deployment and release cycles.
&gt; &gt;
&gt; &gt; Again, my point is to take the best of what REST brings but not try to
&gt; apply it in cases where a rich hypermedia client is available,
&gt;
&gt; What is a "rich hypermedia client"? Can you be more specific about the
&gt; situation that seems to be the root cause for the perceived need that you
&gt; have to change the style?
&gt;
&gt; &gt; but isn't so uncommon. I'm just trying to do REST justice otherwise
&gt; we'll get a backslash when people finally realize that the vast majority of
&gt; REST endpoints/APIs/etc. can't be used in a dynamic way like HTML is used
&gt; by web browsers.
&gt;
&gt; Can you explain what you mean by "a dynamic way like HTML is used by web
&gt; browsers"?
&gt;
&gt;
&gt; To me it remains unclear what the problem is you are trying to solve.
&gt; Please explain, I'm all ears.
&gt;
&gt;
&gt; Jan
&gt;
&gt;
&gt;
&gt;
&gt; &gt;
&gt; &gt; Best regards,
&gt; &gt; Jerome
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt;
&gt;
&gt;
&gt; ------------------------------------
&gt;
&gt; Yahoo! Groups Links
&gt;
&gt;
&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19382<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-05-02 19:39:07<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>
On 02.05.2013, at 21:15, Mike Schinkel &lt;mike@...&gt; wrote:

&gt; On May 2, 2013, at 2:34 PM, Jan Algermissen &lt;jan.algermissen@...&gt; wrote:
&gt;&gt; I'd say, the vast majority of Web APIs fails to be RESTful because people simply did not follow the style. Show me a single example that has been deliberately designed  unRESTful on the basis of design principles.
&gt; 
&gt; I think that last statement is demonstrably provable to be false. To make a web API purely RESTful takes more effort on the part of the client and some who have published web APIs have on purpose chosen not to require that effort. I can't point to specific APIs at this moment but I know I've read posts from others on various other web API-related lists such as API Craft saying that pure REST makes it harder than they want for people to succeed at using their web API.

It is true that REST achieves much of its decoupling by moving responsibilities to the client and it is also true that it requires more work on the client side compared to hard coding a bunch of URIs.

However, the client developer also benefits from not being bothered with having to follow API updates *at all* (aside from long-term deprecation periods). It is a matter of trade off and I don;t think that the average client developer/owner would not understand what the flexibility buys them.

As always, REST is great for leveraging homogeneity and we should ease client developer's live by working much more intensly on things like JSON-Home[1]. Open source libs for these things should make arguments regarding client-developer ease irrelevant.

Besides, the same people that talk about client-developer ease vs. REST today where the ones that sold you WS-* yesterday. I mean, what is a little form processing compared to getting a SOAP stack up an running :-)

IMHO, it is much more a matter of eductaion than a matter of developer ease.

&gt;   
&gt; 
&gt; Of course if they then call their web API RESTful they are in the wrong.
&gt; 
&gt; Further, and this (only) a slight tangent but the more I learn about pure REST the more I come to believe that the focus on hypermedia constraint it a red herring when an application-specific media type is not used.

Well, yes. Of course.

&gt; AFAICT very promoting hypermedia make the explicit point that hypermedia does not bring the benefits of REST without a dedicated media type.

Yes, because generic media types only shove the problem up a layer - into out of band knowledge.

&gt; By itself hypermedia just adds complexity; with a dedicated media-type a client can be built that "knows" what do with the links found in the media type

Exactly. User agents *implement* media type specifications. And they offer users to activate controls to proceed from one steady state to the next through *their* application.


&gt; but I see (almost?) nobody advocating this besides some cryptic comments from Roy on his blog almost 5 years ago.

I do and others, too. I also apply specific media types in real world projects with great satisfaction and no pain on neither side.

It's just that its very difficult to argue about (and it's all there in the archives and on Roy's blog :-) anyhow) but much easier to demonstrate with a real problem at hand.

It's also pretty straight forward, actually. I have never understood the reluctance people have to put they semantics they need done in a media type - right where REST wants them to be. &lt;shrug/&gt;

Jan


&gt; 
&gt; -Mike


[1] http://tools.ietf.org/html/draft-nottingham-json-home
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19383<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-05-02 19:58:07<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>On May 2, 2013, at 3:39 PM, Jan Algermissen &lt;jan.algermissen@...&gt; wrote:
&gt; However, the client developer also benefits from not being bothered with having to follow API updates *at all* (aside from long-term deprecation periods). It is a matter of trade off and I don;t think that the average client developer/owner would not understand what the flexibility buys them.

No disagreement there, I think on this list that's a given "known."  I also agree that it's a trade off and that many don't understand the distinction.  But I strongly think there are those who do understand and make the choice consciously, that way my only point in that paragraph.

&gt; As always, REST is great for leveraging homogeneity and we should ease client developer's live by working much more intensly on things like JSON-Home[1]. Open source libs for these things should make arguments regarding client-developer ease irrelevant.

Agreed. The lack of standardization and available libs is what make hypermedia difficult.  15 years ago HTTP was difficult on some platforms (Microsoft's ASP for one example, earlier than that on Windows itself), but today HTTP is available in every developer tool there is. Hopefully time will march forward and bring similar improvement related to REST.

&gt; Besides, the same people that talk about client-developer ease vs. REST today where the ones that sold you WS-* yesterday. I mean, what is a little form processing compared to getting a SOAP stack up an running :-)

heh.  Totally agree. :)

&gt; IMHO, it is much more a matter of eductaion than a matter of developer ease.

eh, I think those are orthogonal issues.

&gt; Yes, because generic media types only shove the problem up a layer - into out of band knowledge.
&gt; User agents *implement* media type specifications. And they offer users to activate controls to proceed from one steady state to the next through *their* application.

Exactly.

&gt; I do and others, too. I also apply specific media types in real world projects with great satisfaction and no pain on neither side.

I guess I should clarify, I don't read a lot of blog posts on well known blogs on REST about this specific issue. I do occasional see side comments in list threads, but can't remember a single list thread devoted to the topic.  

When I get around to it I might blog about it, but my then blog is not "well known." :)

&gt; It's just that its very difficult to argue about (and it's all there in the archives and on Roy's blog :-) anyhow) but much easier to demonstrate with a real problem at hand.

Agreed.

&gt; It's also pretty straight forward, actually. I have never understood the reluctance people have to put they semantics they need done in a media type - right where REST wants them to be. &lt;shrug/&gt;

I disagree that it is "easy."  Building a good media type takes a lot of architecture skill (IMO) to get it right, without requiring constant and ongoing revisions which pretty much moots the benefit.

Also (IMO) I don't think there is a real value unless the media type is shared by a lot of users (which also argues against media type proliferation.) For example if FreshBooks, Wave, Xero, Kashoo, Outright, FreeAgent, Harvest etc. each were to all create their own media type for their own web APIs they would not provide much value over hardcoded URLs. OTOH if they all got together and created an "application/accounting" media type then I could see huge benefit.  (Hmm.  Maybe there is something there...)

-Mike







</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19384<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-05-02 20:09:15<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>
On 02.05.2013, at 21:58, Mike Schinkel &lt;mike@...&gt; wrote:

&gt;&gt; It's also pretty straight forward, actually. I have never understood the reluctance people have to put they semantics they need done in a media type - right where REST wants them to be. &lt;shrug/&gt;
&gt; 
&gt; I disagree that it is "easy."

Wait, I did not say 'easy' :-)

&gt;  Building a good media type takes a lot of architecture skill (IMO) to get it right,

Of course - like building a good API does. Doing the media type is *the* design activity in REST - put someone on the job who knows what she is doing :-) As you would for an API in the OO world. Eh?

&gt; without requiring constant and ongoing revisions which pretty much moots the benefit.
&gt; 
&gt; Also (IMO) I don't think there is a real value unless the media type is shared by a lot of users (which also argues against media type proliferation.) For example if FreshBooks, Wave, Xero, Kashoo, Outright, FreeAgent, Harvest etc. each were to all create their own media type for their own web APIs they would not provide much value over hardcoded URLs.

Oh, of course they would:

[1] Aiming at converging some of the types in the long run is at least approachable. Forget that with APIs. Re-use sometimes goes against corporate strategy, but why not image a generic shopping mobile app that can work with many shops using a single media type. Wouldn't shop X have a reason to want to enable that app too? What about price search engines?

&gt; OTOH if they all got together and created an "application/accounting" media type then I could see huge benefit.  (Hmm.  Maybe there is something there...)

Well, that's the 'unified data model' discussion from the 90ies. Not gonna happen :-) But, consider this: REST leaves exactly one spot where you can put your semantics, that is the media type (and link rels for that matter, I keep lumping these together). The rest of REST (hah!) is uniform. Having variation take place in only one spot greatly simplifies integration (much easier to convert yourOrder.xml to myOrder.json than it is to have yourOrderAPI-client talk to myOrderAPI.)

Jan


&gt; 
&gt; -Mike


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19385<br>
Sender:mike amundsen &lt;mamund@...&gt;<br>
Post Date/Time:2013-05-02 20:10:03<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>&lt;snip&gt;
Also (IMO) I don't think there is a real value unless the media type is
shared by a lot of users (which also argues against media type
proliferation.)
&lt;/snip&gt;
One persons "too small to matter" is another's "entire world of customers"

SMALL
Years ago, I built a small internal system where only a handful of ppl
(&lt;20) used the system, but they used it so much/often and the domain space
details changed so often that a hypermedia-style implementation reduced
cost, time-to-market, and increased usability.

MEDIUM
I've implemented custom media type designs for &lt;1000 customers in a niche
market where the users numbered in 10,000s and the company was able to do
faster installs,  greater customizations, at less cost. This six-person
startup killed off heavyweights in their niche - actually drove them out -
and was recently bought up for a tidy sum for the owners (alas, not me!).

INDUSTRY-WIDE
&lt;snip&gt;
For example if FreshBooks, Wave, Xero, Kashoo, Outright, FreeAgent, Harvest
etc. each were to all create their own media type for their own web APIs
they would not provide much value over hardcoded URLs. OTOH if they all got
together and created an "application/accounting" media type then I could
see huge benefit.  (Hmm.  Maybe there is something there...)
&lt;/snip&gt;

VoiceXML is a great example of an industry-wide hypermedia message model to
allow multiple vendors (handsets, switches, hardware &amp; software) to all
share a custom media type and find their own profit-spaces.



mamund
+1.859.757.1449
skype: mca.amundsen
http://amundsen.com/blog/
http://twitter.com/mamund
https://github.com/mamund
http://www.linkedin.com/in/mikeamundsen


On Thu, May 2, 2013 at 3:58 PM, Mike Schinkel &lt;mike@...&gt; wrote:

&gt;
&gt;
&gt; On May 2, 2013, at 3:39 PM, Jan Algermissen &lt;jan.algermissen@...&gt;
&gt; wrote:
&gt;
&gt; However, the client developer also benefits from not being bothered with
&gt; having to follow API updates *at all* (aside from long-term deprecation
&gt; periods). It is a matter of trade off and I don;t think that the average
&gt; client developer/owner would not understand what the flexibility buys them.
&gt;
&gt;
&gt; No disagreement there, I think on this list that's a given "known."  I
&gt; also agree that it's a trade off and that many don't understand the
&gt; distinction.  But I strongly think there are those who do understand and
&gt; make the choice consciously, that way my only point in that paragraph.
&gt;
&gt;
&gt; As always, REST is great for leveraging homogeneity and we should ease
&gt; client developer's live by working much more intensly on things like
&gt; JSON-Home[1]. Open source libs for these things should make arguments
&gt; regarding client-developer ease irrelevant.
&gt;
&gt;
&gt; Agreed. The lack of standardization and available libs is what make
&gt; hypermedia difficult.  15 years ago HTTP was difficult on some platforms
&gt; (Microsoft's ASP for one example, earlier than that on Windows itself), but
&gt; today HTTP is available in every developer tool there is. Hopefully time
&gt; will march forward and bring similar improvement related to REST.
&gt;
&gt; Besides, the same people that talk about client-developer ease vs. REST
&gt; today where the ones that sold you WS-* yesterday. I mean, what is a little
&gt; form processing compared to getting a SOAP stack up an running :-)
&gt;
&gt;
&gt; heh.  Totally agree. :)
&gt;
&gt; IMHO, it is much more a matter of eductaion than a matter of developer
&gt; ease.
&gt;
&gt;
&gt; eh, I think those are orthogonal issues.
&gt;
&gt; Yes, because generic media types only shove the problem up a layer - into
&gt; out of band knowledge.
&gt;
&gt; User agents *implement* media type specifications. And they offer users to
&gt; activate controls to proceed from one steady state to the next through
&gt; *their* application.
&gt;
&gt;
&gt; Exactly.
&gt;
&gt; I do and others, too. I also apply specific media types in real world
&gt; projects with great satisfaction and no pain on neither side.
&gt;
&gt;
&gt; I guess I should clarify, I don't read a lot of blog posts on well known
&gt; blogs on REST about this specific issue. I do occasional see side comments
&gt; in list threads, but can't remember a single list thread devoted to the
&gt; topic.
&gt;
&gt; When I get around to it I might blog about it, but my then blog is not
&gt; "well known." :)
&gt;
&gt; It's just that its very difficult to argue about (and it's all there in
&gt; the archives and on Roy's blog :-) anyhow) but much easier to demonstrate
&gt; with a real problem at hand.
&gt;
&gt;
&gt; Agreed.
&gt;
&gt; It's also pretty straight forward, actually. I have never understood the
&gt; reluctance people have to put they semantics they need done in a media type
&gt; - right where REST wants them to be. &lt;shrug/&gt;
&gt;
&gt;
&gt; I disagree that it is "easy."  Building a good media type takes a lot of
&gt; architecture skill (IMO) to get it right, without requiring constant and
&gt; ongoing revisions which pretty much moots the benefit.
&gt;
&gt; Also (IMO) I don't think there is a real value unless the media type is
&gt; shared by a lot of users (which also argues against media type
&gt; proliferation.) For example if FreshBooks, Wave, Xero, Kashoo, Outright,
&gt; FreeAgent, Harvest etc. each were to all create their own media type for
&gt; their own web APIs they would not provide much value over hardcoded URLs.
&gt; OTOH if they all got together and created an "application/accounting" media
&gt; type then I could see huge benefit.  (Hmm.  Maybe there is something
&gt; there...)
&gt;
&gt; -Mike
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; 
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19386<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-05-02 20:10:28<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>
On 02.05.2013, at 22:09, Jan Algermissen &lt;jan.algermissen@...&gt; wrote:

&gt; [1]

Forget the [1] , sorry.

Jan

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19387<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-05-02 20:16:57<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>On May 2, 2013, at 4:09 PM, Jan Algermissen &lt;jan.algermissen@...&gt; wrote:
&gt;&gt; OTOH if they all got together and created an "application/accounting" media type then I could see huge benefit.  (Hmm.  Maybe there is something there...)
&gt; Well, that's the 'unified data model' discussion from the 90ies. Not gonna happen :-)

Really?  People in the IETF told TBL that naming having a "universal" resource locator was not going to happen...  

Never say never. :)

&gt; But, consider this: REST leaves exactly one spot where you can put your semantics, that is the media type (and link rels for that matter, I keep lumping these together). The rest of REST (hah!) is uniform. Having variation take place in only one spot greatly simplifies integration (much easier to convert yourOrder.xml to myOrder.json than it is to have yourOrderAPI-client talk to myOrderAPI.)

Agreed.  A lot more needs to be made of this because currently AFAICT all the advocacy for people "Doing REST Wrong" is on HATEOUS/hypermedia. 

I also think the benefits of a standardized media type are much easier to grok by people who are not steeped in the lore of REST, and with a standardized media type the benefits of hypermedia can just piggyback their way in the door without needing explicit justification.

-Mike</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19388<br>
Sender:=?ISO-8859-1?Q?J=E9r=F4me_Louvel?= &lt;jlouvel@...&gt;<br>
Post Date/Time:2013-05-02 21:44:26<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>Thanks Mike for the constructive feed-back.

I want to make clear that I don't think a second that REST has failed in
any sense for what it was designed for, it is just not fully suited to the
Web API space.

I'll continue working on this formalization (requirements, properties,
etc.) as suggested, following the full "Taylor School" approach, via this
project:
https://github.com/restlet/web-api-style

Thanks,
Jerome



2013/5/2 mike amundsen &lt;mamund@...&gt;

&gt; TL;DNR
&gt; - It's good to see some thinking about whether/how a single example arch
&gt; from over a decade ago maps to needs of current Internet apps.
&gt; - I think the approach in the blog post strays too far into a critique of
&gt; assumed failures of X and attempts to "fix that" w/ mods to get X-prime
&gt; - I'd like to see more work on using the "Taylor School" approach to
&gt; modeling software arch (Properties/Qualities, Requirements, and Constraints)
&gt;
&gt; details for those who care...
&gt;
&gt; GOOD IDEA
&gt; First, I like the general idea of crafting a style that meets the demands
&gt; of the local use" cases instead of just adopting a style based on fad. Of
&gt; course, that is the exact message of Fielding's dissertation:
&gt;
&gt; "...consider how often we see software projects begin with adoption of
&gt; the latest fad in architectural design, and only later discover whether or
&gt; not the system requirements call for such an architecture.
&gt; Design-by-buzzword is a common occurrence." [1]
&gt;
&gt; IMO, It's a bummer that so many ppl treat Fielding's Chapter 5 as a
&gt; solution instead of an example.
&gt;
&gt; A METHODOLOGY
&gt; I also like Fielding's approach of keeping properties[2], requirements (of
&gt; the Web)[3], and constraints[4] in clear separate categories. IME, they are
&gt; all needed in order to craft a clear software architectural style. Too much
&gt; has been written about the last one (constraints) and not enough about the
&gt; first two (system properties and requirements). I am guilty of this myself.
&gt;
&gt; With all that as pre-amble, my primary comment on your blog post is that
&gt; I'd like to see more narration on the requirements you wish to meet (I see
&gt; some of this in the final section, I think). I'd also like to see the
&gt; properties that meet those requirements (I can't really identify examples
&gt; of that in your blog post right now). Finally, I'd like to see a list of
&gt; constraints to adopt in order to induce the properties that meet the
&gt; requirements.
&gt;
&gt; A RANT
&gt; IMO, after so many years of what I loving call the "UC Irvine School of
&gt; Software Architecture" or maybe the "Taylor School[6]", I am disappointed
&gt; that not more ppl talk about the general approach of identifying and
&gt; implementing "named styles." With luminaries such as Rohit Kahre[7], Roy
&gt; Fielding[8], Justin Erenkrantz[9] (to name just a few of the recognized
&gt; folks), Taylor's approach seems to incubate some incredible thinking in the
&gt; field of software architecture that we can all (I think) learn from and
&gt; consider emulating.
&gt;
&gt; I think this is a good start, but much more can be done to identify the
&gt; desired properties and selected constraints that would result in an arch
&gt; style that matches a set of clear requirements. Let's see more!
&gt;
&gt; Cheers.
&gt;
&gt;
&gt; [1] http://www.ics.uci.edu/~fielding/pubs/dissertation/introduction.htm
&gt; [2]
&gt; http://www.ics.uci.edu/~fielding/pubs/dissertation/net_app_arch.htm#sec_2_3
&gt; [3]
&gt; http://www.ics.uci.edu/~fielding/pubs/dissertation/web_arch_domain.htm#sec_4_1
&gt; [4]
&gt; http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm#sec_5_1
&gt; [5] http://www.isr.uci.edu/
&gt; [6] http://www.ics.uci.edu/~taylor/
&gt; [7] http://en.wikipedia.org/wiki/Rohit_Khare
&gt; [8] http://en.wikipedia.org/wiki/Roy_Fielding
&gt; [9] http://en.wikipedia.org/wiki/Justin_Erenkrantz
&gt;
&gt;
&gt; mamund
&gt; +1.859.757.1449
&gt; skype: mca.amundsen
&gt; http://amundsen.com/blog/
&gt; http://twitter.com/mamund
&gt; https://github.com/mamund
&gt; http://www.linkedin.com/in/mikeamundsen
&gt;
&gt;
&gt; On Thu, May 2, 2013 at 7:24 AM, jerome.louvel &lt;jlouvel@...&gt; wrote:
&gt;
&gt;&gt;  After living with REST for 10 years and introducing in 2005 the first
&gt;&gt; REST framework for Java (http://restlet.org), I felt that by pushing
&gt;&gt; REST too far we are just trying to make it solve problems it was designed
&gt;&gt; for in the first place.
&gt;&gt;
&gt;&gt; In this blog post, I tried to formalize a "Web API" architecture style
&gt;&gt; and contrast it with REST, then introduce the idea of cross-device web
&gt;&gt; sites as wrapping the power of both styles:
&gt;&gt; http://blog.restlet.com/2013/05/02/how-much-rest-should-your-web-api-get/
&gt;&gt;
&gt;&gt; Interested in hearing what you think!
&gt;&gt;
&gt;&gt; Best regards,
&gt;&gt; Jerome
&gt;&gt;
&gt;&gt; PS: sorry for those also following the "API-Craft" mailing list, but the
&gt;&gt; topic is right at the crossing of both communities.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; ------------------------------------
&gt;&gt;
&gt;&gt; Yahoo! Groups Links
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19389<br>
Sender:mike amundsen &lt;mamund@...&gt;<br>
Post Date/Time:2013-05-02 21:49:52<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>&lt;snip&gt;
I want to make clear that I don't think a second that REST has failed in
any sense for what it was designed for, it is just not fully suited to the
Web API space.
&lt;/snip&gt;
yeah, i was generalizing and characterizing and that's a bummer. you never
used the "failed" meme at all. sorry 'bout that.

&lt;snip&gt;
I'll continue working on this formalization (requirements, properties,
etc.) as suggested, following the full "Taylor School" approach, via this
project:
https://github.com/restlet/web-api-style
&lt;/snip&gt;
i think this is cool and already added the repo to my watch list!

thanks for sharing.



mamund
+1.859.757.1449
skype: mca.amundsen
http://amundsen.com/blog/
http://twitter.com/mamund
https://github.com/mamund
http://www.linkedin.com/in/mikeamundsen


On Thu, May 2, 2013 at 5:44 PM, Jérôme Louvel &lt;jlouvel@restlet.com&gt; wrote:

&gt; Thanks Mike for the constructive feed-back.
&gt;
&gt; I want to make clear that I don't think a second that REST has failed in
&gt; any sense for what it was designed for, it is just not fully suited to the
&gt; Web API space.
&gt;
&gt; I'll continue working on this formalization (requirements, properties,
&gt; etc.) as suggested, following the full "Taylor School" approach, via this
&gt; project:
&gt; https://github.com/restlet/web-api-style
&gt;
&gt; Thanks,
&gt; Jerome
&gt;
&gt;
&gt;
&gt; 2013/5/2 mike amundsen &lt;mamund@...&gt;
&gt;
&gt;&gt; TL;DNR
&gt;&gt; - It's good to see some thinking about whether/how a single example arch
&gt;&gt; from over a decade ago maps to needs of current Internet apps.
&gt;&gt; - I think the approach in the blog post strays too far into a critique of
&gt;&gt; assumed failures of X and attempts to "fix that" w/ mods to get X-prime
&gt;&gt; - I'd like to see more work on using the "Taylor School" approach to
&gt;&gt; modeling software arch (Properties/Qualities, Requirements, and Constraints)
&gt;&gt;
&gt;&gt; details for those who care...
&gt;&gt;
&gt;&gt; GOOD IDEA
&gt;&gt; First, I like the general idea of crafting a style that meets the demands
&gt;&gt; of the local use" cases instead of just adopting a style based on fad. Of
&gt;&gt; course, that is the exact message of Fielding's dissertation:
&gt;&gt;
&gt;&gt; "...consider how often we see software projects begin with adoption of
&gt;&gt; the latest fad in architectural design, and only later discover whether or
&gt;&gt; not the system requirements call for such an architecture.
&gt;&gt; Design-by-buzzword is a common occurrence." [1]
&gt;&gt;
&gt;&gt; IMO, It's a bummer that so many ppl treat Fielding's Chapter 5 as a
&gt;&gt; solution instead of an example.
&gt;&gt;
&gt;&gt; A METHODOLOGY
&gt;&gt; I also like Fielding's approach of keeping properties[2], requirements
&gt;&gt; (of the Web)[3], and constraints[4] in clear separate categories. IME, they
&gt;&gt; are all needed in order to craft a clear software architectural style. Too
&gt;&gt; much has been written about the last one (constraints) and not enough about
&gt;&gt; the first two (system properties and requirements). I am guilty of this
&gt;&gt; myself.
&gt;&gt;
&gt;&gt; With all that as pre-amble, my primary comment on your blog post is that
&gt;&gt; I'd like to see more narration on the requirements you wish to meet (I see
&gt;&gt; some of this in the final section, I think). I'd also like to see the
&gt;&gt; properties that meet those requirements (I can't really identify examples
&gt;&gt; of that in your blog post right now). Finally, I'd like to see a list of
&gt;&gt; constraints to adopt in order to induce the properties that meet the
&gt;&gt; requirements.
&gt;&gt;
&gt;&gt; A RANT
&gt;&gt; IMO, after so many years of what I loving call the "UC Irvine School of
&gt;&gt; Software Architecture" or maybe the "Taylor School[6]", I am disappointed
&gt;&gt; that not more ppl talk about the general approach of identifying and
&gt;&gt; implementing "named styles." With luminaries such as Rohit Kahre[7], Roy
&gt;&gt; Fielding[8], Justin Erenkrantz[9] (to name just a few of the recognized
&gt;&gt; folks), Taylor's approach seems to incubate some incredible thinking in the
&gt;&gt; field of software architecture that we can all (I think) learn from and
&gt;&gt; consider emulating.
&gt;&gt;
&gt;&gt; I think this is a good start, but much more can be done to identify the
&gt;&gt; desired properties and selected constraints that would result in an arch
&gt;&gt; style that matches a set of clear requirements. Let's see more!
&gt;&gt;
&gt;&gt; Cheers.
&gt;&gt;
&gt;&gt;
&gt;&gt; [1] http://www.ics.uci.edu/~fielding/pubs/dissertation/introduction.htm
&gt;&gt; [2]
&gt;&gt; http://www.ics.uci.edu/~fielding/pubs/dissertation/net_app_arch.htm#sec_2_3
&gt;&gt; [3]
&gt;&gt; http://www.ics.uci.edu/~fielding/pubs/dissertation/web_arch_domain.htm#sec_4_1
&gt;&gt; [4]
&gt;&gt; http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm#sec_5_1
&gt;&gt; [5] http://www.isr.uci.edu/
&gt;&gt; [6] http://www.ics.uci.edu/~taylor/
&gt;&gt; [7] http://en.wikipedia.org/wiki/Rohit_Khare
&gt;&gt; [8] http://en.wikipedia.org/wiki/Roy_Fielding
&gt;&gt; [9] http://en.wikipedia.org/wiki/Justin_Erenkrantz
&gt;&gt;
&gt;&gt;
&gt;&gt; mamund
&gt;&gt; +1.859.757.1449
&gt;&gt; skype: mca.amundsen
&gt;&gt; http://amundsen.com/blog/
&gt;&gt; http://twitter.com/mamund
&gt;&gt; https://github.com/mamund
&gt;&gt; http://www.linkedin.com/in/mikeamundsen
&gt;&gt;
&gt;&gt;
&gt;&gt; On Thu, May 2, 2013 at 7:24 AM, jerome.louvel &lt;jlouvel@...&gt;wrote:
&gt;&gt;
&gt;&gt;&gt;  After living with REST for 10 years and introducing in 2005 the first
&gt;&gt;&gt; REST framework for Java (http://restlet.org), I felt that by pushing
&gt;&gt;&gt; REST too far we are just trying to make it solve problems it was designed
&gt;&gt;&gt; for in the first place.
&gt;&gt;&gt;
&gt;&gt;&gt; In this blog post, I tried to formalize a "Web API" architecture style
&gt;&gt;&gt; and contrast it with REST, then introduce the idea of cross-device web
&gt;&gt;&gt; sites as wrapping the power of both styles:
&gt;&gt;&gt; http://blog.restlet.com/2013/05/02/how-much-rest-should-your-web-api-get/
&gt;&gt;&gt;
&gt;&gt;&gt; Interested in hearing what you think!
&gt;&gt;&gt;
&gt;&gt;&gt; Best regards,
&gt;&gt;&gt; Jerome
&gt;&gt;&gt;
&gt;&gt;&gt; PS: sorry for those also following the "API-Craft" mailing list, but the
&gt;&gt;&gt; topic is right at the crossing of both communities.
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; ------------------------------------
&gt;&gt;&gt;
&gt;&gt;&gt; Yahoo! Groups Links
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19390<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-05-03 00:58:56<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>Mark Baker wrote:
&gt; 
&gt; If I can say, you seem to be coming from a very solution-driven place,
&gt; where you have a solution in mind and then try to map it back onto
&gt; REST. I would suggest trying the other way; starting only with your
&gt; "business" requirements and moving forward from there, staying within
&gt; the constraints of REST to inform you what a solution might look like.
&gt; 

...

&gt; 
&gt; I think it can be achieved in most cases, and IME, most of the cases
&gt; it *can't* are due to efficiency concerns, not because of any
&gt; conflicting business requirement.  Businesses have been communicating
&gt; (internally and externally) statelessly long before computers came
&gt; around.
&gt; 

/me gives notworthy bow to the REST whisperer...

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19391<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-05-03 01:25:48<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>Mike Schinkel wrote:
&gt; 
&gt; Well, it's unproductive if you already understand. So IOW you are
&gt; saying it' a stupid question? Haven't we been socialized to tell
&gt; learners there are no stupid questions so as not to retard
&gt; learning? :)  
&gt; 

Part of learning is understanding which are the right questions to
ask.  ;-)  After reading the entire thread, my best advice to you is to
get the book, "Software Architecture:  Foundations, Theory, and
Practice" by Taylor/Medvidovic/Dashofy.

This is the only REST book I currently recommend, because it's about
architectural styles, not REST per se.  The common thread throughout
the book is a "lunar lander" application -- the discussions and
exercises illustrate the different implementation details of a well-
known app as the architectural style is varied.

"I rehabilitate Web APIs, but I train developers..." the REST whisperer
method isn't about examples of specific solutions to specific problems,
so much as learning how to approach a problem in terms of applying an
architectural style as a means to an end.  The "end" would be the goals
of the REST style being realized in the resulting system.

I think I would have grasped application vs. resource state vs.
stateless messaging in far fewer years, if I'd known to start with the
concept of information hiding.  And REST itself, had that book been
published a decade earlier, since REST was my introduction to the
concept of software architecture and the books of the time didn't take
Roy's work into account.

So I think many of the questions you've been asking here, would be
clarified not by REST examples, but by the cross-style lunar lander
example in the textbook.  It'll help you know where one style starts
and another leaves off in typical REST examples, regardless of source.

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19392<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-05-03 01:55:00<br>
Subject:Re: [rest-discuss] Re: the meaning of stateless<br>
Message:<br><br>
<pre>"scott vernon" wrote:
&gt; 
&gt; The function that we are exposing is a reimbursement calculation that
&gt; has many different fields (&gt; 200) that could alter the outcome.  Some
&gt; of the fields are basic flags and others are lists of items that
&gt; could be empty or up to as many as 100.  There isn't really any
&gt; hierarchy to the data or any value to expose them as resources
&gt; individually.  Providing the data in a POST would work but then the
&gt; concern is we need to store the output of the formula which also
&gt; contains a good amount of fields on the server in order to respond to
&gt; the future GET.  We are eventually going to feed this service into a
&gt; larger application and would like to be able to scale as we get large
&gt; amounts of data fed through.  If the result data is stored in memory,
&gt; we would lose the ability to scale out, and in essence make the
&gt; system not "stateless".
&gt; 

This question convinces me that the real "framework" for REST is Xforms.
The plethora of REST frameworks out there ease server configuration, so
I'm not dissing them; just saying that the MVC architecture Xforms
enforces on the client eases application development within the
hypertext paradigm.  Xforms may be deployed to the Web via myriad tools,
which is IMHO easier than coding javascript natively to implement MVC.

Here, unless the function/formula is proprietary and must remain on the
server, I'd put it entirely on the client as the "View" with the tabular
data in its own document, "Modeled" as HTML lists embedded in tables.
The "Controller" can GET/PUT/POST/DELETE this HTML model of the data,
or save it to disk, or whatever.

I'm not saying MVC on the client is REST, or that REST is limited to
MVC.  What I am saying, is where the problem space maps naturally to the
MVC pattern on the client, using Xforms at least to prototype is a no-
brainer as, used properly, it will constrain the developer to REST's
uniform interface.

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19393<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-05-03 02:10:31<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>Mike Schinkel wrote:
&gt; 
&gt; And why are sessions bad?  Is it merely because of the identity
&gt; problem mentioned above, or is it the fact that sessions disappear
&gt; after a timeout and they would be okay if we created them explicitly
&gt; and killed them explicitly?  Or is it something else?
&gt; 

Server-maintained sessions are bad because they don't scale, since the
requirement for anarchic participation by intermediaries is they can't
be expected to maintain open connections to every origin server they
encounter, for the purpose of tracking session state.  I'd say easily
90% of the data transferred "in session" is invariant between users and
visits, so a better solution would be to cache that redundant data.

But, "sessions are bad" is too general; there's nothing wrong with
maintaining session state on the client.  Or persisting state between
sessions, on the client.  This doesn't require the client to always use
the same origin server, or the server pool to pass around tokens which
track session state, or preclude intermediary participation; so there is
no scaling penalty.

I think the "sessions are bad" paper tiger has led to many a squirrely
API making all sorts of round-trips in the name of "RESTfully" avoiding
client-side session state.

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19394<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-05-03 02:17:00<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>Mike Schinkel wrote:
&gt; 
&gt; 1.) Shopping cart:  We have a web API that allows a user to add items
&gt; and the server keeps track of the items in my shopping cart...
&gt;

ToDo: RESTful shopping cart live example using Xforms to track session
state on the client.

Roy himself endorses the client-side approach, in Chapter 6.  So it's
beyond me why all examples of REST shopping carts approach it as a
server-side problem...

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19395<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-05-03 02:33:55<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>Jérôme Louvel wrote:
&gt; 
&gt; REST was never designed to solve all software architecture problems.
&gt; That's quite the opposite and what makes it so powerful to scale the
&gt; web of hypermedia documents.
&gt; 

What nobody's disproven, is the networked hypermedia document paradigm
is the most efficient solution to the distributed computing problem.
Therefore it does make sense to model systems to fit this paradigm,
wherever possible; a more natural paradigm for the problem space isn't
necessarily going to work at Internet scale over a period of decades.

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19396<br>
Sender:Mike Kelly &lt;mikekelly321@...&gt;<br>
Post Date/Time:2013-05-03 07:00:08<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On 3 May 2013 03:18, "Eric J. Bowman" &lt;eric@...&gt; wrote:
&gt;
&gt;
&gt;
&gt; Mike Schinkel wrote:
&gt; &gt;
&gt; &gt; 1.) Shopping cart: We have a web API that allows a user to add items
&gt; &gt; and the server keeps track of the items in my shopping cart...
&gt; &gt;
&gt;
&gt; ToDo: RESTful shopping cart live example using Xforms to track session
&gt; state on the client.
&gt;
&gt; Roy himself endorses the client-side approach, in Chapter 6. So it's
&gt; beyond me why all examples of REST shopping carts approach it as a
&gt; server-side problem...
&gt;

... probably because, in practice, that's the most practical and effective
solution to the problem and doesn't actually violate any constraint.

Its beyond _me_ why there are people describing statelessness of a client
server architecture by talking out specific types of resources..

Statelessness is about _shared state_ held between client and server.
Violating that constraint means creating an interaction that, in order to
determine its outcome, requires additional shared context _not visible in
the request_ and established by some previous interaction.

(It has nothing to do with server persisted shopping carts.)

As long as you don't create an interaction described by the above you
aren't violating the stateless constraint.

Here's an example violation:

# establish required shared context
POST /submit-search-terms
200 OK

# dependence on context of previous interaction not visible
GET /execute-search

Here's how to do the above avoiding violation:

POST /submit-search-terms
201 Location: /execute-search?id=123

# dependence on context of previous interaction visible via URL
GET /execute-search?id=123

Hope that helps.

Cheers,
M
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19397<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-05-03 07:39:52<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>Mike Kelly wrote:
&gt; 
&gt; (It has nothing to do with server persisted shopping carts.)
&gt; 
&gt; As long as you don't create an interaction described by the above you
&gt; aren't violating the stateless constraint.
&gt; 

Right, and exactly the problem!  Examples tailored to one constraint
often lead to solutions which miss the point of the style, ergo my
advice vis-a-vis the cross-style lunar lander example.  Server-side
shopping carts may be stateless, but can it really be argued that all
those extra round trips better meet the goals of the style?

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19398<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-05-03 08:06:31<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>Mike Kelly wrote:
&gt; 
&gt; Here's how to do the above avoiding violation:
&gt; 
&gt; POST /submit-search-terms
&gt; 201 Location: /execute-search?id=123
&gt; 
&gt; # dependence on context of previous interaction visible via URL
&gt; GET /execute-search?id=123
&gt; 

Here's how to do the above in harmony with the style:

GET /q?x=submit-terms-search
GET /q?x=search-submit-terms
GET /q?x=search-terms-submit
GET /q?x=terms-submit-search
GET /q?x=terms-search-submit
303 Location: /q?x=submit-search-terms

Dereferencing an alternate word-order may in fact create that resource
as a side-effect; because it's a side-effect the user-agent doesn't
need to know that 303 representation was just created.  REST certainly
doesn't require us to respond 404 when an equivalent resource exists.

Which is the same logic, by which we don't need to POST new searches to 
Google or any other search interface, to "create" them as new resources.

If multiple users, or even the same user, can be expected to (re)enter
the same terms (in any order), then the goals of the REST style are
certainly better met using GET so we can cache *how* we got the result,
instead of just caching the result with no entry link (a la POST).

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19399<br>
Sender:Mike Kelly &lt;mikekelly321@...&gt;<br>
Post Date/Time:2013-05-03 08:08:56<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Fri, May 3, 2013 at 9:06 AM, Eric J. Bowman &lt;eric@...&gt; wrote:
&gt; Mike Kelly wrote:
&gt;&gt;
&gt;&gt; Here's how to do the above avoiding violation:
&gt;&gt;
&gt;&gt; POST /submit-search-terms
&gt;&gt; 201 Location: /execute-search?id=123
&gt;&gt;
&gt;&gt; # dependence on context of previous interaction visible via URL
&gt;&gt; GET /execute-search?id=123
&gt;&gt;
&gt;
&gt; Here's how to do the above in harmony with the style:
&gt;
&gt; GET /q?x=submit-terms-search
&gt; GET /q?x=search-submit-terms
&gt; GET /q?x=search-terms-submit
&gt; GET /q?x=terms-submit-search
&gt; GET /q?x=terms-search-submit
&gt; 303 Location: /q?x=submit-search-terms
&gt;
&gt; Dereferencing an alternate word-order may in fact create that resource
&gt; as a side-effect; because it's a side-effect the user-agent doesn't
&gt; need to know that 303 representation was just created.  REST certainly
&gt; doesn't require us to respond 404 when an equivalent resource exists.
&gt;
&gt; Which is the same logic, by which we don't need to POST new searches to
&gt; Google or any other search interface, to "create" them as new resources.
&gt;
&gt; If multiple users, or even the same user, can be expected to (re)enter
&gt; the same terms (in any order), then the goals of the REST style are
&gt; certainly better met using GET so we can cache *how* we got the result,
&gt; instead of just caching the result with no entry link (a la POST).

Obviously.

The point of the example was to show the distinction between
interactions that do and don't violate the stateless constraint. It
wasn't meant to show the perfect way to do search.

Cheers,
M

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19400<br>
Sender:Mike Kelly &lt;mikekelly321@...&gt;<br>
Post Date/Time:2013-05-03 08:10:06<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Fri, May 3, 2013 at 8:39 AM, Eric J. Bowman &lt;eric@...&gt; wrote:
&gt; Mike Kelly wrote:
&gt;&gt;
&gt;&gt; (It has nothing to do with server persisted shopping carts.)
&gt;&gt;
&gt;&gt; As long as you don't create an interaction described by the above you
&gt;&gt; aren't violating the stateless constraint.
&gt;&gt;
&gt;
&gt; Right, and exactly the problem!  Examples tailored to one constraint
&gt; often lead to solutions which miss the point of the style, ergo my
&gt; advice vis-a-vis the cross-style lunar lander example.  Server-side
&gt; shopping carts may be stateless, but can it really be argued that all
&gt; those extra round trips better meet the goals of the style?

No. But it's not significantly worse in that regard, either.

Shopping carts are better off on the server side, so a client side
shopping cart is a horrible thing to use as an example because it
immediately conflicts with how people need to build stuff in practice.
Just pick another example that's a bit more realistic, like a
multi-step wizard or something.

Cheers,
M

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19401<br>
Sender:=?ISO-8859-1?Q?J=E9r=F4me_Louvel?= &lt;jlouvel@...&gt;<br>
Post Date/Time:2013-05-03 10:18:55<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>Excellent feed-back Robert.

I have entered several issues in the GitHub project to keep track of them
and ensure they are adressed in the more complete document to be published:
https://github.com/restlet/web-api-style/issues?state=open

Best regards,
Jerome


2013/5/2 Robert Brewer &lt;fumanchu@...&gt;

&gt; mike amundsen wrote:
&gt; &gt; I'd like to see more work on using the "Taylor School" approach
&gt; &gt; to modeling software arch (Properties/Qualities, Requirements,
&gt; &gt; and Constraints)
&gt;
&gt; Me too. And that will only be useful if folks are educated on the
&gt; differences. Therefore...
&gt;
&gt; In this case, the model needs to be fixed. "Mobility" is not a constraint,
&gt; it's a requirement. Most of the bullet points in that section are
&gt; requirements. "Off-line application mode" (I would rephrase it to
&gt; "disconnected operation") would be the constraint. That constraint plus the
&gt; cache constraint could lead to *an architecure* which syncs caches on
&gt; reconnection, but that design decision is not part of the style.
&gt;
&gt; Under "Custom Interface", it would be very informative to lay out in
&gt; detail which of the properties are being traded off when selecting explicit
&gt; versioning. Not to evangelize them over REST or vice-versa, but to
&gt; understand in which situations each is appropriate.
&gt;
&gt; Roy himself isn't a REST evangelist. He's an accomplished architect who
&gt; has created multiple architectures using multiple styles, attempting to
&gt; make them appropriate for the given requirements, both functional and
&gt; non-functional (properties). We would all be wise to design our
&gt; architectures with the same unbiased approach.
&gt;
&gt;
&gt; Robert Brewer
&gt; fumanchu@...
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19402<br>
Sender:=?ISO-8859-1?Q?J=E9r=F4me_Louvel?= &lt;jlouvel@...&gt;<br>
Post Date/Time:2013-05-03 11:34:44<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>Jan,

I agree with you on the importance of fully understanding and exploiting
the power of a paradigm first, before attempting to define a new one.

I think that the influence of REST on the design of so-called "web
services" has been extremely positive and enabled a simpler,
resource-oriented and more effective "Web API" style to emerge for
machine-to-machine interactions. This style can't eclipse REST as it
doesn't address the same requirements even though some are shared.

&gt; What does that mean: "and what makes it so powerful to scale the web of
hypermedia documents"?

I'm just considering how powerful it is to have a universal user agent (a
web browser) that can display and interact with HTML documents distributed
over the internet, without having to recompile the browser to access each
web site (true uniform interface composed of the URI/HTTP/HTML trio plus
additional standards such as JS/CSS/PNG). There is a deep independence of
evolution between clients and servers, even though they do need some level
of compatibility (HTML 5 support for example).

&gt; It just not as simple as taking half of REST and getting half the
benefits. REST works as a whole, not in 'layers' or 'levels'.

I agree, the whole is more than the sum of its parts. However, if you look
at the HTTP protocol itself, it also continues to evolve towards better
network efficiency, asynchronicity and more real-time interactions:
http://tools.ietf.org/html/draft-ietf-httpbis-http2-02

The Web clearly isn't "just" a set of hyperlinked HTML documents anymore.
Web APIs, push techniques such as WebSockets are other illustrations of the
new requirements expressed by web developers.

&gt; Now, there is quite a difference between a sensor and a mobile app. Who
says a mobile app cannot have hypermedia capabilities?

Even though, mobile apps can have hypermedia capabilities, we can't ignore
that the majority of mobile apps out there just aren't regular HTML web
sites, and for many of them for good reasons.

Think of a mobile games or mobile apps with an admin UI but running a
background service, for example to regularly sync data with a back-end (ex:
iCloud). In those cases, it makes little sense to consider this
machine-to-machine interaction as an application of hypermedia.

&gt; And who would make a sensor a REST client? I'd rather have the sensor
send measurement data via, e.g. UDP.

I was thinking about smart sensors such as the Nest connected thermostat.
It does use a semi-private web API that could be improved to become much
more resource-oriented:
http://www.wiredprairie.us/blog/index.php/archives/1442

&gt; Hmm, can you be more specific about what you mean here?

When you setup an IFTTT rule, you don't want the web APIs that are used to
change overnight without proper coordination and control of their update.
This requires out of band communication and it rarely done properly today,
but this can't be solved magically just because you put hypermedia into
play.

&gt; I'd say, the vast majority of Web APIs fails to be RESTful because people
simply did not follow the style.

I would say that the vast majority of Web APIs can never be RESTful because
they don't fully fit into the REST requirements.

&gt; Show me a single example that has been deliberately designed  unRESTful
on the basis of design principles. To me this is just the same old
discussion over and over again: People make a (rather unedcuated) claim,
mistake that for truth and come up with suboptimal design.

I gave a few examples above. My turn to ask you for an example of a proper
RESTful web API (beside HTML web sites, RDF driven Linked Data and
Atom/AtomPub driven blogs) exclusively using hypermedia (HATEOAS) to
interact with it (not just hyperlinks).

&gt; And that is not only true for wanna be REST services, unfortunately it is
an all too common way to approach all sorts of IT problems.
&gt; In my experience, people learn best if we do not settle for 'premature
agreement' but use, for example, a style to foster more flexible thinking.
Usually, whoever endures that process is thankful in the end.

I agree with that and I think that a proper/formal "Web API" style could
help in this regard.

&gt; Either way, a native app makes a perfectly RESTful client if you design
it that way. Personally, I'd go a very long way to maintain the benefit of
not having to coordinate client deployment with API changes....

If you look at how mobile app discovery is currently working, if you are a
company making a living out of it, you certainly prefer to go through the
formal app store deployment procedures that just hoping people will browse
the web from their smartphone screen like they do on a desktop. Maybe HTML
5 will change that landscape in the coming years, but many people will
prefer a different UI paradigm for their mobility use cases.

&gt; What is a "rich hypermedia client"?

Sorry, I meant when a rich hypermedia client ISN'T available. I meant a
modern web browser running on a connected watch might not be the best idea.

&gt; Can you be more specific about the situation that seems to be the root
cause for the perceived need that you have to change the style?

I hope I gave enough explanations above.

&gt; Can you explain what you mean by "a dynamic way like HTML is used by web
browsers"?

That web browsers don't need to learn or be redeveloped/recompiled each
time a new web page/site is published, contrary to Web APIs.

&gt; To me it remains unclear what the problem is you are trying to solve.
Please explain, I'm all ears.

I'm just acknowledging that there are many cases (look at the catalog of
9000 public web APIs on PW) where the hypermedia/uniform interface
constraints of REST just doesn't fit with the requirements. You can't just
ignore that reality and consider that all those smart developers are just
plain wrong because they didn't read/follow the REST style properly/fully
(many books and presentations exists and most developers are doing their
best, and there is much tooling available now).

This isn't to say that all those APIs can't benefit from a better
resource-oriented design (instead of a RPC inspired design) and usage of
HTTP features, but pushing REST too far why a systematic hypermedia
constraint is just counter-productive in my opinion.

Best regards,
Jerome



2013/5/2 Jan Algermissen &lt;jan.algermissen@...&gt;

&gt;
&gt; On 02.05.2013, at 19:48, Jérôme Louvel &lt;jlouvel@...&gt; wrote:
&gt;
&gt; &gt;
&gt; &gt; Jan,
&gt; &gt;
&gt; &gt; I remain a strong proponent of the idea that it is more fruitful to aim
&gt; at rethinking the problem to fit a sound paradigm rather than to blame the
&gt; paradigm for not fitting the problem (one's perceived view of it, that is).
&gt; &gt;
&gt; &gt; But when the paradigm isn't intended to solve a given problem, do you
&gt; think we should force the problem to fit into the paradigm?
&gt;
&gt; No, certainly not. What I am arguing against is what I experience so
&gt; often: That people claim some paradigm is a bad fit for a problem instead
&gt; of thinking thoroughly through the problem until they can make an educated
&gt; choice.
&gt;
&gt; &gt;
&gt; &gt; REST was never designed to solve all software architecture problems.
&gt; That's quite the opposite and what makes it so powerful to scale the web of
&gt; hypermedia documents.
&gt;
&gt; What does that mean: "and what makes it so powerful to scale the web of
&gt; hypermedia documents"?
&gt;
&gt; &gt;
&gt; &gt; Two concrete points:
&gt; &gt;
&gt; &gt; I don't buy the efficiency argument regarding discovery and granularity
&gt; of messages - unless you ignore caching and the possibility to tailor
&gt; representations for specific devices.
&gt; &gt;
&gt; &gt; You could also add HTTP compression to the mix. I'm a fan of HTTP
&gt; caching and content negotiation as well. The "Web API" style proposed fully
&gt; leverages those features.
&gt;
&gt; It just not as simple as taking half of REST and getting half the
&gt; benefits. REST works as a whole, not in 'layers' or 'levels'.
&gt;
&gt; &gt;
&gt; &gt; You write about the 'Web API style' "requires coordination between
&gt; clients and servers when changes are deployed" - doh... this eliminates
&gt; *the* (**the**) primary benefit to apply REST.
&gt; &gt;
&gt; &gt; Exactly, but if you ship a native mobile app or a connected hardware
&gt; device with no hypermedia capability at all (think about a dumb sensor),
&gt;
&gt; Now, there is quite a difference between a sensor and a mobile app. Who
&gt; says a mobile app cannot have hypermedia capabilities? And who would make a
&gt; sensor a REST client? I'd rather have the sensor send measurement data via,
&gt; e.g. UDP.
&gt;
&gt; &gt; you definitely need to coordinate the clients and servers even though
&gt; you are fully and properly using HTTP.
&gt;
&gt; Hmm, can you be more specific about what you mean here?
&gt;
&gt; &gt; This is why the vast majority of so-called web APIs are versionned and
&gt; based on stable URIs and representations structures. They can't always
&gt; afford to dynamically discover the user interface.
&gt;
&gt; I'd say, the vast majority of Web APIs fails to be RESTful because people
&gt; simply did not follow the style. Show me a single example that has been
&gt; deliberately designed  unRESTful on the basis of design principles. To me
&gt; this is just the same old discussion over and over again: People make a
&gt; (rather unedcuated) claim, mistake that for truth and come up with
&gt; suboptimal design.
&gt;
&gt; And that is not only true for wanna be REST services, unfortunately it is
&gt; an all too common way to approach all sorts of IT problems.
&gt;
&gt; In my experience, people learn best if we do not settle for 'premature
&gt; agreement' but use, for example, a style to foster more flexible thinking.
&gt; Usually, whoever endures that process is thankful in the end.
&gt;
&gt; &gt;
&gt; &gt; You could say that native apps aren't needed and could be re-developped
&gt; as HTML 5 apps, but this isn't always possible or desirable.
&gt;
&gt; Either way, a native app makes a perfectly RESTful client if you design it
&gt; that way. Personally, I'd go a very long way to maintain the benefit of not
&gt; having to coordinate client deployment with API changes....
&gt;
&gt;
&gt; &gt;
&gt; &gt; Aside from systems that focus on sending fine grained control messages
&gt; around in (near) realtime, I have yet to see a case where REST does not
&gt; shine due to performance, scalability and the ability to decentralize
&gt; management of the deployment and release cycles.
&gt; &gt;
&gt; &gt; Again, my point is to take the best of what REST brings but not try to
&gt; apply it in cases where a rich hypermedia client is available,
&gt;
&gt; What is a "rich hypermedia client"? Can you be more specific about the
&gt; situation that seems to be the root cause for the perceived need that you
&gt; have to change the style?
&gt;
&gt; &gt; but isn't so uncommon. I'm just trying to do REST justice otherwise
&gt; we'll get a backslash when people finally realize that the vast majority of
&gt; REST endpoints/APIs/etc. can't be used in a dynamic way like HTML is used
&gt; by web browsers.
&gt;
&gt; Can you explain what you mean by "a dynamic way like HTML is used by web
&gt; browsers"?
&gt;
&gt;
&gt; To me it remains unclear what the problem is you are trying to solve.
&gt; Please explain, I'm all ears.
&gt;
&gt;
&gt; Jan
&gt;
&gt;
&gt;
&gt;
&gt; &gt;
&gt; &gt; Best regards,
&gt; &gt; Jerome
&gt; &gt;
&gt; &gt;
&gt; &gt; 
&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19403<br>
Sender:=?ISO-8859-1?Q?J=E9r=F4me_Louvel?= &lt;jlouvel@...&gt;<br>
Post Date/Time:2013-05-03 11:36:01<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>+1


2013/5/2 Mike Schinkel &lt;mike@...&gt;

&gt; **
&gt;
&gt;
&gt; On May 2, 2013, at 2:34 PM, Jan Algermissen &lt;jan.algermissen@...&gt;
&gt; wrote:
&gt;
&gt; I'd say, the vast majority of Web APIs fails to be RESTful because people
&gt; simply did not follow the style. Show me a single example that has been
&gt; deliberately designed  unRESTful on the basis of design principles.
&gt;
&gt;
&gt; I think that last statement is demonstrably provable to be false. To make
&gt; a web API purely RESTful takes more effort on the part of the client and
&gt; some who have published web APIs have on purpose chosen not to require that
&gt; effort. I can't point to specific APIs at this moment but I know I've read
&gt; posts from others on various other web API-related lists such as API
&gt; Craft saying that pure REST makes it harder than they want for people to
&gt; succeed at using their web API.
&gt;
&gt; Of course if they then call their web API RESTful they are in the wrong.
&gt;
&gt; Further, and this (only) a slight tangent but the more I learn about pure
&gt; REST the more I come to believe that the focus on hypermedia constraint it
&gt; a red herring when an application-specific media type is not used. AFAICT
&gt; very promoting hypermedia make the explicit point that hypermedia does not
&gt; bring the benefits of REST without a dedicated media type. By itself
&gt; hypermedia just adds complexity; with a dedicated media-type a client can
&gt; be built that "knows" what do with the links found in the media type but I
&gt; see (almost?) nobody advocating this besides some cryptic comments from Roy
&gt; on his blog almost 5 years ago.
&gt;
&gt; -Mike
&gt;
&gt;  
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19404<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-05-03 11:39:56<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>
On 03.05.2013, at 13:34, Jérôme Louvel &lt;jlouvel@...&gt; wrote:

&gt; I would say that the vast majority of Web APIs can never be RESTful because they don't fully fit into the REST requirements.

Hmmm...

Jan
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19405<br>
Sender:=?ISO-8859-1?Q?J=E9r=F4me_Louvel?= &lt;jlouvel@...&gt;<br>
Post Date/Time:2013-05-03 11:46:18<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>Great, I've added some of those references to the wiki:
https://github.com/restlet/web-api-style/wiki/References

Would you be interested to contribute directly to the GitHub project?

Best regards,
Jerome



2013/5/2 mike amundsen &lt;mamund@...&gt;

&gt; just jumping in here:
&gt;
&gt; - CoAP[1] is a UDP-based protocol for small devices (sensors, etc.) that
&gt; has support for hypermedia [2].
&gt;
&gt; Modifiability
&gt; As for handling "co-ordination" for releases/changes between client and
&gt; server, IME, this boils down to a desire for the system to support
&gt; safe modifiabilty.
&gt;
&gt; - Erlang solved this problem using language constructs and a supervisor
&gt; model.
&gt; - Years ago (too long...) I worked on Intra-net implementations that
&gt; relied on shipping sandboxed code for client-side execution. We called it
&gt; "scriptable clients" and this was all before "browser" was a thing&lt;g&gt;.
&gt; - Gmail is one big pile of portable code that auto-installs as needed and
&gt; carries all the new funftionality
&gt; - I've worked in systems where the entire system was a ball of
&gt; configuration settings. new features were released via configuration only.
&gt; bear to manage each config, but quite reliable.
&gt;
&gt; the above all all examples of "co-ordination" of release/updates w/o a
&gt; dependence on hypermedia.
&gt;
&gt; If you focus on the properties you need instead of the techniques you use,
&gt; you find there are many, many ways to reach your goal.
&gt;
&gt; [1] http://tools.ietf.org/html/draft-ietf-core-coap-16
&gt; [2] http://tools.ietf.org/html/rfc6690
&gt;
&gt; Oh yeah, the Taylor link... http://www.ics.uci.edu/~taylor/
&gt;
&gt;
&gt; mamund
&gt; +1.859.757.1449
&gt; skype: mca.amundsen
&gt; http://amundsen.com/blog/
&gt; http://twitter.com/mamund
&gt; https://github.com/mamund
&gt; http://www.linkedin.com/in/mikeamundsen
&gt;
&gt;
&gt; On Thu, May 2, 2013 at 2:34 PM, Jan Algermissen &lt;
&gt; jan.algermissen@...&gt; wrote:
&gt;
&gt;&gt;
&gt;&gt; On 02.05.2013, at 19:48, Jérôme Louvel &lt;jlouvel@...&gt; wrote:
&gt;&gt;
&gt;&gt; &gt;
&gt;&gt; &gt; Jan,
&gt;&gt; &gt;
&gt;&gt; &gt; I remain a strong proponent of the idea that it is more fruitful to aim
&gt;&gt; at rethinking the problem to fit a sound paradigm rather than to blame the
&gt;&gt; paradigm for not fitting the problem (one's perceived view of it, that is).
&gt;&gt; &gt;
&gt;&gt; &gt; But when the paradigm isn't intended to solve a given problem, do you
&gt;&gt; think we should force the problem to fit into the paradigm?
&gt;&gt;
&gt;&gt; No, certainly not. What I am arguing against is what I experience so
&gt;&gt; often: That people claim some paradigm is a bad fit for a problem instead
&gt;&gt; of thinking thoroughly through the problem until they can make an educated
&gt;&gt; choice.
&gt;&gt;
&gt;&gt; &gt;
&gt;&gt; &gt; REST was never designed to solve all software architecture problems.
&gt;&gt; That's quite the opposite and what makes it so powerful to scale the web of
&gt;&gt; hypermedia documents.
&gt;&gt;
&gt;&gt; What does that mean: "and what makes it so powerful to scale the web of
&gt;&gt; hypermedia documents"?
&gt;&gt;
&gt;&gt; &gt;
&gt;&gt; &gt; Two concrete points:
&gt;&gt; &gt;
&gt;&gt; &gt; I don't buy the efficiency argument regarding discovery and granularity
&gt;&gt; of messages - unless you ignore caching and the possibility to tailor
&gt;&gt; representations for specific devices.
&gt;&gt; &gt;
&gt;&gt; &gt; You could also add HTTP compression to the mix. I'm a fan of HTTP
&gt;&gt; caching and content negotiation as well. The "Web API" style proposed fully
&gt;&gt; leverages those features.
&gt;&gt;
&gt;&gt; It just not as simple as taking half of REST and getting half the
&gt;&gt; benefits. REST works as a whole, not in 'layers' or 'levels'.
&gt;&gt;
&gt;&gt; &gt;
&gt;&gt; &gt; You write about the 'Web API style' "requires coordination between
&gt;&gt; clients and servers when changes are deployed" - doh... this eliminates
&gt;&gt; *the* (**the**) primary benefit to apply REST.
&gt;&gt; &gt;
&gt;&gt; &gt; Exactly, but if you ship a native mobile app or a connected hardware
&gt;&gt; device with no hypermedia capability at all (think about a dumb sensor),
&gt;&gt;
&gt;&gt; Now, there is quite a difference between a sensor and a mobile app. Who
&gt;&gt; says a mobile app cannot have hypermedia capabilities? And who would make a
&gt;&gt; sensor a REST client? I'd rather have the sensor send measurement data via,
&gt;&gt; e.g. UDP.
&gt;&gt;
&gt;&gt; &gt; you definitely need to coordinate the clients and servers even though
&gt;&gt; you are fully and properly using HTTP.
&gt;&gt;
&gt;&gt; Hmm, can you be more specific about what you mean here?
&gt;&gt;
&gt;&gt; &gt; This is why the vast majority of so-called web APIs are versionned and
&gt;&gt; based on stable URIs and representations structures. They can't always
&gt;&gt; afford to dynamically discover the user interface.
&gt;&gt;
&gt;&gt; I'd say, the vast majority of Web APIs fails to be RESTful because people
&gt;&gt; simply did not follow the style. Show me a single example that has been
&gt;&gt; deliberately designed  unRESTful on the basis of design principles. To me
&gt;&gt; this is just the same old discussion over and over again: People make a
&gt;&gt; (rather unedcuated) claim, mistake that for truth and come up with
&gt;&gt; suboptimal design.
&gt;&gt;
&gt;&gt; And that is not only true for wanna be REST services, unfortunately it is
&gt;&gt; an all too common way to approach all sorts of IT problems.
&gt;&gt;
&gt;&gt; In my experience, people learn best if we do not settle for 'premature
&gt;&gt; agreement' but use, for example, a style to foster more flexible thinking.
&gt;&gt; Usually, whoever endures that process is thankful in the end.
&gt;&gt;
&gt;&gt; &gt;
&gt;&gt; &gt; You could say that native apps aren't needed and could be re-developped
&gt;&gt; as HTML 5 apps, but this isn't always possible or desirable.
&gt;&gt;
&gt;&gt; Either way, a native app makes a perfectly RESTful client if you design
&gt;&gt; it that way. Personally, I'd go a very long way to maintain the benefit of
&gt;&gt; not having to coordinate client deployment with API changes....
&gt;&gt;
&gt;&gt;
&gt;&gt; &gt;
&gt;&gt; &gt; Aside from systems that focus on sending fine grained control messages
&gt;&gt; around in (near) realtime, I have yet to see a case where REST does not
&gt;&gt; shine due to performance, scalability and the ability to decentralize
&gt;&gt; management of the deployment and release cycles.
&gt;&gt; &gt;
&gt;&gt; &gt; Again, my point is to take the best of what REST brings but not try to
&gt;&gt; apply it in cases where a rich hypermedia client is available,
&gt;&gt;
&gt;&gt; What is a "rich hypermedia client"? Can you be more specific about the
&gt;&gt; situation that seems to be the root cause for the perceived need that you
&gt;&gt; have to change the style?
&gt;&gt;
&gt;&gt; &gt; but isn't so uncommon. I'm just trying to do REST justice otherwise
&gt;&gt; we'll get a backslash when people finally realize that the vast majority of
&gt;&gt; REST endpoints/APIs/etc. can't be used in a dynamic way like HTML is used
&gt;&gt; by web browsers.
&gt;&gt;
&gt;&gt; Can you explain what you mean by "a dynamic way like HTML is used by web
&gt;&gt; browsers"?
&gt;&gt;
&gt;&gt;
&gt;&gt; To me it remains unclear what the problem is you are trying to solve.
&gt;&gt; Please explain, I'm all ears.
&gt;&gt;
&gt;&gt;
&gt;&gt; Jan
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; &gt;
&gt;&gt; &gt; Best regards,
&gt;&gt; &gt; Jerome
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; ------------------------------------
&gt;&gt;
&gt;&gt; Yahoo! Groups Links
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19406<br>
Sender:=?ISO-8859-1?Q?J=E9r=F4me_Louvel?= &lt;jlouvel@...&gt;<br>
Post Date/Time:2013-05-03 11:50:47<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>Let me rephrase this: the vast majority of web API designers think that
they should strive to make their API RESTful (fully compliant with the REST
style) because we've told then to, when in fact they don't need/want to go
that far because some constraints of REST are just not a good fit for their
requirements.

Jerome


2013/5/3 Jan Algermissen &lt;jan.algermissen@...&gt;

&gt;
&gt; On 03.05.2013, at 13:34, Jérôme Louvel &lt;jlouvel@...&gt; wrote:
&gt;
&gt; &gt; I would say that the vast majority of Web APIs can never be RESTful
&gt; because they don't fully fit into the REST requirements.
&gt;
&gt; Hmmm...
&gt;
&gt; Jan
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19407<br>
Sender:=?ISO-8859-1?Q?J=E9r=F4me_Louvel?= &lt;jlouvel@...&gt;<br>
Post Date/Time:2013-05-03 12:04:27<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>I've never been in the WS-* bandwagon myself, and again I'm a long time
REST proponent, but still I never thought that all their experience and
expertise wasn't worth considering.

Just think that before REST was formalized, it was named the "HTTP Object
Model" and the original HTTP has been positively inspired by the
RPC/CORBA/DCOM efforts:
http://inkdroid.org/journal/2013/01/05/fielding-notes/

Regarding media types, their power lies in their standardization. Having a
separate one for each application isn't that useful, and ends up with the
media type being used in a generic JSON/XML way or abstractes away in a
programming client SDK.

Best regards,
Jerome



2013/5/2 Jan Algermissen &lt;jan.algermissen@...&gt;

&gt;
&gt; On 02.05.2013, at 21:15, Mike Schinkel &lt;mike@...&gt; wrote:
&gt;
&gt; &gt; On May 2, 2013, at 2:34 PM, Jan Algermissen &lt;jan.algermissen@...&gt;
&gt; wrote:
&gt; &gt;&gt; I'd say, the vast majority of Web APIs fails to be RESTful because
&gt; people simply did not follow the style. Show me a single example that has
&gt; been deliberately designed  unRESTful on the basis of design principles.
&gt; &gt;
&gt; &gt; I think that last statement is demonstrably provable to be false. To
&gt; make a web API purely RESTful takes more effort on the part of the client
&gt; and some who have published web APIs have on purpose chosen not to require
&gt; that effort. I can't point to specific APIs at this moment but I know I've
&gt; read posts from others on various other web API-related lists such as API
&gt; Craft saying that pure REST makes it harder than they want for people to
&gt; succeed at using their web API.
&gt;
&gt; It is true that REST achieves much of its decoupling by moving
&gt; responsibilities to the client and it is also true that it requires more
&gt; work on the client side compared to hard coding a bunch of URIs.
&gt;
&gt; However, the client developer also benefits from not being bothered with
&gt; having to follow API updates *at all* (aside from long-term deprecation
&gt; periods). It is a matter of trade off and I don;t think that the average
&gt; client developer/owner would not understand what the flexibility buys them.
&gt;
&gt; As always, REST is great for leveraging homogeneity and we should ease
&gt; client developer's live by working much more intensly on things like
&gt; JSON-Home[1]. Open source libs for these things should make arguments
&gt; regarding client-developer ease irrelevant.
&gt;
&gt; Besides, the same people that talk about client-developer ease vs. REST
&gt; today where the ones that sold you WS-* yesterday. I mean, what is a little
&gt; form processing compared to getting a SOAP stack up an running :-)
&gt;
&gt; IMHO, it is much more a matter of eductaion than a matter of developer
&gt; ease.
&gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; Of course if they then call their web API RESTful they are in the wrong.
&gt; &gt;
&gt; &gt; Further, and this (only) a slight tangent but the more I learn about
&gt; pure REST the more I come to believe that the focus on hypermedia
&gt; constraint it a red herring when an application-specific media type is not
&gt; used.
&gt;
&gt; Well, yes. Of course.
&gt;
&gt; &gt; AFAICT very promoting hypermedia make the explicit point that hypermedia
&gt; does not bring the benefits of REST without a dedicated media type.
&gt;
&gt; Yes, because generic media types only shove the problem up a layer - into
&gt; out of band knowledge.
&gt;
&gt; &gt; By itself hypermedia just adds complexity; with a dedicated media-type a
&gt; client can be built that "knows" what do with the links found in the media
&gt; type
&gt;
&gt; Exactly. User agents *implement* media type specifications. And they offer
&gt; users to activate controls to proceed from one steady state to the next
&gt; through *their* application.
&gt;
&gt;
&gt; &gt; but I see (almost?) nobody advocating this besides some cryptic comments
&gt; from Roy on his blog almost 5 years ago.
&gt;
&gt; I do and others, too. I also apply specific media types in real world
&gt; projects with great satisfaction and no pain on neither side.
&gt;
&gt; It's just that its very difficult to argue about (and it's all there in
&gt; the archives and on Roy's blog :-) anyhow) but much easier to demonstrate
&gt; with a real problem at hand.
&gt;
&gt; It's also pretty straight forward, actually. I have never understood the
&gt; reluctance people have to put they semantics they need done in a media type
&gt; - right where REST wants them to be. &lt;shrug/&gt;
&gt;
&gt; Jan
&gt;
&gt;
&gt; &gt;
&gt; &gt; -Mike
&gt;
&gt;
&gt; [1] http://tools.ietf.org/html/draft-nottingham-json-home
&gt;
&gt; ------------------------------------
&gt;
&gt; Yahoo! Groups Links
&gt;
&gt;
&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19408<br>
Sender:Mark Baker &lt;distobj@...&gt;<br>
Post Date/Time:2013-05-03 14:54:50<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Fri, May 3, 2013 at 3:00 AM, Mike Kelly &lt;mikekelly321@...&gt; wrote:
&gt; Statelessness is about _shared state_ held between client and server. Violating that constraint means creating an interaction that, in order to determine its outcome, requires additional shared context _not visible in the request_ and established by some previous interaction.
&gt;
&gt; (It has nothing to do with server persisted shopping carts.)
&gt;
&gt; As long as you don't create an interaction described by the above you aren't violating the stateless constraint.

But using a server-side shopping cart typically *does* violate that
constraint... not while you're shopping and adding/removing stuff
to/from the cart, but when you checkout by sending a message which
means "Purchase what's in that cart", when the intended meaning is
"Purchase size 9 Nike Air Max for $199".

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19409<br>
Sender:Andrei Neculau &lt;andrei.neculau@...&gt;<br>
Post Date/Time:2013-05-03 15:25:01<br>
Subject:Re: How much REST should your Web API get?<br>
Message:<br><br>
<pre>Forgot to include the group, the first time.

Jerome, thanks for your reply

I cannot see where you're coming from though. Maybe can you provide a full
excerpt where "it clearly states" what you say? To begin with, it makes
little sense to read "a client is a .. UI"
And I'm not the least convinced by the HTML&amp;PDF vs JSON&amp;XML argument. "user
presentable" has nothing to do with this topic IMHO. Some media-types have
document semantics, some don't. But it's the media-types that dictate the
level of "is it user presentable?" and not the API style.

Regarding mobility - I haven't got to that point yet, but I believe I will
not have any issue building an app with local storage against a REST API.
The reason I say it is that, when the server goes down, we're not talking
about the same "app" anyways, no matter the style. Server is up, client
follows what the server says, follows its affordances. Server is down,
client follows a hardcoded/fallback affordances, and then later tries to
reach state ~consistency and mitigate conflicts. How the sync is done, via
following a special relation (e.g. offline-sync) or by following the normal
links (i.e. replaying the local operations as remote operations) is again
of no importance. Similar thing happens with a web API.

Best of luck though. No need to convince me :)



On Fri, May 3, 2013 at 3:55 PM, JÃ©rÃ´me Louvel &lt;jlouvel@...&gt; wrote:

&gt; Hi Andrei,
&gt;
&gt; If you read carefully the REST chapter in Roy's dissertation (or the
&gt; excerpts I took from it in the blog post), it clearly states that the
&gt; client is an hypermedia-based UI (or some sort of spider like a search
&gt; engine).
&gt;
&gt; Most of the use cases I see for web APIs are about communication between a
&gt; client machine (a program or a device) and an origin server (via potential
&gt; intermediaries). The immediate client isn't intended to be a human because
&gt; the web API requires manipulation of structured data via JSON / XML
&gt; representations instead of user presentable HTML/PDF representations.
&gt;
&gt; Even though you can use conneg to negotiate a UI friendly representation
&gt; of your resources (nice to have), you can't fully interact with the API
&gt; this way and there is no reason to do so as the UI is working at another
&gt; layer above or beyond (native app, HTML app doing AJAX calls, connected
&gt; device with physical buttons for example, speech2text UI such as for a call
&gt; center, etc.).
&gt;
&gt; Regarding the Mobility constraint/requirement, REST assumes that there is
&gt; a more or less constant connection between the client/UI and the server to
&gt; make the application work (HATEOAS). New mobile internet usage requires
&gt; mobile app developer to take this aspect of networking into account deep in
&gt; the design of the user interaction as well as the connection to the
&gt; backend. The idea is to have a local storage that is regularly synchronized
&gt; with the backend when internet connectivity is available again.
&gt;
&gt; Best regards,
&gt; Jerome
&gt;
&gt;
&gt;
&gt; 2013/5/3 andrei.neculau@ymail.com &lt;andrei.neculau@...&gt;
&gt;
&gt;&gt; Jerome,
&gt;&gt;
&gt;&gt; 2 questions:
&gt;&gt;
&gt;&gt; - why are you highlighting that "the web api style" is driven by
&gt;&gt; machine-to-machine interactions? Coupled with the comment from John
&gt;&gt; Schlesinger, it hear that you put REST in the category of human-to-machine
&gt;&gt; interactions. ?!
&gt;&gt; - is "the mobility constraint" outside of REST? Some of the items there
&gt;&gt; are simply server-should-optimize-by-sniffing, instead of
&gt;&gt; client-should-optimize-given-it-has-the-whole-context.
&gt;&gt;
&gt;&gt; If I take out these 2, then the rest - coordinated evolution and custom
&gt;&gt; interfaces - is something that shouldn't sound attractive to anyone.
&gt;&gt;
&gt;&gt; Otherwise, Jan did me justice all the way and I have nothing to add.
&gt;&gt;
&gt;&gt; Thanks
&gt;&gt;
&gt;&gt; --- In rest-discuss@yahoogroups.com, "jerome.louvel" &lt;jlouvel@...&gt; wrote:
&gt;&gt; &gt;
&gt;&gt; &gt; After living with REST for 10 years and introducing in 2005 the first
&gt;&gt; REST framework for Java (http://restlet.org), I felt that by pushing
&gt;&gt; REST too far we are just trying to make it solve problems it was designed
&gt;&gt; for in the first place.
&gt;&gt; &gt;
&gt;&gt; &gt; In this blog post, I tried to formalize a "Web API" architecture style
&gt;&gt; and contrast it with REST, then introduce the idea of cross-device web
&gt;&gt; sites as wrapping the power of both styles:
&gt;&gt; &gt;
&gt;&gt; http://blog.restlet.com/2013/05/02/how-much-rest-should-your-web-api-get/
&gt;&gt; &gt;
&gt;&gt; &gt; Interested in hearing what you think!
&gt;&gt; &gt;
&gt;&gt; &gt; Best regards,
&gt;&gt; &gt; Jerome
&gt;&gt; &gt;
&gt;&gt; &gt; PS: sorry for those also following the "API-Craft" mailing list, but
&gt;&gt; the topic is right at the crossing of both communities.
&gt;&gt; &gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;


-- 
andreineculau.com &lt;http://www.andreineculau.com&gt; -- Emails should be five
sentenc.es &lt;http://five.sentenc.es&gt; or less.

The time spent on any item of the agenda will be in inverse proportion to
the sum involved. *C. Northcote Parkinson*
http://en.wikipedia.org/wiki/Parkinson's_Law_of_Triviality
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19410<br>
Sender:=?ISO-8859-1?Q?J=E9r=F4me_Louvel?= &lt;jlouvel@...&gt;<br>
Post Date/Time:2013-05-03 15:40:09<br>
Subject:Re: How much REST should your Web API get?<br>
Message:<br><br>
<pre>Andrei,

Here is the excerpt from the REST dissertation, "5.1.2 Client - Server"
section:

"By separating the user interface concerns from the data storage concerns,
we improve the portability of the user interface across multiple platforms
and improve scalability by simplifying the server components"

Also section "5.3.3 Data view"

"The model application is therefore an engine that moves from one state to
the next by examining and choosing from among the alternative state
transitions in the current set of representations. Not surprisingly, this
exactly matches the user interface of a hypermedia browser."

I think the cause of misunderstanding is with what you call a "REST API",
which is probably not really/fully a REST API. Can you give me a concrete
example of a REST API (beside hypertext HTML/HTTP, hyperdata RDF/HTTP and
Atom/AtomPub)?

Best regards,
Jerome



2013/5/3 Andrei Neculau &lt;andrei.neculau@...&gt;

&gt; Forgot to include the group, the first time.
&gt;
&gt; Jerome, thanks for your reply
&gt;
&gt; I cannot see where you're coming from though. Maybe can you provide a full
&gt; excerpt where "it clearly states" what you say? To begin with, it makes
&gt; little sense to read "a client is a .. UI"
&gt; And I'm not the least convinced by the HTML&amp;PDF vs JSON&amp;XML argument.
&gt; "user presentable" has nothing to do with this topic IMHO. Some media-types
&gt; have document semantics, some don't. But it's the media-types that dictate
&gt; the level of "is it user presentable?" and not the API style.
&gt;
&gt; Regarding mobility - I haven't got to that point yet, but I believe I will
&gt; not have any issue building an app with local storage against a REST API.
&gt; The reason I say it is that, when the server goes down, we're not talking
&gt; about the same "app" anyways, no matter the style. Server is up, client
&gt; follows what the server says, follows its affordances. Server is down,
&gt; client follows a hardcoded/fallback affordances, and then later tries to
&gt; reach state ~consistency and mitigate conflicts. How the sync is done, via
&gt; following a special relation (e.g. offline-sync) or by following the normal
&gt; links (i.e. replaying the local operations as remote operations) is again
&gt; of no importance. Similar thing happens with a web API.
&gt;
&gt; Best of luck though. No need to convince me :)
&gt;
&gt;
&gt;
&gt; On Fri, May 3, 2013 at 3:55 PM, Jérôme Louvel &lt;jlouvel@...&gt; wrote:
&gt;
&gt;&gt; Hi Andrei,
&gt;&gt;
&gt;&gt; If you read carefully the REST chapter in Roy's dissertation (or the
&gt;&gt; excerpts I took from it in the blog post), it clearly states that the
&gt;&gt; client is an hypermedia-based UI (or some sort of spider like a search
&gt;&gt; engine).
&gt;&gt;
&gt;&gt; Most of the use cases I see for web APIs are about communication between
&gt;&gt; a client machine (a program or a device) and an origin server (via
&gt;&gt; potential intermediaries). The immediate client isn't intended to be a
&gt;&gt; human because the web API requires manipulation of structured data via JSON
&gt;&gt; / XML representations instead of user presentable HTML/PDF representations.
&gt;&gt;
&gt;&gt; Even though you can use conneg to negotiate a UI friendly representation
&gt;&gt; of your resources (nice to have), you can't fully interact with the API
&gt;&gt; this way and there is no reason to do so as the UI is working at another
&gt;&gt; layer above or beyond (native app, HTML app doing AJAX calls, connected
&gt;&gt; device with physical buttons for example, speech2text UI such as for a call
&gt;&gt; center, etc.).
&gt;&gt;
&gt;&gt; Regarding the Mobility constraint/requirement, REST assumes that there is
&gt;&gt; a more or less constant connection between the client/UI and the server to
&gt;&gt; make the application work (HATEOAS). New mobile internet usage requires
&gt;&gt; mobile app developer to take this aspect of networking into account deep in
&gt;&gt; the design of the user interaction as well as the connection to the
&gt;&gt; backend. The idea is to have a local storage that is regularly synchronized
&gt;&gt; with the backend when internet connectivity is available again.
&gt;&gt;
&gt;&gt; Best regards,
&gt;&gt; Jerome
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; 2013/5/3 andrei.neculau@... &lt;andrei.neculau@...&gt;
&gt;&gt;
&gt;&gt;&gt; Jerome,
&gt;&gt;&gt;
&gt;&gt;&gt; 2 questions:
&gt;&gt;&gt;
&gt;&gt;&gt; - why are you highlighting that "the web api style" is driven by
&gt;&gt;&gt; machine-to-machine interactions? Coupled with the comment from John
&gt;&gt;&gt; Schlesinger, it hear that you put REST in the category of human-to-machine
&gt;&gt;&gt; interactions. ?!
&gt;&gt;&gt; - is "the mobility constraint" outside of REST? Some of the items there
&gt;&gt;&gt; are simply server-should-optimize-by-sniffing, instead of
&gt;&gt;&gt; client-should-optimize-given-it-has-the-whole-context.
&gt;&gt;&gt;
&gt;&gt;&gt; If I take out these 2, then the rest - coordinated evolution and custom
&gt;&gt;&gt; interfaces - is something that shouldn't sound attractive to anyone.
&gt;&gt;&gt;
&gt;&gt;&gt; Otherwise, Jan did me justice all the way and I have nothing to add.
&gt;&gt;&gt;
&gt;&gt;&gt; Thanks
&gt;&gt;&gt;
&gt;&gt;&gt; --- In rest-discuss@yahoogroups.com, "jerome.louvel" &lt;jlouvel@...&gt;
&gt;&gt;&gt; wrote:
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; After living with REST for 10 years and introducing in 2005 the first
&gt;&gt;&gt; REST framework for Java (http://restlet.org), I felt that by pushing
&gt;&gt;&gt; REST too far we are just trying to make it solve problems it was designed
&gt;&gt;&gt; for in the first place.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; In this blog post, I tried to formalize a "Web API" architecture style
&gt;&gt;&gt; and contrast it with REST, then introduce the idea of cross-device web
&gt;&gt;&gt; sites as wrapping the power of both styles:
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; http://blog.restlet.com/2013/05/02/how-much-rest-should-your-web-api-get/
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Interested in hearing what you think!
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Best regards,
&gt;&gt;&gt; &gt; Jerome
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; PS: sorry for those also following the "API-Craft" mailing list, but
&gt;&gt;&gt; the topic is right at the crossing of both communities.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt; --
&gt; andreineculau.com &lt;http://www.andreineculau.com&gt; -- Emails should be five
&gt; sentenc.es &lt;http://five.sentenc.es&gt; or less.
&gt;
&gt; The time spent on any item of the agenda will be in inverse proportion to
&gt; the sum involved. *C. Northcote Parkinson*
&gt; http://en.wikipedia.org/wiki/Parkinson's_Law_of_Triviality
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19411<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-05-03 16:44:36<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>On May 3, 2013, at 8:04 AM, Jérôme Louvel &lt;jlouvel@...&gt; wrote:
&gt; Regarding media types, their power lies in their standardization. Having a separate one for each application isn't that useful, and ends up with the media type being used in a generic JSON/XML way or abstractes away in a programming client SDK.

Exactly.  

Given Jan's "Not gonna happen" comment[2] related to standardization of media types, I found this blog post[1] from Kin Lane posted yesterday oddly well-timed. :)

-Mike

[1] http://www.apievangelist.com/2013/05/02/startups-need-to-work-together-on-api-definitions/
[2] http://tech.groups.yahoo.com/group/rest-discuss/message/19384
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19412<br>
Sender:=?ISO-8859-1?Q?J=E9r=F4me_Louvel?= &lt;jlouvel@...&gt;<br>
Post Date/Time:2013-05-03 17:39:04<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>Yes, this is another great post from Kin. However this approach doesn't
make sense in a pure REST world when there isn't place for such out-of-band
definition of the interface (uniform interface).

Another reason to think about those aspects in a separate architecture
style.

Best regards,
Jerome



2013/5/3 Mike Schinkel &lt;mike@...&gt;

&gt; On May 3, 2013, at 8:04 AM, Jérôme Louvel &lt;jlouvel@...&gt; wrote:
&gt; &gt; Regarding media types, their power lies in their standardization. Having
&gt; a separate one for each application isn't that useful, and ends up with the
&gt; media type being used in a generic JSON/XML way or abstractes away in a
&gt; programming client SDK.
&gt;
&gt; Exactly.
&gt;
&gt; Given Jan's "Not gonna happen" comment[2] related to standardization of
&gt; media types, I found this blog post[1] from Kin Lane posted yesterday oddly
&gt; well-timed. :)
&gt;
&gt; -Mike
&gt;
&gt; [1]
&gt; http://www.apievangelist.com/2013/05/02/startups-need-to-work-together-on-api-definitions/
&gt; [2] http://tech.groups.yahoo.com/group/rest-discuss/message/19384
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19413<br>
Sender:Steve Klabnik &lt;steve@...&gt;<br>
Post Date/Time:2013-05-03 17:53:18<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>I read that blog post as a call for more media types, personally.
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19414<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-05-03 18:11:15<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>On May 3, 2013, at 1:39 PM, Jérôme Louvel &lt;jlouvel@...&gt; wrote:
&gt; Yes, this is another great post from Kin. However this approach doesn't make sense in a pure REST world when there isn't place for such out-of-band definition of the interface (uniform interface).
&gt; 
&gt; Another reason to think about those aspects in a separate architecture style.

While I'm very much been one to question the practicality of completely RESTful approaches for many web APIs I'm not sure it's clear that it would not be possible for a purely RESTful approach across different types of services assuming collaboration media type, and with media types it would make the prospect of more RESTful behavior much more likely.

On May 3, 2013, at 1:53 PM, Steve Klabnik &lt;steve@...&gt; wrote:
&gt; I read that blog post as a call for more media types, personally.

+1

-Mike

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19415<br>
Sender:=?ISO-8859-1?Q?J=F8rn_Wildt?= &lt;jw@...&gt;<br>
Post Date/Time:2013-05-03 19:57:49<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>I know I am bit late to the party here, but I would like to contribute with
a small real life story about a RESTful API for mobile clients - an example
which in my opinion illustrates rather well that hyper media is useful for
mobile clients as well.

The setup is as follows:

   1. We (cBrain) develop software for governmental case file management.
   2. The software is installed on location on different customer sites.
   Each of the sites has their own installation of the server side REST API.
   3. We have a mobile iPad client that synchronizes selected case files to
   the iPad for off-line browsing.

Due to the way the central iPad app-store works this means that both our
clients and servers must deal with all possible combinations of different
versions of the software: a new client may have to deal with an old server,
just as well as an old client must work with a new server.

We decided to go "full monty" and stick as closely as possible to the REST
constraints - especially hyper media. This means our clients have one, and
only one, single entry point to the REST service - and that entry point
contains a service document with links/link-rels to all top level
resources. No hard coded URL structure on the client. The rest is classic
"follow your nose" links embedded in all resource representations.

Happy moment number one was this: a new, improved and more efficient,
synchronization mechanism was introduced without requiring a mandatory
upgrade of all clients.

We simply did what REST does best: introduce a new resource and add that to
the service document with a new link-rel. Now, old clients look for the old
link-rel and new clients look for the new link-rel. This does of course put
a maintenance burden on both clients and servers since they have to support
both ways of synchronizing for some time.

Happy moment number two was this: someone decides to include some third
party stuff that happens to look more a less like a case file - now the
clients should be able to synchronize and show both the original case files
and the new kind-of case files.

This too was easy using hyper media: the clients make no assumptions about
URLs so they really don't care how the URLs look - and thus the server is
free to embed any information it wants in the URL (in this case identifying
what kind of case file it points to). When the client asks for the list of
relevant case files it is then served a list of highly heterogeneous URLs,
but as long as any of these resources behaves as case file is expected to,
the client happily goes on without ever noticing that new types of case
files has been added.

So what am I trying to say here? Well, part of the earlier conversation
hinted that hyper media might be overkill for mobile clients. I just want
to illustrate the opposite: hyper media can be good for mobile clients :-)

The last happy moment also illustrates what (I think) was meant by "*A REST
API should never have typed resources that are significant to the client*"
in Roy's famous rant "REST APIs must be
hypertext-driven&lt;http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven&gt;".
Had the client known anything about the internal type behind the facade
then it would have failed when we introduced multiple types behind the
facade.

/Jørn
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19416<br>
Sender:=?ISO-8859-1?Q?J=F8rn_Wildt?= &lt;jw@...&gt;<br>
Post Date/Time:2013-05-03 20:41:12<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>It seems to me that the biggest difference between "Web API" and "REST" is
a matter of perspective: Web APIs talk about THE server and all its clients
whereas REST talk about MANY servers and multiple clients.

This difference in perspective influences many decisions and view points:

- Web API: A single server need not coordinate with other servers, owned by
other authorities, when it changes its representations - it only needs to
inform its clients about it.

- REST: all servers must adhere to a common set of well defined, stable,
specifications (media types) otherwise it would be impossible for the
clients to interact with all the different servers.

In an ecosystem with one single server and custom build clients (Twitter
clients for instance) there really is no need for media types/uniform
interface: the client can safely assume that the server is going to return
JSON in one specific flavor each and every time the client makes a request
to it. Neither is hyper media of much relevance since it is quite safe to
assume that the server won't change its URL structure.

In an ecosystem of global scale with many servers it is quite the opposite:
different servers are not implemented by the same development teams and
thus, without a mechanism like media types, the clients really wouldn't
have any way of knowing what kind of information a resource representation
might contain. Neither can the clients make any assumptions about URL
structures across disparate server implementations.

It is this difference in perspective that makes it hard for developers to
understand the benefits of REST: if all they want to implement is a new
one-off snowflake service with dedicated clients then its difficult to
argue for some of the uniform interface constraints.

Relaxing on the constraints can probably be fine when the goal is a one-off
non-REST service - and this is probably often the case: who says Twitter is
interested in being reduced to a commodity service that we can find all
over the web? Had Twitter/Facebook/others decided to define their interface
in terms of shared media types then they would have reduced them selves to
a commodity from the very beginning. This, I believe, is one of the reasons
that we don't see many domain specific media types in the wild.

/Jørn






On Fri, May 3, 2013 at 9:57 PM, Jørn Wildt &lt;jw@...&gt; wrote:

&gt; I know I am bit late to the party here, but I would like to contribute
&gt; with a small real life story about a RESTful API for mobile clients - an
&gt; example which in my opinion illustrates rather well that hyper media is
&gt; useful for mobile clients as well.
&gt;
&gt; The setup is as follows:
&gt;
&gt;    1. We (cBrain) develop software for governmental case file management.
&gt;    2. The software is installed on location on different customer sites.
&gt;    Each of the sites has their own installation of the server side REST API.
&gt;    3. We have a mobile iPad client that synchronizes selected case files
&gt;    to the iPad for off-line browsing.
&gt;
&gt; Due to the way the central iPad app-store works this means that both our
&gt; clients and servers must deal with all possible combinations of different
&gt; versions of the software: a new client may have to deal with an old server,
&gt; just as well as an old client must work with a new server.
&gt;
&gt; We decided to go "full monty" and stick as closely as possible to the REST
&gt; constraints - especially hyper media. This means our clients have one, and
&gt; only one, single entry point to the REST service - and that entry point
&gt; contains a service document with links/link-rels to all top level
&gt; resources. No hard coded URL structure on the client. The rest is classic
&gt; "follow your nose" links embedded in all resource representations.
&gt;
&gt; Happy moment number one was this: a new, improved and more efficient,
&gt; synchronization mechanism was introduced without requiring a mandatory
&gt; upgrade of all clients.
&gt;
&gt; We simply did what REST does best: introduce a new resource and add that
&gt; to the service document with a new link-rel. Now, old clients look for the
&gt; old link-rel and new clients look for the new link-rel. This does of course
&gt; put a maintenance burden on both clients and servers since they have to
&gt; support both ways of synchronizing for some time.
&gt;
&gt; Happy moment number two was this: someone decides to include some third
&gt; party stuff that happens to look more a less like a case file - now the
&gt; clients should be able to synchronize and show both the original case files
&gt; and the new kind-of case files.
&gt;
&gt; This too was easy using hyper media: the clients make no assumptions about
&gt; URLs so they really don't care how the URLs look - and thus the server is
&gt; free to embed any information it wants in the URL (in this case identifying
&gt; what kind of case file it points to). When the client asks for the list of
&gt; relevant case files it is then served a list of highly heterogeneous URLs,
&gt; but as long as any of these resources behaves as case file is expected to,
&gt; the client happily goes on without ever noticing that new types of case
&gt; files has been added.
&gt;
&gt; So what am I trying to say here? Well, part of the earlier conversation
&gt; hinted that hyper media might be overkill for mobile clients. I just want
&gt; to illustrate the opposite: hyper media can be good for mobile clients :-)
&gt;
&gt; The last happy moment also illustrates what (I think) was meant by "*A
&gt; REST API should never have typed resources that are significant to the
&gt; client*" in Roy's famous rant "REST APIs must be hypertext-driven&lt;http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven&gt;".
&gt; Had the client known anything about the internal type behind the facade
&gt; then it would have failed when we introduced multiple types behind the
&gt; facade.
&gt;
&gt; /Jørn
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19417<br>
Sender:Matt McClure &lt;matthewlmcclure@...&gt;<br>
Post Date/Time:2013-05-03 20:56:58<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>On Fri, May 3, 2013 at 4:41 PM, Jørn Wildt &lt;jw@...&gt; wrote:

&gt; **
&gt; In an ecosystem with one single server and custom build clients (Twitter
&gt; clients for instance) there really is no need for media types/uniform
&gt; interface: the client can safely assume that the server is going to return
&gt; JSON in one specific flavor each and every time the client makes a request
&gt; to it. Neither is hyper media of much relevance since it is quite safe to
&gt; assume that the server won't change its URL structure.
&gt;

Ironically, there are multiple servers that implement the Twitter API. For
example, http://en.support.wordpress.com/twitter-api/

-- 
Matt McClure
http://matthewlmcclure.com
http://www.mapmyfitness.com/profile/matthewlmcclure
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19418<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-05-03 21:41:15<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>On May 3, 2013, at 3:57 PM, Jørn Wildt &lt;jw@...&gt; wrote:
&gt; We decided to go "full monty" and stick as closely as possible to the REST constraints - especially hyper media. This means our clients have one, and only one, single entry point to the REST service - and that entry point contains a service document with links/link-rels to all top level resources. 
&gt; ...
&gt; 
&gt; This too was easy using hyper media...
&gt; 
&gt; The last happy moment also illustrates what (I think) was meant by "A REST API should never have typed resources that are significant to the client" in Roy's famous rant "REST APIs must be hypertext-driven". Had the client known anything about the internal type behind the facade then it would have failed when we introduced multiple types behind the facade.
&gt; 

Not to diminish what you've accomplished, because it sounds like it works extremely well in practice albeit probably at the cost of a lot of initial tooling but I would question if the use of a "service document" does not by-definition disqualify it as being RESTful as per Roy's precise definition, ironically stated in the blog post rant you reference.

As I understand it from a recent multiple re-reading of Roy's infamous rant the use of a service document would mean individual messages are indeed not fully description and that would disqualify it as being "RESTful."  Not that I disagree with the concept of a lightweight JSON-based service document that simply points out all the URLs; frankly I rather like the idea. But unless I mis-read or Roy has revised his definition of REST since that post I think service documents do not a RESTful web service make?

Also, just curious, are you using your own custom media type or just JSON/XML/other, and if not the former does that also not disqualify it from being considered RESTful?  If you are using your own custom media type I'd be curious what the media type is, i.e. what is "xxxx-yyyy" for "application/"xxxx-yyyy" and what it's base format is; XML, JSON, HAL, ATOM, etc?

The one thing I still have not been able to fully understand from Roy's rant was just exactly what he meant means by a "typed" resource?  Doesn't a &lt;img&gt; tag imply a resource of type JPEG, GIF or PNG, for example?  So I have never been fully able to grok that part.  Any clarifications from anyone?

-Mike</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19419<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-05-04 01:41:43<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>Mike Kelly wrote:
&gt; 
&gt; Shopping carts are better off on the server side, so a client side
&gt; shopping cart is a horrible thing to use as an example because it
&gt; immediately conflicts with how people need to build stuff in practice.
&gt; Just pick another example that's a bit more realistic, like a
&gt; multi-step wizard or something.
&gt; 

Sorry, but I'm going to go with Roy on this one, developers' perceived
"need" to do it the wrong way aside.  People build stuff wrong in
practice, usually in blissful ignorance of REST constraints, but this
doesn't make the wrong approach "more realistic" it just means the
right approach is completely misunderstood -- making it an ideal
example.

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19420<br>
Sender:=?ISO-8859-1?Q?J=F8rn_Wildt?= &lt;jw@...&gt;<br>
Post Date/Time:2013-05-04 06:28:30<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>Regarding "service document": what if I called it "home page" or "home
document" - would it make a difference? The problem with the classic
"service document" is that it, in the SOAP world, includes type information
and is meant for static "development time" binding. That is not the case
here: our "home document" only includes links with link-rels and a short
description.

Speaking about shared types ... Jimmy Bogard has a fresh blog post on this
issue: http://lostechies.com/jimmybogard/2013/05/01/messages-data-and-types/

The home document can be served as either one large JSON object with keys
as link-rels and values as URLs (like HAL does it), HTML with &lt;a href="..."
rel="..."&gt; or a homegrown XML format. Today I would probably have chosen
something like JSON-home (
http://tools.ietf.org/html/draft-nottingham-json-home-02), HAL or another
hyper media enabled *standard* JSON media type.

So, no, I do not think using a service document / home page disqualifies
the service as being RESTful - as long as it is used for late binding at
runtime (something which we make quite explicit in the documentation).

&gt; albeit probably at the cost of a lot of initial tooling

Well, yes, some, but any client that understands JSON can do hyper media
with something like HAL. The server is based on OpenRasta which also has
nice support for creating links.

&gt; Also, just curious, are you using your own custom media type or just
JSON/XML/other,

We have a custom media type "application/vendor.cbrain.casefiole+xml". I
still have to decide whether I prefer generic media types over custom media
types - in this case we chose a custom media type to get some experience. I
will write a piece on that later - when I have made up my mind about what I
think about it.

&gt; The one thing I still have not been able to fully understand from Roy's
rant was just exactly what he meant means by a "typed" resource?

Yes, I have also had problems with that :-) But take my example from the
previous post: the client and server does NOT share any kind of internal
type knowledge about what is behind that resource - actually that would be
a hopeless feat because the code base behind it is rather convoluted. What
they share is an understanding of the message format - the
public-stable-well defined-optimized for easy understanding by third party
devs-format. When we change the actual implementation type behind the
resource we do not change the external format. So servers and clients share
message format - not implementation type - and the clients and servers are
free to choose what ever internal types they want for representing it.

In the case of &lt;img&gt; resources: the shared message contract is the
jpg/gif/... format (media type). There is no shared understanding of the
server side data/type from which the image was created.

This mail was written with a 1 year old kid on my arm, so sorry for
misspellings ... I have to leave now :-)

Regards,, Jørn



On Fri, May 3, 2013 at 11:41 PM, Mike Schinkel &lt;mike@...&gt; wrote:

&gt; On May 3, 2013, at 3:57 PM, Jørn Wildt &lt;jw@...&gt; wrote:
&gt;
&gt; We decided to go "full monty" and stick as closely as possible to the REST
&gt; constraints - especially hyper media. This means our clients have one, and
&gt; only one, single entry point to the REST service - and that entry point
&gt; contains a service document with links/link-rels to all top level
&gt; resources.
&gt;
&gt; ...
&gt;
&gt; This too was easy using hyper media...
&gt;
&gt; The last happy moment also illustrates what (I think) was meant by "*A
&gt; REST API should never have typed resources that are significant to the
&gt; client*" in Roy's famous rant "REST APIs must be hypertext-driven&lt;http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven&gt;".
&gt; Had the client known anything about the internal type behind the facade
&gt; then it would have failed when we introduced multiple types behind the
&gt; facade.
&gt;
&gt; Not to diminish what you've accomplished, because it sounds like it works
&gt; extremely well in practice albeit probably at the cost of a lot of initial
&gt; tooling but I would question if the use of a "service document" does not
&gt; by-definition disqualify it as being RESTful as per Roy's precise
&gt; definition, ironically stated in the blog post rant you reference.
&gt;
&gt; As I understand it from a recent multiple re-reading of Roy's infamous
&gt; rant the use of a service document would mean individual messages are
&gt; indeed not fully description and that would disqualify it as being
&gt; "RESTful."  Not that I disagree with the concept of a lightweight
&gt; JSON-based service document that simply points out all the URLs; frankly I
&gt; rather like the idea. But unless I mis-read or Roy has revised his
&gt; definition of REST since that post I think service documents do not a
&gt; RESTful web service make?
&gt;
&gt; Also, just curious, are you using your own custom media type or just
&gt; JSON/XML/other, and if not the former does that also not disqualify it from
&gt; being considered RESTful?  If you are using your own custom media type I'd
&gt; be curious what the media type is, i.e. what is "xxxx-yyyy" for
&gt; "application/"xxxx-yyyy" and what it's base format is; XML, JSON, HAL,
&gt; ATOM, etc?
&gt;
&gt; The one thing I still have not been able to fully understand from Roy's
&gt; rant was just exactly what he meant means by a "typed" resource?  Doesn't a
&gt; &lt;img&gt; tag imply a resource of type JPEG, GIF or PNG, for example?  So I
&gt; have never been fully able to grok that part.  Any clarifications from
&gt; anyone?
&gt;
&gt;
&gt; -Mike
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19421<br>
Sender:=?ISO-8859-1?Q?J=F8rn_Wildt?= &lt;jw@...&gt;<br>
Post Date/Time:2013-05-04 07:07:02<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>&gt; We have a custom media type "application/vendor.cbrain.casefiole+xml"

Sorry, I was too quick here. The REST service is actually composed of two
different sets of resources that mixes various parts of the system. Half of
it is in "application/json" (the mobile part) - and half of it is in
"application/vendor.cbrain.casefiole+xml" (the part designed for systems
integration with third party vendors).

As I said: I have yet to make up my mind w.r.t. custom versus generic media
types.

/Jørn


On Sat, May 4, 2013 at 8:28 AM, Jørn Wildt &lt;jw@...&gt; wrote:

&gt; Regarding "service document": what if I called it "home page" or "home
&gt; document" - would it make a difference? The problem with the classic
&gt; "service document" is that it, in the SOAP world, includes type information
&gt; and is meant for static "development time" binding. That is not the case
&gt; here: our "home document" only includes links with link-rels and a short
&gt; description.
&gt;
&gt; Speaking about shared types ... Jimmy Bogard has a fresh blog post on this
&gt; issue:
&gt; http://lostechies.com/jimmybogard/2013/05/01/messages-data-and-types/
&gt;
&gt; The home document can be served as either one large JSON object with keys
&gt; as link-rels and values as URLs (like HAL does it), HTML with &lt;a href="..."
&gt; rel="..."&gt; or a homegrown XML format. Today I would probably have chosen
&gt; something like JSON-home (
&gt; http://tools.ietf.org/html/draft-nottingham-json-home-02), HAL or another
&gt; hyper media enabled *standard* JSON media type.
&gt;
&gt; So, no, I do not think using a service document / home page disqualifies
&gt; the service as being RESTful - as long as it is used for late binding at
&gt; runtime (something which we make quite explicit in the documentation).
&gt;
&gt; &gt; albeit probably at the cost of a lot of initial tooling
&gt;
&gt; Well, yes, some, but any client that understands JSON can do hyper media
&gt; with something like HAL. The server is based on OpenRasta which also has
&gt; nice support for creating links.
&gt;
&gt;
&gt; &gt; Also, just curious, are you using your own custom media type or just
&gt; JSON/XML/other,
&gt;
&gt; We have a custom media type "application/vendor.cbrain.casefiole+xml". I
&gt; still have to decide whether I prefer generic media types over custom media
&gt; types - in this case we chose a custom media type to get some experience. I
&gt; will write a piece on that later - when I have made up my mind about what I
&gt; think about it.
&gt;
&gt;
&gt; &gt; The one thing I still have not been able to fully understand from Roy's
&gt; rant was just exactly what he meant means by a "typed" resource?
&gt;
&gt; Yes, I have also had problems with that :-) But take my example from the
&gt; previous post: the client and server does NOT share any kind of internal
&gt; type knowledge about what is behind that resource - actually that would be
&gt; a hopeless feat because the code base behind it is rather convoluted. What
&gt; they share is an understanding of the message format - the
&gt; public-stable-well defined-optimized for easy understanding by third party
&gt; devs-format. When we change the actual implementation type behind the
&gt; resource we do not change the external format. So servers and clients share
&gt; message format - not implementation type - and the clients and servers are
&gt; free to choose what ever internal types they want for representing it.
&gt;
&gt; In the case of &lt;img&gt; resources: the shared message contract is the
&gt; jpg/gif/... format (media type). There is no shared understanding of the
&gt; server side data/type from which the image was created.
&gt;
&gt; This mail was written with a 1 year old kid on my arm, so sorry for
&gt; misspellings ... I have to leave now :-)
&gt;
&gt; Regards,, Jørn
&gt;
&gt;
&gt;
&gt; On Fri, May 3, 2013 at 11:41 PM, Mike Schinkel &lt;mike@...&gt;wrote:
&gt;
&gt;&gt; On May 3, 2013, at 3:57 PM, Jørn Wildt &lt;jw@...&gt; wrote:
&gt;&gt;
&gt;&gt; We decided to go "full monty" and stick as closely as possible to the
&gt;&gt; REST constraints - especially hyper media. This means our clients have one,
&gt;&gt; and only one, single entry point to the REST service - and that entry point
&gt;&gt; contains a service document with links/link-rels to all top level
&gt;&gt; resources.
&gt;&gt;
&gt;&gt; ...
&gt;&gt;
&gt;&gt; This too was easy using hyper media...
&gt;&gt;
&gt;&gt; The last happy moment also illustrates what (I think) was meant by "*A
&gt;&gt; REST API should never have typed resources that are significant to the
&gt;&gt; client*" in Roy's famous rant "REST APIs must be hypertext-driven&lt;http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven&gt;".
&gt;&gt; Had the client known anything about the internal type behind the facade
&gt;&gt; then it would have failed when we introduced multiple types behind the
&gt;&gt; facade.
&gt;&gt;
&gt;&gt; Not to diminish what you've accomplished, because it sounds like it works
&gt;&gt; extremely well in practice albeit probably at the cost of a lot of initial
&gt;&gt; tooling but I would question if the use of a "service document" does not
&gt;&gt; by-definition disqualify it as being RESTful as per Roy's precise
&gt;&gt; definition, ironically stated in the blog post rant you reference.
&gt;&gt;
&gt;&gt; As I understand it from a recent multiple re-reading of Roy's infamous
&gt;&gt; rant the use of a service document would mean individual messages are
&gt;&gt; indeed not fully description and that would disqualify it as being
&gt;&gt; "RESTful."  Not that I disagree with the concept of a lightweight
&gt;&gt; JSON-based service document that simply points out all the URLs; frankly I
&gt;&gt; rather like the idea. But unless I mis-read or Roy has revised his
&gt;&gt; definition of REST since that post I think service documents do not a
&gt;&gt; RESTful web service make?
&gt;&gt;
&gt;&gt; Also, just curious, are you using your own custom media type or just
&gt;&gt; JSON/XML/other, and if not the former does that also not disqualify it from
&gt;&gt; being considered RESTful?  If you are using your own custom media type I'd
&gt;&gt; be curious what the media type is, i.e. what is "xxxx-yyyy" for
&gt;&gt; "application/"xxxx-yyyy" and what it's base format is; XML, JSON, HAL,
&gt;&gt; ATOM, etc?
&gt;&gt;
&gt;&gt; The one thing I still have not been able to fully understand from Roy's
&gt;&gt; rant was just exactly what he meant means by a "typed" resource?  Doesn't a
&gt;&gt; &lt;img&gt; tag imply a resource of type JPEG, GIF or PNG, for example?  So I
&gt;&gt; have never been fully able to grok that part.  Any clarifications from
&gt;&gt; anyone?
&gt;&gt;
&gt;&gt;
&gt;&gt; -Mike
&gt;&gt;
&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19422<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-05-04 07:08:05<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On May 3, 2013, at 10:54 AM, Mark Baker &lt;distobj@...&gt; wrote:
&gt; But using a server-side shopping cart typically *does* violate that
&gt; constraint... not while you're shopping and adding/removing stuff
&gt; to/from the cart, but when you checkout by sending a message which
&gt; means "Purchase what's in that cart", when the intended meaning is
&gt; "Purchase size 9 Nike Air Max for $199".

Forgive me, still trying to improve my evolving understanding.  

From comments in [1] Roy says the following:

Dont confuse application state (the state of the users application of computing to a given task) with resource state (the state of the world as exposed by a given service). They are not the same thing.

Isn't the server-side shopping cart not then "resource state?"

-Mike
[1] http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19423<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-05-04 07:57:23<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>On May 4, 2013, at 2:28 AM, Jørn Wildt &lt;jw@...&gt; wrote:
&gt; Regarding "service document": what if I called it "home page" or "home document" - would it make a difference? The problem with the classic "service document" is that it, in the SOAP world, includes type information and is meant for static "development time" binding. That is not the case here: our "home document" only includes links with link-rels and a short description.

I'm aware the baggage the term "service document" has with many people because of the weight of such things in the SOAP world and elsewhere, but that's not why I was questioning it. 

Instead I was mhyself considering a very similar concept where a "home document" as you are restyling it could be used to contain URI templates that map to rel values, etc. But from how I read Roy's comments I came to the understanding that the separation of message from a "roadmap document" (there, a neutral term?) was not RESTful.  From [1], to whit (emphasis mine):

A REST API should be entered with no prior knowledge beyond the initial URI (bookmark) and set of standardized media types that are appropriate for the intended audience (i.e., expected to be understood by any client that might use the API). From that point on, all application state transitions must be driven by client selection of server-provided choices that are present in the received representations or implied by the users manipulation of those representations. The transitions may be determined (or limited by) the clients knowledge of media types and resource communication mechanisms, both of which may be improved on-the-fly (e.g., code-on-demand).

...
The interface doesnt need to be discovered. It is defined right there in the hypertext. The representation tells the client how to compose all transitions to the next application state. This could be as simple as an anchor or as complex as a java applet. For example, Days CQ5 content management system allows the user to perform direct image masking and manipulation on the client side and save the filtered image view as a new resource, all within the environment of a standard Web browser window.

And then from [2]:

Within REST, intermediary components can actively transform the content of messages because the messages are self-descriptive and their semantics are visible to intermediaries.

So what I'm getting at his is that if your client needs to first download your roadmap document to know which URLs your individual messages reference then it is stateful and while it is (probably) hypermedia it seems is not RESTful (because we know that Roy says REST is all or nothing.)  No?

I'm not saying that your approach might not be better than pure REST for your use-case, but the more I try to truly understand REST the more it seems that *nobody* it really doing APIs that are purely RESTful (yes, I'm using the superlative "nobody" on purpose.)  

If nobody's APIs are actually fully RESTful then who's to say if one person's tradeoffs are better than anothers?  Until most everyone can agree on what is and is not RESTful it seems that too many people are talking past one another and claiming to be "More RESTful than thou" (note the religious allegory? BTW, I'm not singling out you with this comment; I mean everyone, including me.)

Frankly I wish Roy were interested in jumping into these conversations to clarify for others benefit but I completely respective his evident desire not to spend his time doing so.

&gt; Speaking about shared types ... Jimmy Bogard has a fresh blog post on this issue: http://lostechies.com/jimmybogard/2013/05/01/messages-data-and-types/

Thanks. Also looking for more stuff like this.

&gt; Today I would probably have chosen something like JSON-home (http://tools.ietf.org/html/draft-nottingham-json-home-02), HAL or another hyper media enabled standard JSON media type.

Nice, I will be reading that too.  Good to see Mark's efforts here; I really do think of him as one of the best web architectures out there.

&gt; So, no, I do not think using a service document / home page disqualifies the service as being RESTful - as long as it is used for late binding at runtime (something which we make quite explicit in the documentation).

Although I can see the benefits of a home document my reading of Roy still tells me that use of such a home document would not be considered RESTful.  It would be instructive to know what others think especially since we are unlikely to hear from Roy on the subject.

&gt; We have a custom media type "application/vendor.cbrain.casefiole+xml".

Cool.

&gt; I still have to decide whether I prefer generic media types over custom media types - in this case we chose a custom media type to get some experience. I will write a piece on that later - when I have made up my mind about what I think about it.

Reading Roy on the subject[1] I think he is clear that media types *must* be non-generic for an API to be RESTful, no? IOW, it's effectively not possible to use "applications/json" as the specified media type for a web service unless the web service is really, really trivial. Again, from Roy with my emphasis:

In terms of testing a specification, the hardest part is identifying when a RESTful protocol is actually dependent on out-of-band information or if the authors are just overspecifying things for the purpose of documentation. What I look for are requirements on processing behavior that are defined outside of the media type specification. One of the easiest ways to see that is when a protocol calls for the use of a generic media type (like application/xml or application/json) and then requires that it be processed in a way that is special to the protocol/API. If they are keying off of something unique within the content (like an XML namespace declaration that extends the semantics of a generic type), then its okay. Usually, however, what they do is assume that the response has a specific structure beyond that defined by the media type. When the structure changes, the client will break.

Doesn't this mean effectively that without a specific media type it cannot be RESTful?

Also there's also this from [1]:

The media type is a generic processing model that every agent can learn if there arent too many of them (hence the need for standards).

To me that say that REST is most useful for systems that are deployed on a broad scale where many different people/systems are using a common/shared media type, for example "text/html" or whatever HTML5 calls it these days. :)  Which makes me question if all the effort towards building RESTful system in-the-small is really not missing the point?  Again, from [1] (emphasis mine):

REST is software design on the scale of decades: every detail is intended to promote software longevity and independent evolution. Many of the constraints are directly opposed to short-term efficiency. Unfortunately, people are fairly good at short-term design, and usually awful at long-term design. Most dont think they need to design past the current release. There are more than a few software methodologies that portray any long-term thinking as wrong-headed, ivory tower design (which it can be if it isnt motivated by real requirements).

It seems to me the most useful thing the REST community could do for the web of APIs in general is to focus on the establishment of a small number of well-known media types that can be used within 
and/or across industries as was implied here[3].

&gt; &gt; The one thing I still have not been able to fully understand from Roy's rant was just exactly what he meant means by a "typed" resource?
&gt; 
&gt; In the case of &lt;img&gt; resources: the shared message contract is the jpg/gif/... format (media type). There is no shared understanding of the server side data/type from which the image was created.

Ah, that was helpful.  Thanks.

&gt; This mail was written with a 1 year old kid on my arm, so sorry for misspellings ... I have to leave now :-)

Belated congrats there. :)

-Mike
[1] http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven
[2] http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm
[3] http://www.apievangelist.com/2013/05/02/startups-need-to-work-together-on-api-definitions/</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19424<br>
Sender:Mike Kelly &lt;mikekelly321@...&gt;<br>
Post Date/Time:2013-05-04 10:19:54<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Sat, May 4, 2013 at 2:41 AM, Eric J. Bowman &lt;eric@...&gt; wrote:
&gt; Mike Kelly wrote:
&gt;&gt;
&gt;&gt; Shopping carts are better off on the server side, so a client side
&gt;&gt; shopping cart is a horrible thing to use as an example because it
&gt;&gt; immediately conflicts with how people need to build stuff in practice.
&gt;&gt; Just pick another example that's a bit more realistic, like a
&gt;&gt; multi-step wizard or something.
&gt;&gt;
&gt;
&gt; Sorry, but I'm going to go with Roy on this one, developers' perceived
&gt; "need" to do it the wrong way aside.  People build stuff wrong in
&gt; practice, usually in blissful ignorance of REST constraints, but this
&gt; doesn't make the wrong approach "more realistic" it just means the
&gt; right approach is completely misunderstood -- making it an ideal
&gt; example.
&gt;

Holding the position that the approach is "wrong" makes no sense here
because it is absolutely possible to design a server side persisted
shopping cart without violating the stateless constraint, or any other
constraint for that matter. There is no reason that a shopping cart
cannot be treated and modeled as any other kind of server-persisted
resource state. The fact that it is possible to model this in another
way in which it is treated as client-side application state does not
negate that. The approach you chose is down to the context in which
you are designing the application and one's subjective opinion. It is
nothing to do with violation of constraints. Both approaches can be
taken within the constraints of REST and - practically speaking - the
capability of HTTP.

There are some fairly good reasons to go with this design: e.g.
customers are then able to fill a cart from several different devices
before checking out (fairly common behaviour), and it significantly
improves the vendor's ability to collect, mine and analyse data on
user behaviour around their shopping cart (vendors usually care about
this a lot).

You may not agree with those, but that does not mean the approach is
"wrong" or "ignorant of constraints" in relation to REST. This thread
is supposed to be about the meaning of "stateless", not a discussion
on the merits of various approaches to application design.

We should probably get back on topic.

Cheers,
M

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19425<br>
Sender:=?ISO-8859-1?Q?J=F8rn_Wildt?= &lt;jw@...&gt;<br>
Post Date/Time:2013-05-04 13:35:04<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>&gt; So what I'm getting at his is that if your client needs to first download
your roadmap document to know which URLs your individual messages reference
then it is *stateful* and while it is (probably) hypermedia it seems is not
RESTful (because we know that Roy says REST is all or nothing.)  No?

Allow me to disagree with you here. Why do you consider this as being
stateful? I don't see how this has anything to do with it.

&gt; *A REST API should be entered with no prior knowledge beyond the initial
URI (bookmark)
&gt; From that point on, all application state transitions must be driven by
client selection of server-provided choices that are present in the
received representations *

But isn't that exactly what I am proposing? We have one single *initial URL*,
the client GETs the service document representation there and selects among
the hyper media elements (the links) *that are present in the received
representation*.

Anyways - RESTful or not - it works and it solves an important problem for
us: handling multiple clients and multiple servers that do not evolve in
lock step (and it does so by using hyper media among other things).

Regards, Jørn



On Sat, May 4, 2013 at 9:57 AM, Mike Schinkel &lt;mike@...&gt; wrote:

&gt; On May 4, 2013, at 2:28 AM, Jørn Wildt &lt;jw@...&gt; wrote:
&gt;
&gt; Regarding "service document": what if I called it "home page" or "home
&gt; document" - would it make a difference? The problem with the classic
&gt; "service document" is that it, in the SOAP world, includes type information
&gt; and is meant for static "development time" binding. That is not the case
&gt; here: our "home document" only includes links with link-rels and a short
&gt; description.
&gt;
&gt;
&gt; I'm aware the baggage the term "service document" has with many people
&gt; because of the weight of such things in the SOAP world and elsewhere, but
&gt; that's not why I was questioning it.
&gt;
&gt; Instead I was mhyself considering a very similar concept where a "home
&gt; document" as you are restyling it could be used to contain URI templates
&gt; that map to rel values, etc. But from how I read Roy's comments I came to
&gt; the understanding that the separation of message from a "roadmap document"
&gt; (there, a neutral term?) was not RESTful.  From [1], to whit* (emphasis
&gt; mine):*
&gt;
&gt;
&gt; *A REST API should be entered with no prior knowledge beyond the initial
&gt; URI (bookmark) and set of standardized media types that are appropriate
&gt; for the intended audience (i.e., expected to be understood by any client
&gt; that might use the API). From that point on, all application state
&gt; transitions must be driven by client selection of server-provided choices that
&gt; are present in the received representations or implied by the users
&gt; manipulation of those representations. The transitions may be determined
&gt; (or limited by) the clients knowledge of media types and resource
&gt; communication mechanisms, both of which may be improved on-the-fly (e.g.,
&gt; code-on-demand).*
&gt; *
&gt; *
&gt; *...*
&gt; *The interface doesnt need to be discovered. It is defined right there
&gt; in the hypertext. The representation tells the client how to compose all
&gt; transitions to the next application state. This could be as simple as an
&gt; anchor or as complex as a java applet. For example, Days CQ5 content
&gt; management system allows the user to perform direct image masking and
&gt; manipulation on the client side and save the filtered image view as a new
&gt; resource, all within the environment of a standard Web browser window.*
&gt; *
&gt; *
&gt;
&gt; And then from [2]:
&gt;
&gt; *Within REST, intermediary components can actively transform the content
&gt; of messages because the messages are self-descriptive and their semantics
&gt; are visible to intermediaries.*
&gt;
&gt;
&gt; So what I'm getting at his is that if your client needs to first download
&gt; your roadmap document to know which URLs your individual messages reference
&gt; then it is *stateful* and while it is (probably) hypermedia it seems is
&gt; not RESTful (because we know that Roy says REST is all or nothing.)  No?
&gt;
&gt; I'm not saying that your approach might not be better than pure REST for
&gt; your use-case, but the more I try to truly understand REST the more it
&gt; seems that *nobody* it really doing APIs that are purely RESTful (yes, I'm
&gt; using the superlative "nobody" on purpose.)
&gt;
&gt; If nobody's APIs are actually fully RESTful then who's to say if one
&gt; person's tradeoffs are better than anothers?  Until most everyone can agree
&gt; on what is and is not RESTful it seems that too many people are talking
&gt; past one another and claiming to be "*More RESTful than thou"* (note the
&gt; religious allegory? BTW, I'm not singling out you with this comment; I mean
&gt; everyone, including me.)
&gt;
&gt; Frankly I wish Roy were interested in jumping into these conversations to
&gt; clarify for others benefit but I completely respective his evident desire
&gt; not to spend his time doing so.
&gt;
&gt;
&gt; Speaking about shared types ... Jimmy Bogard has a fresh blog post on this
&gt; issue:
&gt; http://lostechies.com/jimmybogard/2013/05/01/messages-data-and-types/
&gt;
&gt;
&gt; Thanks. Also looking for more stuff like this.
&gt;
&gt; Today I would probably have chosen something like JSON-home (
&gt; http://tools.ietf.org/html/draft-nottingham-json-home-02), HAL or another
&gt; hyper media enabled *standard* JSON media type.
&gt;
&gt;
&gt; Nice, I will be reading that too.  Good to see Mark's efforts here; I
&gt; really do think of him as one of the best web architectures out there.
&gt;
&gt; So, no, I do not think using a service document / home page disqualifies
&gt; the service as being RESTful - as long as it is used for late binding at
&gt; runtime (something which we make quite explicit in the documentation).
&gt;
&gt;
&gt; Although I can see the benefits of a home document my reading of Roy still
&gt; tells me that use of such a home document would not be considered RESTful.
&gt;  It would be instructive to know what others think especially since we are
&gt; unlikely to hear from Roy on the subject.
&gt;
&gt; We have a custom media type "application/vendor.cbrain.casefiole+xml".
&gt;
&gt;
&gt; Cool.
&gt;
&gt;
&gt; I still have to decide whether I prefer generic media types over custom
&gt; media types - in this case we chose a custom media type to get some
&gt; experience. I will write a piece on that later - when I have made up my
&gt; mind about what I think about it.
&gt;
&gt;
&gt; Reading Roy on the subject[1] I think he is clear that media types *must*
&gt; be non-generic for an API to be RESTful, no? IOW, it's effectively not
&gt; possible to use "applications/json" as the specified media type for a web
&gt; service unless the web service is really, really trivial. Again, from Roy
&gt; with *my emphasis:*
&gt;
&gt;
&gt; *In terms of testing a specification, the hardest part is identifying
&gt; when a RESTful protocol is actually dependent on out-of-band information or
&gt; if the authors are just overspecifying things for the purpose of
&gt; documentation. What I look for are requirements on processing behavior that
&gt; are defined outside of the media type specification. One of the easiest
&gt; ways to see that is when a protocol calls for the use of a generic media
&gt; type (like application/xml or application/json) and then requires that it
&gt; be processed in a way that is special to the protocol/API. If they are
&gt; keying off of something unique within the content (like an XML namespace
&gt; declaration that extends the semantics of a generic type), then its okay.
&gt; Usually, however, what they do is assume that the response has a specific
&gt; structure beyond that defined by the media type. When the structure
&gt; changes, the client will break.*
&gt;
&gt;
&gt; Doesn't this mean effectively that without a specific media type it cannot
&gt; be RESTful?
&gt;
&gt; Also there's also this from [1]:
&gt;
&gt; *The media type is a generic processing model that every agent can learn
&gt; if there arent too many of them (hence the need for standards).*
&gt;
&gt;
&gt; To me that say that REST is most useful for systems that are deployed on a
&gt; broad scale where many different people/systems are using a common/shared
&gt; media type, for example "text/html" or whatever HTML5 calls it these days.
&gt; :)  Which makes me question if all the effort towards building RESTful
&gt; system in-the-small is really not missing the point?  Again, from [1]* (emphasis
&gt; mine):*
&gt;
&gt; *REST is software design on the scale of decades: every detail is
&gt; intended to promote software longevity and independent evolution. Many of
&gt; the constraints are directly opposed to short-term efficiency.Unfortunately, people are fairly good at short-term design, and usually
&gt; awful at long-term design. Most dont think they need to design past the
&gt; current release. There are more than a few software methodologies that
&gt; portray any long-term thinking as wrong-headed, ivory tower design (which
&gt; it can be if it isnt motivated by real requirements).*
&gt; *
&gt; *
&gt;
&gt; It seems to me the most useful thing the REST community could do for the
&gt; web of APIs in general is to focus on the establishment of a small number
&gt; of well-known media types that can be used within
&gt; and/or across industries as was implied here[3].
&gt;
&gt;
&gt; &gt; The one thing I still have not been able to fully understand from Roy's
&gt; rant was just exactly what he meant means by a "typed" resource?
&gt;
&gt; In the case of &lt;img&gt; resources: the shared message contract is the
&gt; jpg/gif/... format (media type). There is no shared understanding of the
&gt; server side data/type from which the image was created.
&gt;
&gt;
&gt; Ah, that was helpful.  Thanks.
&gt;
&gt;
&gt; This mail was written with a 1 year old kid on my arm, so sorry for
&gt; misspellings ... I have to leave now :-)
&gt;
&gt;
&gt; Belated congrats there. :)
&gt;
&gt; -Mike
&gt; [1] http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven
&gt; [2] http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm
&gt; [3]
&gt; http://www.apievangelist.com/2013/05/02/startups-need-to-work-together-on-api-definitions/
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19426<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-05-04 15:54:27<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>On May 4, 2013, at 9:35 AM, Jørn Wildt &lt;jw@...&gt; wrote:
&gt; Allow me to disagree with you here. Why do you consider this as being stateful? I don't see how this has anything to do with it. 

Unless everything in your API can be done with at most two HTTP requests (I had not considered that potential) then it would seem your 3rd HTTP request would be assuming the state of your 1st request and thus your API not RESTful. If not, then how not stateful?

&gt; But isn't that exactly what I am proposing? We have one single initial URL, the client GETs the service document representation there and selects among the hyper media elements (the links) that are present in the received representation.

Can everything in your API be done with one additional HTTP request after the home document? If yes, then sorry, I was assuming wrong.  If no, does it not fail this test?

The representation tells the client how to compose all transitions to the next application state. 

&gt; Anyways - RESTful or not - it works and it solves an important problem for us: handling multiple clients and multiple servers that do not evolve in lock step (and it does so by using hyper media among other things).

As acknowledged. 

But if the guy who is building a web API using URL construction gets admonished for calling his api RESTful then is it not appropriate for all other deviations from REST be pointed out if people present their non-conforming APIs as RESTful? This is rest-discuss (and yes I know I am being a pedant at this time.)

-Mike</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19427<br>
Sender:"Markus Lanthaler" &lt;markus.lanthaler@...&gt;<br>
Post Date/Time:2013-05-04 16:47:49<br>
Subject:RE: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>On Saturday, May 04, 2013 5:54 PM, Mike Schinkel wrote:
&gt; On May 4, 2013, at 9:35 AM, Jørn Wildt &lt;jw@...&gt; wrote:
&gt; &gt; Allow me to disagree with you here. Why do you consider this as
&gt; &gt; being stateful? I don't see how this has anything to do with it.
&gt; 
&gt; Unless everything in your API can be done with at most two HTTP
&gt; requests (I had not considered that potential) then it would seem your
&gt; 3rd HTTP request would be assuming the state of your 1st request and
&gt; thus your API not RESTful. If not, then how not stateful?

That has nothing to do with statelessness as it describes what the client is
doing. The request to the server definitely contains all information and
doesn't rely on a shared state. So no, this is not stateful. Not even if
there are 100s of requests in between. The server and any intermediary
couldn't care less.

As long as that document is evaluated at run-time and not at design- or
compile-time everything is fine. Otherwise the result would be a client that
is tightly coupled to the server.


&gt; &gt; But isn't that exactly what I am proposing? We have one single
&gt; &gt; initial URL, the client GETs the service document representation
&gt; &gt; there and selects among the hyper media elements (the links) that
&gt; &gt; are present in the received representation.
&gt; 
&gt; Can everything in your API be done with one additional HTTP request
&gt; after the home document? If yes, then sorry, I was assuming wrong.  If
&gt; no, does it not fail this test?
&gt; 
&gt; The representation tells the client how to compose all transitions to
&gt; the next application state.

Yeah. The emphasis is on "next application state". That doesn't require that
the next state is the final state. So there can be as many steps in between
as there are required... and every response to those intermediary requests
can link back to the home document - just in case the client hasn't seen it
yet. That's exactly the same as for normal websites.


--
Markus Lanthaler
@markuslanthaler


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19428<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-05-04 17:03:20<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>On May 4, 2013, at 12:47 PM, "Markus Lanthaler" &lt;markus.lanthaler@...&gt; wrote:
&gt; That has nothing to do with statelessness as it describes what the client is
&gt; doing. The request to the server definitely contains all information and
&gt; doesn't rely on a shared state. So no, this is not stateful. Not even if
&gt; there are 100s of requests in between. The server and any intermediary
&gt; couldn't care less.
&gt; 
&gt; As long as that document is evaluated at run-time and not at design- or
&gt; compile-time everything is fine. Otherwise the result would be a client that
&gt; is tightly coupled to the server.
&gt; 
&gt; Yeah. The emphasis is on "next application state". That doesn't require that
&gt; the next state is the final state. So there can be as many steps in between
&gt; as there are required... and every response to those intermediary requests
&gt; can link back to the home document - just in case the client hasn't seen it
&gt; yet. That's exactly the same as for normal websites.


Hmm.  Okay, the more I think I understand about REST the more I think I don't understand and/or am unsure who actually really understands REST besides Roy.

As I've read Roy I've come away understanding that messages must be self-contained and the only thing the client should know is how the links in the returned representation are defined to behave as defined by the representation's content yype. Having links in one document and data in a second document where you have to have the contents of both documents seems to me to violate that need for self-containment.

Honestly I want you to be right; the idea of a service document that contains all the API URLs and URI templates so that the other messages can all be lightweight is very compelling.

I do have one question; if there is a home document that is cacheable for some period "X" and at the time immediately after an API client retrieves the home document the servers are moved and the client later perform an operation that requires URLs from the home document but before "X" time has passed, it can cause failure.  If the message is self-contained that time window is greatly reduced. This is one of the reasons I can postulate there is a need for self-contained messages.

-Mike</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19429<br>
Sender:"Markus Lanthaler" &lt;markus.lanthaler@...&gt;<br>
Post Date/Time:2013-05-04 17:49:43<br>
Subject:RE: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>On Saturday, May 04, 2013 7:03 PM, Mike Schinkel wrote:
&gt; Hmm.  Okay, the more I think I understand about REST the more I think
&gt; I don't understand and/or am unsure who actually really understands
&gt; REST besides Roy.
&gt; 
&gt; As I've read Roy I've come away understanding that messages must be
&gt; self-contained

No, you are confusing self-contained with self-descriptive.


&gt; and the only thing the client should know is how the
&gt; links in the returned representation are defined to behave as defined
&gt; by the representation's content yype. Having links in one document and
&gt; data in a second document where you have to have the contents of both
&gt; documents seems to me to violate that need for self-containment.

... if there would be a self-containment constraint that would be true --
but there isn't.


&gt; I do have one question; if there is a home document that is cacheable
&gt; for some period "X" and at the time immediately after an API client
&gt; retrieves the home document the servers are moved and the client later
&gt; perform an operation that requires URLs from the home document but
&gt; before "X" time has passed, it can cause failure.  If the message is
&gt; self-contained that time window is greatly reduced. This is one of the
&gt; reasons I can postulate there is a need for self-contained messages.

That doesn't matter at all. Program defensively, detect the error, and
recover.

I could just as well argue that separating them allows you to request them
in parallel which would probably be faster so the time window you are
talking about would be reduced even further.



--
Markus Lanthaler
@markuslanthaler


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19430<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-05-04 19:03:00<br>
Subject:Re: [rest-discuss] How much REST should your Web API get?<br>
Message:<br><br>
<pre>Once again you have given me much to ponder.  Thanks for the effort; I will be trying to internalize this.

-Mike

On May 4, 2013, at 1:49 PM, "Markus Lanthaler" &lt;markus.lanthaler@...&gt; wrote:

&gt; On Saturday, May 04, 2013 7:03 PM, Mike Schinkel wrote:
&gt;&gt; Hmm.  Okay, the more I think I understand about REST the more I think
&gt;&gt; I don't understand and/or am unsure who actually really understands
&gt;&gt; REST besides Roy.
&gt;&gt; 
&gt;&gt; As I've read Roy I've come away understanding that messages must be
&gt;&gt; self-contained
&gt; 
&gt; No, you are confusing self-contained with self-descriptive.
&gt; 
&gt; 
&gt;&gt; and the only thing the client should know is how the
&gt;&gt; links in the returned representation are defined to behave as defined
&gt;&gt; by the representation's content yype. Having links in one document and
&gt;&gt; data in a second document where you have to have the contents of both
&gt;&gt; documents seems to me to violate that need for self-containment.
&gt; 
&gt; ... if there would be a self-containment constraint that would be true --
&gt; but there isn't.
&gt; 
&gt; 
&gt;&gt; I do have one question; if there is a home document that is cacheable
&gt;&gt; for some period "X" and at the time immediately after an API client
&gt;&gt; retrieves the home document the servers are moved and the client later
&gt;&gt; perform an operation that requires URLs from the home document but
&gt;&gt; before "X" time has passed, it can cause failure.  If the message is
&gt;&gt; self-contained that time window is greatly reduced. This is one of the
&gt;&gt; reasons I can postulate there is a need for self-contained messages.
&gt; 
&gt; That doesn't matter at all. Program defensively, detect the error, and
&gt; recover.
&gt; 
&gt; I could just as well argue that separating them allows you to request them
&gt; in parallel which would probably be faster so the time window you are
&gt; talking about would be reduced even further.
&gt; 
&gt; 
&gt; 
&gt; --
&gt; Markus Lanthaler
&gt; @markuslanthaler
&gt; 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19431<br>
Sender:Mike Schinkel &lt;mike@...&gt;<br>
Post Date/Time:2013-05-05 00:31:40<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On May 4, 2013, at 5:07 PM, Mark Baker &lt;mark@...&gt; wrote:
&gt; On 2013-05-04 3:08 AM, "Mike Schinkel" &lt;mike@...&gt; wrote:
&gt; &gt;&gt; Isn't the server-side shopping cart not then "resource state?"
&gt; 
&gt; Thanks for asking that question, Mike. It's why I've found that there's not as much enlightenment as you'd think in looking at the problem that way.
&gt; 
&gt; Yes, the shopping cart is resource state, but it's also session/application state in the context of that final purchase message.
&gt; 
&gt; When you think about it, *any* state can be given a URI, but doing so doesn't un-make it session state if its being used that way.
&gt; 

Thanks for answering.  

Any guidance then on how to identify a resource state that is "acting like" session state?  I thought I had working guidelines with "application state" vs. "resource state" but every time I try to come up with a set of heuristics to use to evaluate use-cases someone I respect says something else on this list or others that contradicts my understanding and I find myself spinning in circles.

-Mike</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19432<br>
Sender:Mark Baker &lt;distobj@...&gt;<br>
Post Date/Time:2013-05-05 22:52:49<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>[reposting as I initially sent it from the wrong address]

On 2013-05-04 3:08 AM, "Mike Schinkel" &lt;mike@...&gt; wrote:
&gt;
&gt; On May 3, 2013, at 10:54 AM, Mark Baker &lt;distobj@...&gt; wrote:
&gt;&gt;
&gt;&gt; But using a server-side shopping cart typically *does* violate that
&gt;&gt; constraint... not while you're shopping and adding/removing stuff
&gt;&gt; to/from the cart, but when you checkout by sending a message which
&gt;&gt; means "Purchase what's in that cart", when the intended meaning is
&gt;&gt; "Purchase size 9 Nike Air Max for $199".
&gt;
&gt;
&gt;&gt; Forgive me, still trying to improve my evolving understanding.
&gt;&gt;
&gt;&gt; From comments in [1] Roy says the following:
&gt;&gt;
&gt;&gt;&gt; Dont confuse application state (the state of the users application of computing to a given task) with resource state (the state of the world as exposed by a given service). They are not the same thing.
&gt;&gt;
&gt;&gt;
&gt;&gt; Isn't the server-side shopping cart not then "resource state?"

Thanks for asking that question, Mike. It's why I've found that
there's not as much enlightenment as you'd think in looking at the
problem that way.

Yes, the shopping cart is resource state, but it's also
session/application state in the context of that final purchase
message.

When you think about it, *any* state can be given a URI, but doing so
doesn't un-make it session state if its being used that way.

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19433<br>
Sender:Unmesh Joshi &lt;unmeshjoshi@...&gt;<br>
Post Date/Time:2013-05-08 05:51:07<br>
Subject:Examples of Async Restful services<br>
Message:<br><br>
<pre>Hi,

There are certain situations where modelling services as async is better
choice. One of the reasons can be to limit load on the backend services or
databases if the requests involve heavy processing.
Restful way of creating these services is to return 202 accepted with a URL
to poll the result or status of the request.
While I have read about and seen text book examples of this approach, I
don't know of any real life good examples of this. Can someone point me to
a good example?

Thanks,
Unmesh
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19434<br>
Sender:Shaunak Kashyap &lt;ycombinator@...&gt;<br>
Post Date/Time:2013-05-08 11:26:41<br>
Subject:Re: Examples of Async Restful services<br>
Message:<br><br>
<pre>In this case, I would still return a 202 Accepted (to indicate asynchronous processing). As for how the result of this processing is conveyed to the client, it could be a via a poll from the client (as you suggest) or a callback to the client (as in the Twilio example) or even both. I'm not sure if the callback approach is necessarily in conflict with the RESTfulness of the API but I'd love to hear more about that from the list.

Shaunak

On May 8, 2013, at 3:32 AM, Unmesh Joshi &lt;unmeshjoshi@...&gt; wrote:

&gt; hmm interesting. In general I would expect Restful API to return a URL as reponse to 202 or 201 where client can poll. Accepting a URl to push response doesnt fit that.
&gt; 
&gt; 
&gt; On Wed, May 8, 2013 at 3:24 PM, Shaunak Kashyap &lt;ycombinator@...&gt; wrote:
&gt; Hi Unmesh,
&gt; 
&gt; This may not be exactly what you are looking for but see http://www.twilio.com/docs/api/rest/sending-sms. This API lets an application send an SMS. Twilio's backend perfoms the actual sending of the SMS asynchronously with the API call.
&gt; 
&gt; The API takes as an optional parameter a StatusCallback URI. This is a URI from your application; Twilio will POST to this URI when it has sent (or tried to send) the SMS.
&gt; 
&gt; Hope that helps,
&gt; 
&gt; Shaunak
&gt; 
&gt; --- In rest-discuss@yahoogroups.com, Unmesh Joshi &lt;unmeshjoshi@...&gt; wrote:
&gt; &gt;
&gt; &gt; Hi,
&gt; &gt;
&gt; &gt; There are certain situations where modelling services as async is better
&gt; &gt; choice. One of the reasons can be to limit load on the backend services or
&gt; &gt; databases if the requests involve heavy processing.
&gt; &gt; Restful way of creating these services is to return 202 accepted with a URL
&gt; &gt; to poll the result or status of the request.
&gt; &gt; While I have read about and seen text book examples of this approach, I
&gt; &gt; don't know of any real life good examples of this. Can someone point me to
&gt; &gt; a good example?
&gt; &gt;
&gt; &gt; Thanks,
&gt; &gt; Unmesh
&gt; &gt;
&gt; 
&gt; 
&gt; 

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19435<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-05-08 14:36:10<br>
Subject:Re: [rest-discuss] Examples of Async Restful services<br>
Message:<br><br>
<pre>
On 08.05.2013, at 13:26, Shaunak Kashyap &lt;ycombinator@...&gt; wrote:

&gt; I'm not sure if the callback approach is necessarily in conflict with the RESTfulness of the API 

Violates stateless server constraint.

Jan


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19436<br>
Sender:Mike Kelly &lt;mikekelly321@...&gt;<br>
Post Date/Time:2013-05-08 14:45:31<br>
Subject:Re: [rest-discuss] Examples of Async Restful services<br>
Message:<br><br>
<pre>On Wed, May 8, 2013 at 3:36 PM, Jan Algermissen
&lt;jan.algermissen@...&gt;wrote:

&gt; **
&gt;
&gt;
&gt;
&gt; On 08.05.2013, at 13:26, Shaunak Kashyap &lt;ycombinator@...&gt; wrote:
&gt;
&gt; &gt; I'm not sure if the callback approach is necessarily in conflict with
&gt; the RESTfulness of the API
&gt;
&gt; Violates stateless server constraint.
&gt;
&gt;
Afaik, "stateless server" is not a constraint..

Cheers,
M
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19437<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-05-08 15:01:42<br>
Subject:Re: [rest-discuss] Examples of Async Restful services<br>
Message:<br><br>
<pre>On 2013-05-08 07:45 , Mike Kelly wrote:
&gt;     On 08.05.2013, at 13:26, Shaunak Kashyap &lt;ycombinator@...
&gt;     &lt;mailto:ycombinator%40gmail.com&gt;&gt; wrote:
&gt;      &gt; I'm not sure if the callback approach is necessarily in conflict
&gt;     with the RESTfulness of the API
&gt;     Violates stateless server constraint.
&gt; Afaik, "stateless server" is not a constraint..

no it isn't. a PubSub mechanism such as PuSH can be layered on top of a 
pull-oriented REST architecture with atom without violating any REST 
constraints. PuSH simply failed to properly address subscription 
management, but otherwise had no architectural issues. managing 
subscriptions on the server is fine REST-wise, it's just fairly 
expensive and thus not a style you would want to follow unless that cost 
is justified. on a side note, since the actual messages are nicely 
self-describes messages, PuSH allowed fairly nice optimization for the 
push side of things, by using layered hub setups.

cheers,

dret.

-- 
erik wilde | mailto:dret@...  -  tel:+1-510-2061079 |
            | UC Berkeley  -  School of Information (ISchool) |
            | http://dret.net/netdret http://twitter.com/dret |

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19438<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-05-08 20:00:07<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>Mike Kelly wrote:
&gt; 
&gt; Holding the position that the approach is "wrong" makes no sense here
&gt; because it is absolutely possible to design a server side persisted
&gt; shopping cart without violating the stateless constraint, or any other
&gt; constraint for that matter.
&gt;

Show me.  As Mark pointed out, server-side carts share a fundamental
violation of statelessness, not shared by client-side approaches.  At
some point, a transaction is occurring on the basis of a link, rather
than transferring a representation which details the contract itself.

&gt;
&gt; There is no reason that a shopping cart cannot be treated and modeled
&gt; as any other kind of server-persisted resource state. The fact that
&gt; it is possible to model this in another way in which it is treated as
&gt; client-side application state does not negate that.
&gt;

True, a client-side cart may also be persisted on the server, i.e.
"save cart" or "wish list" or silently backing up the active cart -- by
transferring a representation (the Model, in MVC terms) which captures
the state of the user application, instead of passing around nebulous
links to server-persisted state.

The problem from a design perspective, is choosing a starting point
which fails to treat the cart itself as the basis for transactions;
transferring links to the contract instead of the contract itself is
not a RESTful approach allowing "the forces that influence system
behavior to flow naturally, in harmony with the system".

&gt;
&gt; The approach you chose is down to the context in which you are
&gt; designing the application and one's subjective opinion. It is nothing
&gt; to do with violation of constraints. Both approaches can be taken
&gt; within the constraints of REST and - practically speaking - the
&gt; capability of HTTP.
&gt; 

One approach meets the goals of REST more than the other; if the other
even meets all REST's constraints, which is problematic.  I much prefer
examples which obviously meet REST's constraints, over those which need
to be "qualified" with convoluted explanations of why some constraint
isn't being violated when the entire approach is suspect.

Seems easier to learn REST from examples which everyone can agree are
not violating any constraints, rather than those which require the use
of imagination to get around the apparent mismatches.

&gt;
&gt; There are some fairly good reasons to go with this design: e.g.
&gt; customers are then able to fill a cart from several different devices
&gt; before checking out (fairly common behaviour), and it significantly
&gt; improves the vendor's ability to collect, mine and analyse data on
&gt; user behaviour around their shopping cart (vendors usually care about
&gt; this a lot).
&gt; 

Why isn't a client-side cart compatible with said usage patterns?  I
smell a strawman.  Discussions about vendors' desire for metrics vs.
users' desire for privacy, have no bearing on the RESTfulness of any
given example.  This list is about learning REST, not disregarding part
of it for the sake of usability/metrics while still attempting to
maintain buzzword compliance as a fig leaf.

As it is, any device can GET a representation of the user's last
application state, to continue the "session" without violating the
paradigm Mark keeps pointing out -- sending an URL for processing isn't
the same as sending a representation of the actual cart for processing.

The client-side approach bases communication on sending/receiving a
hypertext representation *of* a shopping cart -- THIS is the essence of
REST, not pretending that sending an URL for processing is somehow
stateless.  Such a message may itself be, but the point is a stateless
interaction overall -- requiring the cart itself to be transferred,
instead of linked to.

&gt;
&gt; You may not agree with those, but that does not mean the approach is
&gt; "wrong" or "ignorant of constraints" in relation to REST. This thread
&gt; is supposed to be about the meaning of "stateless", not a discussion
&gt; on the merits of various approaches to application design.
&gt; 

This is a discussion about statelessness, with my point being that it
would be more helpful to use examples which actually are.  It's hard to
explain the constraint using examples which arguably violate it.  Since
we're here to learn about REST, perhaps it's time we examined _WHY_ Roy
hints at client-side implementation, instead of pretending it's somehow
irrelevant to the discussion "because pragmatism".

It's easy for me to remain analytical on this issue, as I've never laid
my REST credibility on the line by selling someone a server-side cart
implementation as "RESTful" or presenting examples of same in an effort
to explain REST.  I can see where others have the motivation to insist
that their way is "right" while attempting to stifle debate about what
the thesis actually says, by declaring it an off-topic implementation
detail.

My nutshell explanation of REST from 50,000ft is that a system designed
to manipulate shopping carts MUST be based on transferring actual
representations of shopping-cart contents.  Once we're working in the
proper idiom, the constraints take care of themselves as we're not doing
anything which inherently fights against them, thus requiring convoluted
explanations to support a fundamentally different approach as RESTful.

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19439<br>
Sender:Unmesh Joshi &lt;unmeshjoshi@...&gt;<br>
Post Date/Time:2013-05-09 02:27:23<br>
Subject:Re: [rest-discuss] Examples of Async Restful services<br>
Message:<br><br>
<pre>There are additional advantages of 202 polling pattern. We can use
conditional request processing, plus all the benefits of HTTP caching.
Are there any references which discuss practical benefits of 202 polling
pattern over PuSH?


On Wed, May 8, 2013 at 8:31 PM, Erik Wilde &lt;dret@...&gt; wrote:

&gt; On 2013-05-08 07:45 , Mike Kelly wrote:
&gt;
&gt;&gt;     On 08.05.2013, at 13:26, Shaunak Kashyap &lt;ycombinator@...
&gt;&gt;     &lt;mailto:ycombinator%40gmail.**com &lt;ycombinator%2540gmail.com&gt;&gt;&gt;
&gt;&gt; wrote:
&gt;&gt;      &gt; I'm not sure if the callback approach is necessarily in conflict
&gt;&gt;     with the RESTfulness of the API
&gt;&gt;     Violates stateless server constraint.
&gt;&gt; Afaik, "stateless server" is not a constraint..
&gt;&gt;
&gt;
&gt; no it isn't. a PubSub mechanism such as PuSH can be layered on top of a
&gt; pull-oriented REST architecture with atom without violating any REST
&gt; constraints. PuSH simply failed to properly address subscription
&gt; management, but otherwise had no architectural issues. managing
&gt; subscriptions on the server is fine REST-wise, it's just fairly expensive
&gt; and thus not a style you would want to follow unless that cost is
&gt; justified. on a side note, since the actual messages are nicely
&gt; self-describes messages, PuSH allowed fairly nice optimization for the push
&gt; side of things, by using layered hub setups.
&gt;
&gt; cheers,
&gt;
&gt; dret.
&gt;
&gt; --
&gt; erik wilde | mailto:dret@...  -  tel:+1-510-2061079 |
&gt;            | UC Berkeley  -  School of Information (ISchool) |
&gt;            | http://dret.net/netdret http://twitter.com/dret |
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19440<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-05-09 11:56:15<br>
Subject:Re: [rest-discuss] Examples of Async Restful services<br>
Message:<br><br>
<pre>
On 08.05.2013, at 17:01, Erik Wilde &lt;dret@...&gt; wrote:

&gt; On 2013-05-08 07:45 , Mike Kelly wrote:
&gt; &gt; On 08.05.2013, at 13:26, Shaunak Kashyap &lt;ycombinator@...
&gt; &gt; &lt;mailto:ycombinator%40gmail.com&gt;&gt; wrote:
&gt; &gt; &gt; I'm not sure if the callback approach is necessarily in conflict
&gt; &gt; with the RESTfulness of the API
&gt; &gt; Violates stateless server constraint.
&gt; &gt; Afaik, "stateless server" is not a constraint..
&gt; 
&gt; no it isn't.

Well, it *is* a constraint of REST - see section 5.1.3.

However, I agree that you can add pubsub to REST (i.e. WATCH in Waka). So I was wrong there.

Jan


&gt; a PubSub mechanism such as PuSH can be layered on top of a 
&gt; pull-oriented REST architecture with atom without violating any REST 
&gt; constraints. PuSH simply failed to properly address subscription 
&gt; management, but otherwise had no architectural issues. managing 
&gt; subscriptions on the server is fine REST-wise, it's just fairly 
&gt; expensive and thus not a style you would want to follow unless that cost 
&gt; is justified. on a side note, since the actual messages are nicely 
&gt; self-describes messages, PuSH allowed fairly nice optimization for the 
&gt; push side of things, by using layered hub setups.
&gt; 
&gt; cheers,
&gt; 
&gt; dret.
&gt; 
&gt; -- 
&gt; erik wilde | mailto:dret@berkeley.edu - tel:+1-510-2061079 |
&gt; | UC Berkeley - School of Information (ISchool) |
&gt; | http://dret.net/netdret http://twitter.com/dret |
&gt; 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19441<br>
Sender:Bob Haugen &lt;bob.haugen@...&gt;<br>
Post Date/Time:2013-05-09 13:43:13<br>
Subject:Re: the meaning of stateless<br>
Message:<br><br>
<pre>Eric Bowman wrote:
&gt; My nutshell explanation of REST from 50,000ft is that a system
&gt; designed to manipulate shopping carts MUST be based on
&gt; transferring actual representations of shopping-cart contents.

I hesitated to get back into this issue after having lost an argument
with Mark Baker about it a couple of years ago, but:  the typical
behavior of a system that saves shopping cart contents on servers
(e.g. Amazon) is to send a representation of the shopping cart
contents back to the client to confirm the order, in which case, a
representation of the shopping cart contents then gets sent back to
the server from the client.

Would e.g. Mark and Eric agree that this is RESTful?

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19442<br>
Sender:Matt McClure &lt;matthewlmcclure@...&gt;<br>
Post Date/Time:2013-05-09 18:27:11<br>
Subject:Re: [rest-discuss] Re: the meaning of stateless<br>
Message:<br><br>
<pre>On Thu, May 9, 2013 at 9:43 AM, Bob Haugen &lt;bob.haugen@...&gt; wrote:

&gt; **
&gt;
&gt;
&gt; Eric Bowman wrote:
&gt; &gt; My nutshell explanation of REST from 50,000ft is that a system
&gt; &gt; designed to manipulate shopping carts MUST be based on
&gt; &gt; transferring actual representations of shopping-cart contents.
&gt;
&gt; I hesitated to get back into this issue after having lost an argument
&gt; with Mark Baker about it a couple of years ago, but: the typical
&gt; behavior of a system that saves shopping cart contents on servers
&gt; (e.g. Amazon) is to send a representation of the shopping cart
&gt; contents back to the client to confirm the order, in which case, a
&gt; representation of the shopping cart contents then gets sent back to
&gt; the server from the client.
&gt;
&gt; Would e.g. Mark and Eric agree that this is RESTful?
&gt;
I've also been following this conversation as a lurker. If I understood
some of the earlier comments, it sounded as though someone made a case that
a request like:

    POST /cart/12345/purchase
    Content-Length: 0

would be stateful and undesirable for conformance with REST whereas:

    POST /purchase
    Content-Length: 1234

    items=...&amp;in_quantities=...&amp;with_payment_method=...

would be more RESTful and less stateful.

I guess I'm unclear why the former would violate statelessness. The state
in the former is resource state, identified by an implicit /cart/12345
resource (assume I got the /cart/12345/purchase link from the cart
resource).

To contrast:

    POST /purchase
    Content-Length: 0
    Cookie: client=12345

seems decidedly stateful because it requires shared state identified by the
ID in the Cookie header rather than the URI to disambiguate which thing the
client wants to purchase.

It seems to me that a client need not include all of the detail of the cart
contents and payment method in the purchase request to conform with a
statelessness constraint. I'd be happy to hear why I'm wrong if I am.

Matt

-- 
Matt McClure
http://matthewlmcclure.com
http://www.mapmyfitness.com/profile/matthewlmcclure
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19443<br>
Sender:Bob Haugen &lt;bob.haugen@...&gt;<br>
Post Date/Time:2013-05-09 18:30:53<br>
Subject:Re: [rest-discuss] Re: the meaning of stateless<br>
Message:<br><br>
<pre>On Thu, May 9, 2013 at 1:27 PM, Matt McClure &lt;matthewlmcclure@...&gt; wrote:
&gt; It seems to me that a client need not include all of the detail of the cart
&gt; contents and payment method in the purchase request to conform with a
&gt; statelessness constraint. I'd be happy to hear why I'm wrong if I am.

That was my position in the argument with Mark Baker that I lost.

When I say "I lost", I decided I agreed with Mark that to be stateless
and self-describing, the message to the server *did* need to include
all the detail of the cart contents, payment method, etc. etc. etc.

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19444<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-05-09 18:38:16<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>
On 09.05.2013, at 20:30, Bob Haugen &lt;bob.haugen@...&gt; wrote:

&gt; On Thu, May 9, 2013 at 1:27 PM, Matt McClure &lt;matthewlmcclure@...&gt; wrote:
&gt; &gt; It seems to me that a client need not include all of the detail of the cart
&gt; &gt; contents and payment method in the purchase request to conform with a
&gt; &gt; statelessness constraint. I'd be happy to hear why I'm wrong if I am.
&gt; 
&gt; That was my position in the argument with Mark Baker that I lost.
&gt; 
&gt; When I say "I lost", I decided I agreed with Mark that to be stateless
&gt; and self-describing, the message to the server *did* need to include
&gt; all the detail of the cart contents, payment method, etc. etc. etc.

My line of thought, too. Until this thread:

http://tech.groups.yahoo.com/group/rest-discuss/message/18998

Since then I try to follow Roy's advice.

Jan



&gt; 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19445<br>
Sender:mike amundsen &lt;mamund@...&gt;<br>
Post Date/Time:2013-05-09 18:49:18<br>
Subject:Re: [rest-discuss] Re: the meaning of stateless<br>
Message:<br><br>
<pre>a _representation_ of the contents of the shopping cart should be shipped
from the client to the server when checking out.

there are lots of ways to represent the shopping cart contents. an HTML
representation, a binary compressed body, even just a hash. in fact, the
last method is the one i use most often.

&lt;form action="..." method="post" class="checkout"&gt;
  &lt;input type="hidden" name="carthash" value="...." /&gt;
  &lt;input type="submit" /&gt;
&lt;/form&gt;

in practice, client apps often need to request the cart contents in order
to receive the hash. but those clients can store this "representation" of
the cart locally, wait a few days, and then attempt the checkout action. as
long as the representation is still valid (e.g. the hash of the contents -
which might include pricing, taxes, etc.) the request succeeds.  if it
fails, the client is instructed to retrieve the current copy of the cart
(w/ new info, pricing, etc.) and try again.

Think airline tickets, concert seats, etc.



mamund
+1.859.757.1449
skype: mca.amundsen
http://amundsen.com/blog/
http://twitter.com/mamund
https://github.com/mamund
http://www.linkedin.com/in/mikeamundsen


On Thu, May 9, 2013 at 2:30 PM, Bob Haugen &lt;bob.haugen@...&gt; wrote:

&gt; On Thu, May 9, 2013 at 1:27 PM, Matt McClure &lt;matthewlmcclure@...&gt;
&gt; wrote:
&gt; &gt; It seems to me that a client need not include all of the detail of the
&gt; cart
&gt; &gt; contents and payment method in the purchase request to conform with a
&gt; &gt; statelessness constraint. I'd be happy to hear why I'm wrong if I am.
&gt;
&gt; That was my position in the argument with Mark Baker that I lost.
&gt;
&gt; When I say "I lost", I decided I agreed with Mark that to be stateless
&gt; and self-describing, the message to the server *did* need to include
&gt; all the detail of the cart contents, payment method, etc. etc. etc.
&gt;
&gt;
&gt; ------------------------------------
&gt;
&gt; Yahoo! Groups Links
&gt;
&gt;
&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19446<br>
Sender:Mark Baker &lt;distobj@...&gt;<br>
Post Date/Time:2013-05-10 04:34:13<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Thu, May 9, 2013 at 2:38 PM, Jan Algermissen
&lt;jan.algermissen@...&gt; wrote:
&gt;
&gt; On 09.05.2013, at 20:30, Bob Haugen &lt;bob.haugen@...&gt; wrote:
&gt;
&gt;&gt; On Thu, May 9, 2013 at 1:27 PM, Matt McClure &lt;matthewlmcclure@...&gt; wrote:
&gt;&gt; &gt; It seems to me that a client need not include all of the detail of the cart
&gt;&gt; &gt; contents and payment method in the purchase request to conform with a
&gt;&gt; &gt; statelessness constraint. I'd be happy to hear why I'm wrong if I am.
&gt;&gt;
&gt;&gt; That was my position in the argument with Mark Baker that I lost.
&gt;&gt;
&gt;&gt; When I say "I lost", I decided I agreed with Mark that to be stateless
&gt;&gt; and self-describing, the message to the server *did* need to include
&gt;&gt; all the detail of the cart contents, payment method, etc. etc. etc.
&gt;
&gt; My line of thought, too. Until this thread:
&gt;
&gt; http://tech.groups.yahoo.com/group/rest-discuss/message/18998
&gt;
&gt; Since then I try to follow Roy's advice.

Yah, I never did follow up to that. I had to take time to think about
it, then forgot to respond.

I concluded that I disagreed with Roy about the lack of visibility in
a POST message. Certainly POST semantics are entirely opaque beyond
the oft-discussed-here "process this" practically-transport semantic,
but that doesn't impact the meaning of the rest of the message for
many purposes, e.g. archival (consider the previously discussed
HTML/CSS in a POST request rather than a GET response). On the other
hand, I agree that most of the interesting and important properties to
concern one's self with are those that derive from - as Roy says -
"representation by reference", though AFAICT, that is synonymous with
"stateful".

P.S. yes Bob, I agree that exchange is stateless.

Mark.

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19447<br>
Sender:Matt McClure &lt;matthewlmcclure@...&gt;<br>
Post Date/Time:2013-05-10 13:30:32<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>On Fri, May 10, 2013 at 12:34 AM, Mark Baker &lt;distobj@...&gt; wrote:
&gt; On Thu, May 9, 2013 at 2:38 PM, Jan Algermissen
&gt; &lt;jan.algermissen@...&gt; wrote:
&gt;&gt;
&gt;&gt; My line of thought, too. Until this thread:
&gt;&gt;
&gt;&gt; http://tech.groups.yahoo.com/group/rest-discuss/message/18998
&gt;&gt;
&gt;&gt; Since then I try to follow Roy's advice.
&gt;
&gt; I agree that most of the interesting and important properties to
&gt; concern one's self with are those that derive from - as Roy says -
&gt; "representation by reference", though AFAICT, that is synonymous with
&gt; "stateful".

"Representation by reference" is a great label. Thanks for the link to
the old post. And Mike A., thanks for your example shopping cart
solutions.

-- 
Matt McClure
http://matthewlmcclure.com
http://www.mapmyfitness.com/profile/matthewlmcclure

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19448<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-05-11 03:49:15<br>
Subject:Re: [rest-discuss] Re: the meaning of stateless<br>
Message:<br><br>
<pre>Bob Haugen wrote:
&gt;
&gt; Eric Bowman wrote:
&gt; &gt; My nutshell explanation of REST from 50,000ft is that a system
&gt; &gt; designed to manipulate shopping carts MUST be based on
&gt; &gt; transferring actual representations of shopping-cart contents.
&gt; 
&gt; I hesitated to get back into this issue after having lost an argument
&gt; with Mark Baker about it a couple of years ago, but:  the typical
&gt; behavior of a system that saves shopping cart contents on servers
&gt; (e.g. Amazon) is to send a representation of the shopping cart
&gt; contents back to the client to confirm the order, in which case, a
&gt; representation of the shopping cart contents then gets sent back to
&gt; the server from the client.
&gt; 
&gt; Would e.g. Mark and Eric agree that this is RESTful?
&gt;

I'd say that how RESTful it is, depends entirely on the ubiquity of the
media type used (text/html good, application/vnd.order+xml bad), and
depends on at least item#, quantity, and price being present in the
data.

IOW, the hypertext of the order confirmation shouldn't amount to an
agreement to buy x number of item y "at the agreed price" but should
contain either the price agreed to before the transaction, or an
updated price needing confirmation from the user before proceeding.

Which means the hypertext MUST NOT contain only a link to the current
price, or a link to the item# for a description -- such representation-
by-reference is a bad thing.  Sometimes, item #'s are re-used.

I don't get this concept of substituting a link to shave bytes, because
I use compression and it doesn't amount to much even on Amazon's scale,
especially when considering those lost properties Roy mentions -- the
cost of doing business in the modern world is bandwidth, cutting corners
to shave bytes is sloppy business practice.

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19449<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-05-11 03:49:59<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>Mark Baker wrote:
&gt;
&gt; On the other hand, I agree that most of the interesting and important
&gt; properties to concern one's self with are those that derive from - as
&gt; Roy says - "representation by reference", though AFAICT, that is
&gt; synonymous with "stateful".
&gt; 

I think "stateful" is exactly what Roy meant but didn't want to say;
why else point out that the concern should be what properties are _lost_
by representation by reference, when those lost properties are the ones
the stateless-messaging constraint intends to enforce?

As to payment method, no this doesn't need to be included in the cart,
if there's a pre-arranged means on file.  The authorization header
allows this to be stateless.  So maybe the cart only includes the last
four digits of a stored CC number, as this is what's revealed to the
user for selection/confirmation.

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19450<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-05-11 04:04:34<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>Mark Baker wrote:
&gt; 
&gt; I concluded that I disagreed with Roy about the lack of visibility in
&gt; a POST message.  Certainly POST semantics are entirely opaque beyond
&gt; the oft-discussed-here "process this" practically-transport semantic,
&gt; but that doesn't impact the meaning of the rest of the message for
&gt; many purposes, e.g. archival [...]
&gt;

I agree with Roy about POST lacking visibility, but agree with your
point that this is no reason to throw the "REST" of the style to the
breeze when using POST.

My takeaway from Roy's post is that the style transcends the limitations
of HTTP, so method choice when pragmatism mandates POST is less
interesting than how the system works.  IOW, I don't see much daylight
between your position and Roy's.

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19451<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-05-11 04:25:20<br>
Subject:Re: [rest-discuss] the meaning of stateless<br>
Message:<br><br>
<pre>My other takeaway would be to use PUT to initiate the transaction --
the URL being provided with the confirmation of the purchase, and the
method chosen reflecting the creation of a new transaction resource in
a visible fashion -- status changes from 404 to 200/303/40(1|3|10),
which would be an unambiguous indicator of user action matching what
the logs say, if the hypertext represents the transaction directly.

This achieves fidelity of reproduction of the transaction itself, but
only if our shared understanding of the media type may be resolved in a
dispute by using various open-source Web browsers.  As opposed to some
proprietary black-box user-agent provided by one party in the dispute...

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19452<br>
Sender:Shea Levy &lt;shea.levy@...&gt;<br>
Post Date/Time:2013-05-21 16:40:58<br>
Subject:Redirect Without Changing URI<br>
Message:<br><br>
<pre>Hi all,

I recently ran into a situation where I had several pages that had the 
same content, but represented different states in the application due to 
where links from the page pointed. As an example, consider a game where 
you move from room to room, each room may have monsters to fight or 
items to pick up and may have any number of exits. You might have two 
rooms with the same contents and the same exits, but exiting north from 
the first room brings you to a different place than exiting north from 
the second.  My first thought on representing this would be to have each 
exit be a hyperlink with a relative URI, and respond to the request to 
get one of the identical rooms with a protocol-level redirect (to the 
same shared resource) that doesn't cause the client to change the 
meaning of relative URIs. Do any REST-capable protocols (the only one I 
know of is HTTP?) support this? Could they?

Thanks,
Shea

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19453<br>
Sender:Erik Mogensen &lt;erik@...&gt;<br>
Post Date/Time:2013-05-21 21:23:25<br>
Subject:Re: [rest-discuss] Redirect Without Changing URI<br>
Message:<br><br>
<pre>On Tue, May 21, 2013 at 6:40 PM, Shea Levy &lt;shea.levy@...&gt; wrote:

&gt; **
&gt;
&gt; I recently ran into a situation where I had several pages that had the
&gt; same content, but represented different states in the application due to
&gt; where links from the page pointed. As an example, consider a game where
&gt; you move from room to room, each room may have monsters to fight or
&gt; items to pick up and may have any number of exits. You might have two
&gt; rooms with the same contents and the same exits, but exiting north from
&gt; the first room brings you to a different place than exiting north from
&gt; the second.
&gt;

Pardon my not answering the question, but wouldn't two rooms have two
different URIs even though they have the same contents?

e.g.
/room/red has &lt;link href="room/blue" rel="north"/&gt;
/room/white has &lt;link href="room/orange" rel="north"/&gt;

In a way, the rooms are not identical, as the north exit exits elsewhere.

In the same way, the current state of the application isn't the same if
invoking the "north" hypermedia control takes you to two different places.

If "north" takes you to two different places depending on something else,
Hypermedia is no longer the Engine of Application State. :-)


&gt; My first thought on representing this would be to have each
&gt; exit be a hyperlink with a relative URI, and respond to the request to
&gt; get one of the identical rooms with a protocol-level redirect (to the
&gt; same shared resource) that doesn't cause the client to change the
&gt; meaning of relative URIs. Do any REST-capable protocols (the only one I
&gt; know of is HTTP?) support this? Could they?
&gt;

It sounds a bit strange, but I would have to re-read the definition of 302.
 You want e.g. to say you're in /room/red, which redirects 302 (temporary)
to e.g. "/places/redrum"  the client would "get" the representation of
"redrum" and resolve links in relation to "red" instead? so &lt;link
href="blue"/&gt; would resolve to /room/blue and not /places/blue.

I guess, if you consider the security constraints (think CORS in web
browsers) and you are writing media types, and don't mind talking about
HTTP when talking about your media type (see HTML[1]), you could say that a
302 response should leave the base URI unchanged, caveat in mind!

HTTP assigns a similar capability to the Content-Location header[2]: "The
value of Content-Location also defines the base URI for the entity."  This
has, however, been removed in the httpbis[3]: "The definition of
Content-Location has been changed to no longer affect the base URI for
resolving relative URI references, due to poor implementation support and
the undesirable effect of potentially breaking relative links in
content-negotiated resources."  YMMV.

PS: Have you seen this? application/maze+xml [4]

[1]: http://www.w3.org/TR/html5/infrastructure.html#resolve-a-url (bullet
#12)
[2]: http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.14
[3]:
http://tools.ietf.org/html/draft-ietf-httpbis-p2-semantics-22#appendix-B
[4]: http://amundsen.com/media-types/maze/
-- 
-mogsie-
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19454<br>
Sender:Glenn Block &lt;glenn.block@...&gt;<br>
Post Date/Time:2013-05-22 04:12:06<br>
Subject:Re: [rest-discuss] conneg considered harmful<br>
Message:<br><br>
<pre>Hello folks, been a long time!

A very interesting and educational discussion indeed.

Previously I have pushed quite heavily the support of server-driven conneg,
which is something we enable quite easily in ASP.NET Web API though without
redirects.

It's possible to return a redirect, but that requires the user to do the
heavy lifting.

Can someone elaborate a bit more on the harms of not doing the redirect. I
read through the different threads, but having a concise summary would be
valuable.

A different question this brings up is the concern of costs associated with
doing this in particular for a cloud-hosted deployment where each request
costs money / compute hours.


   - Does adding in this redirect mean there's any significant cost
   increase? If you are talking about secure or data that is dynamically
   generated then a cache may not necessarily help offset that.
   - Does the benefit outweight the cost in these cases?

I am curious what folks on the list are doing with regards to APIs deployed
in the cloud.

Thanks!
Glenn






On Sat, Feb 16, 2013 at 2:01 AM, Alan Dean &lt;alan.dean@...&gt; wrote:

&gt; **
&gt;
&gt;
&gt; To be clear what Roy actually said was "In general, I avoid content
&gt; negotiation *without redirects* like the plague because of its effect on
&gt; caching." *(my emphasis)*
&gt;
&gt; Regards,
&gt; Alan Dean
&gt;
&gt;
&gt; On Sat, Feb 16, 2013 at 6:01 AM, Peter Williams &lt;pezra@...&gt;wrote:
&gt;
&gt;&gt; Most of those don't talk about why using content negotiation is bad in
&gt;&gt; general.  Instead they talk about how truly different resources should have
&gt;&gt; their own uris even if they are variants of one another (eg articles about
&gt;&gt; the same subject written in different human languages). That seems very
&gt;&gt; reasonable.  However, those arguments don't apply to situations where
&gt;&gt; multiple, truly mechanically translatable, representations of a single
&gt;&gt; resource exist.
&gt;&gt;
&gt;&gt; One of those mention that conneg has a negative effect on caching. Is
&gt;&gt; being harder to cache the only ill effect of sever driven conneg?
&gt;&gt;
&gt;&gt; Peter
&gt;&gt; Barelyenough.org
&gt;&gt; On Feb 15, 2013 3:31 PM, "Alan Dean" &lt;alan.dean@...&gt; wrote:
&gt;&gt;
&gt;&gt;&gt; Perhaps it is worth referencing some other other Fielding quotes on the
&gt;&gt;&gt; subject:
&gt;&gt;&gt;
&gt;&gt;&gt; https://delicious.com/alan.dean/Roy.Fielding+conneg
&gt;&gt;&gt;
&gt;&gt;&gt; Regards,
&gt;&gt;&gt; Alan Dean
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Fri, Feb 15, 2013 at 8:21 PM, Peter Williams &lt;pezra@barelyenough.org&gt;wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; **
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Eric,
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; That is an interesting quote. I have occasionally heard
&gt;&gt;&gt;&gt; unsubstantiated claims regarding the badness of accept header based
&gt;&gt;&gt;&gt; content negotiation. It is interesting that Roy perceives it as
&gt;&gt;&gt;&gt; "revolting".
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Personally, i rather like it but perhaps i am missing something
&gt;&gt;&gt;&gt; important. I'd definitely like to hear someone (or multiple someones)
&gt;&gt;&gt;&gt; actually articulate what they perceive as problematic about it. So far
&gt;&gt;&gt;&gt; i don't recall ever reading a discussion of the downsides that got
&gt;&gt;&gt;&gt; beyond "i don't like it" or "it is hard for me to implement" (neither
&gt;&gt;&gt;&gt; of which resonate with me).
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On Wed, Feb 13, 2013 at 9:04 AM, Eric J. Bowman eric@bisonsystems.net&gt;
&gt;&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt; &gt; Mark Baker wrote:
&gt;&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt;&gt; &gt;&gt; Besides, client driven uses hypermedia so is way more RESTful.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Mark, can you explain a bit more why you think this? It is not clear
&gt;&gt;&gt;&gt; to me why avoiding this particular part of http's uniform interface
&gt;&gt;&gt;&gt; would make a client more RESTful.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Peter
&gt;&gt;&gt;&gt; barelyenough.org
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;  
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19455<br>
Sender:Glenn Block &lt;glenn.block@...&gt;<br>
Post Date/Time:2013-05-22 18:08:12<br>
Subject:Re: [rest-discuss] conneg considered harmful<br>
Message:<br><br>
<pre>Question, what about Content-Location? Isn't this header specifically there
to inform the client / caches even if a negotiated representation was
returned, what the negotiated resource Uri is?


On Tue, May 21, 2013 at 9:12 PM, Glenn Block &lt;glenn.block@...&gt; wrote:

&gt; Hello folks, been a long time!
&gt;
&gt; A very interesting and educational discussion indeed.
&gt;
&gt; Previously I have pushed quite heavily the support of server-driven
&gt; conneg, which is something we enable quite easily in ASP.NET Web API
&gt; though without redirects.
&gt;
&gt; It's possible to return a redirect, but that requires the user to do the
&gt; heavy lifting.
&gt;
&gt; Can someone elaborate a bit more on the harms of not doing the redirect. I
&gt; read through the different threads, but having a concise summary would be
&gt; valuable.
&gt;
&gt; A different question this brings up is the concern of costs associated
&gt; with doing this in particular for a cloud-hosted deployment where each
&gt; request costs money / compute hours.
&gt;
&gt;
&gt;    - Does adding in this redirect mean there's any significant cost
&gt;    increase? If you are talking about secure or data that is dynamically
&gt;    generated then a cache may not necessarily help offset that.
&gt;    - Does the benefit outweight the cost in these cases?
&gt;
&gt; I am curious what folks on the list are doing with regards to APIs
&gt; deployed in the cloud.
&gt;
&gt; Thanks!
&gt; Glenn
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; On Sat, Feb 16, 2013 at 2:01 AM, Alan Dean &lt;alan.dean@...&gt; wrote:
&gt;
&gt;&gt; **
&gt;&gt;
&gt;&gt;
&gt;&gt; To be clear what Roy actually said was "In general, I avoid content
&gt;&gt; negotiation *without redirects* like the plague because of its effect on
&gt;&gt; caching." *(my emphasis)*
&gt;&gt;
&gt;&gt; Regards,
&gt;&gt; Alan Dean
&gt;&gt;
&gt;&gt;
&gt;&gt; On Sat, Feb 16, 2013 at 6:01 AM, Peter Williams &lt;pezra@...&gt;wrote:
&gt;&gt;
&gt;&gt;&gt; Most of those don't talk about why using content negotiation is bad in
&gt;&gt;&gt; general.  Instead they talk about how truly different resources should have
&gt;&gt;&gt; their own uris even if they are variants of one another (eg articles about
&gt;&gt;&gt; the same subject written in different human languages). That seems very
&gt;&gt;&gt; reasonable.  However, those arguments don't apply to situations where
&gt;&gt;&gt; multiple, truly mechanically translatable, representations of a single
&gt;&gt;&gt; resource exist.
&gt;&gt;&gt;
&gt;&gt;&gt; One of those mention that conneg has a negative effect on caching. Is
&gt;&gt;&gt; being harder to cache the only ill effect of sever driven conneg?
&gt;&gt;&gt;
&gt;&gt;&gt; Peter
&gt;&gt;&gt; Barelyenough.org
&gt;&gt;&gt; On Feb 15, 2013 3:31 PM, "Alan Dean" &lt;alan.dean@...&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Perhaps it is worth referencing some other other Fielding quotes on the
&gt;&gt;&gt;&gt; subject:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; https://delicious.com/alan.dean/Roy.Fielding+conneg
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Regards,
&gt;&gt;&gt;&gt; Alan Dean
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On Fri, Feb 15, 2013 at 8:21 PM, Peter Williams &lt;pezra@...g
&gt;&gt;&gt;&gt; &gt; wrote:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; **
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Eric,
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; That is an interesting quote. I have occasionally heard
&gt;&gt;&gt;&gt;&gt; unsubstantiated claims regarding the badness of accept header based
&gt;&gt;&gt;&gt;&gt; content negotiation. It is interesting that Roy perceives it as
&gt;&gt;&gt;&gt;&gt; "revolting".
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Personally, i rather like it but perhaps i am missing something
&gt;&gt;&gt;&gt;&gt; important. I'd definitely like to hear someone (or multiple someones)
&gt;&gt;&gt;&gt;&gt; actually articulate what they perceive as problematic about it. So far
&gt;&gt;&gt;&gt;&gt; i don't recall ever reading a discussion of the downsides that got
&gt;&gt;&gt;&gt;&gt; beyond "i don't like it" or "it is hard for me to implement" (neither
&gt;&gt;&gt;&gt;&gt; of which resonate with me).
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; On Wed, Feb 13, 2013 at 9:04 AM, Eric J. Bowman eric@...&gt;
&gt;&gt;&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt;&gt; &gt; Mark Baker wrote:
&gt;&gt;&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt; Besides, client driven uses hypermedia so is way more RESTful.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Mark, can you explain a bit more why you think this? It is not clear
&gt;&gt;&gt;&gt;&gt; to me why avoiding this particular part of http's uniform interface
&gt;&gt;&gt;&gt;&gt; would make a client more RESTful.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Peter
&gt;&gt;&gt;&gt;&gt; barelyenough.org
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;  
&gt;&gt;
&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19456<br>
Sender:Unmesh Joshi &lt;unmeshjoshi@...&gt;<br>
Post Date/Time:2013-06-05 13:06:30<br>
Subject:Using jdon serialized objects as query params<br>
Message:<br><br>
<pre>Hi,

I am working with a couple of services where GET request is used for search
and some associative data needed to be passed as query params.

api.search.com/search?q=[{
&lt;http://api.hotelsearch.com/search?hotels=[%7B&gt;"id":"id1",
"yd2":"p1"},{"id":"id2", "yid":"p2"}]
They are passing these id maps as json serialized query params.

Here is another example, where category maps are passed as json serialized
maps.
http://indexden.com/documentation/api#searching

Are there more such examples?

Is this a standard practice?

Are there example APIs where POST is used instead of GET just because the
URLs and parameters are getting too long?

Thanks,
Unmesh
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19457<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-06-05 13:39:20<br>
Subject:Re: [rest-discuss] Using jdon serialized objects as query params<br>
Message:<br><br>
<pre>Unmesh Joshi wrote:
&gt; 
&gt; Is this a standard practice?
&gt; 

I'm sure it's a common practice; what REST wants is a standardized
means of building such URIs.  What do the hypertext controls look like,
and what media type are you using?  As to the URI itself, it's opaque,
so you could even use "jdon" notation for query params...  ;-)

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19458<br>
Sender:Unmesh Joshi &lt;unmeshjoshi@...&gt;<br>
Post Date/Time:2013-06-05 13:50:43<br>
Subject:Re: [rest-discuss] Using jdon serialized objects as query params<br>
Message:<br><br>
<pre>:-). you surely can use "jdon" if its standardized.


On Wed, Jun 5, 2013 at 7:09 PM, Eric J. Bowman &lt;eric@...&gt;wrote:

&gt; Unmesh Joshi wrote:
&gt; &gt;
&gt; &gt; Is this a standard practice?
&gt; &gt;
&gt;
&gt; I'm sure it's a common practice; what REST wants is a standardized
&gt; means of building such URIs.  What do the hypertext controls look like,
&gt; and what media type are you using?  As to the URI itself, it's opaque,
&gt; so you could even use "jdon" notation for query params...  ;-)
&gt;
&gt; -Eric
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19459<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-06-05 13:57:21<br>
Subject:Re: [rest-discuss] Using jdon serialized objects as query params<br>
Message:<br><br>
<pre>&gt;
&gt; :-). you surely can use "jdon" if its standardized.
&gt; 

For URI syntax it just doesn't matter, except on POST where you'd want
the equivalent of application/x-www-form-urlencoded to inform the
origin server and any participating intermediaries, how to decode the
payload.  On GET, the query isn't "payload" it's just an opaque URI,
IMO.

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19460<br>
Sender:Darrel Miller &lt;darrel.miller@...&gt;<br>
Post Date/Time:2013-06-07 12:39:25<br>
Subject:Re: [rest-discuss] conneg considered harmful<br>
Message:<br><br>
<pre>For the record, here is a link [1] to Larry Masinter's apology for pushing
accept header based conneg and his suggestion that it be deprecated.  It is
sad that this email is from 2006 and yet here we are still...

 Darrel

[1] http://www.alvestrand.no/pipermail/ietf-types/2006-April/001707.html
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19461<br>
Sender:Darrel Miller &lt;darrel.miller@...&gt;<br>
Post Date/Time:2013-06-07 13:15:15<br>
Subject:Re: [rest-discuss] conneg considered harmful<br>
Message:<br><br>
<pre>...and just a couple more notes.  The last few updates to the Httpbis spec
added some clarification to the subject including these paragraphs.


Proactive negotiation has serious disadvantages:

   o  It is impossible for the server to accurately determine what might
      be "best" for any given user, since that would require complete
      knowledge of both the capabilities of the user agent and the
      intended use for the response (e.g., does the user want to view it
      on screen or print it on paper?);

   o  Having the user agent describe its capabilities in every request
      can be both very inefficient (given that only a small percentage
      of responses have multiple representations) and a potential risk
      to the user's privacy;

   o  It complicates the implementation of an origin server and the
      algorithms for generating responses to a request; and,

   o  It limits the reusability of responses for shared caching.


http://tools.ietf.org/html/draft-ietf-httpbis-p2-semantics-22#page-18

In is also interesting to note that Fielding is working on a ID that
describes a replacement for the vary header that solves some of the issues
relating to caching negotiated responses.
http://tools.ietf.org/html/draft-fielding-http-key-02


Darrel


On Fri, Jun 7, 2013 at 8:39 AM, Darrel Miller &lt;darrel.miller@...&gt;wrote:

&gt; For the record, here is a link [1] to Larry Masinter's apology for pushing
&gt; accept header based conneg and his suggestion that it be deprecated.  It is
&gt; sad that this email is from 2006 and yet here we are still...
&gt;
&gt;  Darrel
&gt;
&gt; [1] http://www.alvestrand.no/pipermail/ietf-types/2006-April/001707.html
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19462<br>
Sender:mike amundsen &lt;mamund@...&gt;<br>
Post Date/Time:2013-06-07 13:24:21<br>
Subject:Re: [rest-discuss] conneg considered harmful<br>
Message:<br><br>
<pre>first, i find it instructive that the thread you cite started with an
effort to register a media type that had a version number in the identifier!

second, it's not clear to me whether Larry is apologizing for the conneg
implementation details or the concept of conneg itself. and i see nothing
here regarding client-driven conneg,

FWIW, HTTP is the only app-level protocol that provides the ability to
negotiation for representation details including media type, charset,
language, encoding, and even ranges. No doubt some have proved more
effective than others. I think the ability to negotiate
for representations is an important part of the spec and while i'm open to
new ways to implement the feature, i don't think it wise to drop it.

as for "deprecating" as LM mentions, there is no such thing on "the Web."
once spec'd it will always remain. we can discourage the use of some aspect
of the spec, but removing it is neither advisable or likely.

BTW - i'd be happy to see user-agents support client-driven negotiation. i
used to think this meant common browsers MUST be the leaders for a feature
like this. but recently i've started to think that native-built mobile
clients could start to turn the tide on what features show up in the
pipeline.

Cheers.
mamund
+1.859.757.1449
skype: mca.amundsen
http://amundsen.com/blog/
http://twitter.com/mamund
https://github.com/mamund
http://www.linkedin.com/in/mikeamundsen




On Fri, Jun 7, 2013 at 8:39 AM, Darrel Miller &lt;darrel.miller@...&gt;wrote:

&gt;
&gt;
&gt; For the record, here is a link [1] to Larry Masinter's apology for pushing
&gt; accept header based conneg and his suggestion that it be deprecated.  It is
&gt; sad that this email is from 2006 and yet here we are still...
&gt;
&gt;  Darrel
&gt;
&gt; [1] http://www.alvestrand.no/pipermail/ietf-types/2006-April/001707.html
&gt;
&gt;
&gt; 
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19463<br>
Sender:"Robert Brewer" &lt;fumanchu@...&gt;<br>
Post Date/Time:2013-06-07 14:53:21<br>
Subject:RE: [rest-discuss] conneg considered harmful<br>
Message:<br><br>
<pre>Darrel Miller wrote:
&gt; For the record, here is a link [1] to Larry Masinter's
&gt; apology for pushing accept header based conneg and his
&gt; suggestion that it be deprecated.  It is sad that this
&gt; email is from 2006 and yet here we are still...

and mike amundsen replied:
&gt; second, it's not clear to me whether Larry is apologizing
&gt; for the conneg implementation details or the concept of
&gt; conneg itself. and i see nothing here regarding
&gt; client-driven conneg,

It's clear if you read the whole thread. Larry retreats a bit to "Javascript detection does a better job than Accept", admitting that Accept-Language is doing a fine job, and Accept itself might be OK in non-scripted payloads/clients.


Robert Brewer
fumanchu@aminus.org
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19464<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-06-07 21:17:06<br>
Subject:Re: [rest-discuss] conneg considered harmful<br>
Message:<br><br>
<pre>&gt; 
&gt; BTW - i'd be happy to see user-agents support client-driven
&gt; negotiation. i used to think this meant common browsers MUST be the
&gt; leaders for a feature like this. but recently i've started to think
&gt; that native-built mobile clients could start to turn the tide on what
&gt; features show up in the pipeline.
&gt; 

+1, and +1 to [1] and [2] while I'm at it...

Browsers are truly becoming their own, undefined architecture.  REST
may become unfeasible as a model for browser-based system performance,
which hardly means it won't continue to be the ideal, or that resources
will cease to exist as an abstract concept even if TAG replaces the term
in AWWW v2.

It merely opens the door for exactly what Mike just said -- leadership
on features/performance passes to native apps which aren't precluded
from leveraging REST to the hilt.  The problem with declaring REST a
dinosaur (and deprecating application/xhtml+xml, removing Content-Type,
ignoring interoperability in favor of versionless "standards" etc.), is
it's still adapted to its environment -- HTTP over an anarchic, end-to-
end Internet, no habitat loss I can see...

Personally, I find the UX I'm subjected to on most every site could
still benefit from the developers undertaking to learn a bit about
REST even though everything about it except buzzwordiness has gone out
of vogue lately, to the point I find it pointless to continue to comment
on www-tag, particularly as my concern about updating HttpRange-14 not
only wasn't responded to but judging by the minutes, wasn't even
considered.  It's been shown that sniffing binaries is a security hole,
but I guess we'll just put out those fires as they flare up for the
sake of not having to talk about resources/representations even though
it's also been shown [3] that resources exist.

&lt;/rant&gt;

-Eric

[1]
http://lists.w3.org/Archives/Public/ietf-http-wg/2013AprJun/0001.html
[2] http://lists.w3.org/Archives/Public/www-tag/2013Jun/0014.html
[3] http://lists.w3.org/Archives/Public/www-tag/2013Jun/0028.html

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19465<br>
Sender:Mike Kelly &lt;mikekelly321@...&gt;<br>
Post Date/Time:2013-06-08 10:34:52<br>
Subject:Re: [rest-discuss] conneg considered harmful<br>
Message:<br><br>
<pre>On Fri, Jun 7, 2013 at 10:17 PM, Eric J. Bowman &lt;eric@...&gt;wrote:

&gt; **
&gt;
&gt;
&gt; &gt;
&gt; &gt; BTW - i'd be happy to see user-agents support client-driven
&gt; &gt; negotiation. i used to think this meant common browsers MUST be the
&gt; &gt; leaders for a feature like this. but recently i've started to think
&gt;  &gt; that native-built mobile clients could start to turn the tide on what
&gt; &gt; features show up in the pipeline.
&gt; &gt;
&gt;
&gt; +1, and +1 to [1] and [2] while I'm at it...
&gt;
&gt; Browsers are truly becoming their own, undefined architecture. REST
&gt; may become unfeasible as a model for browser-based system performance,
&gt; which hardly means it won't continue to be the ideal, or that resources
&gt; will cease to exist as an abstract concept even if TAG replaces the term
&gt; in AWWW v2.
&gt;

What do you mean by 'undefined'? Running code has definitive behaviour:
http://caniuse.com/

What is it, specifically, that you feel may be about to render browsers
infeasible as the basis for a RESTful system?

Is there anything missing that would make it feasible and if so why is it
missing? e.g. why did the efforts to introduce PUT and DELETE to &lt;form&gt;
fail?

fwiw, I am -1 to this idea of trying to "defend REST" by pursuing a
competing platform on 'native mobile'. It seems like a huge waste of time..
How can you do this without essentially just reproducing something that
does what a browser does already? Surely, it would be better to direct all
that energy towards improving the trajectory of this new, "living" browser
platform? Even if that is a hard slog, it's probably the most likely way of
getting the outcome you want.

Cheers,
M
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19466<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-06-08 12:07:10<br>
Subject:Re: [rest-discuss] conneg considered harmful<br>
Message:<br><br>
<pre>Mike Kelly wrote:
&gt; 
&gt; Even if that is a hard slog, it's probably the most likely way of
&gt; getting the outcome you want.
&gt; 

Like interoperability with things that aren't browsers, or which follow
RFC 3986?  Highly doubtful.

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19467<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-06-08 13:02:32<br>
Subject:Re: [rest-discuss] conneg considered harmful<br>
Message:<br><br>
<pre>Mike Kelly wrote:
&gt; 
&gt; What do you mean by 'undefined'? Running code has definitive
&gt; behaviour: http://caniuse.com/
&gt; 

REST is a defined architectural style.  The link you've posted is all
about where a set of moving-goalpost features overlap at a moment in
time, which is hardly the same thing.  While system behavior may be
definable, it's a by-product of the design process, as opposed to goals
used to guide the design process.  What I mean by defined architecture
would be some sort of Taylor-school definition of just what's trying to
be accomplished, like REST was the model for the move to HTTP 1.1.

&gt;
&gt; What is it, specifically, that you feel may be about to render
&gt; browsers infeasible as the basis for a RESTful system?
&gt; 

Silent error correction, content sniffing being used as a reason to
deprecate Content-Type, any number of RFC 3986 violations -- we're
clearly off into uncharted territory with little or no resemblance to
REST, and I've just scratched the surface.  What else to make of this
move to just not mention "resource" and redefine URIs to identify
either documents or services?  How is it possible to be more anti-REST?

&gt;
&gt; Is there anything missing that would make it feasible and if so why
&gt; is it missing? e.g. why did the efforts to introduce PUT and DELETE
&gt; to &lt;form&gt; fail?
&gt; 

What's missing is browser-vendor knowledge of architecture, or any HTTP/
URI interoperability issues not involving browsers.  I won't speculate
as to why, it's not as if Roy didn't used to waste his breath explaining
to these people the finer points of why ad-hoc changes to WebArch are
short-sighted.  Sufficient explanation to me of why no PUT, DELETE,
Xforms, list goes on -- not to mention feature removal...

Clearly, the future of REST no longer lies with the browser.  My status
nowadays is "on sabbatical" to recover my health, after recently "re-
homing" the last of my clients -- that one since 1994 which is how long
I've been developing Web sites for consumption in browsers.  I have a 9-
week-old Alaskan Malamute to help me drop at least a couple stone before
I return, may take a few years.

I'll continue to participate here, but when I return to Web development
it certainly looks like I'll be forsaking the browser for the native
app, where I can continue to bring my clients positive returns on their
online investments by leveraging REST to deal with the realities of the
netowrk currently being denied by the browser vendors.

Should be interesting to watch, but the "new direction" has caused me
to pull my horse from the race; I no longer have any vested interest
nor do I care about the future of browsers.  Only a sense that we'll be
cleaning up the mess for a long time to come -- corporate production
cycles, marketing imperatives, and bottom lines are no way to guide
the Web's architectural development, and this era can't end well.

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19468<br>
Sender:Mike Kelly &lt;mikekelly321@...&gt;<br>
Post Date/Time:2013-06-08 14:35:55<br>
Subject:Re: [rest-discuss] conneg considered harmful<br>
Message:<br><br>
<pre>On Sat, Jun 8, 2013 at 1:07 PM, Eric J. Bowman &lt;eric@...&gt; wrote:
&gt; Mike Kelly wrote:
&gt;&gt;
&gt;&gt; Even if that is a hard slog, it's probably the most likely way of
&gt;&gt; getting the outcome you want.
&gt;&gt;
&gt;
&gt; Like interoperability with things that aren't browsers, or which follow
&gt; RFC 3986?  Highly doubtful.

Ok, I disagree. Afaik, there isn't a more feasible course of action,
and it sounds as if you are not going to invest any time on an
alternative in the foreseeable future.

I do share some of your concern though, so it would be intriguing to
hear some specifics on what those alternatives might (or already do)
look like... mamund? :)


On Sat, Jun 8, 2013 at 2:02 PM, Eric J. Bowman &lt;eric@...&gt; wrote:
&gt; Mike Kelly wrote:
&gt;&gt;
&gt;&gt; What do you mean by 'undefined'? Running code has definitive
&gt;&gt; behaviour: http://caniuse.com/
&gt;&gt;
&gt;
&gt; REST is a defined architectural style.  The link you've posted is all
&gt; about where a set of moving-goalpost features overlap at a moment in
&gt; time, which is hardly the same thing.  While system behavior may be
&gt; definable, it's a by-product of the design process, as opposed to goals
&gt; used to guide the design process.  What I mean by defined architecture
&gt; would be some sort of Taylor-school definition of just what's trying to
&gt; be accomplished, like REST was the model for the move to HTTP 1.1.
&gt;
&gt;&gt;
&gt;&gt; What is it, specifically, that you feel may be about to render
&gt;&gt; browsers infeasible as the basis for a RESTful system?
&gt;&gt;
&gt;
&gt; Silent error correction, content sniffing being used as a reason to
&gt; deprecate Content-Type, any number of RFC 3986 violations -- we're
&gt; clearly off into uncharted territory with little or no resemblance to
&gt; REST, and I've just scratched the surface.  What else to make of this
&gt; move to just not mention "resource" and redefine URIs to identify
&gt; either documents or services?  How is it possible to be more anti-REST?
&gt;
&gt;&gt;
&gt;&gt; Is there anything missing that would make it feasible and if so why
&gt;&gt; is it missing? e.g. why did the efforts to introduce PUT and DELETE
&gt;&gt; to &lt;form&gt; fail?
&gt;&gt;
&gt;
&gt; What's missing is browser-vendor knowledge of architecture, or any HTTP/
&gt; URI interoperability issues not involving browsers.  I won't speculate
&gt; as to why, it's not as if Roy didn't used to waste his breath explaining
&gt; to these people the finer points of why ad-hoc changes to WebArch are
&gt; short-sighted.  Sufficient explanation to me of why no PUT, DELETE,
&gt; Xforms, list goes on -- not to mention feature removal...
&gt;
&gt; Clearly, the future of REST no longer lies with the browser.  My status
&gt; nowadays is "on sabbatical" to recover my health, after recently "re-
&gt; homing" the last of my clients -- that one since 1994 which is how long
&gt; I've been developing Web sites for consumption in browsers.  I have a 9-
&gt; week-old Alaskan Malamute to help me drop at least a couple stone before
&gt; I return, may take a few years.
&gt;
&gt; I'll continue to participate here, but when I return to Web development
&gt; it certainly looks like I'll be forsaking the browser for the native
&gt; app, where I can continue to bring my clients positive returns on their
&gt; online investments by leveraging REST to deal with the realities of the
&gt; netowrk currently being denied by the browser vendors.
&gt;
&gt; Should be interesting to watch, but the "new direction" has caused me
&gt; to pull my horse from the race; I no longer have any vested interest
&gt; nor do I care about the future of browsers.  Only a sense that we'll be
&gt; cleaning up the mess for a long time to come -- corporate production
&gt; cycles, marketing imperatives, and bottom lines are no way to guide
&gt; the Web's architectural development, and this era can't end well.
&gt;

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19469<br>
Sender:Nicholas Shanks &lt;nickshanks@...&gt;<br>
Post Date/Time:2013-06-11 17:01:41<br>
Subject:Re: [rest-discuss] Examples of Async Restful services<br>
Message:<br><br>
<pre>How is creating a "send this sms" resource on the server any more stateless than creating a "send this sms then POST to this URI" resource?
The client still POSTs to a /sms-queue/ collection, though the resource on the server is a few bytes bigger due to an additional callback URI property.

The point of statelessness it to enable scalability by moving state to the many clients from the few servers. Since there is already one resource per sms-sending-client (at least) there is no loss of scalability. I see nothing that violates REST here.

 Nicholas.


On 8 May 2013, at 15:36, Jan Algermissen &lt;jan.algermissen@...&gt; wrote:

&gt; 
&gt; On 08.05.2013, at 13:26, Shaunak Kashyap &lt;ycombinator@...&gt; wrote:
&gt; 
&gt; &gt; I'm not sure if the callback approach is necessarily in conflict with the RESTfulness of the API 
&gt; 
&gt; Violates stateless server constraint.
&gt; 
&gt; Jan
&gt; 
&gt; 
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19470<br>
Sender:Nicholas Shanks &lt;nickshanks@...&gt;<br>
Post Date/Time:2013-06-11 17:31:25<br>
Subject:Re: [rest-discuss] Re: the meaning of stateless<br>
Message:<br><br>
<pre>Like the SMS example, this is another case of trying to avoid server state (i.e. be RESTful) in cases where the server needs to keep a permanent record of the transaction anyway, one per client. Statelessness is about avoiding the word "my". Pay for the items in my basket, vs Pay for the items in basket #54203. Replicating session files between load-balanced servers may even be cheaper than replicating database-based resources.

As the linked post says: "Most of the value cases for REST apply to repeatable responses, not an application that can't be reused, can't be transformed, and can't be shared."
"I do not believe in trying to apply all of REST's constraints unless there is a reason for doing so."

Just because an architecture is good for document retrieval, doesn't mean it should be mindlessly applied to everything else too.

Perhaps the next Roy Fielding can come along and deduce the optimum architectural constraints for a private, non-repeatable, yet scalable application, and from these direct the evolution of HTTP just as HTTP 1.1 was informed.

 Nicholas.

On 9 May 2013, at 19:27, Matt McClure &lt;matthewlmcclure@...&gt; wrote:

&gt; On Thu, May 9, 2013 at 9:43 AM, Bob Haugen &lt;bob.haugen@...&gt; wrote:
&gt; 
&gt;&gt;  
&gt;&gt; Eric Bowman wrote:
&gt;&gt; &gt; My nutshell explanation of REST from 50,000ft is that a system
&gt;&gt; &gt; designed to manipulate shopping carts MUST be based on
&gt;&gt; &gt; transferring actual representations of shopping-cart contents.
&gt;&gt; 
&gt;&gt; I hesitated to get back into this issue after having lost an argument
&gt;&gt; with Mark Baker about it a couple of years ago, but: the typical
&gt;&gt; behavior of a system that saves shopping cart contents on servers
&gt;&gt; (e.g. Amazon) is to send a representation of the shopping cart
&gt;&gt; contents back to the client to confirm the order, in which case, a
&gt;&gt; representation of the shopping cart contents then gets sent back to
&gt;&gt; the server from the client.
&gt;&gt; 
&gt;&gt; Would e.g. Mark and Eric agree that this is RESTful?
&gt;&gt; 
&gt; I've also been following this conversation as a lurker. If I understood some of the earlier comments, it sounded as though someone made a case that a request like:
&gt; 
&gt;     POST /cart/12345/purchase
&gt;     Content-Length: 0
&gt; 
&gt; would be stateful and undesirable for conformance with REST whereas:
&gt; 
&gt;     POST /purchase
&gt;     Content-Length: 1234
&gt;     
&gt;     items=...&amp;in_quantities=...&amp;with_payment_method=...
&gt; 
&gt; would be more RESTful and less stateful.
&gt; 
&gt; I guess I'm unclear why the former would violate statelessness. The state in the former is resource state, identified by an implicit /cart/12345 resource (assume I got the /cart/12345/purchase link from the cart resource).
&gt; 
&gt; To contrast:
&gt; 
&gt;     POST /purchase
&gt;     Content-Length: 0
&gt;     Cookie: client=12345
&gt; 
&gt; seems decidedly stateful because it requires shared state identified by the ID in the Cookie header rather than the URI to disambiguate which thing the client wants to purchase.
&gt; 
&gt; It seems to me that a client need not include all of the detail of the cart contents and payment method in the purchase request to conform with a statelessness constraint. I'd be happy to hear why I'm wrong if I am.
&gt; 
&gt; Matt
&gt; 
&gt; -- 
&gt; Matt McClure
&gt; http://matthewlmcclure.com
&gt; http://www.mapmyfitness.com/profile/matthewlmcclure
&gt; 
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19471<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-06-11 22:59:36<br>
Subject:Fwd: New Version Notification for draft-wilde-home-xml-01.txt<br>
Message:<br><br>
<pre>FYI.


-------- Original Message --------
Subject: New Version Notification for draft-wilde-home-xml-01.txt
Date: Tue, 11 Jun 2013 15:48:38 -0700
From: internet-drafts@...
To: Erik Wilde &lt;erik.wilde@...&gt;, Erik Wilde &lt;dret@...&gt;


A new version of I-D, draft-wilde-home-xml-01.txt
has been successfully submitted by Erik Wilde and posted to the
IETF repository.

Filename:	 draft-wilde-home-xml
Revision:	 01
Title:		 Home Documents for HTTP Services: XML Syntax
Creation date:	 2013-06-11
Group:		 Individual Submission
Number of pages: 11
URL: 
http://www.ietf.org/internet-drafts/draft-wilde-home-xml-01.txt
Status:          http://datatracker.ietf.org/doc/draft-wilde-home-xml
Htmlized:        http://tools.ietf.org/html/draft-wilde-home-xml-01
Diff:            http://www.ietf.org/rfcdiff?url2=draft-wilde-home-xml-01

Abstract:
    The current draft for HTTP Home Documents provides a JSON syntax
    only.  This draft provides an XML syntax for the same underlying data
    model, so that the concept of HTTP Home Documents can be consistently
    exposed in both JSON- and XML-based HTTP services.

Note to Readers

    Please discuss this draft on the apps-discuss mailing list [7].
    Online access to all versions and files is available on github [8].

 



The IETF Secretariat

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19472<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-06-11 23:11:43<br>
Subject:Re: [apps-discuss] Fwd: New Version Notification for draft-nottingham-link-hint-00.txt<br>
Message:<br><br>
<pre>On 2013-06-09 20:38 , Mark Nottingham wrote:
&gt;&gt; Filename:	 draft-nottingham-link-hint
&gt;&gt; Revision:	 00
&gt;&gt; Title:		 HTTP Link Hints
&gt;&gt; Creation date:	 2013-06-10
&gt;&gt; Group:		 Individual Submission
&gt;&gt; Number of pages: 12
&gt;&gt; URL:             http://www.ietf.org/internet-drafts/draft-nottingham-link-hint-00.txt
&gt;&gt; Status:          http://datatracker.ietf.org/doc/draft-nottingham-link-hint
&gt;&gt; Htmlized:        http://tools.ietf.org/html/draft-nottingham-link-hint-00
&gt;&gt; Abstract:
&gt;&gt;    This memo specifies "HTTP Link Hints", a mechanism for annotating Web
&gt;&gt;    links to HTTP(S) resources with information that otherwise might be
&gt;&gt;    discovered by interacting with them.

generally speaking, i think this might become a very useful way how 
various services can expose more helpful links to clients, if they 
choose to do so, and if the clients are interesting in taking that 
information into account.

but i have one question about the general registry model: the current 
draft says that hints MUST have a name (very reasonable, of course), but 
also that hints MUST have their data model being defined in JSON.

http://tools.ietf.org/html/draft-nottingham-link-hint-00#section-5.1

living in a world where we have JSON services, XML services, and RDF 
services, it seems that hard-coding a specific language data model into 
such a spec (without constraining it in any way) will limit the utility 
of such a registry. for example, in the Home Document draft, which is 
the original source of the link hint idea, the hints were hard-coded 
with very constrained data models. this made it relatively easy to 
expose them in a different syntax (in the XML Home Document draft):

http://tools.ietf.org/html/draft-wilde-home-xml-01#page-4

without getting too much into the details of this specific registry: 
what are the best practices about allowing/controlling language 
dependencies in registries? personally, i would feel more comfortable 
with having a registry that is of equal value to people regardless of 
their implementation language, but then again that means that the 
registry itself must define a "mini-language" of its own.

any pointers to similar situations and how they were resolved would be 
greatly appreciated. thanks and cheers,

dret.

-- 
erik wilde | mailto:dret@...  -  tel:+1-510-2061079 |
            | UC Berkeley  -  School of Information (ISchool) |
            | http://dret.net/netdret http://twitter.com/dret |

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19473<br>
Sender:Unmesh Joshi &lt;unmeshjoshi@...&gt;<br>
Post Date/Time:2013-06-18 11:53:19<br>
Subject:Authentication scheme for HMAC authentication in Restful services.<br>
Message:<br><br>
<pre>Hi,

We have implemented a Restful service with HMAC authentication. Till now,
we were using custom authorization header. But it looks like the common
practice is to use standard HTTP "Authorization" header with custom
authorization scheme.
Unfortunately there doesnt seem to be a standard scheme so far for HMAC
based authentication. Everyone (Amazon, Azure, etc..) use their own schemes
(e.g. "AWS" used by Amazon or "SharedKey""SharedLiteKey" used by Azure
http://msdn.microsoft.com/en-us/library/dd179428.aspx). All these schemes
are nearly same, but use different scheme identifier.

http://tools.ietf.org/html/draft-ietf-httpbis-p7-auth-22 seems to work in
progress, but there is no place where all the commonly used authentication
schemes are listed.

I found this https://github.com/hueniverse/hawk&lt;https://github.com/hueniverse/hawk#security-considerations&gt;.
But not sure if this is widely used.

I do not want to create a new scheme identifier, something more generic
will probably make sense.
Thoughts?

Thanks,
Unmesh
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19474<br>
Sender:Craig McClanahan &lt;craigmcc@...&gt;<br>
Post Date/Time:2013-06-18 16:11:48<br>
Subject:Re: [rest-discuss] Authentication scheme for HMAC authentication in Restful services.<br>
Message:<br><br>
<pre>In the context of OAuth 2.0, there are efforts underway to standardize the
use of MAC authentication[1], putting it in the Authorization header with a
scheme name of "mac".

Craig McClanahan

[1] http://tools.ietf.org/html/draft-ietf-oauth-v2-http-mac-03



On Tue, Jun 18, 2013 at 4:53 AM, Unmesh Joshi &lt;unmeshjoshi@...&gt; wrote:

&gt; **
&gt;
&gt;
&gt; Hi,
&gt;
&gt; We have implemented a Restful service with HMAC authentication. Till now,
&gt; we were using custom authorization header. But it looks like the common
&gt; practice is to use standard HTTP "Authorization" header with custom
&gt; authorization scheme.
&gt; Unfortunately there doesnt seem to be a standard scheme so far for HMAC
&gt; based authentication. Everyone (Amazon, Azure, etc..) use their own schemes
&gt; (e.g. "AWS" used by Amazon or "SharedKey""SharedLiteKey" used by Azure
&gt; http://msdn.microsoft.com/en-us/library/dd179428.aspx). All these schemes
&gt; are nearly same, but use different scheme identifier.
&gt;
&gt; http://tools.ietf.org/html/draft-ietf-httpbis-p7-auth-22 seems to work in
&gt; progress, but there is no place where all the commonly used authentication
&gt; schemes are listed.
&gt;
&gt; I found this https://github.com/hueniverse/hawk&lt;https://github.com/hueniverse/hawk#security-considerations&gt;.
&gt; But not sure if this is widely used.
&gt;
&gt; I do not want to create a new scheme identifier, something more generic
&gt; will probably make sense.
&gt; Thoughts?
&gt;
&gt; Thanks,
&gt; Unmesh
&gt;
&gt;  
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19475<br>
Sender:Glenn Block &lt;glenn.block@...&gt;<br>
Post Date/Time:2013-06-22 02:16:42<br>
Subject:Re: [rest-discuss] conneg considered harmful<br>
Message:<br><br>
<pre>So no one has any thoughts on content-location with regards to reducing the
need for a redirect?


On Sat, Jun 8, 2013 at 7:35 AM, Mike Kelly &lt;mikekelly321@...&gt; wrote:

&gt; **
&gt;
&gt;
&gt; On Sat, Jun 8, 2013 at 1:07 PM, Eric J. Bowman &lt;eric@...&gt;
&gt; wrote:
&gt; &gt; Mike Kelly wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; Even if that is a hard slog, it's probably the most likely way of
&gt; &gt;&gt; getting the outcome you want.
&gt; &gt;&gt;
&gt; &gt;
&gt; &gt; Like interoperability with things that aren't browsers, or which follow
&gt; &gt; RFC 3986? Highly doubtful.
&gt;
&gt; Ok, I disagree. Afaik, there isn't a more feasible course of action,
&gt; and it sounds as if you are not going to invest any time on an
&gt; alternative in the foreseeable future.
&gt;
&gt; I do share some of your concern though, so it would be intriguing to
&gt; hear some specifics on what those alternatives might (or already do)
&gt; look like... mamund? :)
&gt;
&gt;
&gt; On Sat, Jun 8, 2013 at 2:02 PM, Eric J. Bowman &lt;eric@...&gt;
&gt; wrote:
&gt; &gt; Mike Kelly wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; What do you mean by 'undefined'? Running code has definitive
&gt; &gt;&gt; behaviour: http://caniuse.com/
&gt; &gt;&gt;
&gt; &gt;
&gt; &gt; REST is a defined architectural style. The link you've posted is all
&gt; &gt; about where a set of moving-goalpost features overlap at a moment in
&gt; &gt; time, which is hardly the same thing. While system behavior may be
&gt; &gt; definable, it's a by-product of the design process, as opposed to goals
&gt; &gt; used to guide the design process. What I mean by defined architecture
&gt; &gt; would be some sort of Taylor-school definition of just what's trying to
&gt; &gt; be accomplished, like REST was the model for the move to HTTP 1.1.
&gt; &gt;
&gt; &gt;&gt;
&gt; &gt;&gt; What is it, specifically, that you feel may be about to render
&gt; &gt;&gt; browsers infeasible as the basis for a RESTful system?
&gt; &gt;&gt;
&gt; &gt;
&gt; &gt; Silent error correction, content sniffing being used as a reason to
&gt; &gt; deprecate Content-Type, any number of RFC 3986 violations -- we're
&gt; &gt; clearly off into uncharted territory with little or no resemblance to
&gt; &gt; REST, and I've just scratched the surface. What else to make of this
&gt; &gt; move to just not mention "resource" and redefine URIs to identify
&gt; &gt; either documents or services? How is it possible to be more anti-REST?
&gt; &gt;
&gt; &gt;&gt;
&gt; &gt;&gt; Is there anything missing that would make it feasible and if so why
&gt; &gt;&gt; is it missing? e.g. why did the efforts to introduce PUT and DELETE
&gt; &gt;&gt; to &lt;form&gt; fail?
&gt; &gt;&gt;
&gt; &gt;
&gt; &gt; What's missing is browser-vendor knowledge of architecture, or any HTTP/
&gt; &gt; URI interoperability issues not involving browsers. I won't speculate
&gt; &gt; as to why, it's not as if Roy didn't used to waste his breath explaining
&gt; &gt; to these people the finer points of why ad-hoc changes to WebArch are
&gt; &gt; short-sighted. Sufficient explanation to me of why no PUT, DELETE,
&gt; &gt; Xforms, list goes on -- not to mention feature removal...
&gt; &gt;
&gt; &gt; Clearly, the future of REST no longer lies with the browser. My status
&gt; &gt; nowadays is "on sabbatical" to recover my health, after recently "re-
&gt; &gt; homing" the last of my clients -- that one since 1994 which is how long
&gt; &gt; I've been developing Web sites for consumption in browsers. I have a 9-
&gt; &gt; week-old Alaskan Malamute to help me drop at least a couple stone before
&gt; &gt; I return, may take a few years.
&gt; &gt;
&gt; &gt; I'll continue to participate here, but when I return to Web development
&gt; &gt; it certainly looks like I'll be forsaking the browser for the native
&gt; &gt; app, where I can continue to bring my clients positive returns on their
&gt; &gt; online investments by leveraging REST to deal with the realities of the
&gt; &gt; netowrk currently being denied by the browser vendors.
&gt; &gt;
&gt; &gt; Should be interesting to watch, but the "new direction" has caused me
&gt; &gt; to pull my horse from the race; I no longer have any vested interest
&gt; &gt; nor do I care about the future of browsers. Only a sense that we'll be
&gt; &gt; cleaning up the mess for a long time to come -- corporate production
&gt; &gt; cycles, marketing imperatives, and bottom lines are no way to guide
&gt; &gt; the Web's architectural development, and this era can't end well.
&gt; &gt;
&gt;
&gt;  
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19476<br>
Sender:Nicholas Shanks &lt;nickshanks@...&gt;<br>
Post Date/Time:2013-06-24 09:22:59<br>
Subject:Re: [rest-discuss] conneg considered harmful<br>
Message:<br><br>
<pre>On 22 June 2013 03:16, Glenn Block &lt;glenn.block@...&gt; wrote:

&gt; So no one has any thoughts on content-location with regards to reducing the need for a redirect?

I had previously suggested the very same, but apparently doing this
raises security issues with intermediary caches. e.g. malicious page A
sends response back claiming to be a representation of page B,
intermediate layer caches this, and returns that response for future
requests to B. There needs to be a way to declare that B trusts A to
provide representations for itself, and for intermediaries to verify
this before caching the response. Apparently being on the same domain
is not sufficient for the HTTP folks.

-- 
Nicholas.

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19477<br>
Sender:Mark Nottingham &lt;mnot@...&gt;<br>
Post Date/Time:2013-06-25 04:17:59<br>
Subject:Re: [apps-discuss] New Version Notification for draft-nottingham-link-hint-00.txt<br>
Message:<br><br>
<pre>Hi Erik, 

Sorry for the delay - just back home now.

&gt; but i have one question about the general registry model: the current draft says that hints MUST have a name (very reasonable, of course), but also that hints MUST have their data model being defined in JSON.
&gt; 
&gt; http://tools.ietf.org/html/draft-nottingham-link-hint-00#section-5.1
&gt; 
&gt; living in a world where we have JSON services, XML services, and RDF services, it seems that hard-coding a specific language data model into such a spec (without constraining it in any way) will limit the utility of such a registry.

It needs *a* data model.

&gt; for example, in the Home Document draft, which is the original source of the link hint idea, the hints were hard-coded with very constrained data models. this made it relatively easy to expose them in a different syntax (in the XML Home Document draft):
&gt; 
&gt; http://tools.ietf.org/html/draft-wilde-home-xml-01#page-4
&gt; 
&gt; without getting too much into the details of this specific registry: what are the best practices about allowing/controlling language dependencies in registries?

Whoa, hold on - who said anything about a language? This is just the underlying data model; you can express it in a document however makes sense.

&gt; personally, i would feel more comfortable with having a registry that is of equal value to people regardless of their implementation language

You're using "language" quite loosely here. 

&gt; , but then again that means that the registry itself must define a "mini-language" of its own.

-1. Defining Yet Another Data Model as a political solution to avoid picking an existing one is sub-optimal at best.

Cheers,


--
Mark Nottingham   http://www.mnot.net/




</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19478<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-06-25 04:49:10<br>
Subject:Re: [rest-discuss] Re: [apps-discuss] New Version Notification for draft-nottingham-link-hint-00.txt<br>
Message:<br><br>
<pre>hello mark.

On 2013-06-24 21:17 , Mark Nottingham wrote:
&gt;&gt; but i have one question about the general registry model: the current draft says that hints MUST have a name (very reasonable, of course), but also that hints MUST have their data model being defined in JSON.
&gt;&gt; http://tools.ietf.org/html/draft-nottingham-link-hint-00#section-5.1
&gt;&gt; living in a world where we have JSON services, XML services, and RDF services, it seems that hard-coding a specific language data model into such a spec (without constraining it in any way) will limit the utility of such a registry.
&gt; It needs *a* data model.

yes, that's definitely true. i think what i'm trying to figure out a 
first is whether there is any precedence of a registry requiring a JSON 
data model, or any other specific language for that matter, for a 
structured values. it seems it's mostly specific micro-syntaxes (if any 
structure beyond identifiers is required), but i am really wondering 
about what people have usually done in similar situations.

&gt;&gt; for example, in the Home Document draft, which is the original source of the link hint idea, the hints were hard-coded with very constrained data models. this made it relatively easy to expose them in a different syntax (in the XML Home Document draft):
&gt;&gt; http://tools.ietf.org/html/draft-wilde-home-xml-01#page-4
&gt;&gt; without getting too much into the details of this specific registry: what are the best practices about allowing/controlling language dependencies in registries?
&gt; Whoa, hold on - who said anything about a language? This is just the underlying data model; you can express it in a document however makes sense.

that's kind of true, but not really. since the draft allows *any* kind 
of JSON, if i had a non-JSON document format (let's say XML ;-) that 
wanted to be able to represent registry values in general, it needs to 
define a generic mapping from *any* kind of JSON to XML. that's 
technically possible, but not really what works well for any non-JSON 
document model.

i think this is my main argument: if you have a micro-syntax for the 
registry, you can map that much easier to something that maps reasonably 
well into a variety of document models. if you require JSON, and allow 
arbitrary JSON, the JSON bias translates into rather inconvenient models 
for any non-JSON language.

&gt;&gt; personally, i would feel more comfortable with having a registry that is of equal value to people regardless of their implementation language
&gt; You're using "language" quite loosely here.

maybe. and like i said above, apart from having implementation concerns 
about non-JSON formats, i am also really interested to learn about prior 
art: how was this problem approached/solved in other situations like this?

&gt;&gt; , but then again that means that the registry itself must define a "mini-language" of its own.
&gt; -1. Defining Yet Another Data Model as a political solution to avoid picking an existing one is sub-optimal at best.

not sure. if JSON is #1 on the requirement list, then maybe define a 
well-defined subset of JSON, so that mappings into other languages don't 
need to be able to handle *any* JSON?

more specifically, what do the current hints actually need? it seems 
that the set of possibilities is actually rather small. for example, 
http://tools.ietf.org/html/draft-nottingham-link-hint-00#section-3.2 
says "Content MUST be an object, whose keys are media types, and values 
are objects", but what are the objects containing? maybe a simple array 
of media type strings would suffice? and then, if we can boil down the 
needs to "hints are strings or arrays of strings", then we can create 
good mappings for a variety of document models, and not just for JSON.

cheers,

dret.

-- 
erik wilde | mailto:dret@...  -  tel:+1-510-2061079 |
            | UC Berkeley  -  School of Information (ISchool) |
            | http://dret.net/netdret http://twitter.com/dret |

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19479<br>
Sender:Mark Nottingham &lt;mnot@...&gt;<br>
Post Date/Time:2013-06-25 09:46:10<br>
Subject:Re: [apps-discuss] New Version Notification for draft-nottingham-link-hint-00.txt<br>
Message:<br><br>
<pre>Please have a look at the draft; the level of detail in the registrations is "a number" or "a list" or (infrequently) "an object" -- roughly on par with saying that a field in a registry is "an integer," which is quite common in IANA-land.


On 25/06/2013, at 7:36 PM, Stephen Farrell &lt;stephen.farrell@...&gt; wrote:

&gt; Just had a a quick peek at this since we've seen a case where stuff went wrong because a registry contained structured data. Roughly: 1) can we have an early allocation to work with IEEE; 2) oops that bit there should've been a 1; 3) can we mark (1) as reserved and redo stuff? 
&gt; 
&gt; I think it's a mistake to ask IANA to handle structured data of any sort and this does that in spades.
&gt; 
&gt; As a question: what makes you think this wouldn't be very likely to result in erroneous registrations? (Damaging the effectiveness of this registry but also possibly the IANA function, a bit)
&gt; 
&gt; S
&gt; 
&gt; 
&gt; On 25 Jun 2013, at 05:17, Mark Nottingham &lt;mnot@mnot.net&gt; wrote:
&gt; 
&gt;&gt; Hi Erik, 
&gt;&gt; 
&gt;&gt; Sorry for the delay - just back home now.
&gt;&gt; 
&gt;&gt;&gt; but i have one question about the general registry model: the current draft says that hints MUST have a name (very reasonable, of course), but also that hints MUST have their data model being defined in JSON.
&gt;&gt;&gt; 
&gt;&gt;&gt; http://tools.ietf.org/html/draft-nottingham-link-hint-00#section-5.1
&gt;&gt;&gt; 
&gt;&gt;&gt; living in a world where we have JSON services, XML services, and RDF services, it seems that hard-coding a specific language data model into such a spec (without constraining it in any way) will limit the utility of such a registry.
&gt;&gt; 
&gt;&gt; It needs *a* data model.
&gt;&gt; 
&gt;&gt;&gt; for example, in the Home Document draft, which is the original source of the link hint idea, the hints were hard-coded with very constrained data models. this made it relatively easy to expose them in a different syntax (in the XML Home Document draft):
&gt;&gt;&gt; 
&gt;&gt;&gt; http://tools.ietf.org/html/draft-wilde-home-xml-01#page-4
&gt;&gt;&gt; 
&gt;&gt;&gt; without getting too much into the details of this specific registry: what are the best practices about allowing/controlling language dependencies in registries?
&gt;&gt; 
&gt;&gt; Whoa, hold on - who said anything about a language? This is just the underlying data model; you can express it in a document however makes sense.
&gt;&gt; 
&gt;&gt;&gt; personally, i would feel more comfortable with having a registry that is of equal value to people regardless of their implementation language
&gt;&gt; 
&gt;&gt; You're using "language" quite loosely here. 
&gt;&gt; 
&gt;&gt;&gt; , but then again that means that the registry itself must define a "mini-language" of its own.
&gt;&gt; 
&gt;&gt; -1. Defining Yet Another Data Model as a political solution to avoid picking an existing one is sub-optimal at best.
&gt;&gt; 
&gt;&gt; Cheers,
&gt;&gt; 
&gt;&gt; 
&gt;&gt; --
&gt;&gt; Mark Nottingham   http://www.mnot.net/
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; _______________________________________________
&gt;&gt; apps-discuss mailing list
&gt;&gt; apps-discuss@...
&gt;&gt; https://www.ietf.org/mailman/listinfo/apps-discuss

--
Mark Nottingham   http://www.mnot.net/




</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19480<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-06-25 16:45:17<br>
Subject:Re: [apps-discuss] New Version Notification for draft-nottingham-link-hint-00.txt<br>
Message:<br><br>
<pre>hello mark.

On 2013-06-25 02:46 , Mark Nottingham wrote:
&gt; Please have a look at the draft; the level of detail in the registrations is "a number" or "a list" or (infrequently) "an object" -- roughly on par with saying that a field in a registry is "an integer," which is quite common in IANA-land.
&gt; On 25/06/2013, at 7:36 PM, Stephen Farrell &lt;stephen.farrell@...&gt; wrote:
&gt;&gt; As a question: what makes you think this wouldn't be very likely to result in erroneous registrations? (Damaging the effectiveness of this registry but also possibly the IANA function, a bit)

i really like the places where it says "a number" and "a list", because 
these concepts can be easily mapped into pretty much any representation. 
when it says "an object", however, that's an entirely different matter. 
it would be great for the registry to really be clear about what kind of 
structures to expect for hints (single values, value lists, and maybe 
lists of key/value pairs or something along those lines), and then the 
registry would not depend on a specific language.

cheers,

dret.

-- 
erik wilde | mailto:dret@...  -  tel:+1-510-2061079 |
            | UC Berkeley  -  School of Information (ISchool) |
            | http://dret.net/netdret http://twitter.com/dret |

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19481<br>
Sender:Mark Nottingham &lt;mnot@...&gt;<br>
Post Date/Time:2013-06-26 06:51:32<br>
Subject:Re: [apps-discuss] New Version Notification for draft-nottingham-link-hint-00.txt<br>
Message:<br><br>
<pre>
On 26/06/2013, at 2:45 AM, Erik Wilde &lt;dret@...&gt; wrote:

&gt; i really like the places where it says "a number" and "a list", because these concepts can be easily mapped into pretty much any representation. when it says "an object", however, that's an entirely different matter. it would be great for the registry to really be clear about what kind of structures to expect for hints (single values, value lists, and maybe lists of key/value pairs or something along those lines), and then the registry would not depend on a specific language.

It's certainly possible to map the JSON data model into XML; it just won't make XML people happy, because it'll have lots of elements named "object" and "array" (although I see a fair amount of "native" XML like this anyway!).

Likewise for (most any, since JSON is pretty basic) other data models.

I very much agree that it would be good to not have a dependency upon the JSON data model here. However, I don't see a way to avoid that, without either a) using another data model with exactly the same problem, or b) prohibiting any structured information.

AIUI you're suggesting (b). Looking through the current list of hints, we already have quite a few that need structure. Can you suggest how to convey the information without using structured data?

Regards,

--
Mark Nottingham   http://www.mnot.net/




</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19482<br>
Sender:Matt McClure &lt;matthewlmcclure@...&gt;<br>
Post Date/Time:2013-06-26 12:04:16<br>
Subject:Re: [rest-discuss] Re: [apps-discuss] New Version Notification for draft-nottingham-link-hint-00.txt<br>
Message:<br><br>
<pre>On Jun 26, 2013, at 2:51 AM, Mark Nottingham &lt;mnot@...&gt; wrote:
&gt; Can you suggest how to convey the information without using structured data?
&gt; 
Is it just an issue of terminology? If so, using the name of an abstract data type instead of the JSON name for it is an option. Something like associative array, map, or dictionary.

-- 
http://matthewlmcclure.com
http://about.mapmyfitness.com</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19483<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-06-26 17:25:32<br>
Subject:Re: [apps-discuss] New Version Notification for draft-nottingham-link-hint-00.txt<br>
Message:<br><br>
<pre>hello mark.

On 2013-06-25 23:51 , Mark Nottingham wrote:
&gt;&gt; i really like the places where it says "a number" and "a list", because these concepts can be easily mapped into pretty much any representation. when it says "an object", however, that's an entirely different matter. it would be great for the registry to really be clear about what kind of structures to expect for hints (single values, value lists, and maybe lists of key/value pairs or something along those lines), and then the registry would not depend on a specific language.
&gt; It's certainly possible to map the JSON data model into XML; it just won't make XML people happy, because it'll have lots of elements named "object" and "array" (although I see a fair amount of "native" XML like this anyway!).

sure, with enough effort, anything can be mapped to anything. my point 
was to have something for the link hints that can be mapped into more 
useful structures for any target mapping, and not just for JSON.

&gt; I very much agree that it would be good to not have a dependency upon the JSON data model here. However, I don't see a way to avoid that, without either a) using another data model with exactly the same problem, or b) prohibiting any structured information.
&gt; AIUI you're suggesting (b). Looking through the current list of hints, we already have quite a few that need structure. Can you suggest how to convey the information without using structured data?

i think there are three possibilities:

- pick a generic format (such as JSON) as allow anything it allows. this 
makes things great for JSON and not so great for non-JSON.

- be structure agnostic (hints are strings) and then hints will probably 
define their own mappings into string-based structures (using regexes 
and usual patterns such as whitespace- or comma-separated lists). this 
might be bad because then parsing a hint's value needs to be done on a 
per-hint basis.

- pick a small set of structures allowed such as the ones i suggested 
above (single values, value lists, and maybe lists of key/value pairs) 
and require that any hint is defined in terms of this more restricted 
model. this maps better to many formats, but you're stuck with the 
choices you make.

so my suggestion is not so much your (b) but my (c) ;-) fwiw, it seems 
that thew current draft uses overly complicated structures, for example, 
"formats" maybe just could be an array of formats?

it's clearly a trade-off between allowing arbitrarily structured hints 
(in which case you need some generic metamodel) or predefining the kinds 
of structures that hints can use (in which case you can remove the 
dependency on a particular generic metamodel). i am still trying to 
understand how that problem has been solved in similar cases. i assume 
this is not the first (proposed) IANA registry that has to deal with 
this tradeoff; does anybody have pointers to this has been handled in 
similar cases?

thanks and cheers,

dret.

-- 
erik wilde | mailto:dret@...  -  tel:+1-510-2061079 |
            | UC Berkeley  -  School of Information (ISchool) |
            | http://dret.net/netdret http://twitter.com/dret |

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19484<br>
Sender:Mark Nottingham &lt;mnot@...&gt;<br>
Post Date/Time:2013-06-26 23:40:08<br>
Subject:Re: [apps-discuss] New Version Notification for draft-nottingham-link-hint-00.txt<br>
Message:<br><br>
<pre>
On 27/06/2013, at 3:25 AM, Erik Wilde &lt;dret@...&gt; wrote:

&gt; hello mark.
&gt; 
&gt; On 2013-06-25 23:51 , Mark Nottingham wrote:
&gt;&gt;&gt; i really like the places where it says "a number" and "a list", because these concepts can be easily mapped into pretty much any representation. when it says "an object", however, that's an entirely different matter. it would be great for the registry to really be clear about what kind of structures to expect for hints (single values, value lists, and maybe lists of key/value pairs or something along those lines), and then the registry would not depend on a specific language.
&gt;&gt; It's certainly possible to map the JSON data model into XML; it just won't make XML people happy, because it'll have lots of elements named "object" and "array" (although I see a fair amount of "native" XML like this anyway!).
&gt; 
&gt; sure, with enough effort, anything can be mapped to anything. my point was to have something for the link hints that can be mapped into more useful structures for any target mapping, and not just for JSON.
&gt; 
&gt;&gt; I very much agree that it would be good to not have a dependency upon the JSON data model here. However, I don't see a way to avoid that, without either a) using another data model with exactly the same problem, or b) prohibiting any structured information.
&gt;&gt; AIUI you're suggesting (b). Looking through the current list of hints, we already have quite a few that need structure. Can you suggest how to convey the information without using structured data?
&gt; 
&gt; i think there are three possibilities:
&gt; 
&gt; - pick a generic format (such as JSON) as allow anything it allows. this makes things great for JSON and not so great for non-JSON.

Yep, this is where we're at.


&gt; - be structure agnostic (hints are strings) and then hints will probably define their own mappings into string-based structures (using regexes and usual patterns such as whitespace- or comma-separated lists). this might be bad because then parsing a hint's value needs to be done on a per-hint basis.

I'm -1 on this; it hasn't worked out so well for HTTP headers (and in fact a significant number of people are agitating to just define new headers in JSON) nor for media type parameters.


&gt; - pick a small set of structures allowed such as the ones i suggested above (single values, value lists, and maybe lists of key/value pairs) and require that any hint is defined in terms of this more restricted model. this maps better to many formats, but you're stuck with the choices you make.
&gt; 
&gt; so my suggestion is not so much your (b) but my (c) ;-) fwiw, it seems that thew current draft uses overly complicated structures, for example, "formats" maybe just could be an array of formats?

Could you spell out an example?


&gt; it's clearly a trade-off between allowing arbitrarily structured hints (in which case you need some generic metamodel) or predefining the kinds of structures that hints can use (in which case you can remove the dependency on a particular generic metamodel). i am still trying to understand how that problem has been solved in similar cases. i assume this is not the first (proposed) IANA registry that has to deal with this tradeoff; does anybody have pointers to this has been handled in similar cases?
&gt; 
&gt; thanks and cheers,


Cheers,

--
Mark Nottingham   http://www.mnot.net/




</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19485<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-06-27 00:24:38<br>
Subject:Re: [apps-discuss] New Version Notification for draft-nottingham-link-hint-00.txt<br>
Message:<br><br>
<pre>hello mark.

On 2013-06-26 16:40 , Mark Nottingham wrote:
&gt; On 27/06/2013, at 3:25 AM, Erik Wilde &lt;dret@...&gt; wrote:
&gt;&gt;&gt; I very much agree that it would be good to not have a dependency upon the JSON data model here. However, I don't see a way to avoid that, without either a) using another data model with exactly the same problem, or b) prohibiting any structured information.
&gt;&gt;&gt; AIUI you're suggesting (b). Looking through the current list of hints, we already have quite a few that need structure. Can you suggest how to convey the information without using structured data?
&gt;&gt; i think there are three possibilities:
&gt;&gt; - pick a generic format (such as JSON) as allow anything it allows. this makes things great for JSON and not so great for non-JSON.
&gt; Yep, this is where we're at.
&gt;&gt; - be structure agnostic (hints are strings) and then hints will probably define their own mappings into string-based structures (using regexes and usual patterns such as whitespace- or comma-separated lists). this might be bad because then parsing a hint's value needs to be done on a per-hint basis.
&gt; I'm -1 on this; it hasn't worked out so well for HTTP headers (and in fact a significant number of people are agitating to just define new headers in JSON) nor for media type parameters.

i agree that this is not such a great way to go. it makes things easy in 
the short run, but harder in the long run. in particular, it means that 
the same concepts ("a list") may be serialized differently in different 
hints (a "comma-separated" one, a "space-separated" one), which makes it 
harder to build general facilities for hints.

&gt;&gt; - pick a small set of structures allowed such as the ones i suggested above (single values, value lists, and maybe lists of key/value pairs) and require that any hint is defined in terms of this more restricted model. this maps better to many formats, but you're stuck with the choices you make.
&gt;&gt; so my suggestion is not so much your (b) but my (c) ;-) fwiw, it seems that thew current draft uses overly complicated structures, for example, "formats" maybe just could be an array of formats?
&gt; Could you spell out an example?

afaict, "formats" 
(http://tools.ietf.org/html/draft-nottingham-link-hint-00#section-3.2) 
right now says says it's an object with the keys being media types, but 
the values are not specified. but maybe i am reading it wrong and where 
it says "The object" in the second and third paragraph it actually 
refers to the object that's a value of one of the keys? hmmm, i guess 
that's what it means... i had been reading it wrong so far. but for a 
minute, let's just assume it's only media types, which is how i am using 
it in an example using link hints here: 
https://github.com/dret/I-D/blob/master/link-desc/ld-atompub-00.xml

so let's assume for a minute that this is just a list. then i would 
suggest is the following: the hint is defined as follows (stealing your 
structure here):

o  Hint Name: formats
o  Description: Hints the representation type(s) that the target 
resource can produce and consume, using the GET and PUT (if allowed) 
methods respectively.
o  Content Model: list
o  Specification: [this document]
Content MUST be a list, whose values are media types.

then, the term "list" in the content model must be defined somewhere. 
like i said, maybe we could say there are three "content models" hints 
support: single values, lists, key/value pairs. how a particular hint 
value would be serialized then would be up to the format where it's 
being represented.

- in JSON, you might represent them as string, array, something else.

- in XML, you might choose a mix of element/attribute designs. or you 
could go text-based such as my example (which is text-based because it 
uses JSON syntax right now)

none of these representations would be binding, they would just be one 
way of mapping the abstract link hint model into some concrete model. i 
guess the only exception for this would be how to represent links 
outside of media types, i.e. in HTTP. 
http://tools.ietf.org/html/draft-nottingham-link-hint-00#appendix-A 
could be changed then to map the abstract moden into a concrete JSON 
syntax (or whatever else looks like a good syntax choice to go into a 
Link header).

as i see it, when i design media types that use link hints, it would be 
nice if i could expose them in a way that is as useful as possible for 
consumers of that media type. my example from above is from an XML 
design for link descriptions that i plan to base on link hints. if that 
means that the XML-oriented clients using this format need to include a 
general-purpose JSON parser, then that's certainly doable, but i don't 
think the link hints design has to be like that.

but again, of course my option (c) means that link hints have a 
predefined and probably small set of structures that hints can use to 
expose whatever they want to expose, and if they want to go beyond that, 
that's not covered by the link hint framework anymore.

cheers,

dret.

-- 
erik wilde | mailto:dret@...  -  tel:+1-510-2061079 |
            | UC Berkeley  -  School of Information (ISchool) |
            | http://dret.net/netdret http://twitter.com/dret |

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19486<br>
Sender:Mark Derricutt &lt;mark@...&gt;<br>
Post Date/Time:2013-06-28 09:38:18<br>
Subject:JAX-RS 2.0 Support for HalBuilder<br>
Message:<br><br>
<pre>'lo all,

Just added a super simple JAX-RS 2.0 support module for my HalBuilder 
JVM API which I intend to release sometime over the weekend:

   https://github.com/HalBuilder/halbuilder-jaxrs

along with a small sample application at:

   
https://github.com/HalBuilder/halbuilder-examples/tree/develop/halbuilder-jersey-example

Basically, when configuring Jersey ( I've not looked at RestEasy yet ) 
you simple tell it to also scan the 
"com.theoryinpractise.halbuilder.jaxrs" package to pick up the support 
classes, then in your resource class just return your representation object:

     @GET
     @Produces({RepresentationFactory.HAL_JSON, 
RepresentationFactory.HAL_XML})
     public Representation getIt() {
         Representation rep = representationFactory.newRepresentation();
         rep.withProperty("message", "Got it!");
         return rep;
     }

and voila - content neg. is all handled by JAX-RS out of the box:

$ curl -H "Accept: application/hal+xml" 
http://localhost:8080/myapp/myresource
&lt;resource&gt;
&lt;link rel="website" href="http://gotohal.net" /&gt;
&lt;message&gt;Got it!&lt;/message&gt;
&lt;/resource&gt;

$ curl  http://localhost:8080/myapp/myresource
{
   "_links" : {
     "website" : {
       "href" : "http://gotohal.net"
     }
   },
   "message" : "Got it!"
}

So far I've added the @Produces side of things, tho @Consumes should be 
just as simple and should be added before the release.

Note that the support ONLY works for returning 
Representation/ReadableRepresentation and not arbitrary objects - this 
is me trying to make you think of links/representations etc. as 
first-class things.

Mark


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19487<br>
Sender:Greg Young &lt;gregoryyoung1@...&gt;<br>
Post Date/Time:2013-06-28 10:16:13<br>
Subject:Atom and prev links<br>
Message:<br><br>
<pre>We have a mature atom implementation for distribution of event streams
and as always the devil is in the details...

The issue revolves around prev links. At some point on an atom feed
you will hit the current item, prev will point to the next item that
does not yet exist. Most implementations I can find 404 this uri and
the client has the logic to keep polling the 404. This seems off to
me, I would expect this to be a 204. Then if I change my uri structure
it becomes a 404, otherwise it would seem that if I change my uri
structure all prev uris would need to redirect to the new ones (which
would be a rather large undertaking).

I couldn't find any details on this in relevant specs, has anyone seen this?

Cheers,

Greg

-- 
Le doute n'est pas une condition agréable, mais la certitude est absurde.

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19488<br>
Sender:"Markus Lanthaler" &lt;markus.lanthaler@...&gt;<br>
Post Date/Time:2013-06-28 10:47:35<br>
Subject:RE: [rest-discuss] Atom and prev links<br>
Message:<br><br>
<pre>On Friday, June 28, 2013 12:16 PM, Greg Young wrote:
&gt; The issue revolves around prev links. At some point on an atom feed
&gt; you will hit the current item, prev will point to the next item that
&gt; does not yet exist. Most implementations I can find 404 this uri and
&gt; the client has the logic to keep polling the 404. This seems off to
&gt; me, I would expect this to be a 204. Then if I change my uri structure
&gt; it becomes a 404, otherwise it would seem that if I change my uri
&gt; structure all prev uris would need to redirect to the new ones (which
&gt; would be a rather large undertaking).

Why don't you just hide the next/prev link till the next/prev resource
really exists? If really necessary, the client can keep polling the last
resource it encountered till the next/prev link becomes available. This also
means that you can decide how to construct the URL of the new element as
soon as it is created instead of relying on, e.g., an autoincrement.

Did I miss something?


--
Markus Lanthaler
@markuslanthaler


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19489<br>
Sender:Greg Young &lt;gregoryyoung1@...&gt;<br>
Post Date/Time:2013-06-28 10:57:31<br>
Subject:Re: [rest-discuss] Atom and prev links<br>
Message:<br><br>
<pre>Actually we have a pretty simple reason for this caching.

If we were to hide the prev that uri would have to be non-cachable. If we
put it there (we are forward only) then every valid uri we have is
infinitely cachable. By predefining the next only our non-existant uri is
non-cachable.

Though keeping the last existing one as non-cachable could also solve this
and maybe its a better overall way.

Cheers,

Greg

On Fri, Jun 28, 2013 at 1:47 PM, Markus Lanthaler
&lt;markus.lanthaler@...&gt;wrote:

&gt; **
&gt;
&gt;
&gt; On Friday, June 28, 2013 12:16 PM, Greg Young wrote:
&gt; &gt; The issue revolves around prev links. At some point on an atom feed
&gt; &gt; you will hit the current item, prev will point to the next item that
&gt; &gt; does not yet exist. Most implementations I can find 404 this uri and
&gt; &gt; the client has the logic to keep polling the 404. This seems off to
&gt; &gt; me, I would expect this to be a 204. Then if I change my uri structure
&gt; &gt; it becomes a 404, otherwise it would seem that if I change my uri
&gt; &gt; structure all prev uris would need to redirect to the new ones (which
&gt; &gt; would be a rather large undertaking).
&gt;
&gt; Why don't you just hide the next/prev link till the next/prev resource
&gt; really exists? If really necessary, the client can keep polling the last
&gt; resource it encountered till the next/prev link becomes available. This
&gt; also
&gt; means that you can decide how to construct the URL of the new element as
&gt; soon as it is created instead of relying on, e.g., an autoincrement.
&gt;
&gt; Did I miss something?
&gt;
&gt; --
&gt; Markus Lanthaler
&gt; @markuslanthaler
&gt;
&gt;  
&gt;



-- 
Le doute n'est pas une condition agréable, mais la certitude est absurde.
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19490<br>
Sender:"Markus Lanthaler" &lt;markus.lanthaler@...&gt;<br>
Post Date/Time:2013-06-28 12:04:40<br>
Subject:RE: [rest-discuss] Atom and prev links<br>
Message:<br><br>
<pre>On Friday, June 28, 2013 12:58 PM, Greg Young wrote:
&gt; Actually we have a pretty simple reason for this caching.
&gt;
&gt; If we were to hide the prev that uri would have to be non-cachable.
&gt; If we put it there (we are forward only) then every valid uri we
&gt; have is infinitely cachable. By predefining the next only our
&gt; non-existant uri is non-cachable.

Well, a 404 can be cached as well, so it's not that much of a difference.
Just use an Etag or something similar for the last page and drop it as soon
as you put the link in.

If I would implement a client, I wouldn't keep polling the 404. I would just
assume your feed is broken.


--
Markus Lanthaler
@markuslanthaler


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19491<br>
Sender:Greg Young &lt;gregoryyoung1@...&gt;<br>
Post Date/Time:2013-06-28 12:10:17<br>
Subject:Re: [rest-discuss] Atom and prev links<br>
Message:<br><br>
<pre>And if I returned a 204?

On Fri, Jun 28, 2013 at 3:04 PM, Markus Lanthaler
&lt;markus.lanthaler@...&gt;wrote:

&gt; **
&gt;
&gt;
&gt; On Friday, June 28, 2013 12:58 PM, Greg Young wrote:
&gt; &gt; Actually we have a pretty simple reason for this caching.
&gt; &gt;
&gt; &gt; If we were to hide the prev that uri would have to be non-cachable.
&gt; &gt; If we put it there (we are forward only) then every valid uri we
&gt; &gt; have is infinitely cachable. By predefining the next only our
&gt; &gt; non-existant uri is non-cachable.
&gt;
&gt; Well, a 404 can be cached as well, so it's not that much of a difference.
&gt; Just use an Etag or something similar for the last page and drop it as soon
&gt; as you put the link in.
&gt;
&gt; If I would implement a client, I wouldn't keep polling the 404. I would
&gt; just
&gt; assume your feed is broken.
&gt;
&gt; --
&gt; Markus Lanthaler
&gt; @markuslanthaler
&gt;
&gt;  
&gt;



-- 
Le doute n'est pas une condition agréable, mais la certitude est absurde.
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19492<br>
Sender:"Markus Lanthaler" &lt;markus.lanthaler@...&gt;<br>
Post Date/Time:2013-06-28 13:00:48<br>
Subject:RE: [rest-discuss] Atom and prev links<br>
Message:<br><br>
<pre>On Friday, June 28, 2013 2:10 PM, Greg Young wrote:
&gt; On Fri, Jun 28, 2013 at 3:04 PM, Markus Lanthaler wrote:
&gt;&gt; If I would implement a client, I wouldn't keep polling the 404.
&gt;&gt; I would just assume your feed is broken.
&gt;
&gt;And if I returned a 204?

No, the status code that would make "most" sense IMO is 202.. but I would
still suggest to just hide the link till the resource gets created.


--
Markus Lanthaler
@markuslanthaler


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19493<br>
Sender:Greg Young &lt;gregoryyoung1@...&gt;<br>
Post Date/Time:2013-06-28 13:19:05<br>
Subject:Re: [rest-discuss] Atom and prev links<br>
Message:<br><br>
<pre>btw in doing some research it would appear that RFC 5005 allows for either
in the areas where reading of feeds is actually discussed.

This process

   should be repeated recursively until the client encounters a prev-
   archive link relation that has been processed (the end of the archive
   is indicated by a missing prev-archive link relation) or an error is
   encountered.


prev/next reading is not discussed but would seem logical to work in the
same way. I am unsure why it would be "broken" as you say to return an
error. Can link me to the relevant specification?

Thanks,

Greg

On Fri, Jun 28, 2013 at 4:00 PM, Markus Lanthaler
&lt;markus.lanthaler@...&gt;wrote:

&gt; **
&gt;
&gt;
&gt; On Friday, June 28, 2013 2:10 PM, Greg Young wrote:
&gt;
&gt; &gt; On Fri, Jun 28, 2013 at 3:04 PM, Markus Lanthaler wrote:
&gt; &gt;&gt; If I would implement a client, I wouldn't keep polling the 404.
&gt; &gt;&gt; I would just assume your feed is broken.
&gt; &gt;
&gt; &gt;And if I returned a 204?
&gt;
&gt; No, the status code that would make "most" sense IMO is 202.. but I would
&gt; still suggest to just hide the link till the resource gets created.
&gt;
&gt; --
&gt; Markus Lanthaler
&gt; @markuslanthaler
&gt;
&gt;  
&gt;



-- 
Le doute n'est pas une condition agréable, mais la certitude est absurde.
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19494<br>
Sender:Greg Young &lt;gregoryyoung1@...&gt;<br>
Post Date/Time:2013-06-28 13:37:35<br>
Subject:Re: [rest-discuss] Atom and prev links<br>
Message:<br><br>
<pre>Looks like our answer is to rename our links archive-prev/next as we intend
them to be completely readable anyways.

Thanks!

Greg

On Fri, Jun 28, 2013 at 4:19 PM, Greg Young &lt;gregoryyoung1@...&gt; wrote:

&gt; btw in doing some research it would appear that RFC 5005 allows for either
&gt; in the areas where reading of feeds is actually discussed.
&gt;
&gt; This process
&gt;
&gt;    should be repeated recursively until the client encounters a prev-
&gt;    archive link relation that has been processed (the end of the archive
&gt;    is indicated by a missing prev-archive link relation) or an error is
&gt;    encountered.
&gt;
&gt;
&gt; prev/next reading is not discussed but would seem logical to work in the
&gt; same way. I am unsure why it would be "broken" as you say to return an
&gt; error. Can link me to the relevant specification?
&gt;
&gt; Thanks,
&gt;
&gt; Greg
&gt;
&gt; On Fri, Jun 28, 2013 at 4:00 PM, Markus Lanthaler &lt;
&gt; markus.lanthaler@...&gt; wrote:
&gt;
&gt;&gt; **
&gt;&gt;
&gt;&gt;
&gt;&gt; On Friday, June 28, 2013 2:10 PM, Greg Young wrote:
&gt;&gt;
&gt;&gt; &gt; On Fri, Jun 28, 2013 at 3:04 PM, Markus Lanthaler wrote:
&gt;&gt; &gt;&gt; If I would implement a client, I wouldn't keep polling the 404.
&gt;&gt; &gt;&gt; I would just assume your feed is broken.
&gt;&gt; &gt;
&gt;&gt; &gt;And if I returned a 204?
&gt;&gt;
&gt;&gt; No, the status code that would make "most" sense IMO is 202.. but I would
&gt;&gt; still suggest to just hide the link till the resource gets created.
&gt;&gt;
&gt;&gt; --
&gt;&gt; Markus Lanthaler
&gt;&gt; @markuslanthaler
&gt;&gt;
&gt;&gt;  
&gt;&gt;
&gt;
&gt;
&gt;
&gt; --
&gt; Le doute n'est pas une condition agréable, mais la certitude est absurde.
&gt;



-- 
Le doute n'est pas une condition agréable, mais la certitude est absurde.
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19495<br>
Sender:"Markus Lanthaler" &lt;markus.lanthaler@...&gt;<br>
Post Date/Time:2013-06-28 14:32:09<br>
Subject:RE: [rest-discuss] Atom and prev links<br>
Message:<br><br>
<pre>On Friday, June 28, 2013 3:19 PM, Greg Young wrote
&gt; btw in doing some research it would appear that RFC 5005 allows
&gt; for either in the areas where reading of feeds is actually discussed.
&gt; 
&gt; This process
&gt;   should be repeated recursively until the client encounters a prev-
&gt;   archive link relation that has been processed (the end of the archive
&gt;   is indicated by a missing prev-archive link relation) or an error is
&gt;   encountered.
&gt;
&gt; prev/next reading is not discussed but would seem logical to work in the
&gt; same way. I am unsure why it would be "broken" as you say to return an
&gt; error. Can link me to the relevant specification?

I didn't say that a spec prohibits it, how could it? You have to expect
broken links everywhere. I just said I would assume that your implementation
is broken because it creates links that lead to a 404.

Errors shouldn't control the *normal* control flow, they should be
exceptions.



--
Markus Lanthaler
@markuslanthaler


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19496<br>
Sender:Greg Young &lt;gregoryyoung1@...&gt;<br>
Post Date/Time:2013-06-28 14:45:28<br>
Subject:Re: [rest-discuss] Atom and prev links<br>
Message:<br><br>
<pre>And doing it your way requires every uri we create to be put out twice
(once as mutable and uncachable once as immutable and infinitely cachable).

Take archives. My current archive is therefor mutable. I have to rewrite
the archive every time I add a new one. This sounds like a fairly
complicated protocol as opposed to pre-writing what the next uri will be
and giving some sort of status when it is not yet in existence. This
becomes even more so if my archives are say monthly and widely distributed.
This is especially true for us as our data is already immutable (prev/next
were actually the wrong choice, we should be using archive)

Your client just has to say "more stuff will appear here" and don't move
off my current document until it does (sounds a lot like a 204).

The server just puts out the archives as needed. No playing with etags or
mutability (every uri is always infinitely cachable).

The protocol makes even more sense when you consider dropping long polling
on top of it (get me this thing that may or may not exist).

Cheers,

Greg

On Fri, Jun 28, 2013 at 5:32 PM, Markus Lanthaler
&lt;markus.lanthaler@...&gt;wrote:

&gt; **
&gt;
&gt;
&gt; On Friday, June 28, 2013 3:19 PM, Greg Young wrote
&gt;
&gt; &gt; btw in doing some research it would appear that RFC 5005 allows
&gt; &gt; for either in the areas where reading of feeds is actually discussed.
&gt; &gt;
&gt; &gt; This process
&gt; &gt; should be repeated recursively until the client encounters a prev-
&gt; &gt; archive link relation that has been processed (the end of the archive
&gt; &gt; is indicated by a missing prev-archive link relation) or an error is
&gt; &gt; encountered.
&gt; &gt;
&gt; &gt; prev/next reading is not discussed but would seem logical to work in the
&gt; &gt; same way. I am unsure why it would be "broken" as you say to return an
&gt; &gt; error. Can link me to the relevant specification?
&gt;
&gt; I didn't say that a spec prohibits it, how could it? You have to expect
&gt; broken links everywhere. I just said I would assume that your
&gt; implementation
&gt; is broken because it creates links that lead to a 404.
&gt;
&gt; Errors shouldn't control the *normal* control flow, they should be
&gt; exceptions.
&gt;
&gt; --
&gt; Markus Lanthaler
&gt; @markuslanthaler
&gt;
&gt;  
&gt;



-- 
Le doute n'est pas une condition agréable, mais la certitude est absurde.
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19497<br>
Sender:Greg Young &lt;gregoryyoung1@...&gt;<br>
Post Date/Time:2013-06-28 15:04:21<br>
Subject:Re: [rest-discuss] Atom and prev links<br>
Message:<br><br>
<pre>btw just to add to this. The specification contradicts itself. If I
have to adjust a prev link on the archive ...

How can:

" The requirement that archive documents be stable allows clients to

   safely assume that if they have retrieved one in the past, it will
   not meaningfully change in the future. "

I would tend to read this as immutability.

Is changing a prev link not a meaningful change? I would consider it
very meaningful.

Cheers,

Greg


On Fri, Jun 28, 2013 at 5:45 PM, Greg Young &lt;gregoryyoung1@...&gt; wrote:
&gt;
&gt; And doing it your way requires every uri we create to be put out twice (once as mutable and uncachable once as immutable and infinitely cachable).
&gt;
&gt; Take archives. My current archive is therefor mutable. I have to rewrite the archive every time I add a new one. This sounds like a fairly complicated protocol as opposed to pre-writing what the next uri will be and giving some sort of status when it is not yet in existence. This becomes even more so if my archives are say monthly and widely distributed. This is especially true for us as our data is already immutable (prev/next were actually the wrong choice, we should be using archive)
&gt;
&gt; Your client just has to say "more stuff will appear here" and don't move off my current document until it does (sounds a lot like a 204).
&gt;
&gt; The server just puts out the archives as needed. No playing with etags or mutability (every uri is always infinitely cachable).
&gt;
&gt; The protocol makes even more sense when you consider dropping long polling on top of it (get me this thing that may or may not exist).
&gt;
&gt; Cheers,
&gt;
&gt; Greg
&gt;
&gt; On Fri, Jun 28, 2013 at 5:32 PM, Markus Lanthaler &lt;markus.lanthaler@...&gt; wrote:
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Friday, June 28, 2013 3:19 PM, Greg Young wrote
&gt;&gt;
&gt;&gt;
&gt;&gt; &gt; btw in doing some research it would appear that RFC 5005 allows
&gt;&gt; &gt; for either in the areas where reading of feeds is actually discussed.
&gt;&gt; &gt;
&gt;&gt; &gt; This process
&gt;&gt; &gt; should be repeated recursively until the client encounters a prev-
&gt;&gt; &gt; archive link relation that has been processed (the end of the archive
&gt;&gt; &gt; is indicated by a missing prev-archive link relation) or an error is
&gt;&gt; &gt; encountered.
&gt;&gt; &gt;
&gt;&gt; &gt; prev/next reading is not discussed but would seem logical to work in the
&gt;&gt; &gt; same way. I am unsure why it would be "broken" as you say to return an
&gt;&gt; &gt; error. Can link me to the relevant specification?
&gt;&gt;
&gt;&gt; I didn't say that a spec prohibits it, how could it? You have to expect
&gt;&gt; broken links everywhere. I just said I would assume that your implementation
&gt;&gt; is broken because it creates links that lead to a 404.
&gt;&gt;
&gt;&gt; Errors shouldn't control the *normal* control flow, they should be
&gt;&gt; exceptions.
&gt;&gt;
&gt;&gt; --
&gt;&gt; Markus Lanthaler
&gt;&gt; @markuslanthaler
&gt;&gt;
&gt;&gt; 
&gt;
&gt;
&gt;
&gt;
&gt; --
&gt; Le doute n'est pas une condition agréable, mais la certitude est absurde.




--
Le doute n'est pas une condition agréable, mais la certitude est absurde.

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19498<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-06-28 15:14:09<br>
Subject:Re: [rest-discuss] Atom and prev links<br>
Message:<br><br>
<pre>could a link hint help? saying "this will eventually work but don't expect it to work before ..."? cheers, dret.

On Jun 28, 2013, at 7:45, Greg Young &lt;gregoryyoung1@...&gt; wrote:

&gt; 
&gt; 
&gt; And doing it your way requires every uri we create to be put out twice (once as mutable and uncachable once as immutable and infinitely cachable).
&gt; 
&gt; Take archives. My current archive is therefor mutable. I have to rewrite the archive every time I add a new one. This sounds like a fairly complicated protocol as opposed to pre-writing what the next uri will be and giving some sort of status when it is not yet in existence. This becomes even more so if my archives are say monthly and widely distributed. This is especially true for us as our data is already immutable (prev/next were actually the wrong choice, we should be using archive)
&gt; 
&gt; Your client just has to say "more stuff will appear here" and don't move off my current document until it does (sounds a lot like a 204).
&gt; 
&gt; The server just puts out the archives as needed. No playing with etags or mutability (every uri is always infinitely cachable). 
&gt; 
&gt; The protocol makes even more sense when you consider dropping long polling on top of it (get me this thing that may or may not exist). 
&gt; 
&gt; Cheers,
&gt; 
&gt; Greg
&gt; 
&gt; On Fri, Jun 28, 2013 at 5:32 PM, Markus Lanthaler &lt;markus.lanthaler@...&gt; wrote:
&gt;&gt;  
&gt;&gt; On Friday, June 28, 2013 3:19 PM, Greg Young wrote
&gt;&gt; 
&gt;&gt; 
&gt;&gt; &gt; btw in doing some research it would appear that RFC 5005 allows
&gt;&gt; &gt; for either in the areas where reading of feeds is actually discussed.
&gt;&gt; &gt; 
&gt;&gt; &gt; This process
&gt;&gt; &gt; should be repeated recursively until the client encounters a prev-
&gt;&gt; &gt; archive link relation that has been processed (the end of the archive
&gt;&gt; &gt; is indicated by a missing prev-archive link relation) or an error is
&gt;&gt; &gt; encountered.
&gt;&gt; &gt;
&gt;&gt; &gt; prev/next reading is not discussed but would seem logical to work in the
&gt;&gt; &gt; same way. I am unsure why it would be "broken" as you say to return an
&gt;&gt; &gt; error. Can link me to the relevant specification?
&gt;&gt; 
&gt;&gt; I didn't say that a spec prohibits it, how could it? You have to expect
&gt;&gt; broken links everywhere. I just said I would assume that your implementation
&gt;&gt; is broken because it creates links that lead to a 404.
&gt;&gt; 
&gt;&gt; Errors shouldn't control the *normal* control flow, they should be
&gt;&gt; exceptions.
&gt;&gt; 
&gt;&gt; --
&gt;&gt; Markus Lanthaler
&gt;&gt; @markuslanthaler
&gt;&gt; 
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; Le doute n'est pas une condition agrÃ©able, mais la certitude est absurde.
&gt; 
&gt; 
&gt; 
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19499<br>
Sender:Greg Young &lt;gregoryyoung1@...&gt;<br>
Post Date/Time:2013-06-28 15:23:45<br>
Subject:Re: [rest-discuss] Atom and prev links<br>
Message:<br><br>
<pre>we dont know when it will work.

On Fri, Jun 28, 2013 at 6:14 PM, Erik Wilde &lt;dret@...&gt; wrote:

&gt; could a link hint help? saying "this will eventually work but don't expect
&gt; it to work before ..."? cheers, dret.
&gt;
&gt; On Jun 28, 2013, at 7:45, Greg Young &lt;gregoryyoung1@...&gt; wrote:
&gt;
&gt;
&gt;
&gt; And doing it your way requires every uri we create to be put out twice
&gt; (once as mutable and uncachable once as immutable and infinitely cachable).
&gt;
&gt; Take archives. My current archive is therefor mutable. I have to rewrite
&gt; the archive every time I add a new one. This sounds like a fairly
&gt; complicated protocol as opposed to pre-writing what the next uri will be
&gt; and giving some sort of status when it is not yet in existence. This
&gt; becomes even more so if my archives are say monthly and widely distributed.
&gt; This is especially true for us as our data is already immutable (prev/next
&gt; were actually the wrong choice, we should be using archive)
&gt;
&gt; Your client just has to say "more stuff will appear here" and don't move
&gt; off my current document until it does (sounds a lot like a 204).
&gt;
&gt; The server just puts out the archives as needed. No playing with etags or
&gt; mutability (every uri is always infinitely cachable).
&gt;
&gt; The protocol makes even more sense when you consider dropping long polling
&gt; on top of it (get me this thing that may or may not exist).
&gt;
&gt; Cheers,
&gt;
&gt; Greg
&gt;
&gt; On Fri, Jun 28, 2013 at 5:32 PM, Markus Lanthaler &lt;
&gt; markus.lanthaler@...&gt; wrote:
&gt;
&gt;&gt; **
&gt;&gt;
&gt;&gt;
&gt;&gt; On Friday, June 28, 2013 3:19 PM, Greg Young wrote
&gt;&gt;
&gt;&gt; &gt; btw in doing some research it would appear that RFC 5005 allows
&gt;&gt; &gt; for either in the areas where reading of feeds is actually discussed.
&gt;&gt; &gt;
&gt;&gt; &gt; This process
&gt;&gt; &gt; should be repeated recursively until the client encounters a prev-
&gt;&gt; &gt; archive link relation that has been processed (the end of the archive
&gt;&gt; &gt; is indicated by a missing prev-archive link relation) or an error is
&gt;&gt; &gt; encountered.
&gt;&gt; &gt;
&gt;&gt; &gt; prev/next reading is not discussed but would seem logical to work in the
&gt;&gt; &gt; same way. I am unsure why it would be "broken" as you say to return an
&gt;&gt; &gt; error. Can link me to the relevant specification?
&gt;&gt;
&gt;&gt; I didn't say that a spec prohibits it, how could it? You have to expect
&gt;&gt; broken links everywhere. I just said I would assume that your
&gt;&gt; implementation
&gt;&gt; is broken because it creates links that lead to a 404.
&gt;&gt;
&gt;&gt; Errors shouldn't control the *normal* control flow, they should be
&gt;&gt; exceptions.
&gt;&gt;
&gt;&gt; --
&gt;&gt; Markus Lanthaler
&gt;&gt; @markuslanthaler
&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt; --
&gt; Le doute n'est pas une condition agréable, mais la certitude est absurde.
&gt;
&gt;
&gt; 
&gt;
&gt;


-- 
Le doute n'est pas une condition agréable, mais la certitude est absurde.
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19500<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-06-28 15:44:14<br>
Subject:Re: [rest-discuss] Atom and prev links<br>
Message:<br><br>
<pre>i guess then there's little to communicate in a link hint (other than a 
very vague "maybe don't try before X"). but if the links are expected to 
work at some predictable time (a daily newsletter, for example), then i 
guess you could you a link hint to inform clients about this.

On 2013-06-28 08:23 , Greg Young wrote:
&gt; we dont know when it will work.
&gt;
&gt; On Fri, Jun 28, 2013 at 6:14 PM, Erik Wilde &lt;dret@...
&gt; &lt;mailto:dret@...&gt;&gt; wrote:
&gt;
&gt;     could a link hint help? saying "this will eventually work but don't
&gt;     expect it to work before ..."? cheers, dret.
&gt;
&gt;     On Jun 28, 2013, at 7:45, Greg Young &lt;gregoryyoung1@...
&gt;     &lt;mailto:gregoryyoung1@...&gt;&gt; wrote:
&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;     And doing it your way requires every uri we create to be put out
&gt;&gt;     twice (once as mutable and uncachable once as immutable and
&gt;&gt;     infinitely cachable).
&gt;&gt;
&gt;&gt;     Take archives. My current archive is therefor mutable. I have to
&gt;&gt;     rewrite the archive every time I add a new one. This sounds like a
&gt;&gt;     fairly complicated protocol as opposed to pre-writing what the
&gt;&gt;     next uri will be and giving some sort of status when it is not yet
&gt;&gt;     in existence. This becomes even more so if my archives are say
&gt;&gt;     monthly and widely distributed. This is especially true for us as
&gt;&gt;     our data is already immutable (prev/next were actually the wrong
&gt;&gt;     choice, we should be using archive)
&gt;&gt;
&gt;&gt;     Your client just has to say "more stuff will appear here" and
&gt;&gt;     don't move off my current document until it does (sounds a lot
&gt;&gt;     like a 204).
&gt;&gt;
&gt;&gt;     The server just puts out the archives as needed. No playing with
&gt;&gt;     etags or mutability (every uri is always infinitely cachable).
&gt;&gt;
&gt;&gt;     The protocol makes even more sense when you consider dropping long
&gt;&gt;     polling on top of it (get me this thing that may or may not exist).
&gt;&gt;
&gt;&gt;     Cheers,
&gt;&gt;
&gt;&gt;     Greg
&gt;&gt;
&gt;&gt;     On Fri, Jun 28, 2013 at 5:32 PM, Markus Lanthaler
&gt;&gt;     &lt;markus.lanthaler@... &lt;mailto:markus.lanthaler@...&gt;&gt; wrote:
&gt;&gt;
&gt;&gt;         __
&gt;&gt;
&gt;&gt;         On Friday, June 28, 2013 3:19 PM, Greg Young wrote
&gt;&gt;
&gt;&gt;
&gt;&gt;         &gt; btw in doing some research it would appear that RFC 5005 allows
&gt;&gt;         &gt; for either in the areas where reading of feeds is actually
&gt;&gt;         discussed.
&gt;&gt;         &gt;
&gt;&gt;         &gt; This process
&gt;&gt;         &gt; should be repeated recursively until the client encounters a
&gt;&gt;         prev-
&gt;&gt;         &gt; archive link relation that has been processed (the end of
&gt;&gt;         the archive
&gt;&gt;         &gt; is indicated by a missing prev-archive link relation) or an
&gt;&gt;         error is
&gt;&gt;         &gt; encountered.
&gt;&gt;         &gt;
&gt;&gt;         &gt; prev/next reading is not discussed but would seem logical to
&gt;&gt;         work in the
&gt;&gt;         &gt; same way. I am unsure why it would be "broken" as you say to
&gt;&gt;         return an
&gt;&gt;         &gt; error. Can link me to the relevant specification?
&gt;&gt;
&gt;&gt;         I didn't say that a spec prohibits it, how could it? You have
&gt;&gt;         to expect
&gt;&gt;         broken links everywhere. I just said I would assume that your
&gt;&gt;         implementation
&gt;&gt;         is broken because it creates links that lead to a 404.
&gt;&gt;
&gt;&gt;         Errors shouldn't control the *normal* control flow, they should be
&gt;&gt;         exceptions.
&gt;&gt;
&gt;&gt;         --
&gt;&gt;         Markus Lanthaler
&gt;&gt;         @markuslanthaler
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;     --
&gt;&gt;     Le doute n'est pas une condition agrÃ©able, mais la certitude est
&gt;&gt;     absurde.
&gt;&gt;
&gt;&gt;
&gt;&gt;     
&gt;
&gt;
&gt;
&gt;
&gt; --
&gt; Le doute n'est pas une condition agrÃ©able, mais la certitude est absurde.

-- 
erik wilde | mailto:dret@...  -  tel:+1-510-2061079 |
            | UC Berkeley  -  School of Information (ISchool) |
            | http://dret.net/netdret http://twitter.com/dret |

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19501<br>
Sender:Greg Young &lt;gregoryyoung1@...&gt;<br>
Post Date/Time:2013-06-28 15:48:57<br>
Subject:Re: [rest-discuss] Atom and prev links<br>
Message:<br><br>
<pre>not predictable (its an event stream) it could be 1ms or 30 days.

we have switched to archive-prev (our stream is complete and
non-lossy) but it really feels like an immutable prev/next is needed
to be standardized.

we figured a 204 "don't change your document" + retry fit the bill.
maybe not ...

As of now there is no good way to do what we do (non-lossy stream)
under 5005. As such we will have to just do something I guess and then
try to get a spec change. The changes are not huge and I think are in
the spirit of the spec (weird how they want mutability and
immutability at the same time).

Greg

On Fri, Jun 28, 2013 at 6:44 PM, Erik Wilde &lt;dret@...&gt; wrote:
&gt; i guess then there's little to communicate in a link hint (other than a very
&gt; vague "maybe don't try before X"). but if the links are expected to work at
&gt; some predictable time (a daily newsletter, for example), then i guess you
&gt; could you a link hint to inform clients about this.
&gt;
&gt;
&gt; On 2013-06-28 08:23 , Greg Young wrote:
&gt;&gt;
&gt;&gt; we dont know when it will work.
&gt;&gt;
&gt;&gt; On Fri, Jun 28, 2013 at 6:14 PM, Erik Wilde &lt;dret@...
&gt;&gt; &lt;mailto:dret@...&gt;&gt; wrote:
&gt;&gt;
&gt;&gt;     could a link hint help? saying "this will eventually work but don't
&gt;&gt;     expect it to work before ..."? cheers, dret.
&gt;&gt;
&gt;&gt;     On Jun 28, 2013, at 7:45, Greg Young &lt;gregoryyoung1@gmail.com
&gt;&gt;     &lt;mailto:gregoryyoung1@...&gt;&gt; wrote:
&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;     And doing it your way requires every uri we create to be put out
&gt;&gt;&gt;     twice (once as mutable and uncachable once as immutable and
&gt;&gt;&gt;     infinitely cachable).
&gt;&gt;&gt;
&gt;&gt;&gt;     Take archives. My current archive is therefor mutable. I have to
&gt;&gt;&gt;     rewrite the archive every time I add a new one. This sounds like a
&gt;&gt;&gt;     fairly complicated protocol as opposed to pre-writing what the
&gt;&gt;&gt;     next uri will be and giving some sort of status when it is not yet
&gt;&gt;&gt;     in existence. This becomes even more so if my archives are say
&gt;&gt;&gt;     monthly and widely distributed. This is especially true for us as
&gt;&gt;&gt;     our data is already immutable (prev/next were actually the wrong
&gt;&gt;&gt;     choice, we should be using archive)
&gt;&gt;&gt;
&gt;&gt;&gt;     Your client just has to say "more stuff will appear here" and
&gt;&gt;&gt;     don't move off my current document until it does (sounds a lot
&gt;&gt;&gt;     like a 204).
&gt;&gt;&gt;
&gt;&gt;&gt;     The server just puts out the archives as needed. No playing with
&gt;&gt;&gt;     etags or mutability (every uri is always infinitely cachable).
&gt;&gt;&gt;
&gt;&gt;&gt;     The protocol makes even more sense when you consider dropping long
&gt;&gt;&gt;     polling on top of it (get me this thing that may or may not exist).
&gt;&gt;&gt;
&gt;&gt;&gt;     Cheers,
&gt;&gt;&gt;
&gt;&gt;&gt;     Greg
&gt;&gt;&gt;
&gt;&gt;&gt;     On Fri, Jun 28, 2013 at 5:32 PM, Markus Lanthaler
&gt;&gt;&gt;     &lt;markus.lanthaler@... &lt;mailto:markus.lanthaler@gmx.net&gt;&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;         __
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;         On Friday, June 28, 2013 3:19 PM, Greg Young wrote
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;         &gt; btw in doing some research it would appear that RFC 5005 allows
&gt;&gt;&gt;         &gt; for either in the areas where reading of feeds is actually
&gt;&gt;&gt;         discussed.
&gt;&gt;&gt;         &gt;
&gt;&gt;&gt;         &gt; This process
&gt;&gt;&gt;         &gt; should be repeated recursively until the client encounters a
&gt;&gt;&gt;         prev-
&gt;&gt;&gt;         &gt; archive link relation that has been processed (the end of
&gt;&gt;&gt;         the archive
&gt;&gt;&gt;         &gt; is indicated by a missing prev-archive link relation) or an
&gt;&gt;&gt;         error is
&gt;&gt;&gt;         &gt; encountered.
&gt;&gt;&gt;         &gt;
&gt;&gt;&gt;         &gt; prev/next reading is not discussed but would seem logical to
&gt;&gt;&gt;         work in the
&gt;&gt;&gt;         &gt; same way. I am unsure why it would be "broken" as you say to
&gt;&gt;&gt;         return an
&gt;&gt;&gt;         &gt; error. Can link me to the relevant specification?
&gt;&gt;&gt;
&gt;&gt;&gt;         I didn't say that a spec prohibits it, how could it? You have
&gt;&gt;&gt;         to expect
&gt;&gt;&gt;         broken links everywhere. I just said I would assume that your
&gt;&gt;&gt;         implementation
&gt;&gt;&gt;         is broken because it creates links that lead to a 404.
&gt;&gt;&gt;
&gt;&gt;&gt;         Errors shouldn't control the *normal* control flow, they should
&gt;&gt;&gt; be
&gt;&gt;&gt;         exceptions.
&gt;&gt;&gt;
&gt;&gt;&gt;         --
&gt;&gt;&gt;         Markus Lanthaler
&gt;&gt;&gt;         @markuslanthaler
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;     --
&gt;&gt;&gt;     Le doute n'est pas une condition agréable, mais la certitude est
&gt;&gt;&gt;     absurde.
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;     
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt; Le doute n'est pas une condition agréable, mais la certitude est absurde.
&gt;
&gt;
&gt; --
&gt; erik wilde | mailto:dret@berkeley.edu  -  tel:+1-510-2061079 |
&gt;            | UC Berkeley  -  School of Information (ISchool) |
&gt;            | http://dret.net/netdret http://twitter.com/dret |



-- 
Le doute n'est pas une condition agréable, mais la certitude est absurde.

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19502<br>
Sender:Erik Mogensen &lt;erik@...&gt;<br>
Post Date/Time:2013-06-28 16:09:53<br>
Subject:Re: [rest-discuss] Atom and prev links<br>
Message:<br><br>
<pre>On Fri, Jun 28, 2013 at 12:16 PM, Greg Young &lt;gregoryyoung1@...&gt;wrote:

&gt; **
&gt;
&gt;
&gt; We have a mature atom implementation for distribution of event streams
&gt; and as always the devil is in the details...
&gt;
&gt; The issue revolves around prev links. At some point on an atom feed
&gt; you will hit the current item, prev will point to the next item that
&gt; does not yet exist. Most implementations I can find 404 this uri and
&gt; the client has the logic to keep polling the 404. This seems off to
&gt; me, I would expect this to be a 204. Then if I change my uri structure
&gt; it becomes a 404, otherwise it would seem that if I change my uri
&gt; structure all prev uris would need to redirect to the new ones (which
&gt; would be a rather large undertaking).
&gt;
&gt; I couldn't find any details on this in relevant specs, has anyone seen
&gt; this?
&gt;
&gt; Greg, I'd just like to explain how we do more or less the same thing.  We
also use the prev link of the "first page" of a feed to link to the page
containing the items that "will be".  We find that it's an extremely
resilient way of dissipating information about things that fit in atom
feeds, and a relatively efficient system too.

Infinitely cacheable resources are nice, but instead of 404, or 204 and so
on, we expose an empty feed document, with a next link but no prev link.
 When things happen, the page (when refreshed) contains one or more
entries, and becomes cacheable.

Our "head" document is very small; contains no real data so it's easy to
generate; supports cache validation, and if it's incorrectly cached as
fresh by an intermediary or a caching client, it only impedes the ability
of clients to advance to the "newer" entries.  Eventually, they will
advance to the next state.

If I were to do this again, I might consider using 302 some other temporary
redirect, instead of the 404 or the empty feed; redirect back to the
current (infinitely cacheable) first page.  When a new item appears, the
302 would turn into the "new" first page" a 200 with new next/prev links,

I wonder if "Cache-Control" or "Retry-After" would be useful for 302
responses, to ask clients to back off under heavy load.
-- 
-mogsie-
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19503<br>
Sender:Greg Young &lt;gregoryyoung1@...&gt;<br>
Post Date/Time:2013-06-28 16:14:50<br>
Subject:Re: [rest-discuss] Atom and prev links<br>
Message:<br><br>
<pre>We have considered this empty feed page as well! We were thinking its
slightly more efficient (and understandable) to have a status code but
maybe not (thinking client logic).

If I were to do this again, I might consider using 302 some other
temporary redirect, instead of the 404 or the empty feed; redirect
back to the current (infinitely cacheable) first page.  When a new
item appears, the 302 would turn into the "new" first page" a 200 with
new next/prev links,

I am curious why not a 204. It would seem to be a reasonable fit here
"keep your doc, retry after ..."

Cheers,

Greg

On Fri, Jun 28, 2013 at 7:09 PM, Erik Mogensen &lt;erik@...&gt; wrote:
&gt;
&gt; On Fri, Jun 28, 2013 at 12:16 PM, Greg Young &lt;gregoryyoung1@...&gt;
&gt; wrote:
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; We have a mature atom implementation for distribution of event streams
&gt;&gt; and as always the devil is in the details...
&gt;&gt;
&gt;&gt; The issue revolves around prev links. At some point on an atom feed
&gt;&gt; you will hit the current item, prev will point to the next item that
&gt;&gt; does not yet exist. Most implementations I can find 404 this uri and
&gt;&gt; the client has the logic to keep polling the 404. This seems off to
&gt;&gt; me, I would expect this to be a 204. Then if I change my uri structure
&gt;&gt; it becomes a 404, otherwise it would seem that if I change my uri
&gt;&gt; structure all prev uris would need to redirect to the new ones (which
&gt;&gt; would be a rather large undertaking).
&gt;&gt;
&gt;&gt; I couldn't find any details on this in relevant specs, has anyone seen
&gt;&gt; this?
&gt;&gt;
&gt; Greg, I'd just like to explain how we do more or less the same thing.  We
&gt; also use the prev link of the "first page" of a feed to link to the page
&gt; containing the items that "will be".  We find that it's an extremely
&gt; resilient way of dissipating information about things that fit in atom
&gt; feeds, and a relatively efficient system too.
&gt;
&gt; Infinitely cacheable resources are nice, but instead of 404, or 204 and so
&gt; on, we expose an empty feed document, with a next link but no prev link.
&gt; When things happen, the page (when refreshed) contains one or more entries,
&gt; and becomes cacheable.
&gt;
&gt; Our "head" document is very small; contains no real data so it's easy to
&gt; generate; supports cache validation, and if it's incorrectly cached as fresh
&gt; by an intermediary or a caching client, it only impedes the ability of
&gt; clients to advance to the "newer" entries.  Eventually, they will advance to
&gt; the next state.
&gt;
&gt; If I were to do this again, I might consider using 302 some other temporary
&gt; redirect, instead of the 404 or the empty feed; redirect back to the current
&gt; (infinitely cacheable) first page.  When a new item appears, the 302 would
&gt; turn into the "new" first page" a 200 with new next/prev links,
&gt;
&gt; I wonder if "Cache-Control" or "Retry-After" would be useful for 302
&gt; responses, to ask clients to back off under heavy load.
&gt; --
&gt; -mogsie-



-- 
Le doute n'est pas une condition agréable, mais la certitude est absurde.

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19504<br>
Sender:Erik Mogensen &lt;erik@...&gt;<br>
Post Date/Time:2013-06-28 17:06:14<br>
Subject:Re: [rest-discuss] Atom and prev links<br>
Message:<br><br>
<pre>On Fri, Jun 28, 2013 at 6:14 PM, Greg Young &lt;gregoryyoung1@...&gt; wrote:

&gt; **
&gt;
&gt;
&gt; We have considered this empty feed page as well! We were thinking its
&gt; slightly more efficient (and understandable) to have a status code but
&gt; maybe not (thinking client logic).
&gt;
We were probably thinking that the empty page would fit nicely within an IP
packet anyway, and could easily support ETag validation, and provide
information about the current state "there's nothing to process now".

I am curious why not a 204. It would seem to be a reasonable fit here
&gt; "keep your doc, retry after ..."
&gt;
&gt;
Hmm. after reading up on RFC-2616 I'd agree with you.  My understanding of
204 means that you should "stay where you were" and then I guess the client
would eventually retry.

RFC2616, section 10.2.5 "204 NO CONTENT" says: "If the client is a user
agent, it SHOULD NOT change its document view from that which caused the
request to be sent"  This should cause the same or a very similar outcome,
I guess.

I guess we should update our client to react accordingly when we encounter
a 204. :-)
-- 
-mogsie-
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19505<br>
Sender:Ben Niven-Jenkins &lt;ben@...&gt;<br>
Post Date/Time:2013-06-28 17:10:57<br>
Subject:Re: [rest-discuss] Atom and prev links<br>
Message:<br><br>
<pre>

On 28 Jun 2013, at 11:16, Greg Young &lt;gregoryyoung1@...&gt; wrote:

&gt; We have a mature atom implementation for distribution of event streams
&gt; and as always the devil is in the details...
&gt; 
&gt; The issue revolves around prev links. At some point on an atom feed
&gt; you will hit the current item, prev will point to the next item that
&gt; does not yet exist.

Why not use feed paging and use prev-archive to indicate the previous page and keep your "main" feed as the current page. 

Client just polls the current page and if it needs to go further back in time it follows prev-archive links until it finds what it wants. 

You then avoid the problem of links to things that don't exist or updating already archived pages. 

Ben 
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19506<br>
Sender:Greg Young &lt;gregoryyoung1@...&gt;<br>
Post Date/Time:2013-06-28 17:32:11<br>
Subject:Re: Atom and prev links<br>
Message:<br><br>
<pre>Our whole feed is nonlossy and immutable.

On Friday, June 28, 2013, Ben Niven-Jenkins wrote:

&gt;
&gt;
&gt; On 28 Jun 2013, at 11:16, Greg Young &lt;gregoryyoung1@...&lt;javascript:;&gt;&gt;
&gt; wrote:
&gt;
&gt; &gt; We have a mature atom implementation for distribution of event streams
&gt; &gt; and as always the devil is in the details...
&gt; &gt;
&gt; &gt; The issue revolves around prev links. At some point on an atom feed
&gt; &gt; you will hit the current item, prev will point to the next item that
&gt; &gt; does not yet exist.
&gt;
&gt; Why not use feed paging and use prev-archive to indicate the previous page
&gt; and keep your "main" feed as the current page.
&gt;
&gt; Client just polls the current page and if it needs to go further back in
&gt; time it follows prev-archive links until it finds what it wants.
&gt;
&gt; You then avoid the problem of links to things that don't exist or updating
&gt; already archived pages.
&gt;
&gt; Ben



-- 
Le doute n'est pas une condition agréable, mais la certitude est absurde.
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19507<br>
Sender:Ben Niven-Jenkins &lt;ben@...&gt;<br>
Post Date/Time:2013-06-28 17:49:23<br>
Subject:Re: Atom and prev links<br>
Message:<br><br>
<pre>

On 28 Jun 2013, at 18:32, Greg Young &lt;gregoryyoung1@...&gt; wrote:

&gt; Our whole feed is nonlossy and immutable.

Can you expand on what you mean by this. Feed archiving doesn't lose information and doesn't require changes to a page once it is first generated. 

Or do you mean the client cannot handle the content of the URI that represents the entry point into the feed changing and expects the content of that URI to stay always constant so the clients needs to page "forward in time" to find the latest entries?

Ben
&gt; 
&gt; On Friday, June 28, 2013, Ben Niven-Jenkins wrote:
&gt;&gt; 
&gt;&gt; 
&gt;&gt; On 28 Jun 2013, at 11:16, Greg Young &lt;gregoryyoung1@...&gt; wrote:
&gt;&gt; 
&gt;&gt; &gt; We have a mature atom implementation for distribution of event streams
&gt;&gt; &gt; and as always the devil is in the details...
&gt;&gt; &gt;
&gt;&gt; &gt; The issue revolves around prev links. At some point on an atom feed
&gt;&gt; &gt; you will hit the current item, prev will point to the next item that
&gt;&gt; &gt; does not yet exist.
&gt;&gt; 
&gt;&gt; Why not use feed paging and use prev-archive to indicate the previous page and keep your "main" feed as the current page.
&gt;&gt; 
&gt;&gt; Client just polls the current page and if it needs to go further back in time it follows prev-archive links until it finds what it wants.
&gt;&gt; 
&gt;&gt; You then avoid the problem of links to things that don't exist or updating already archived pages.
&gt;&gt; 
&gt;&gt; Ben
&gt; 
&gt; 
&gt; -- 
&gt; Le doute n'est pas une condition agrÃ©able, mais la certitude est absurde.
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19508<br>
Sender:Greg Young &lt;gregoryyoung1@...&gt;<br>
Post Date/Time:2013-06-28 18:10:05<br>
Subject:Re: Atom and prev links<br>
Message:<br><br>
<pre>We could do all over prev next even with no archiving. Every uri we create
is immutable. Spec defines additional logic needed for prev/next which is
unneeded for us so archive gives us a simpler client API (also explicit
that we are non lossy)

On Friday, June 28, 2013, Ben Niven-Jenkins wrote:

&gt;
&gt;
&gt; On 28 Jun 2013, at 18:32, Greg Young &lt;gregoryyoung1@...&lt;javascript:_e({}, 'cvml', 'gregoryyoung1@...');&gt;&gt;
&gt; wrote:
&gt;
&gt; Our whole feed is nonlossy and immutable.
&gt;
&gt;
&gt; Can you expand on what you mean by this. Feed archiving doesn't lose
&gt; information and doesn't require changes to a page once it is first
&gt; generated.
&gt;
&gt; Or do you mean the client cannot handle the content of the URI that
&gt; represents the entry point into the feed changing and expects the content
&gt; of that URI to stay always constant so the clients needs to page "forward
&gt; in time" to find the latest entries?
&gt;
&gt; Ben
&gt;
&gt;
&gt; On Friday, June 28, 2013, Ben Niven-Jenkins wrote:
&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On 28 Jun 2013, at 11:16, Greg Young &lt;gregoryyoung1@...&gt; wrote:
&gt;&gt;
&gt;&gt; &gt; We have a mature atom implementation for distribution of event streams
&gt;&gt; &gt; and as always the devil is in the details...
&gt;&gt; &gt;
&gt;&gt; &gt; The issue revolves around prev links. At some point on an atom feed
&gt;&gt; &gt; you will hit the current item, prev will point to the next item that
&gt;&gt; &gt; does not yet exist.
&gt;&gt;
&gt;&gt; Why not use feed paging and use prev-archive to indicate the previous
&gt;&gt; page and keep your "main" feed as the current page.
&gt;&gt;
&gt;&gt; Client just polls the current page and if it needs to go further back in
&gt;&gt; time it follows prev-archive links until it finds what it wants.
&gt;&gt;
&gt;&gt; You then avoid the problem of links to things that don't exist or
&gt;&gt; updating already archived pages.
&gt;&gt;
&gt;&gt; Ben
&gt;
&gt;
&gt;
&gt; --
&gt; Le doute n'est pas une condition agréable, mais la certitude est absurde.
&gt;
&gt;

-- 
Le doute n'est pas une condition agréable, mais la certitude est absurde.
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19509<br>
Sender:Greg Young &lt;gregoryyoung1@...&gt;<br>
Post Date/Time:2013-06-28 18:11:37<br>
Subject:Re: Atom and prev links<br>
Message:<br><br>
<pre>To be clear we want a cross of prev and archive prev as they were obviously
designed for mutable feeds.

On Friday, June 28, 2013, Greg Young wrote:

&gt; We could do all over prev next even with no archiving. Every uri we create
&gt; is immutable. Spec defines additional logic needed for prev/next which is
&gt; unneeded for us so archive gives us a simpler client API (also explicit
&gt; that we are non lossy)
&gt;
&gt; On Friday, June 28, 2013, Ben Niven-Jenkins wrote:
&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On 28 Jun 2013, at 18:32, Greg Young &lt;gregoryyoung1@gmail.com&gt; wrote:
&gt;&gt;
&gt;&gt; Our whole feed is nonlossy and immutable.
&gt;&gt;
&gt;&gt;
&gt;&gt; Can you expand on what you mean by this. Feed archiving doesn't lose
&gt;&gt; information and doesn't require changes to a page once it is first
&gt;&gt; generated.
&gt;&gt;
&gt;&gt; Or do you mean the client cannot handle the content of the URI that
&gt;&gt; represents the entry point into the feed changing and expects the content
&gt;&gt; of that URI to stay always constant so the clients needs to page "forward
&gt;&gt; in time" to find the latest entries?
&gt;&gt;
&gt;&gt; Ben
&gt;&gt;
&gt;&gt;
&gt;&gt; On Friday, June 28, 2013, Ben Niven-Jenkins wrote:
&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On 28 Jun 2013, at 11:16, Greg Young &lt;gregoryyoung1@...&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt; &gt; We have a mature atom implementation for distribution of event streams
&gt;&gt;&gt; &gt; and as always the devil is in the details...
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; The issue revolves around prev links. At some point on an atom feed
&gt;&gt;&gt; &gt; you will hit the current item, prev will point to the next item that
&gt;&gt;&gt; &gt; does not yet exist.
&gt;&gt;&gt;
&gt;&gt;&gt; Why not use feed paging and use prev-archive to indicate the previous
&gt;&gt;&gt; page and keep your "main" feed as the current page.
&gt;&gt;&gt;
&gt;&gt;&gt; Client just polls the current page and if it needs to go further back in
&gt;&gt;&gt; time it follows prev-archive links until it finds what it wants.
&gt;&gt;&gt;
&gt;&gt;&gt; You then avoid the problem of links to things that don't exist or
&gt;&gt;&gt; updating already archived pages.
&gt;&gt;&gt;
&gt;&gt;&gt; Ben
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt; Le doute n'est pas une condition agréable, mais la certitude est absurde.
&gt;&gt;
&gt;&gt;
&gt;
&gt; --
&gt; Le doute n'est pas une condition agréable, mais la certitude est absurde.
&gt;


-- 
Le doute n'est pas une condition agréable, mais la certitude est absurde.
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19510<br>
Sender:Mark Nottingham &lt;mnot@...&gt;<br>
Post Date/Time:2013-07-04 01:30:14<br>
Subject:Re: [apps-discuss] New Version Notification for draft-nottingham-link-hint-00.txt<br>
Message:<br><br>
<pre>
On 27/06/2013, at 10:24 AM, Erik Wilde &lt;dret@...&gt; wrote:
&gt;&gt;&gt; 
&gt;&gt;&gt; so my suggestion is not so much your (b) but my (c) ;-) fwiw, it seems that thew current draft uses overly complicated structures, for example, "formats" maybe just could be an array of formats?
&gt;&gt; Could you spell out an example?
&gt; 
&gt; afaict, "formats" (http://tools.ietf.org/html/draft-nottingham-link-hint-00#section-3.2) right now says says it's an object with the keys being media types, but the values are not specified. but maybe i am reading it wrong and where it says "The object" in the second and third paragraph it actually refers to the object that's a value of one of the keys?

Yes, I need to spell that out more completely. Thanks.


&gt; hmmm, i guess that's what it means... i had been reading it wrong so far. but for a minute, let's just assume it's only media types, which is how i am using it in an example using link hints here: https://github.com/dret/I-D/blob/master/link-desc/ld-atompub-00.xml
&gt; 
&gt; so let's assume for a minute that this is just a list. then i would suggest is the following: the hint is defined as follows (stealing your structure here):
&gt; 
&gt; o  Hint Name: formats
&gt; o  Description: Hints the representation type(s) that the target resource can produce and consume, using the GET and PUT (if allowed) methods respectively.
&gt; o  Content Model: list
&gt; o  Specification: [this document]
&gt; Content MUST be a list, whose values are media types.
&gt; 
&gt; then, the term "list" in the content model must be defined somewhere. like i said, maybe we could say there are three "content models" hints support: single values, lists, key/value pairs. how a particular hint value would be serialized then would be up to the format where it's being represented.
&gt; 
&gt; - in JSON, you might represent them as string, array, something else.
&gt; 
&gt; - in XML, you might choose a mix of element/attribute designs. or you could go text-based such as my example (which is text-based because it uses JSON syntax right now)
&gt; 
&gt; none of these representations would be binding, they would just be one way of mapping the abstract link hint model into some concrete model. i guess the only exception for this would be how to represent links outside of media types, i.e. in HTTP. http://tools.ietf.org/html/draft-nottingham-link-hint-00#appendix-A could be changed then to map the abstract moden into a concrete JSON syntax (or whatever else looks like a good syntax choice to go into a Link header).

I'm all for that, IF we can be reasonably sure that the current data can fit comfortably into that simplified model.

The current hints that use "complex" objects are (keeping in mind that we've just started):
 - formats
 - links
 - accept-post (same format as formats)
 - auth-schemes

Formats and accept-post COULD specify a list of strings, and state that it's either a media type OR a profile URI. This means we'd need a separate representation format for profiles, which would need to convey a media type.

This is certainly possible, but the downsides I see are:
  - It's baking in profiles in at a pretty high level. I like some aspects of profiles, but they certainly haven't taken off in mindshare yet.
  - Parsing the string to check which it is is nasty.

For auth-schemes, we'd need to specify a tuple, probably. Not great, but OK. Extensibility would be right out the window, though, which may be significant for some schemes.

Links are fundamentally not possible without some really ugly mapping to a string, I think.

My concern is that this is starting not to meet my use cases for json-home, which is where link-hints comes from. 

While I could address this by making those things NOT link hints, but other "bumps" on json-home, it would make it significantly more complex. That seems like a poor tradeoff, considering that it's *possible* to map generic hints into XML, it's just not "pretty."


&gt; as i see it, when i design media types that use link hints, it would be nice if i could expose them in a way that is as useful as possible for consumers of that media type. my example from above is from an XML design for link descriptions that i plan to base on link hints. if that means that the XML-oriented clients using this format need to include a general-purpose JSON parser, then that's certainly doable, but i don't think the link hints design has to be like that.

To be brutally frank (and I'm sure this isn't going to surprise you too much, dret ;) I don't see a lot of value in catering to the XML API market; it's dying, and introducing constraints on the JSON APIs seems like a bad tradeoff.

I absolutely acknowledge that JSON will one day face its own demise, and will be in a similar situation, but planning for that seems like premature optimisation to me.


&gt; but again, of course my option (c) means that link hints have a predefined and probably small set of structures that hints can use to expose whatever they want to expose, and if they want to go beyond that, that's not covered by the link hint framework anymore.


Yes. That's what I'm struggling with. We're already seeing a number of places that chafe against these constraints, and we're just getting started.

What do other folks think?

Cheers,


--
Mark Nottingham   http://www.mnot.net/




</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19511<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-07-05 15:00:21<br>
Subject:Re: [apps-discuss] New Version Notification for draft-nottingham-link-hint-00.txt<br>
Message:<br><br>
<pre>hello mark.

On 2013-07-04 3:30 , Mark Nottingham wrote:
&gt;&gt; none of these representations would be binding, they would just be one way of mapping the abstract link hint model into some concrete model. i guess the only exception for this would be how to represent links outside of media types, i.e. in HTTP. http://tools.ietf.org/html/draft-nottingham-link-hint-00#appendix-A could be changed then to map the abstract moden into a concrete JSON syntax (or whatever else looks like a good syntax choice to go into a Link header).
&gt; I'm all for that, IF we can be reasonably sure that the current data can fit comfortably into that simplified model.
&gt; The current hints that use "complex" objects are (keeping in mind that we've just started):
&gt;   - formats
&gt;   - links
&gt;   - accept-post (same format as formats)
&gt;   - auth-schemes
&gt; Formats and accept-post COULD specify a list of strings, and state that it's either a media type OR a profile URI. This means we'd need a separate representation format for profiles, which would need to convey a media type.
&gt; This is certainly possible, but the downsides I see are:
&gt;    - It's baking in profiles in at a pretty high level. I like some aspects of profiles, but they certainly haven't taken off in mindshare yet.
&gt;    - Parsing the string to check which it is is nasty.
&gt; For auth-schemes, we'd need to specify a tuple, probably. Not great, but OK. Extensibility would be right out the window, though, which may be significant for some schemes.
&gt; Links are fundamentally not possible without some really ugly mapping to a string, I think.

i guess that's true. but i have to admit that i am struggling a bit with 
that specific hint anyway. it can hint at links you might find at the 
target resource. it may contain hints, so it can also contain link 
hints. so in theory, you could build a multi-level structure of links to 
be expected several link traversals away, right?

more generally speaking, i am having troubles rationalizing hints that 
give me some "preview" of the target resource. my personal mental model 
of link hints is that they constrain interactions with the target 
resource, but really don't tell you what to expect.

is http://tools.ietf.org/html/draft-nottingham-json-home-03#section-9 
(the separation into "resource" and "representation" hints in the home 
draft, where the link hint idea started) what might make te difference 
between hints talking about interactions, and hints talking about the 
result of an interaction?

&gt; My concern is that this is starting not to meet my use cases for json-home, which is where link-hints comes from.

that would be bad, but again, i am struggling a bit with the hints that 
tell you what to expect, and not just what to do. my thoughts were that 
hints should just be about what to do; do you have a different model in 
mind?

&gt; While I could address this by making those things NOT link hints, but other "bumps" on json-home, it would make it significantly more complex. That seems like a poor tradeoff, considering that it's *possible* to map generic hints into XML, it's just not "pretty."
&gt; To be brutally frank (and I'm sure this isn't going to surprise you too much, dret ;) I don't see a lot of value in catering to the XML API market; it's dying, and introducing constraints on the JSON APIs seems like a bad tradeoff.

yes, i am not overly surprised ;) but i am not really trying to optimize 
this for XML, i just try to make it more workable for non-JSON consumers 
in general. and i am still hoping that somebody will be able to point to 
prior decisions that were made in similar situations: are there IANA 
registries that are using JSON as a data model for their entries, and 
which other approaches were taken in cases where registries attempted to 
register structured entries? maybe we should just use ASN.1... ;-)

&gt; I absolutely acknowledge that JSON will one day face its own demise, and will be in a similar situation, but planning for that seems like premature optimisation to me.

sure, and if the consensus is that it's ok to have JSON-based 
registries, then this is how it is. personally, i think i will then use 
serialized JSON in XML representations, which are a little less horrible 
to look at than generic JSON serialized in JSON.

&gt;&gt; but again, of course my option (c) means that link hints have a predefined and probably small set of structures that hints can use to expose whatever they want to expose, and if they want to go beyond that, that's not covered by the link hint framework anymore.
&gt; Yes. That's what I'm struggling with. We're already seeing a number of places that chafe against these constraints, and we're just getting started.
&gt; What do other folks think?

good point, so far it's just mark and me. anybody who faced similar 
design issues who could share their considerations and decisions?

thanks and cheers,

dret.

-- 
erik wilde | mailto:dret@...  -  tel:+1-510-2061079 |
            | UC Berkeley  -  School of Information (ISchool) |
            | http://dret.net/netdret http://twitter.com/dret |

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19512<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-07-29 07:52:10<br>
Subject:Fw: New Version Notification for draft-wilde-atom-profile-02.txt<br>
Message:<br><br>
<pre>hello.

a new version of draft-wilde-atom-profile has been posted. if you are 
using profiles with atom, and specifically the proposed profile media 
type parameter, please get in touch. it would be great to add 
implementations to 
http://tools.ietf.org/html/draft-wilde-atom-profile-02#section-5 (please 
see http://tools.ietf.org/html/rfc6982#section-2 for a description of 
the implementation information needed).

thanks and cheers,

dret.

----------------------------------------------------------------------

On 2013-07-29 9:14 , internet-drafts@... wrote:
&gt; A new version of I-D, draft-wilde-atom-profile-02.txt
&gt; has been successfully submitted by Erik Wilde and posted to the
&gt; IETF repository.
&gt;
&gt; Filename:	 draft-wilde-atom-profile
&gt; Revision:	 02
&gt; Title:		 Profile Support for the Atom Syndication Format
&gt; Creation date:	 2013-07-29
&gt; Group:		 Individual Submission
&gt; Number of pages: 9
&gt; URL:             http://www.ietf.org/internet-drafts/draft-wilde-atom-profile-02.txt
&gt; Status:          http://datatracker.ietf.org/doc/draft-wilde-atom-profile
&gt; Htmlized:        http://tools.ietf.org/html/draft-wilde-atom-profile-02
&gt; Diff:            http://www.ietf.org/rfcdiff?url2=draft-wilde-atom-profile-02
&gt;
&gt; Abstract:
&gt;     The Atom syndication format is a generic XML format for representing
&gt;     collections.  Profiles are one way how Atom feeds can indicate that
&gt;     they support specific extensions.  To make this support visible on
&gt;     the media type level, this specification adds an optional "profile"
&gt;     media type parameter to the Atom media type.  This allows profiles to
&gt;     become visible at the media type level, so that servers as well as
&gt;     clients can indicate support for specific Atom profiles in
&gt;     conversations, for example when communicating via HTTP.  This
&gt;     specification updates RFC 4287 by adding the "profile" media type
&gt;     parameter to the application/atom+xml media type registration.

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19513<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-07-29 08:02:12<br>
Subject:Fw: New Version Notification for draft-wilde-accept-post-00.txt<br>
Message:<br><br>
<pre>hello.

a new draft "The Accept-Post HTTP Header" has been published. it has 
been developed within the W3C LDP working group 
(http://www.w3.org/2012/ldp/wiki/Main_Page), but we thought it would 
promote reuse of that header field if it were specified and registered 
separately. any feedback is very welcome. in order to align with the 
timing of the W3C LDP specifications, our goal is to move this draft 
forward as fast as we can.

thanks and cheers,

dret.

----------------------------------------------------------------------

On 2013-07-29 9:18 , internet-drafts@... wrote:
&gt; A new version of I-D, draft-wilde-accept-post-00.txt
&gt; has been successfully submitted by John Arwe and posted to the
&gt; IETF repository.
&gt;
&gt; Filename:	 draft-wilde-accept-post
&gt; Revision:	 00
&gt; Title:		 The Accept-Post HTTP Header
&gt; Creation date:	 2013-07-29
&gt; Group:		 Individual Submission
&gt; Number of pages: 7
&gt; URL:             http://www.ietf.org/internet-drafts/draft-wilde-accept-post-00.txt
&gt; Status:          http://datatracker.ietf.org/doc/draft-wilde-accept-post
&gt; Htmlized:        http://tools.ietf.org/html/draft-wilde-accept-post-00
&gt;
&gt;
&gt; Abstract:
&gt;     This specification defines a new HTTP response header field Accept-
&gt;     Post, which indicates server support for specific media types for
&gt;     entity bodies in HTTP POST requests.
&gt;
&gt; Note to Readers
&gt;
&gt;     This draft should be discussed on the apps-discuss mailing list [9].
&gt;     Online access to all versions and files is available on github [10].

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19514<br>
Sender:Hubert A Le Van Gong &lt;hubertlvg@...&gt;<br>
Post Date/Time:2013-08-14 01:11:13<br>
Subject:ETag and resource representations<br>
Message:<br><br>
<pre>Greetings,

I have a question about associating ETag to resources in a REST-based architecture.
Would you recommend associating a single ETag to the canonical (i.e. complete) resource or rather use a different ETag for each representations of said resource.
For instance, if I consider a library (full of books) as a resource. The view of that resource (i.e. the list of books returned) may vary based on the age of the reader (or any other criteria). Should I consider one ETag for the library as a whole or should I create an ETag for each representation returned to each reader?

Maybe another way to ask the same question: should the ETag management solely be based on the resource or also influenced by other factors surrounding requests for it (e.g. policies etc.)?

Cheers,
Hubert



</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19515<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-08-14 14:11:11<br>
Subject:Re: [rest-discuss] ETag and resource representations<br>
Message:<br><br>
<pre>Hubert,

On 14.08.2013, at 03:11, Hubert A Le Van Gong &lt;hubertlvg@...&gt; wrote:

&gt; Greetings,
&gt; 
&gt; I have a question about associating ETag to resources in a REST-based architecture.
&gt; Would you recommend associating a single ETag to the canonical (i.e. complete) resource or rather use a different ETag for each representations of said resource.
&gt; For instance, if I consider a library (full of books) as a resource. The view of that resource (i.e. the list of books returned) may vary based on the age of the reader (or any other criteria). Should I consider one ETag for the library as a whole or should I create an ETag for each representation returned to each reader?
&gt; 

ETag applies to the representation. If the actual bytes of the representation differ  the ETag must differ.

Jan


&gt; Maybe another way to ask the same question: should the ETag management solely be based on the resource or also influenced by other factors surrounding requests for it (e.g. policies etc.)?
&gt; 
&gt; Cheers,
&gt; Hubert
&gt; 
&gt; 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19516<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-08-14 14:23:10<br>
Subject:Re: [rest-discuss] ETag and resource representations<br>
Message:<br><br>
<pre>hello jan.

On 2013-08-14 16:11 , Jan Algermissen wrote:
&gt; On 14.08.2013, at 03:11, Hubert A Le Van Gong &lt;hubertlvg@...&gt; wrote:
&gt;&gt; I have a question about associating ETag to resources in a REST-based architecture.
&gt;&gt; Would you recommend associating a single ETag to the canonical (i.e. complete) resource or rather use a different ETag for each representations of said resource.
&gt;&gt; For instance, if I consider a library (full of books) as a resource. The view of that resource (i.e. the list of books returned) may vary based on the age of the reader (or any other criteria). Should I consider one ETag for the library as a whole or should I create an ETag for each representation returned to each reader?
&gt; ETag applies to the representation. If the actual bytes of the representation differ  the ETag must differ.

that's correct for strong ETags (the default), but not the case for weak 
ETags (which a server can choose to use).

http://tools.ietf.org/html/rfc2616#section-13.3.3

i'd say that weak ETags are mostly used to have ETags survive 
non-essential differences (hit counters are the canonical example). it 
would be interesting to hear whether services are using them for other 
purposes like the one hubert mentioned.

cheers,

dret.

-- 
erik wilde | mailto:dret@...  -  tel:+1-510-2061079 |
            | UC Berkeley  -  School of Information (ISchool) |
            | http://dret.net/netdret http://twitter.com/dret |

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19517<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-08-14 14:26:12<br>
Subject:Re: [rest-discuss] ETag and resource representations<br>
Message:<br><br>
<pre>
On 14.08.2013, at 16:23, Erik Wilde &lt;dret@...&gt; wrote:

&gt; hello jan.
&gt; 
&gt; On 2013-08-14 16:11 , Jan Algermissen wrote:
&gt;&gt; On 14.08.2013, at 03:11, Hubert A Le Van Gong &lt;hubertlvg@...&gt; wrote:
&gt;&gt;&gt; I have a question about associating ETag to resources in a REST-based architecture.
&gt;&gt;&gt; Would you recommend associating a single ETag to the canonical (i.e. complete) resource or rather use a different ETag for each representations of said resource.
&gt;&gt;&gt; For instance, if I consider a library (full of books) as a resource. The view of that resource (i.e. the list of books returned) may vary based on the age of the reader (or any other criteria). Should I consider one ETag for the library as a whole or should I create an ETag for each representation returned to each reader?
&gt;&gt; ETag applies to the representation. If the actual bytes of the representation differ  the ETag must differ.
&gt; 
&gt; that's correct for strong ETags (the default), but not the case for weak ETags (which a server can choose to use).

Ahr yes, forgot these - thanks for point that out.  

For a deeper discussion: http://www.mnot.net/blog/2007/08/07/etags

Jan


&gt; 
&gt; http://tools.ietf.org/html/rfc2616#section-13.3.3
&gt; 
&gt; i'd say that weak ETags are mostly used to have ETags survive non-essential differences (hit counters are the canonical example). it would be interesting to hear whether services are using them for other purposes like the one hubert mentioned.
&gt; 
&gt; cheers,
&gt; 
&gt; dret.
&gt; 
&gt; -- 
&gt; erik wilde | mailto:dret@...  -  tel:+1-510-2061079 |
&gt;           | UC Berkeley  -  School of Information (ISchool) |
&gt;           | http://dret.net/netdret http://twitter.com/dret |


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19518<br>
Sender:Hubert A Le Van Gong &lt;hubertlvg@...&gt;<br>
Post Date/Time:2013-08-14 18:59:34<br>
Subject:Re: [rest-discuss] ETag and resource representations<br>
Message:<br><br>
<pre>Jan, Erik,

Thanks for your responses; I was afraid you were going to say that (1 ETag per representation) :)

In our case, the ecosystem is quite large (many nodes accessing millions of shared resources).
Assigning 1 ETag to each representation of a resource not only multiplies the number of ETags to manage but it also complicates the invalidation process: instead of simply tracking changes to the bits of the canonical resource we also need to track updates to other part of the systems that may alter the view of the resource for a given node (e.g. policies linked to that resource etc.).

Maybe we should look into weak validators and determine what semantic changes are acceptable...

Cheers,
Hubert


On Aug 14, 2013, at 7:26 AM, Jan Algermissen &lt;jan.algermissen@...&gt; wrote:

&gt; 
&gt; On 14.08.2013, at 16:23, Erik Wilde &lt;dret@...&gt; wrote:
&gt; 
&gt;&gt; hello jan.
&gt;&gt; 
&gt;&gt; On 2013-08-14 16:11 , Jan Algermissen wrote:
&gt;&gt;&gt; On 14.08.2013, at 03:11, Hubert A Le Van Gong &lt;hubertlvg@...&gt; wrote:
&gt;&gt;&gt;&gt; I have a question about associating ETag to resources in a REST-based architecture.
&gt;&gt;&gt;&gt; Would you recommend associating a single ETag to the canonical (i.e. complete) resource or rather use a different ETag for each representations of said resource.
&gt;&gt;&gt;&gt; For instance, if I consider a library (full of books) as a resource. The view of that resource (i.e. the list of books returned) may vary based on the age of the reader (or any other criteria). Should I consider one ETag for the library as a whole or should I create an ETag for each representation returned to each reader?
&gt;&gt;&gt; ETag applies to the representation. If the actual bytes of the representation differ  the ETag must differ.
&gt;&gt; 
&gt;&gt; that's correct for strong ETags (the default), but not the case for weak ETags (which a server can choose to use).
&gt; 
&gt; Ahr yes, forgot these - thanks for point that out.  
&gt; 
&gt; For a deeper discussion: http://www.mnot.net/blog/2007/08/07/etags
&gt; 
&gt; Jan
&gt; 
&gt; 
&gt;&gt; 
&gt;&gt; http://tools.ietf.org/html/rfc2616#section-13.3.3
&gt;&gt; 
&gt;&gt; i'd say that weak ETags are mostly used to have ETags survive non-essential differences (hit counters are the canonical example). it would be interesting to hear whether services are using them for other purposes like the one hubert mentioned.
&gt;&gt; 
&gt;&gt; cheers,
&gt;&gt; 
&gt;&gt; dret.
&gt;&gt; 
&gt;&gt; -- 
&gt;&gt; erik wilde | mailto:dret@...  -  tel:+1-510-2061079 |
&gt;&gt;          | UC Berkeley  -  School of Information (ISchool) |
&gt;&gt;          | http://dret.net/netdret http://twitter.com/dret |
&gt; 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19519<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-08-30 04:55:20<br>
Subject:Fwd: New Version Notification for draft-wilde-home-xml-02.txt<br>
Message:<br><br>
<pre>A new version of I-D, draft-wilde-home-xml-02.txt
has been successfully submitted by Erik Wilde and posted to the
IETF repository.

Filename:	 draft-wilde-home-xml
Revision:	 02
Title:		 Home Documents for HTTP Services: XML Syntax
Creation date:	 2013-08-29
Group:		 Individual Submission
Number of pages: 12
URL: 
http://www.ietf.org/internet-drafts/draft-wilde-home-xml-02.txt
Status:          http://datatracker.ietf.org/doc/draft-wilde-home-xml
Htmlized:        http://tools.ietf.org/html/draft-wilde-home-xml-02
Diff:            http://www.ietf.org/rfcdiff?url2=draft-wilde-home-xml-02

Abstract:
    The current draft for HTTP Home Documents provides a JSON syntax
    only.  This draft provides an XML syntax for the same underlying data
    model, so that the concept of HTTP Home Documents can be consistently
    exposed in both JSON- and XML-based HTTP services.

Note to Readers

    Please discuss this draft on the apps-discuss mailing list [1].
    Online access to all versions and files is available on github [2].

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19520<br>
Sender:Nicholas Shanks &lt;nickshanks@...&gt;<br>
Post Date/Time:2013-09-02 13:17:32<br>
Subject:Re: [rest-discuss] ETag and resource representations<br>
Message:<br><br>
<pre>On 14 August 2013 02:11, Hubert A Le Van Gong &lt;hubertlvg@...&gt; wrote:

&gt; **
&gt;
&gt; For instance, if I consider a library (full of books) as a resource. The
&gt; view of that resource (i.e. the list of books returned) may vary based on
&gt; the age of the reader (or any other criteria).
&gt;

This is a different resource from the whole library and should have a
different URI, such as /library/?age=child
If a child went to /library/ and should not be allowed to see some of the
inappropriate books there then either a 401 or 303 should result, not 2xx
response with a subset of the results an adult would see, as that breaks
caching. (You can jump through hoops to make it work, but changing the URI
is better.)

In my own company's system, I have a resource /jobs that represents the
most recent 30 jobs the company has been awarded. The resource /jobs?page=2
represents jobs 31 to 60. We allow our clients to log in to our system, but
when they click the View Jobs link, they don't go to /jobs (and only see
their own jobs) but to /clients/their-name/jobs Attempts to view other
client's jobs URIs result in a 401 (regardless of whether the client exists
or not, so as not to leak data).

Access control coupled with URI proliferation works with the way the web
operates. Changing representation based on viewer works against it.


-- 
Nicholas.
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19521<br>
Sender:Hubert A Le Van Gong &lt;hubertlvg@...&gt;<br>
Post Date/Time:2013-09-03 23:19:41<br>
Subject:Re: [rest-discuss] ETag and resource representations<br>
Message:<br><br>
<pre>Hi Nicholas,

I'm not sure why I should consider those as different resources. Isn't that what representations are for?
Besides, I'm not sure it makes it easier on the caching management side of things as those different resources are nonetheless linked (if an adult purchases a chid book, both the adult library and the child library resources are impacted).

Thanks,
Hubert

 

On Sep 2, 2013, at 6:17 AM, Nicholas Shanks wrote:

&gt; On 14 August 2013 02:11, Hubert A Le Van Gong &lt;hubertlvg@...&gt; wrote:
&gt; For instance, if I consider a library (full of books) as a resource. The view of that resource (i.e. the list of books returned) may vary based on the age of the reader (or any other criteria).
&gt; 
&gt; 
&gt; This is a different resource from the whole library and should have a different URI, such as /library/?age=child
&gt; If a child went to /library/ and should not be allowed to see some of the inappropriate books there then either a 401 or 303 should result, not 2xx response with a subset of the results an adult would see, as that breaks caching. (You can jump through hoops to make it work, but changing the URI is better.)
&gt; 
&gt; In my own company's system, I have a resource /jobs that represents the most recent 30 jobs the company has been awarded. The resource /jobs?page=2 represents jobs 31 to 60. We allow our clients to log in to our system, but when they click the View Jobs link, they don't go to /jobs (and only see their own jobs) but to /clients/their-name/jobs Attempts to view other client's jobs URIs result in a 401 (regardless of whether the client exists or not, so as not to leak data).
&gt; 
&gt; Access control coupled with URI proliferation works with the way the web operates. Changing representation based on viewer works against it.
&gt; 
&gt; 
&gt; -- 
&gt; Nicholas.

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19522<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-09-07 01:58:29<br>
Subject:Fwd: New Version Notification for draft-wilde-accept-post-01.txt<br>
Message:<br><br>
<pre>changes from -00 to -01 
(http://tools.ietf.org/html/draft-wilde-accept-post-01#section-9.1):

    o  Changed ABNF for header field from RFC 2616 to HTTPbis convention 
(only specify the header field value grammar).
    o  Added implementations (all from the LDP community for now).
    o  Added open issue for aligning accept-post as defined by the "HTTP 
Link Hints" draft.


-------- Original Message --------
Subject: New Version Notification for draft-wilde-accept-post-01.txt
Date: Fri, 06 Sep 2013 18:41:29 -0700
From: internet-drafts@...

A new version of I-D, draft-wilde-accept-post-01.txt
has been successfully submitted by John Arwe and posted to the
IETF repository.

Filename:	 draft-wilde-accept-post
Revision:	 01
Title:		 The Accept-Post HTTP Header
Creation date:	 2013-09-06
Group:		 Individual Submission
Number of pages: 10
URL: 
http://www.ietf.org/internet-drafts/draft-wilde-accept-post-01.txt
Status:          http://datatracker.ietf.org/doc/draft-wilde-accept-post
Htmlized:        http://tools.ietf.org/html/draft-wilde-accept-post-01
Diff:            http://www.ietf.org/rfcdiff?url2=draft-wilde-accept-post-01

Abstract:
    This specification defines a new HTTP response header field Accept-
    Post, which indicates server support for specific media types for
    entity bodies in HTTP POST requests.

Note to Readers

    This draft should be discussed on the apps-discuss mailing list [1].
    Online access to all versions and files is available on github [2].

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19523<br>
Sender:Nicholas Shanks &lt;nickshanks@...&gt;<br>
Post Date/Time:2013-09-12 13:28:47<br>
Subject:Re: [rest-discuss] ETag and resource representations<br>
Message:<br><br>
<pre>On 4 September 2013 00:19, Hubert A Le Van Gong &lt;hubertlvg@...&gt; wrote:

&gt; Hi Nicholas,
&gt;
&gt; I'm not sure why I should consider those as different resources. Isn't that
&gt; what representations are for?

'representations' are different presentations/formats/content-types
showing the same (sub-)set of data. Page 2 does not contain the same
data as page 1, so isn't a different representation per the http
meaning of the noun, but a different resource. The entire library, if
not available via a single URL, is not a (HTTP) resource. (Someone
please correct me if I'm wrong there.)

&gt; Besides, I'm not sure it makes it easier on the caching management side of
&gt; things as those different resources are nonetheless linked (if an adult
&gt; purchases a chid book, both the adult library and the child library
&gt; resources are impacted).

The whole goal of a well-written web service is to improve a cache's
ability to make a match.
You said "The view of that resource (i.e. the list of books returned)
may vary based on the age of the reader (or any other criteria)."
How are you determining what 'view' to return, or put another way, how
do you decide on the "age of the reader"? Are readers users who have
to log in and get a cookie set? Or are readers just a target audience
for the book, and the client is asking for "children's books" through
some query string, the client's age being unknown?
If at the moment you're using something like Vary: Cookie to serve
different pages to different clients, then your resources are not
going to see any caches except the client's browser. Try to eliminate
this if at all possible, perhaps via 303 responses to avoid changing
the referring href.
If you are using query strings to change the books shown, then, as the
query string is part of the URL, and the URL is the minimal key
required to differentiate resources, a different URL means you are
requesting a different resource, and so the URI can be anything you
want, e.g. /childrens-books/ or /library?genre=children%39s

This isn't really relevant to Entity Tags but I thought I should bring it up.

-- 
Nicholas.

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19524<br>
Sender:Glenn Block &lt;glenn.block@...&gt;<br>
Post Date/Time:2013-10-05 10:29:09<br>
Subject:Issue Tracker, a hypermedia API sample using Collection+Json<br>
Message:<br><br>
<pre>Hello folks

For our soon to be release Web Api Book (
http://www.amazon.com/Designing-Evolvable-Web-APIs-ASP-NET/dp/1449337716),
we have a hypermedia sample built in ASP.NET Web API. The app is an issue
tracker API which is designed as a gateway to an issue tracking system like
Github. The app uses my Collection+Json library (
https://www.nuget.org/packages/WebApiContrib.Formatting.CollectionJson.Client/)
 for supporting the CJ format.

It includes BDD style acceptance style tests utilizing the in-memory
hosting feature of Web Api where each test sends an HTTP request message
(without incurring any network traffic).

The app also includes a self-host if you want to test it out with your
favorite HTTP client.

Source is here: https://github.com/webapibook/issuetracker.

Feedback welcome.

Thanks!
Glenn
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19525<br>
Sender:Unmesh Joshi &lt;unmeshjoshi@...&gt;<br>
Post Date/Time:2013-10-05 16:38:12<br>
Subject:202 Response to GET request<br>
Message:<br><br>
<pre>Hi,

I recently came across an API which was returning '202 Accepted' response
to GET request. It seemed a bit odd.
Most asynchronous operations on HTTP implemented with POST request and 202
response.
While HTTP does not mandate 202 response to be returned only to POST
requests, following lines in RFC do indicate, its almost always going to
POST.

"The 202 response is intentionally non-committal. Its purpose is to allow a
server to accept a request for some other process. (perhaps a
batch-oriented process that is only run once per day) without requiring
that the user agent's connection to the server persist until the process is
completed. "

Have anyone come across implementations using 202 response for GET?

Thanks,
Unmesh
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19526<br>
Sender:Glenn Block &lt;glenn.block@...&gt;<br>
Post Date/Time:2013-10-05 17:21:11<br>
Subject:Re: [rest-discuss] 202 Response to GET request<br>
Message:<br><br>
<pre>Seems very odd for the reasons you cited, 202 says your request has
not been processes. The spec also speaks about the location uri pointing to
a monitor. I would not expect the status code of that monitor to be a 202
either.

On Saturday, October 5, 2013, Unmesh Joshi wrote:

&gt; **
&gt;
&gt;
&gt; Hi,
&gt;
&gt; I recently came across an API which was returning '202 Accepted' response
&gt; to GET request. It seemed a bit odd.
&gt; Most asynchronous operations on HTTP implemented with POST request and 202
&gt; response.
&gt; While HTTP does not mandate 202 response to be returned only to POST
&gt; requests, following lines in RFC do indicate, its almost always going to
&gt; POST.
&gt;
&gt; "The 202 response is intentionally non-committal. Its purpose is to allow
&gt; a server to accept a request for some other process. (perhaps a
&gt; batch-oriented process that is only run once per day) without requiring
&gt; that the user agent's connection to the server persist until the process is
&gt; completed. "
&gt;
&gt; Have anyone come across implementations using 202 response for GET?
&gt;
&gt; Thanks,
&gt; Unmesh
&gt;
&gt;  
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19527<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-10-05 17:42:35<br>
Subject:Re: [rest-discuss] 202 Response to GET request<br>
Message:<br><br>
<pre>
On 05.10.2013, at 19:21, Glenn Block &lt;glenn.block@...&gt; wrote:

&gt; Seems very odd for the reasons you cited, 202 says your request has not been processes. The spec also speaks about the location uri pointing to a monitor. I would not expect the status code of that monitor to be a 202 either.

No, that resource provides you with information about the status of the processing of the other request.


Maybe:

GET /account/jim/downloads/someLargeBoolAsPdf.pdf

202 Accepted
Location: /account/jim/downloads
Content-Type: text/plain

Thank you for requesting this download - you PDF is being created. Please visit your downloads overview page to check the status of the PDF generation.



Jan



&gt; 
&gt; 
&gt; On Saturday, October 5, 2013, Unmesh Joshi wrote:
&gt;  
&gt; 
&gt; Hi,
&gt; 
&gt; I recently came across an API which was returning '202 Accepted' response to GET request. It seemed a bit odd. 
&gt; Most asynchronous operations on HTTP implemented with POST request and 202 response. 
&gt; While HTTP does not mandate 202 response to be returned only to POST requests, following lines in RFC do indicate, its almost always going to POST.
&gt; 
&gt; "The 202 response is intentionally non-committal. Its purpose is to allow a server to accept a request for some other process. (perhaps a batch-oriented process that is only run once per day) without requiring that the user agent's connection to the server persist until the process is completed. " 
&gt; 
&gt; Have anyone come across implementations using 202 response for GET?
&gt; 
&gt; Thanks,
&gt; Unmesh
&gt; 
&gt; 
&gt; 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19528<br>
Sender:Glenn Block &lt;glenn.block@...&gt;<br>
Post Date/Time:2013-10-05 18:01:47<br>
Subject:Re: [rest-discuss] 202 Response to GET request<br>
Message:<br><br>
<pre>Hmm, you are suggesting it is valid, I read as relating to an unsafe method
ie that performs some work. GET is always safe, I agree querying for a
status is not causing a side effect but still.

On Saturday, October 5, 2013, Jan Algermissen wrote:

&gt;
&gt; On 05.10.2013, at 19:21, Glenn Block &lt;glenn.block@... &lt;javascript:;&gt;&gt;
&gt; wrote:
&gt;
&gt; &gt; Seems very odd for the reasons you cited, 202 says your request has not
&gt; been processes. The spec also speaks about the location uri pointing to a
&gt; monitor. I would not expect the status code of that monitor to be a 202
&gt; either.
&gt;
&gt; No, that resource provides you with information about the status of the
&gt; processing of the other request.
&gt;
&gt;
&gt; Maybe:
&gt;
&gt; GET /account/jim/downloads/someLargeBoolAsPdf.pdf
&gt;
&gt; 202 Accepted
&gt; Location: /account/jim/downloads
&gt; Content-Type: text/plain
&gt;
&gt; Thank you for requesting this download - you PDF is being created. Please
&gt; visit your downloads overview page to check the status of the PDF
&gt; generation.
&gt;
&gt;
&gt;
&gt; Jan
&gt;
&gt;
&gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; On Saturday, October 5, 2013, Unmesh Joshi wrote:
&gt; &gt;
&gt; &gt;
&gt; &gt; Hi,
&gt; &gt;
&gt; &gt; I recently came across an API which was returning '202 Accepted'
&gt; response to GET request. It seemed a bit odd.
&gt; &gt; Most asynchronous operations on HTTP implemented with POST request and
&gt; 202 response.
&gt; &gt; While HTTP does not mandate 202 response to be returned only to POST
&gt; requests, following lines in RFC do indicate, its almost always going to
&gt; POST.
&gt; &gt;
&gt; &gt; "The 202 response is intentionally non-committal. Its purpose is to
&gt; allow a server to accept a request for some other process. (perhaps a
&gt; batch-oriented process that is only run once per day) without requiring
&gt; that the user agent's connection to the server persist until the process is
&gt; completed. "
&gt; &gt;
&gt; &gt; Have anyone come across implementations using 202 response for GET?
&gt; &gt;
&gt; &gt; Thanks,
&gt; &gt; Unmesh
&gt; &gt;
&gt; &gt;
&gt; &gt; 
&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19529<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-10-05 18:08:04<br>
Subject:Re: [rest-discuss] 202 Response to GET request<br>
Message:<br><br>
<pre>
On 05.10.2013, at 20:01, Glenn Block &lt;glenn.block@...&gt; wrote:

&gt; Hmm, you are suggesting it is valid, I read as relating to an unsafe method ie that performs some work.

Yes - that is why I wrote 'Maybe' :-) However, the GET would still be idempotent and safe - the client can safely call the GET on the pdf URL as often as it wants and the fact that a background process has been started for the first GET is not of concern to the client.

All that with some caveat, I am not sure I'll agree with this in a couple of hours :-)

Jan


&gt; GET is always safe, I agree querying for a status is not causing a side effect but still.
&gt; 
&gt; On Saturday, October 5, 2013, Jan Algermissen wrote:
&gt; 
&gt; On 05.10.2013, at 19:21, Glenn Block &lt;glenn.block@gmail.com&gt; wrote:
&gt; 
&gt; &gt; Seems very odd for the reasons you cited, 202 says your request has not been processes. The spec also speaks about the location uri pointing to a monitor. I would not expect the status code of that monitor to be a 202 either.
&gt; 
&gt; No, that resource provides you with information about the status of the processing of the other request.
&gt; 
&gt; 
&gt; Maybe:
&gt; 
&gt; GET /account/jim/downloads/someLargeBoolAsPdf.pdf
&gt; 
&gt; 202 Accepted
&gt; Location: /account/jim/downloads
&gt; Content-Type: text/plain
&gt; 
&gt; Thank you for requesting this download - you PDF is being created. Please visit your downloads overview page to check the status of the PDF generation.
&gt; 
&gt; 
&gt; 
&gt; Jan
&gt; 
&gt; 
&gt; 
&gt; &gt;
&gt; &gt;
&gt; &gt; On Saturday, October 5, 2013, Unmesh Joshi wrote:
&gt; &gt;
&gt; &gt;
&gt; &gt; Hi,
&gt; &gt;
&gt; &gt; I recently came across an API which was returning '202 Accepted' response to GET request. It seemed a bit odd.
&gt; &gt; Most asynchronous operations on HTTP implemented with POST request and 202 response.
&gt; &gt; While HTTP does not mandate 202 response to be returned only to POST requests, following lines in RFC do indicate, its almost always going to POST.
&gt; &gt;
&gt; &gt; "The 202 response is intentionally non-committal. Its purpose is to allow a server to accept a request for some other process. (perhaps a batch-oriented process that is only run once per day) without requiring that the user agent's connection to the server persist until the process is completed. "
&gt; &gt;
&gt; &gt; Have anyone come across implementations using 202 response for GET?
&gt; &gt;
&gt; &gt; Thanks,
&gt; &gt; Unmesh
&gt; &gt;
&gt; &gt;
&gt; &gt; 
&gt; 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19530<br>
Sender:Glenn Block &lt;glenn.block@...&gt;<br>
Post Date/Time:2013-10-05 18:15:07<br>
Subject:Re: [rest-discuss] 202 Response to GET request<br>
Message:<br><br>
<pre>Yes on querying the resource but isn't that the entire reason for returning
the monitor uri? ie 'go here to check the status' ?

On Saturday, October 5, 2013, Jan Algermissen wrote:

&gt;
&gt; On 05.10.2013, at 20:01, Glenn Block &lt;glenn.block@... &lt;javascript:;&gt;&gt;
&gt; wrote:
&gt;
&gt; &gt; Hmm, you are suggesting it is valid, I read as relating to an unsafe
&gt; method ie that performs some work.
&gt;
&gt; Yes - that is why I wrote 'Maybe' :-) However, the GET would still be
&gt; idempotent and safe - the client can safely call the GET on the pdf URL as
&gt; often as it wants and the fact that a background process has been started
&gt; for the first GET is not of concern to the client.
&gt;
&gt; All that with some caveat, I am not sure I'll agree with this in a couple
&gt; of hours :-)
&gt;
&gt; Jan
&gt;
&gt;
&gt; &gt; GET is always safe, I agree querying for a status is not causing a side
&gt; effect but still.
&gt; &gt;
&gt; &gt; On Saturday, October 5, 2013, Jan Algermissen wrote:
&gt; &gt;
&gt; &gt; On 05.10.2013, at 19:21, Glenn Block &lt;glenn.block@...&lt;javascript:;&gt;&gt;
&gt; wrote:
&gt; &gt;
&gt; &gt; &gt; Seems very odd for the reasons you cited, 202 says your request has
&gt; not been processes. The spec also speaks about the location uri pointing to
&gt; a monitor. I would not expect the status code of that monitor to be a 202
&gt; either.
&gt; &gt;
&gt; &gt; No, that resource provides you with information about the status of the
&gt; processing of the other request.
&gt; &gt;
&gt; &gt;
&gt; &gt; Maybe:
&gt; &gt;
&gt; &gt; GET /account/jim/downloads/someLargeBoolAsPdf.pdf
&gt; &gt;
&gt; &gt; 202 Accepted
&gt; &gt; Location: /account/jim/downloads
&gt; &gt; Content-Type: text/plain
&gt; &gt;
&gt; &gt; Thank you for requesting this download - you PDF is being created.
&gt; Please visit your downloads overview page to check the status of the PDF
&gt; generation.
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; Jan
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; On Saturday, October 5, 2013, Unmesh Joshi wrote:
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; Hi,
&gt; &gt; &gt;
&gt; &gt; &gt; I recently came across an API which was returning '202 Accepted'
&gt; response to GET request. It seemed a bit odd.
&gt; &gt; &gt; Most asynchronous operations on HTTP implemented with POST request and
&gt; 202 response.
&gt; &gt; &gt; While HTTP does not mandate 202 response to be returned only to POST
&gt; requests, following lines in RFC do indicate, its almost always going to
&gt; POST.
&gt; &gt; &gt;
&gt; &gt; &gt; "The 202 response is intentionally non-committal. Its purpose is to
&gt; allow a server to accept a request for some other process. (perhaps a
&gt; batch-oriented process that is only run once per day) without requiring
&gt; that the user agent's connection to the server persist until the process is
&gt; completed. "
&gt; &gt; &gt;
&gt; &gt; &gt; Have anyone come across implementations using 202 response for GET?
&gt; &gt; &gt;
&gt; &gt; &gt; Thanks,
&gt; &gt; &gt; Unmesh
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; 
&gt; &gt;
&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19531<br>
Sender:"Eric J. Bowman" &lt;eric@...&gt;<br>
Post Date/Time:2013-10-05 20:12:44<br>
Subject:Re: [rest-discuss] 202 Response to GET request<br>
Message:<br><br>
<pre>Unmesh Joshi wrote:
&gt; 
&gt; I recently came across an API which was returning '202 Accepted'
&gt; response to GET request. It seemed a bit odd.
&gt;

I don't want to rule out a 202 response to a GET, but if the response
is the same as one would expect to receive with a 200 then it's a
borked server.  Without going into details, a 200 should be a 200,
plain and simple.

-Eric

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19532<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-10-06 18:34:02<br>
Subject:Re: [rest-discuss] 202 Response to GET request<br>
Message:<br><br>
<pre>
On 05.10.2013, at 20:15, Glenn Block &lt;glenn.block@...&gt; wrote:

&gt; Yes on querying the resource but isn't that the entire reason for returning the monitor uri? ie 'go here to check the status' ?

Hmm, yes. But I meant that the GET on the PDF-URI is still idempotent and safe from the POV of the client ... even if the first GET starts the generation and returns a 202.

However, it was all just a remark in what case you *might* maybe uses a 202 for a GET :-)

Jan

&gt; 
&gt; On Saturday, October 5, 2013, Jan Algermissen wrote:
&gt; 
&gt; 
&gt; On 05.10.2013, at 20:01, Glenn Block &lt;glenn.block@...&gt; wrote:
&gt; 
&gt; &gt; Hmm, you are suggesting it is valid, I read as relating to an unsafe method ie that performs some work.
&gt; 
&gt; Yes - that is why I wrote 'Maybe' :-) However, the GET would still be idempotent and safe - the client can safely call the GET on the pdf URL as often as it wants and the fact that a background process has been started for the first GET is not of concern to the client.
&gt; 
&gt; All that with some caveat, I am not sure I'll agree with this in a couple of hours :-)
&gt; 
&gt; Jan
&gt; 
&gt; 
&gt; &gt; GET is always safe, I agree querying for a status is not causing a side effect but still.
&gt; &gt;
&gt; &gt; On Saturday, October 5, 2013, Jan Algermissen wrote:
&gt; &gt;
&gt; &gt; On 05.10.2013, at 19:21, Glenn Block &lt;glenn.block@...&gt; wrote:
&gt; &gt;
&gt; &gt; &gt; Seems very odd for the reasons you cited, 202 says your request has not been processes. The spec also speaks about the location uri pointing to a monitor. I would not expect the status code of that monitor to be a 202 either.
&gt; &gt;
&gt; &gt; No, that resource provides you with information about the status of the processing of the other request.
&gt; &gt;
&gt; &gt;
&gt; &gt; Maybe:
&gt; &gt;
&gt; &gt; GET /account/jim/downloads/someLargeBoolAsPdf.pdf
&gt; &gt;
&gt; &gt; 202 Accepted
&gt; &gt; Location: /account/jim/downloads
&gt; &gt; Content-Type: text/plain
&gt; &gt;
&gt; &gt; Thank you for requesting this download - you PDF is being created. Please visit your downloads overview page to check the status of the PDF generation.
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; Jan
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; On Saturday, October 5, 2013, Unmesh Joshi wrote:
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; Hi,
&gt; &gt; &gt;
&gt; &gt; &gt; I recently came across an API which was returning '202 Accepted' response to GET request. It seemed a bit odd.
&gt; &gt; &gt; Most asynchronous operations on HTTP implemented with POST request and 202 response.
&gt; &gt; &gt; While HTTP does not mandate 202 response to be returned only to POST requests, following lines in RFC do indicate, its almost always going to POST.
&gt; &gt; &gt;
&gt; &gt; &gt; "The 202 response is intentionally non-committal. Its purpose is to allow a server to accept a request for some other process. (perhaps a batch-oriented process that is only run once per day) without requiring that the user agent's connection to the server persist until the process is completed. "
&gt; &gt; &gt;
&gt; &gt; &gt; Have anyone come across implementations using 202 response for GET?
&gt; &gt; &gt;
&gt; &gt; &gt; Thanks,
&gt; &gt; &gt; Unmesh
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; 
&gt; &gt;
&gt; 
&gt; 
&gt; 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19533<br>
Sender:Glenn Block &lt;glenn.block@...&gt;<br>
Post Date/Time:2013-10-06 18:40:55<br>
Subject:Re: [rest-discuss] 202 Response to GET request<br>
Message:<br><br>
<pre>Yes I understand the GET is safe. My question / point, is 202 valid for a
safe method that is doing no work?


On Sun, Oct 6, 2013 at 11:34 AM, Jan Algermissen &lt;jan.algermissen@...
&gt; wrote:

&gt;
&gt; On 05.10.2013, at 20:15, Glenn Block &lt;glenn.block@...&gt; wrote:
&gt;
&gt; &gt; Yes on querying the resource but isn't that the entire reason for
&gt; returning the monitor uri? ie 'go here to check the status' ?
&gt;
&gt; Hmm, yes. But I meant that the GET on the PDF-URI is still idempotent and
&gt; safe from the POV of the client ... even if the first GET starts the
&gt; generation and returns a 202.
&gt;
&gt; However, it was all just a remark in what case you *might* maybe uses a
&gt; 202 for a GET :-)
&gt;
&gt; Jan
&gt;
&gt; &gt;
&gt; &gt; On Saturday, October 5, 2013, Jan Algermissen wrote:
&gt; &gt;
&gt; &gt;
&gt; &gt; On 05.10.2013, at 20:01, Glenn Block &lt;glenn.block@...&gt; wrote:
&gt; &gt;
&gt; &gt; &gt; Hmm, you are suggesting it is valid, I read as relating to an unsafe
&gt; method ie that performs some work.
&gt; &gt;
&gt; &gt; Yes - that is why I wrote 'Maybe' :-) However, the GET would still be
&gt; idempotent and safe - the client can safely call the GET on the pdf URL as
&gt; often as it wants and the fact that a background process has been started
&gt; for the first GET is not of concern to the client.
&gt; &gt;
&gt; &gt; All that with some caveat, I am not sure I'll agree with this in a
&gt; couple of hours :-)
&gt; &gt;
&gt; &gt; Jan
&gt; &gt;
&gt; &gt;
&gt; &gt; &gt; GET is always safe, I agree querying for a status is not causing a
&gt; side effect but still.
&gt; &gt; &gt;
&gt; &gt; &gt; On Saturday, October 5, 2013, Jan Algermissen wrote:
&gt; &gt; &gt;
&gt; &gt; &gt; On 05.10.2013, at 19:21, Glenn Block &lt;glenn.block@...&gt; wrote:
&gt; &gt; &gt;
&gt; &gt; &gt; &gt; Seems very odd for the reasons you cited, 202 says your request has
&gt; not been processes. The spec also speaks about the location uri pointing to
&gt; a monitor. I would not expect the status code of that monitor to be a 202
&gt; either.
&gt; &gt; &gt;
&gt; &gt; &gt; No, that resource provides you with information about the status of
&gt; the processing of the other request.
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; Maybe:
&gt; &gt; &gt;
&gt; &gt; &gt; GET /account/jim/downloads/someLargeBoolAsPdf.pdf
&gt; &gt; &gt;
&gt; &gt; &gt; 202 Accepted
&gt; &gt; &gt; Location: /account/jim/downloads
&gt; &gt; &gt; Content-Type: text/plain
&gt; &gt; &gt;
&gt; &gt; &gt; Thank you for requesting this download - you PDF is being created.
&gt; Please visit your downloads overview page to check the status of the PDF
&gt; generation.
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; Jan
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; On Saturday, October 5, 2013, Unmesh Joshi wrote:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Hi,
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I recently came across an API which was returning '202 Accepted'
&gt; response to GET request. It seemed a bit odd.
&gt; &gt; &gt; &gt; Most asynchronous operations on HTTP implemented with POST request
&gt; and 202 response.
&gt; &gt; &gt; &gt; While HTTP does not mandate 202 response to be returned only to POST
&gt; requests, following lines in RFC do indicate, its almost always going to
&gt; POST.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; "The 202 response is intentionally non-committal. Its purpose is to
&gt; allow a server to accept a request for some other process. (perhaps a
&gt; batch-oriented process that is only run once per day) without requiring
&gt; that the user agent's connection to the server persist until the process is
&gt; completed. "
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Have anyone come across implementations using 202 response for GET?
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Thanks,
&gt; &gt; &gt; &gt; Unmesh
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; 
&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19534<br>
Sender:Unmesh Joshi &lt;unmeshjoshi@...&gt;<br>
Post Date/Time:2013-10-07 05:01:57<br>
Subject:Re: [rest-discuss] 202 Response to GET request<br>
Message:<br><br>
<pre>There are three things to consider.

First, What is the reason for which 202 status code is added in HTTP?

"Its purpose is to allow a server to accept a request for some other
process. (perhaps a batch-oriented process that is only run once per day)
without requiring that the user agent's connection to the server persist
until the process is completed."

Accepting the request for other process, most times wont be a GET.  If
its modeled as a GET, the modelling of the HTTP GET handler on the server
becomes non trivial, and extra care needs to be taken to make sure the
handling is idempotent and safe. (e.g. multiple requests for the same
resource are not causing multiple entries in queue to generate the
resource).

202 response is generally used for making operations asynchronous if the
resource construction  is too slow. e.g. if /search is too slow (not
returning in say 5 minutes), because of resource constraints on the server
side (whatever they might be).
In these cases, by design, a new request resource is created on the server
which is handled by a scheduled process.

Using GET in these cases, seems wrong, from modelling point of view.

Second thing to consider is if its valid according to HTTP standard to
return 202 response code for a GET request.
The answer is yes, as HTTP standard, does not put any constraint on the
response codes returned for GET.

Third thing to consider is, whats is the accepted idiom used for such
designs in the community.  Some examples out there
https://www.tbray.org/ongoing/When/200x/2009/07/02/Slow-REST and also
http://www.amazon.com/REST-Practice-Hypermedia-Systems-Architecture/dp/0596805829.
seem to suggest its POST - 202 polling, as an idiom that's generally used.

 Thanks,
Unmesh

Thanks,
Unmesh






On Mon, Oct 7, 2013 at 12:10 AM, Glenn Block &lt;glenn.block@...&gt; wrote:

&gt; Yes I understand the GET is safe. My question / point, is 202 valid for a
&gt; safe method that is doing no work?
&gt;
&gt;
&gt; On Sun, Oct 6, 2013 at 11:34 AM, Jan Algermissen &lt;
&gt; jan.algermissen@...&gt; wrote:
&gt;
&gt;&gt;
&gt;&gt; On 05.10.2013, at 20:15, Glenn Block &lt;glenn.block@...&gt; wrote:
&gt;&gt;
&gt;&gt; &gt; Yes on querying the resource but isn't that the entire reason for
&gt;&gt; returning the monitor uri? ie 'go here to check the status' ?
&gt;&gt;
&gt;&gt; Hmm, yes. But I meant that the GET on the PDF-URI is still idempotent and
&gt;&gt; safe from the POV of the client ... even if the first GET starts the
&gt;&gt; generation and returns a 202.
&gt;&gt;
&gt;&gt; However, it was all just a remark in what case you *might* maybe uses a
&gt;&gt; 202 for a GET :-)
&gt;&gt;
&gt;&gt; Jan
&gt;&gt;
&gt;&gt; &gt;
&gt;&gt; &gt; On Saturday, October 5, 2013, Jan Algermissen wrote:
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; On 05.10.2013, at 20:01, Glenn Block &lt;glenn.block@...&gt; wrote:
&gt;&gt; &gt;
&gt;&gt; &gt; &gt; Hmm, you are suggesting it is valid, I read as relating to an unsafe
&gt;&gt; method ie that performs some work.
&gt;&gt; &gt;
&gt;&gt; &gt; Yes - that is why I wrote 'Maybe' :-) However, the GET would still be
&gt;&gt; idempotent and safe - the client can safely call the GET on the pdf URL as
&gt;&gt; often as it wants and the fact that a background process has been started
&gt;&gt; for the first GET is not of concern to the client.
&gt;&gt; &gt;
&gt;&gt; &gt; All that with some caveat, I am not sure I'll agree with this in a
&gt;&gt; couple of hours :-)
&gt;&gt; &gt;
&gt;&gt; &gt; Jan
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; &gt; GET is always safe, I agree querying for a status is not causing a
&gt;&gt; side effect but still.
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; On Saturday, October 5, 2013, Jan Algermissen wrote:
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; On 05.10.2013, at 19:21, Glenn Block &lt;glenn.block@...&gt; wrote:
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; Seems very odd for the reasons you cited, 202 says your request has
&gt;&gt; not been processes. The spec also speaks about the location uri pointing to
&gt;&gt; a monitor. I would not expect the status code of that monitor to be a 202
&gt;&gt; either.
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; No, that resource provides you with information about the status of
&gt;&gt; the processing of the other request.
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; Maybe:
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; GET /account/jim/downloads/someLargeBoolAsPdf.pdf
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; 202 Accepted
&gt;&gt; &gt; &gt; Location: /account/jim/downloads
&gt;&gt; &gt; &gt; Content-Type: text/plain
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; Thank you for requesting this download - you PDF is being created.
&gt;&gt; Please visit your downloads overview page to check the status of the PDF
&gt;&gt; generation.
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; Jan
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; On Saturday, October 5, 2013, Unmesh Joshi wrote:
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; Hi,
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; I recently came across an API which was returning '202 Accepted'
&gt;&gt; response to GET request. It seemed a bit odd.
&gt;&gt; &gt; &gt; &gt; Most asynchronous operations on HTTP implemented with POST request
&gt;&gt; and 202 response.
&gt;&gt; &gt; &gt; &gt; While HTTP does not mandate 202 response to be returned only to
&gt;&gt; POST requests, following lines in RFC do indicate, its almost always going
&gt;&gt; to POST.
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; "The 202 response is intentionally non-committal. Its purpose is to
&gt;&gt; allow a server to accept a request for some other process. (perhaps a
&gt;&gt; batch-oriented process that is only run once per day) without requiring
&gt;&gt; that the user agent's connection to the server persist until the process is
&gt;&gt; completed. "
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; Have anyone come across implementations using 202 response for GET?
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; Thanks,
&gt;&gt; &gt; &gt; &gt; Unmesh
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; 
&gt;&gt;
&gt;&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19535<br>
Sender:Glenn Block &lt;glenn.block@...&gt;<br>
Post Date/Time:2013-10-07 05:35:06<br>
Subject:Re: [rest-discuss] 202 Response to GET request<br>
Message:<br><br>
<pre>No argument from me :-)


On Sun, Oct 6, 2013 at 10:01 PM, Unmesh Joshi &lt;unmeshjoshi@...&gt; wrote:

&gt; There are three things to consider.
&gt;
&gt; First, What is the reason for which 202 status code is added in HTTP?
&gt;
&gt; "Its purpose is to allow a server to accept a request for some other
&gt; process. (perhaps a batch-oriented process that is only run once per day)
&gt; without requiring that the user agent's connection to the server persist
&gt; until the process is completed."
&gt;
&gt; Accepting the request for other process, most times wont be a GET.  If
&gt; its modeled as a GET, the modelling of the HTTP GET handler on the server
&gt; becomes non trivial, and extra care needs to be taken to make sure the
&gt; handling is idempotent and safe. (e.g. multiple requests for the same
&gt; resource are not causing multiple entries in queue to generate the
&gt; resource).
&gt;
&gt; 202 response is generally used for making operations asynchronous if the
&gt; resource construction  is too slow. e.g. if /search is too slow (not
&gt; returning in say 5 minutes), because of resource constraints on the server
&gt; side (whatever they might be).
&gt; In these cases, by design, a new request resource is created on the server
&gt; which is handled by a scheduled process.
&gt;
&gt; Using GET in these cases, seems wrong, from modelling point of view.
&gt;
&gt; Second thing to consider is if its valid according to HTTP standard to
&gt; return 202 response code for a GET request.
&gt; The answer is yes, as HTTP standard, does not put any constraint on the
&gt; response codes returned for GET.
&gt;
&gt; Third thing to consider is, whats is the accepted idiom used for such
&gt; designs in the community.  Some examples out there
&gt; https://www.tbray.org/ongoing/When/200x/2009/07/02/Slow-REST and also
&gt; http://www.amazon.com/REST-Practice-Hypermedia-Systems-Architecture/dp/0596805829.
&gt; seem to suggest its POST - 202 polling, as an idiom that's generally used.
&gt;
&gt;  Thanks,
&gt; Unmesh
&gt;
&gt; Thanks,
&gt; Unmesh
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; On Mon, Oct 7, 2013 at 12:10 AM, Glenn Block &lt;glenn.block@...&gt;wrote:
&gt;
&gt;&gt; Yes I understand the GET is safe. My question / point, is 202 valid for a
&gt;&gt; safe method that is doing no work?
&gt;&gt;
&gt;&gt;
&gt;&gt; On Sun, Oct 6, 2013 at 11:34 AM, Jan Algermissen &lt;
&gt;&gt; jan.algermissen@...&gt; wrote:
&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On 05.10.2013, at 20:15, Glenn Block &lt;glenn.block@...&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt; &gt; Yes on querying the resource but isn't that the entire reason for
&gt;&gt;&gt; returning the monitor uri? ie 'go here to check the status' ?
&gt;&gt;&gt;
&gt;&gt;&gt; Hmm, yes. But I meant that the GET on the PDF-URI is still idempotent
&gt;&gt;&gt; and safe from the POV of the client ... even if the first GET starts the
&gt;&gt;&gt; generation and returns a 202.
&gt;&gt;&gt;
&gt;&gt;&gt; However, it was all just a remark in what case you *might* maybe uses a
&gt;&gt;&gt; 202 for a GET :-)
&gt;&gt;&gt;
&gt;&gt;&gt; Jan
&gt;&gt;&gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; On Saturday, October 5, 2013, Jan Algermissen wrote:
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; On 05.10.2013, at 20:01, Glenn Block &lt;glenn.block@...&gt; wrote:
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; &gt; Hmm, you are suggesting it is valid, I read as relating to an unsafe
&gt;&gt;&gt; method ie that performs some work.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Yes - that is why I wrote 'Maybe' :-) However, the GET would still be
&gt;&gt;&gt; idempotent and safe - the client can safely call the GET on the pdf URL as
&gt;&gt;&gt; often as it wants and the fact that a background process has been started
&gt;&gt;&gt; for the first GET is not of concern to the client.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; All that with some caveat, I am not sure I'll agree with this in a
&gt;&gt;&gt; couple of hours :-)
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Jan
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; &gt; GET is always safe, I agree querying for a status is not causing a
&gt;&gt;&gt; side effect but still.
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; On Saturday, October 5, 2013, Jan Algermissen wrote:
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; On 05.10.2013, at 19:21, Glenn Block &lt;glenn.block@...&gt; wrote:
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; Seems very odd for the reasons you cited, 202 says your request
&gt;&gt;&gt; has not been processes. The spec also speaks about the location uri
&gt;&gt;&gt; pointing to a monitor. I would not expect the status code of that monitor
&gt;&gt;&gt; to be a 202 either.
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; No, that resource provides you with information about the status of
&gt;&gt;&gt; the processing of the other request.
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; Maybe:
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; GET /account/jim/downloads/someLargeBoolAsPdf.pdf
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; 202 Accepted
&gt;&gt;&gt; &gt; &gt; Location: /account/jim/downloads
&gt;&gt;&gt; &gt; &gt; Content-Type: text/plain
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; Thank you for requesting this download - you PDF is being created.
&gt;&gt;&gt; Please visit your downloads overview page to check the status of the PDF
&gt;&gt;&gt; generation.
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; Jan
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; On Saturday, October 5, 2013, Unmesh Joshi wrote:
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; Hi,
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; I recently came across an API which was returning '202 Accepted'
&gt;&gt;&gt; response to GET request. It seemed a bit odd.
&gt;&gt;&gt; &gt; &gt; &gt; Most asynchronous operations on HTTP implemented with POST request
&gt;&gt;&gt; and 202 response.
&gt;&gt;&gt; &gt; &gt; &gt; While HTTP does not mandate 202 response to be returned only to
&gt;&gt;&gt; POST requests, following lines in RFC do indicate, its almost always going
&gt;&gt;&gt; to POST.
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; "The 202 response is intentionally non-committal. Its purpose is
&gt;&gt;&gt; to allow a server to accept a request for some other process. (perhaps a
&gt;&gt;&gt; batch-oriented process that is only run once per day) without requiring
&gt;&gt;&gt; that the user agent's connection to the server persist until the process is
&gt;&gt;&gt; completed. "
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; Have anyone come across implementations using 202 response for GET?
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; Thanks,
&gt;&gt;&gt; &gt; &gt; &gt; Unmesh
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; 
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19536<br>
Sender:Thomas Koch &lt;thomas@...&gt;<br>
Post Date/Time:2013-10-25 06:56:19<br>
Subject:trailing slash for collection URIs?<br>
Message:<br><br>
<pre>Hi,

this might be a hard to decide question like spaces vs. tabs: I might have an
addressbook web application that has mainly two sites

/myapp/contacts (or /myapp/contacts/ ?)
/myapp/contacts/{id}

Should the /myapp/contacts URI have a trailing slash or not?

From an implementation perspective I like the trailing slash so that I can
just use the contact id as a relative URI from the collection resource. But on
the other site a collection might also be a resource?

Thank you for any recommendation!

Best regards, Thomas Koch

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19537<br>
Sender:"Markus Lanthaler" &lt;markus.lanthaler@...&gt;<br>
Post Date/Time:2013-10-25 14:07:42<br>
Subject:RE: [rest-discuss] trailing slash for collection URIs?<br>
Message:<br><br>
<pre>On Friday, October 25, 2013 8:56 AM, Thomas Koch wrote:
&gt; this might be a hard to decide question like spaces vs. tabs: I might
&gt; have an
&gt; addressbook web application that has mainly two sites
&gt; 
&gt; /myapp/contacts (or /myapp/contacts/ ?)
&gt; /myapp/contacts/{id}
&gt; 
&gt; Should the /myapp/contacts URI have a trailing slash or not?

Thomas, you will always get the same answer to questions like this: the URI
is an opaque identifier and a such it doesn't matter at all whether it
includes a trailing slash or not. But as you say...


&gt; From an implementation perspective I like the trailing slash so that I can
&gt; just use the contact id as a relative URI from the collection resource.

.. it may have some positive side effects choosing a specifically structured
URI. If it simplifies your implementation, go for it.


&gt; But on
&gt; the other site a collection might also be a resource?

A trailing slash doesn't mean that it isn't a resource anymore. It's a
resource just like everything else identified with a URI.


HTH,
Markus


--
Markus Lanthaler
@markuslanthaler


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19538<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-10-28 10:06:08<br>
Subject:Re: [rest-discuss] trailing slash for collection URIs?<br>
Message:<br><br>
<pre>Thomas,

On 25.10.2013, at 08:56, Thomas Koch &lt;thomas@...&gt; wrote:

&gt; Hi,
&gt; 
&gt; this might be a hard to decide question like spaces vs. tabs: I might have an 
&gt; addressbook web application that has mainly two sites
&gt; 
&gt; /myapp/contacts (or /myapp/contacts/ ?)
&gt; /myapp/contacts/{id}
&gt; 
&gt; Should the /myapp/contacts URI have a trailing slash or not?

Personally, I prefer to go without the slash and anyhow, use absolute URIs everywhere for the sake of easier debugging 'by hand'.

Whatever you chose, you might consider to redirect from one solution to the other, e.g. from /contacts/ to /contacts to free
clients from needing to make the distinction. For example, when posting to /contacts/

Jan

&gt; 
&gt; From an implementation perspective I like the trailing slash so that I can 
&gt; just use the contact id as a relative URI from the collection resource. But on 
&gt; the other site a collection might also be a resource?
&gt; 
&gt; Thank you for any recommendation!
&gt; 
&gt; Best regards, Thomas Koch
&gt; 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19539<br>
Sender:Nicholas Shanks &lt;nickshanks@...&gt;<br>
Post Date/Time:2013-10-29 10:53:42<br>
Subject:Re: [rest-discuss] trailing slash for collection URIs?<br>
Message:<br><br>
<pre>As others have said, it's really a matter of personal preference.

1) I think /contacts?city=London looks nicer than /contacts/?city=London
2) It's easier (as you cite) to use relative URLs
3) You shouldn't be doing that anyway. Design your system so that it always
spits out absolute URLs and you'll not have this issue (gzip will compress
the differences away).

Just 'cos a URL has a slash doesn't make it not a resource!



On 25 October 2013 07:56, Thomas Koch &lt;thomas@...&gt; wrote:

&gt; **
&gt;
&gt;
&gt; Hi,
&gt;
&gt; this might be a hard to decide question like spaces vs. tabs: I might have
&gt; an
&gt; addressbook web application that has mainly two sites
&gt;
&gt; /myapp/contacts (or /myapp/contacts/ ?)
&gt; /myapp/contacts/{id}
&gt;
&gt; Should the /myapp/contacts URI have a trailing slash or not?
&gt;
&gt; From an implementation perspective I like the trailing slash so that I can
&gt; just use the contact id as a relative URI from the collection resource.
&gt; But on
&gt; the other site a collection might also be a resource?
&gt;
&gt; Thank you for any recommendation!
&gt;
&gt; Best regards, Thomas Koch
&gt;  
&gt;
&gt; --
&gt; Nicholas.
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19540<br>
Sender:Charles Reese &lt;charles.reese@...&gt;<br>
Post Date/Time:2013-11-06 02:52:59<br>
Subject:Link Relations<br>
Message:<br><br>
<pre>Hi all,

I'm looking at HAL and Collection+JSON for an API I'm building. I was
wondering if there are any community norms for constructing link relations.

Here is what I'm considering:

Option 1:

/rels/playlists
/rels/playlist
/rels/playlist/insert-song
/rels/playlist/remove-song

Option 2:

/rels/playlist
/rels/playlist/create
/rels/playlist/edit
/rels/playlist/delete
/rels/playlist/insert-song
/rels/playlist/remove-song

Option 3:

list
create
edit
delete
insert-song
remove-song

The first option mixes the singular and plural for items and collections.
Then it tacks on a few actions for what doesn't fit well with CRUD. The
last option makes the state transitions explicit (but doesn't allow linking
for docs). The middle option is somewhat in between.

Which of these is preferred? Are there better options?

Charles
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19541<br>
Sender:Alexander Johannesen &lt;alexander.johannesen@...&gt;<br>
Post Date/Time:2013-11-06 05:39:33<br>
Subject:Re: [rest-discuss] Link Relations<br>
Message:<br><br>
<pre>Hiya,

/rels/playlist/insert-song
&gt; /rels/playlist/remove-song
&gt;
...
 /rels/playlist/create

&gt; /rels/playlist/edit
&gt; /rels/playlist/delete
&gt; /rels/playlist/insert-song
&gt; /rels/playlist/remove-song
&gt;
...

&gt; create
&gt; edit
&gt; delete
&gt; insert-song
&gt; remove-song
&gt;

Hmm, you're aware that all these URIs are evil, right? :)

Here's what I would do ;

/playlist
/playlist/{$list_name}
/playlist/{$list_name}/{$song_id}

The rest is GET, PUT, POST and DELETE on those three (well, one static and
two dynamic) URIs. Remember to think in terms of resources (so, the songs
and the lists themselves) for URIs, and use REST for interaction on those
resources.


Kind regards,

Alex
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19542<br>
Sender:Erik Mogensen &lt;erik@...&gt;<br>
Post Date/Time:2013-11-06 06:27:27<br>
Subject:Re: [rest-discuss] Link Relations<br>
Message:<br><br>
<pre>6. nov. 2013 06:39 skrev "Alexander Johannesen" &lt;
alexander.johannesen@gmail.com&gt; følgende:

&gt;
&gt; Hmm, you're aware that all these URIs are evil, right? :)
&gt;
&gt; Here's what I would do ;

You probably missed the part where the OP said he was discussing link
relations, not resource URIs. :-)

I am not aware of any concencus; general URI rules apply, such as Cool URIs
don't change. I would look in the link relation registry for inspiration
(and reuse where appropriate).
-- 
-mogsie-
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19543<br>
Sender:Alexander Johannesen &lt;alexander.johannesen@...&gt;<br>
Post Date/Time:2013-11-06 07:00:34<br>
Subject:Re: [rest-discuss] Link Relations<br>
Message:<br><br>
<pre>Hi,

And oops! But through the egg on my face, I mutter, "there's *some*
implications, but not really REST ..." while coughing ironically into
a jug of coffee. More coffee!


Alex

On Wed, Nov 6, 2013 at 5:27 PM, Erik Mogensen &lt;erik@...&gt; wrote:
&gt;
&gt; 6. nov. 2013 06:39 skrev "Alexander Johannesen"
&gt; &lt;alexander.johannesen@...&gt; følgende:
&gt;
&gt;&gt;
&gt;&gt; Hmm, you're aware that all these URIs are evil, right? :)
&gt;&gt;
&gt;&gt; Here's what I would do ;
&gt;
&gt; You probably missed the part where the OP said he was discussing link
&gt; relations, not resource URIs. :-)
&gt;
&gt; I am not aware of any concencus; general URI rules apply, such as Cool URIs
&gt; don't change. I would look in the link relation registry for inspiration
&gt; (and reuse where appropriate).
&gt; --
&gt; -mogsie-



-- 
 Project Wrangler, SOA, Information Alchemist, UX, RESTafarian, Topic Maps
 http://shelter.nu/blog  |  google.com/+AlexanderJohannesen  |
http://xsiteable.org
 http://www.linkedin.com/in/shelterit

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19544<br>
Sender:mike amundsen &lt;mamund@...&gt;<br>
Post Date/Time:2013-11-06 15:09:16<br>
Subject:Re: [rest-discuss] Link Relations<br>
Message:<br><br>
<pre>Charles:

First, if you use single strings ("edit", etc.) be sure they are registered
Link Relation Values. Here's a good list of references:
- IANA [1]
- microformats [2]
- Dublin Core [3]

When you *do* use them, be sure to mention in your documentation which are
used and where they are registered.

Next, for the cases where you can't find Link Rel Values that suit your
needs, use the 5988[4] rules for creating full URIs (not relative) and make
them URLs (resolvable) that point to your own documentation/glossary of
Link Rel Values online.

Finally, when minting your own Link Rel Values, aim for describing the
relation between the two resources instead of the action to commit on the
"target" resource. Use protocol methods to express the "action" to commit:

insert-song -&gt; song (w/ HTTP.POST)
remove-song -&gt; song (w/ HTTP.DELETE)

Cheers.

[1] http://www.iana.org/assignments/link-relations/link-relations.xhtml
[2] http://microformats.org/wiki/existing-rel-values
[3] http://dublincore.org/documents/dcmi-terms/
[4] http://tools.ietf.org/html/rfc5988



mamund
+1.859.757.1449
skype: mca.amundsen
http://amundsen.com/blog/
http://twitter.com/mamund
https://github.com/mamund
http://www.linkedin.com/in/mamund


On Tue, Nov 5, 2013 at 9:52 PM, Charles Reese &lt;charles.reese@...&gt;wrote:

&gt;
&gt;
&gt; Hi all,
&gt;
&gt; I'm looking at HAL and Collection+JSON for an API I'm building. I was
&gt; wondering if there are any community norms for constructing link relations.
&gt;
&gt; Here is what I'm considering:
&gt;
&gt; Option 1:
&gt;
&gt; /rels/playlists
&gt; /rels/playlist
&gt; /rels/playlist/insert-song
&gt; /rels/playlist/remove-song
&gt;
&gt; Option 2:
&gt;
&gt; /rels/playlist
&gt; /rels/playlist/create
&gt; /rels/playlist/edit
&gt; /rels/playlist/delete
&gt; /rels/playlist/insert-song
&gt; /rels/playlist/remove-song
&gt;
&gt; Option 3:
&gt;
&gt; list
&gt; create
&gt; edit
&gt; delete
&gt; insert-song
&gt; remove-song
&gt;
&gt; The first option mixes the singular and plural for items and collections.
&gt; Then it tacks on a few actions for what doesn't fit well with CRUD. The
&gt; last option makes the state transitions explicit (but doesn't allow linking
&gt; for docs). The middle option is somewhat in between.
&gt;
&gt; Which of these is preferred? Are there better options?
&gt;
&gt; Charles
&gt;
&gt;
&gt; 
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19545<br>
Sender:mike amundsen &lt;mamund@...&gt;<br>
Post Date/Time:2013-11-08 01:08:26<br>
Subject:Re: [rest-discuss] Link Relations<br>
Message:<br><br>
<pre>not sure i understand the Q, but i'll offer this:

rel="http://example.com/rels/publisher" describes the relationship between
the source and the target.

now you can describe (or write docs in human form, etc.) how to exploit the
relationship using protocols:
HTTP.POST === publish the source resource
HTTP.DELETE === unpublish the the source resource
HTTP.GET === get publishing metadata/status about the source resource
or whatever (i made up actions since i don't know your domain model)

hope this helps.


mamund
+1.859.757.1449
skype: mca.amundsen
http://amundsen.com/blog/
http://twitter.com/mamund
https://github.com/mamund
http://www.linkedin.com/in/mamund


On Thu, Nov 7, 2013 at 6:10 PM, Charles Reese &lt;charles.reese@...&gt;wrote:

&gt; Hi Mike,
&gt;
&gt; Thank you so much!
&gt;
&gt; I'm still wondering about link rels for state-transitions affecting only
&gt; one resource. For example, suppose when creating a playlist, it defaults to
&gt; 'private'. I want to turn it public. I could use a link rel like this:
&gt;
&gt; /rel/playlist/publish
&gt;
&gt; But again, I'm not using the method as the "verb". How would you handle
&gt; this?
&gt;
&gt; Cheers,
&gt; Charles
&gt;
&gt;
&gt; On Wed, Nov 6, 2013 at 7:09 AM, mike amundsen &lt;mamund@...&gt; wrote:
&gt;
&gt;&gt; Charles:
&gt;&gt;
&gt;&gt; First, if you use single strings ("edit", etc.) be sure they are
&gt;&gt; registered Link Relation Values. Here's a good list of references:
&gt;&gt; - IANA [1]
&gt;&gt; - microformats [2]
&gt;&gt; - Dublin Core [3]
&gt;&gt;
&gt;&gt; When you *do* use them, be sure to mention in your documentation which
&gt;&gt; are used and where they are registered.
&gt;&gt;
&gt;&gt; Next, for the cases where you can't find Link Rel Values that suit your
&gt;&gt; needs, use the 5988[4] rules for creating full URIs (not relative) and make
&gt;&gt; them URLs (resolvable) that point to your own documentation/glossary of
&gt;&gt; Link Rel Values online.
&gt;&gt;
&gt;&gt; Finally, when minting your own Link Rel Values, aim for describing the
&gt;&gt; relation between the two resources instead of the action to commit on the
&gt;&gt; "target" resource. Use protocol methods to express the "action" to commit:
&gt;&gt;
&gt;&gt; insert-song -&gt; song (w/ HTTP.POST)
&gt;&gt; remove-song -&gt; song (w/ HTTP.DELETE)
&gt;&gt;
&gt;&gt; Cheers.
&gt;&gt;
&gt;&gt; [1] http://www.iana.org/assignments/link-relations/link-relations.xhtml
&gt;&gt; [2] http://microformats.org/wiki/existing-rel-values
&gt;&gt; [3] http://dublincore.org/documents/dcmi-terms/
&gt;&gt; [4] http://tools.ietf.org/html/rfc5988
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; mamund
&gt;&gt; +1.859.757.1449
&gt;&gt; skype: mca.amundsen
&gt;&gt; http://amundsen.com/blog/
&gt;&gt; http://twitter.com/mamund
&gt;&gt; https://github.com/mamund
&gt;&gt; http://www.linkedin.com/in/mamund
&gt;&gt;
&gt;&gt;
&gt;&gt; On Tue, Nov 5, 2013 at 9:52 PM, Charles Reese &lt;charles.reese@...&gt;wrote:
&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Hi all,
&gt;&gt;&gt;
&gt;&gt;&gt; I'm looking at HAL and Collection+JSON for an API I'm building. I was
&gt;&gt;&gt; wondering if there are any community norms for constructing link relations.
&gt;&gt;&gt;
&gt;&gt;&gt; Here is what I'm considering:
&gt;&gt;&gt;
&gt;&gt;&gt; Option 1:
&gt;&gt;&gt;
&gt;&gt;&gt; /rels/playlists
&gt;&gt;&gt; /rels/playlist
&gt;&gt;&gt; /rels/playlist/insert-song
&gt;&gt;&gt; /rels/playlist/remove-song
&gt;&gt;&gt;
&gt;&gt;&gt; Option 2:
&gt;&gt;&gt;
&gt;&gt;&gt; /rels/playlist
&gt;&gt;&gt; /rels/playlist/create
&gt;&gt;&gt; /rels/playlist/edit
&gt;&gt;&gt; /rels/playlist/delete
&gt;&gt;&gt; /rels/playlist/insert-song
&gt;&gt;&gt; /rels/playlist/remove-song
&gt;&gt;&gt;
&gt;&gt;&gt; Option 3:
&gt;&gt;&gt;
&gt;&gt;&gt; list
&gt;&gt;&gt; create
&gt;&gt;&gt; edit
&gt;&gt;&gt; delete
&gt;&gt;&gt; insert-song
&gt;&gt;&gt; remove-song
&gt;&gt;&gt;
&gt;&gt;&gt; The first option mixes the singular and plural for items and
&gt;&gt;&gt; collections. Then it tacks on a few actions for what doesn't fit well with
&gt;&gt;&gt; CRUD. The last option makes the state transitions explicit (but doesn't
&gt;&gt;&gt; allow linking for docs). The middle option is somewhat in between.
&gt;&gt;&gt;
&gt;&gt;&gt; Which of these is preferred? Are there better options?
&gt;&gt;&gt;
&gt;&gt;&gt; Charles
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; 
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19546<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-11-08 01:31:19<br>
Subject:Re: [rest-discuss] Link Relations<br>
Message:<br><br>
<pre>Hi Mike,

On 08.11.2013, at 02:08, mike amundsen &lt;mamund@...&gt; wrote:

&gt; 
&gt; not sure i understand the Q, but i'll offer this:
&gt; 
&gt; rel="http://example.com/rels/publisher" describes the relationship between the source and the target.
&gt; 

I like to try to emphasize what the target is *to the source* with the goal that the application-level effect of the HTTP methods falls into place.

This IMO helps a great deal with avoiding to layer specialized application protocols on top of HTTP (which already is the application protocol).

IOW, it helps prevent redefinitions of the meaning of HTTP methods.  POST means POST, it cannot mean 'publish the source resource'. DELETE means DELETE, it cannot mean 'unpublish the the source resource'.

If you find yourself in a situation that you absolutely must tell the client developer this, rephrase the hypermedia semantic (here: the link rel spec).

There is nothing to say againts hints regarding the intended 'canonical' use case but I can always only be a hint. AtomPub is an example, where the spec tells us so much about the interactions between client and server that it looks like a protocol when it is actually only hints about a canonical application flow. Focussing on resource semantics would have been much nicer, IMHO.

One simply cannot constrain HTTP servers that way and still have REST.

(No to imply, BTW, that Mike did any such thing with his reply - I just felt like adding this before going to sleep :-)

Jan



&gt; now you can describe (or write docs in human form, etc.) how to exploit the relationship using protocols:
&gt; HTTP.POST === publish the source resource
&gt; HTTP.DELETE === unpublish the the source resource
&gt; HTTP.GET === get publishing metadata/status about the source resource
&gt; or whatever (i made up actions since i don't know your domain model)
&gt; 
&gt; hope this helps.
&gt; 
&gt; 
&gt; mamund
&gt; +1.859.757.1449
&gt; skype: mca.amundsen
&gt; http://amundsen.com/blog/
&gt; http://twitter.com/mamund
&gt; https://github.com/mamund
&gt; http://www.linkedin.com/in/mamund
&gt; 
&gt; 
&gt; On Thu, Nov 7, 2013 at 6:10 PM, Charles Reese &lt;charles.reese@...&gt; wrote:
&gt; Hi Mike,
&gt; 
&gt; Thank you so much!
&gt; 
&gt; I'm still wondering about link rels for state-transitions affecting only one resource. For example, suppose when creating a playlist, it defaults to 'private'. I want to turn it public. I could use a link rel like this:
&gt; 
&gt; /rel/playlist/publish
&gt; 
&gt; But again, I'm not using the method as the "verb". How would you handle this?
&gt; 
&gt; Cheers,
&gt; Charles
&gt; 
&gt; 
&gt; On Wed, Nov 6, 2013 at 7:09 AM, mike amundsen &lt;mamund@...&gt; wrote:
&gt; Charles:
&gt; 
&gt; First, if you use single strings ("edit", etc.) be sure they are registered Link Relation Values. Here's a good list of references:
&gt; - IANA [1]
&gt; - microformats [2]
&gt; - Dublin Core [3]
&gt; 
&gt; When you *do* use them, be sure to mention in your documentation which are used and where they are registered.
&gt; 
&gt; Next, for the cases where you can't find Link Rel Values that suit your needs, use the 5988[4] rules for creating full URIs (not relative) and make them URLs (resolvable) that point to your own documentation/glossary of Link Rel Values online.
&gt; 
&gt; Finally, when minting your own Link Rel Values, aim for describing the relation between the two resources instead of the action to commit on the "target" resource. Use protocol methods to express the "action" to commit:
&gt; 
&gt; insert-song -&gt; song (w/ HTTP.POST)
&gt; remove-song -&gt; song (w/ HTTP.DELETE)
&gt; 
&gt; Cheers.
&gt; 
&gt; [1] http://www.iana.org/assignments/link-relations/link-relations.xhtml
&gt; [2] http://microformats.org/wiki/existing-rel-values
&gt; [3] http://dublincore.org/documents/dcmi-terms/
&gt; [4] http://tools.ietf.org/html/rfc5988
&gt; 
&gt; 
&gt; 
&gt; mamund
&gt; +1.859.757.1449
&gt; skype: mca.amundsen
&gt; http://amundsen.com/blog/
&gt; http://twitter.com/mamund
&gt; https://github.com/mamund
&gt; http://www.linkedin.com/in/mamund
&gt; 
&gt; 
&gt; On Tue, Nov 5, 2013 at 9:52 PM, Charles Reese &lt;charles.reese@...&gt; wrote:
&gt; 
&gt; 
&gt; Hi all,
&gt; 
&gt; I'm looking at HAL and Collection+JSON for an API I'm building. I was wondering if there are any community norms for constructing link relations.
&gt; 
&gt; Here is what I'm considering:
&gt; 
&gt; Option 1:
&gt; 
&gt; /rels/playlists
&gt; /rels/playlist
&gt; /rels/playlist/insert-song
&gt; /rels/playlist/remove-song
&gt; 
&gt; Option 2:
&gt; 
&gt; /rels/playlist
&gt; /rels/playlist/create
&gt; /rels/playlist/edit
&gt; /rels/playlist/delete
&gt; /rels/playlist/insert-song
&gt; /rels/playlist/remove-song
&gt; 
&gt; Option 3:
&gt; 
&gt; list
&gt; create
&gt; edit
&gt; delete
&gt; insert-song
&gt; remove-song
&gt; 
&gt; The first option mixes the singular and plural for items and collections. Then it tacks on a few actions for what doesn't fit well with CRUD. The last option makes the state transitions explicit (but doesn't allow linking for docs). The middle option is somewhat in between.
&gt; 
&gt; Which of these is preferred? Are there better options?
&gt; 
&gt; Charles
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19547<br>
Sender:Mike Kelly &lt;mikekelly321@...&gt;<br>
Post Date/Time:2013-11-08 07:58:05<br>
Subject:Re: [rest-discuss] Link Relations<br>
Message:<br><br>
<pre>On Fri, Nov 8, 2013 at 1:31 AM, Jan Algermissen
&lt;jan.algermissen@...&gt; wrote:
&gt; Hi Mike,
&gt;
&gt; On 08.11.2013, at 02:08, mike amundsen &lt;mamund@yahoo.com&gt; wrote:
&gt;
&gt;&gt;
&gt;&gt; not sure i understand the Q, but i'll offer this:
&gt;&gt;
&gt;&gt; rel="http://example.com/rels/publisher" describes the relationship between the source and the target.
&gt;&gt;
&gt;
&gt; I like to try to emphasize what the target is *to the source* with the goal that the application-level effect of the HTTP methods falls into place.
&gt;
&gt; This IMO helps a great deal with avoiding to layer specialized application protocols on top of HTTP (which already is the application protocol).
&gt;
&gt; IOW, it helps prevent redefinitions of the meaning of HTTP methods.  POST means POST, it cannot mean 'publish the source resource'. DELETE means DELETE, it cannot mean 'unpublish the the source resource'.
&gt;

Well, those methods have a general meaning within the uniform
interface of HTTP whose purpose is to add to the self-descriptiveness
of messages and, in doing so, to afford intermediation across the
system (e.g. web caching). The HTTP method definitions attribute
meaning designed for this purpose (e.g. establishing safety,
idempotency, cacheability, etc).

Provided the link relations are not in conflict with the HTTP
definitions, and are merely qualifying the details of methods within
the context of a given transition, then it is wrong to think about
that in terms of "redefinition". It's qualification.

In practice, it's much easier for consuming parties if your
documentation is specific by providing an explicit description of the
meaning and structure of the various requests possible over a given
link. Leaving your documentation so abstract that the reader is left
with the task of inferring every part of each possible request does
not seem like a very pragmatic approach for custom link relations (but
may be more appropriate for standardised link relations).


&gt; If you find yourself in a situation that you absolutely must tell the client developer this, rephrase the hypermedia semantic (here: the link rel spec).
&gt;
&gt; There is nothing to say againts hints regarding the intended 'canonical' use case but I can always only be a hint. AtomPub is an example, where the spec tells us so much about the interactions between client and server that it looks like a protocol when it is actually only hints about a canonical application flow. Focussing on resource semantics would have been much nicer, IMHO.
&gt;
&gt; One simply cannot constrain HTTP servers that way and still have REST.
&gt;

The importance of HTTP methods from a REST point of view is that they
create **some** visibility of the client server interactions, so that
the messages can be understood to _a certain extent_ by
intermediaries. Provided that visibility is not impacted (i.e. a link
rel's qualification of a method doesn't _conflict_ with HTTP's)  then
how does this have any bearing on the "RESTfulness" of the
application?

Cheers,
M

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19548<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-11-09 18:19:48<br>
Subject:Re: [rest-discuss] Link Relations<br>
Message:<br><br>
<pre>
On 09.11.2013, at 18:59, Philippe Marsteau &lt;marsteau@...&gt; wrote:

&gt; I see 2 distinct purposes of link relations: either to qualified a transition from one state to another of the resource, or to describe how two resources relate one to another.

These are really the same thing.  The client activating controls based on what it learned about resources.

&gt; 
&gt; This discussion I think focused on the latter. I am specifically curious of best practices for the former case, when a RESTful API aims at letting consumer work through a specific workflow (eg. buying a book online).

There is a common confusion (I think - at least it was a confusion for me for years) with regard to the idea that the server is prescribing a workflow which the client follows.

In a RESTful system, the server actually has no idea about the application (the workflow) that the client executes. It is the client that owns the state machine. It is just that the client is programmed not to blindly assume the availability of certain transitions but to make the best of the controls it receives along the way.

At some point, it must give up, obviously - or reach a steady state and wait for a human to make the next move based on the accumulated information in that steady state.

&gt; 
&gt; I thought the best practice was to let user land ton an entry point resource (eg collection of books) and then let user evolve in the workflow: first by affording user to initiate the workflow (eg. "rel=buy" which likely translates with GETing a "buy-a-book-form" resource, letting user discover which inputs are need to start the workflow). Then subsequently, each step in the workflow will afford user to confirm an order, select payment information, shipping details... Ultimately the server will confirm creation of an order resource (and maybe  provide a shipment resource allowing user to track shipping status or to cancel order, etc.)

It is still the hard-coded or configured decision tree that determines the application here.... it is just that hypermedia is the *engine* :-)

&gt; 
&gt; In such typical workflow scenario, is it a bad practice to expose rels as "actions" (thus verbs)?

That is always bad practice.

&gt; I think of having server sending relevant actions on each step (as part of resource representations), letting user discover HTTP methods and target resource to interact with as a result of activating the hypermedia control (action).
&gt; 
&gt; In the example of AtomPub, we have a similar hypermedia control "edit" (verb)

Which is a naming mistake - that should have been 'source' or so. Meaning: 'edit' links points to the resource that is the 'master' - the one you mutate - as opposed to the member entry resources.

&gt; to afford atom consumer a given feed entry can be edited. Which translate with a PUT to the target href (the target feed entry).

Or DELETE or PATCH or whatnot.

&gt; 
&gt; In other words, what is the best practice to express hypermedia actions in a RESTful way, to allow consumer to control the workflow while the server controls the affordances of the user (based on internal application state)?

Use link semantics (link rels, but also stuff like &lt;html:img src=""/&gt; or &lt;atom:collection href=""&gt;) to tell the consumer what a target *is* to the context. Let the client decide the rest ... the server cannot know what the client is programmed to do anyhow. Instead of designing to prescribe application flow, design for max. re-usability.

HTH

Jan


&gt; 
&gt; Phil
&gt; 
&gt; Le 8 nov. 2013 à 02:58, Mike Kelly &lt;mikekelly321@...&gt; a écrit :
&gt; 
&gt;&gt;  
&gt;&gt; On Fri, Nov 8, 2013 at 1:31 AM, Jan Algermissen
&gt;&gt; &lt;jan.algermissen@...&gt; wrote:
&gt;&gt; &gt; Hi Mike,
&gt;&gt; &gt;
&gt;&gt; &gt; On 08.11.2013, at 02:08, mike amundsen &lt;mamund@...&gt; wrote:
&gt;&gt; &gt;
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; not sure i understand the Q, but i'll offer this:
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; rel="http://example.com/rels/publisher" describes the relationship between the source and the target.
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;
&gt;&gt; &gt; I like to try to emphasize what the target is *to the source* with the goal that the application-level effect of the HTTP methods falls into place.
&gt;&gt; &gt;
&gt;&gt; &gt; This IMO helps a great deal with avoiding to layer specialized application protocols on top of HTTP (which already is the application protocol).
&gt;&gt; &gt;
&gt;&gt; &gt; IOW, it helps prevent redefinitions of the meaning of HTTP methods. POST means POST, it cannot mean 'publish the source resource'. DELETE means DELETE, it cannot mean 'unpublish the the source resource'.
&gt;&gt; &gt;
&gt;&gt; 
&gt;&gt; Well, those methods have a general meaning within the uniform
&gt;&gt; interface of HTTP whose purpose is to add to the self-descriptiveness
&gt;&gt; of messages and, in doing so, to afford intermediation across the
&gt;&gt; system (e.g. web caching). The HTTP method definitions attribute
&gt;&gt; meaning designed for this purpose (e.g. establishing safety,
&gt;&gt; idempotency, cacheability, etc).
&gt;&gt; 
&gt;&gt; Provided the link relations are not in conflict with the HTTP
&gt;&gt; definitions, and are merely qualifying the details of methods within
&gt;&gt; the context of a given transition, then it is wrong to think about
&gt;&gt; that in terms of "redefinition". It's qualification.
&gt;&gt; 
&gt;&gt; In practice, it's much easier for consuming parties if your
&gt;&gt; documentation is specific by providing an explicit description of the
&gt;&gt; meaning and structure of the various requests possible over a given
&gt;&gt; link. Leaving your documentation so abstract that the reader is left
&gt;&gt; with the task of inferring every part of each possible request does
&gt;&gt; not seem like a very pragmatic approach for custom link relations (but
&gt;&gt; may be more appropriate for standardised link relations).
&gt;&gt; 
&gt;&gt; &gt; If you find yourself in a situation that you absolutely must tell the client developer this, rephrase the hypermedia semantic (here: the link rel spec).
&gt;&gt; &gt;
&gt;&gt; &gt; There is nothing to say againts hints regarding the intended 'canonical' use case but I can always only be a hint. AtomPub is an example, where the spec tells us so much about the interactions between client and server that it looks like a protocol when it is actually only hints about a canonical application flow. Focussing on resource semantics would have been much nicer, IMHO.
&gt;&gt; &gt;
&gt;&gt; &gt; One simply cannot constrain HTTP servers that way and still have REST.
&gt;&gt; &gt;
&gt;&gt; 
&gt;&gt; The importance of HTTP methods from a REST point of view is that they
&gt;&gt; create **some** visibility of the client server interactions, so that
&gt;&gt; the messages can be understood to _a certain extent_ by
&gt;&gt; intermediaries. Provided that visibility is not impacted (i.e. a link
&gt;&gt; rel's qualification of a method doesn't _conflict_ with HTTP's) then
&gt;&gt; how does this have any bearing on the "RESTfulness" of the
&gt;&gt; application?
&gt;&gt; 
&gt;&gt; Cheers,
&gt;&gt; M
&gt;&gt; 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19549<br>
Sender:mike amundsen &lt;mamund@...&gt;<br>
Post Date/Time:2013-11-09 19:25:03<br>
Subject:Re: [rest-discuss] Link Relations<br>
Message:<br><br>
<pre>I will say that i've gone both routes (using rels to indicate relationships
and using rels to indicate actions) and am not settled on either.

the "rel" community def. wants to see this attribute used to indicate
relationships. reviews of  recently registered values at the IANA show this.

however, i can see the appeal and value of having action indicators on
hypermedia controls; esp. in cases where machines are doing the work of
selecting controls to activate. in this case it seems efficient to reduce
the "decision distance" of 1) find the control that has an id of the
desired target then, 2) look at the control to see what protocol action is
available to 1) find the control that has the id of the desired action of
the target. But this is, in the long run, a false efficiency. It _assumes_
the client code already "knows" things (action and target are coupled) and
constrains the possible options for the client ("you can only do a single
action for this control, want to do some other action? sorry, no control
for that here, move along").

in the big picture, i've found keeping target identifiers (collection,
storage, document, person) decoupled from action (share, modify, copy,
move, approve, cancel) is a big win. while it adds some
indirection/complexity to the representation (both at design-time and
run-time) this pattern also adds more options and increases the
independence of the client application. including allowing clients to (in
some cases) create new successful workflows that the server didn't map out
even though it is completely allowed by the state machine.

FWIW, if you want to continue to constrain clients to only following strict
server pre-defined paths, you can still do that while sticking to the "rel
is for relationships" pattern.

Cheers.



mamund
+1.859.757.1449
skype: mca.amundsen
http://amundsen.com/blog/
http://twitter.com/mamund
https://github.com/mamund
http://www.linkedin.com/in/mamund


On Sat, Nov 9, 2013 at 12:59 PM, Philippe Marsteau &lt;marsteau@...&gt;wrote:

&gt; I see 2 distinct purposes of link relations: either to qualified a
&gt; transition from one state to another of the resource, or to describe how
&gt; two resources relate one to another.
&gt;
&gt; This discussion I think focused on the latter. I am specifically curious
&gt; of best practices for the former case, when a RESTful API aims at letting
&gt; consumer work through a specific workflow (eg. buying a book online).
&gt;
&gt; I thought the best practice was to let user land ton an entry point
&gt; resource (eg collection of books) and then let user evolve in the workflow:
&gt; first by affording user to initiate the workflow (eg. "rel=buy" which
&gt; likely translates with GETing a "buy-a-book-form" resource, letting user
&gt; discover which inputs are need to start the workflow). Then subsequently,
&gt; each step in the workflow will afford user to confirm an order, select
&gt; payment information, shipping details... Ultimately the server will confirm
&gt; creation of an order resource (and maybe  provide a shipment resource
&gt; allowing user to track shipping status or to cancel order, etc.)
&gt;
&gt; In such typical workflow scenario, is it a bad practice to expose rels as
&gt; "actions" (thus verbs)? I think of having server sending relevant actions
&gt; on each step (as part of resource representations), letting user discover
&gt; HTTP methods and target resource to interact with as a result of activating
&gt; the hypermedia control (action).
&gt;
&gt; In the example of AtomPub, we have a similar hypermedia control "edit"
&gt; (verb) to afford atom consumer a given feed entry can be edited. Which
&gt; translate with a PUT to the target href (the target feed entry).
&gt;
&gt; In other words, what is the best practice to express hypermedia actions in
&gt; a RESTful way, to allow consumer to control the workflow while the server
&gt; controls the affordances of the user (based on internal application state)?
&gt;
&gt; Phil
&gt;
&gt; Le 8 nov. 2013 à 02:58, Mike Kelly &lt;mikekelly321@...&gt; a écrit :
&gt;
&gt;
&gt;
&gt; On Fri, Nov 8, 2013 at 1:31 AM, Jan Algermissen
&gt; &lt;jan.algermissen@nordsc.com&gt; wrote:
&gt; &gt; Hi Mike,
&gt; &gt;
&gt; &gt; On 08.11.2013, at 02:08, mike amundsen &lt;mamund@...&gt; wrote:
&gt; &gt;
&gt; &gt;&gt;
&gt; &gt;&gt; not sure i understand the Q, but i'll offer this:
&gt; &gt;&gt;
&gt; &gt;&gt; rel="http://example.com/rels/publisher" describes the relationship
&gt; between the source and the target.
&gt; &gt;&gt;
&gt; &gt;
&gt; &gt; I like to try to emphasize what the target is *to the source* with the
&gt; goal that the application-level effect of the HTTP methods falls into place.
&gt; &gt;
&gt; &gt; This IMO helps a great deal with avoiding to layer specialized
&gt; application protocols on top of HTTP (which already is the application
&gt; protocol).
&gt; &gt;
&gt; &gt; IOW, it helps prevent redefinitions of the meaning of HTTP methods. POST
&gt; means POST, it cannot mean 'publish the source resource'. DELETE means
&gt; DELETE, it cannot mean 'unpublish the the source resource'.
&gt; &gt;
&gt;
&gt; Well, those methods have a general meaning within the uniform
&gt; interface of HTTP whose purpose is to add to the self-descriptiveness
&gt; of messages and, in doing so, to afford intermediation across the
&gt; system (e.g. web caching). The HTTP method definitions attribute
&gt; meaning designed for this purpose (e.g. establishing safety,
&gt; idempotency, cacheability, etc).
&gt;
&gt; Provided the link relations are not in conflict with the HTTP
&gt; definitions, and are merely qualifying the details of methods within
&gt; the context of a given transition, then it is wrong to think about
&gt; that in terms of "redefinition". It's qualification.
&gt;
&gt; In practice, it's much easier for consuming parties if your
&gt; documentation is specific by providing an explicit description of the
&gt; meaning and structure of the various requests possible over a given
&gt; link. Leaving your documentation so abstract that the reader is left
&gt; with the task of inferring every part of each possible request does
&gt; not seem like a very pragmatic approach for custom link relations (but
&gt; may be more appropriate for standardised link relations).
&gt;
&gt; &gt; If you find yourself in a situation that you absolutely must tell the
&gt; client developer this, rephrase the hypermedia semantic (here: the link rel
&gt; spec).
&gt; &gt;
&gt; &gt; There is nothing to say againts hints regarding the intended 'canonical'
&gt; use case but I can always only be a hint. AtomPub is an example, where the
&gt; spec tells us so much about the interactions between client and server that
&gt; it looks like a protocol when it is actually only hints about a canonical
&gt; application flow. Focussing on resource semantics would have been much
&gt; nicer, IMHO.
&gt; &gt;
&gt; &gt; One simply cannot constrain HTTP servers that way and still have REST.
&gt; &gt;
&gt;
&gt; The importance of HTTP methods from a REST point of view is that they
&gt; create **some** visibility of the client server interactions, so that
&gt; the messages can be understood to _a certain extent_ by
&gt; intermediaries. Provided that visibility is not impacted (i.e. a link
&gt; rel's qualification of a method doesn't _conflict_ with HTTP's) then
&gt; how does this have any bearing on the "RESTfulness" of the
&gt; application?
&gt;
&gt; Cheers,
&gt; M
&gt;  
&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19550<br>
Sender:mike amundsen &lt;mamund@...&gt;<br>
Post Date/Time:2013-11-09 21:52:58<br>
Subject:Re: [rest-discuss] Link Relations<br>
Message:<br><br>
<pre>FWIW, you're getting in to "design" space here - and that's based on
context and preference. nothing right/wrong here so there are lots of
options.

first, i usually indicate state properties of a resource using data
elements in the representation, not transition elements:

&lt;book&gt;
  &lt;in-stock value="true" /&gt;
  &lt;link href="..." rel="http://example.com/rels/shopping-cart" /&gt;
&lt;/book&gt;

again, instructions on the link identified as the shopping cart might look
like this:
- HTTP.GET returns the state of the shopping cart
- HTTP.POST adds the current book to the shopping cart
- HTTP.DELETE clears all items from the shopping cart
and so on...

now clients (humans) can see that the "state" of the book is "in-stock" and
then decide to take an appropriate action.


as for "I believe there are cases where the server dictates the steps
before"...

yes, the server may have rules about what "state" server-side resources
need to have before a task can be executed. This can be viewed as dictating
that "state" of things on the server, not dictating the order in which
things happen on the client. This POV is close to the way programmers had
to (re)learn to design user interfaces with teh advent of the pointer
device (mouse). Suddenly, users could not be "led" from input to input in a
certain order. Users had be power (and audacity) to click around on the
screen, enter things in various order and so on. It was bedlam (grin)!

eventually, we learned to build UIs that used things like progressive
disclosure, disabling items until certain "state" in the UI is achieved,
etc.

we need to do that same for hypermedia services on the web.

hope this helps.


mamund
+1.859.757.1449
skype: mca.amundsen
http://amundsen.com/blog/
http://twitter.com/mamund
https://github.com/mamund
http://www.linkedin.com/in/mamund


On Sat, Nov 9, 2013 at 3:25 PM, Philippe Marsteau &lt;marsteau@...&gt;wrote:

&gt; Appreciate the feedback and experience sharing.
&gt;
&gt; So reusing my use case if buying a book, what rels would define from the
&gt; root book collection resource? (assuming the application is designed to let
&gt; customers buy books).
&gt;
&gt; How do I let the consumer discover a book listed in the collection can now
&gt; be "bought"?
&gt;
&gt; I believe there are cases where the server dictates the steps before a
&gt; book order can be placed: server decides shipment info is ended or payment
&gt; info is needed. I mean the book listed in store does not have a model
&gt; relationship "orders" linking to it, does it?
&gt;
&gt; You cannot create an order until user goes through a server defined list
&gt; of steps. Furthermore, the steps could be different per user (eg one who
&gt; already stored his payment/shipping on file for future orders).
&gt;
&gt; While I completely understand it is the consumer who activates the
&gt; hypermedia controls, and thus the workflow progress depends on the user, I
&gt; need a way to let consumer discover through hypermedia controls "what" can
&gt; be done at each step of the application business workflow (here: what info
&gt; must be entered to complete the book order process?), based on user
&gt; permissions or internal application state...
&gt;
&gt; Your further guidance is appreciated!
&gt;
&gt; Le 9 nov. 2013 à 14:25, mike amundsen &lt;mamund@...&gt; a écrit :
&gt;
&gt;  I will say that i've gone both routes (using rels to indicate
&gt; relationships and using rels to indicate actions) and am not settled on
&gt; either.
&gt;
&gt; the "rel" community def. wants to see this attribute used to indicate
&gt; relationships. reviews of  recently registered values at the IANA show this.
&gt;
&gt; however, i can see the appeal and value of having action indicators on
&gt; hypermedia controls; esp. in cases where machines are doing the work of
&gt; selecting controls to activate. in this case it seems efficient to reduce
&gt; the "decision distance" of 1) find the control that has an id of the
&gt; desired target then, 2) look at the control to see what protocol action is
&gt; available to 1) find the control that has the id of the desired action of
&gt; the target. But this is, in the long run, a false efficiency. It _assumes_
&gt; the client code already "knows" things (action and target are coupled) and
&gt; constrains the possible options for the client ("you can only do a single
&gt; action for this control, want to do some other action? sorry, no control
&gt; for that here, move along").
&gt;
&gt; in the big picture, i've found keeping target identifiers (collection,
&gt; storage, document, person) decoupled from action (share, modify, copy,
&gt; move, approve, cancel) is a big win. while it adds some
&gt; indirection/complexity to the representation (both at design-time and
&gt; run-time) this pattern also adds more options and increases the
&gt; independence of the client application. including allowing clients to (in
&gt; some cases) create new successful workflows that the server didn't map out
&gt; even though it is completely allowed by the state machine.
&gt;
&gt; FWIW, if you want to continue to constrain clients to only following
&gt; strict server pre-defined paths, you can still do that while sticking to
&gt; the "rel is for relationships" pattern.
&gt;
&gt; Cheers.
&gt;
&gt;
&gt;
&gt; mamund
&gt; +1.859.757.1449
&gt; skype: mca.amundsen
&gt; http://amundsen.com/blog/
&gt; http://twitter.com/mamund
&gt; https://github.com/mamund
&gt; http://www.linkedin.com/in/mamund
&gt;
&gt;
&gt; On Sat, Nov 9, 2013 at 12:59 PM, Philippe Marsteau &lt;marsteau@...&gt;wrote:
&gt;
&gt;&gt; I see 2 distinct purposes of link relations: either to qualified a
&gt;&gt; transition from one state to another of the resource, or to describe how
&gt;&gt; two resources relate one to another.
&gt;&gt;
&gt;&gt; This discussion I think focused on the latter. I am specifically curious
&gt;&gt; of best practices for the former case, when a RESTful API aims at letting
&gt;&gt; consumer work through a specific workflow (eg. buying a book online).
&gt;&gt;
&gt;&gt; I thought the best practice was to let user land ton an entry point
&gt;&gt; resource (eg collection of books) and then let user evolve in the workflow:
&gt;&gt; first by affording user to initiate the workflow (eg. "rel=buy" which
&gt;&gt; likely translates with GETing a "buy-a-book-form" resource, letting user
&gt;&gt; discover which inputs are need to start the workflow). Then subsequently,
&gt;&gt; each step in the workflow will afford user to confirm an order, select
&gt;&gt; payment information, shipping details... Ultimately the server will confirm
&gt;&gt; creation of an order resource (and maybe  provide a shipment resource
&gt;&gt; allowing user to track shipping status or to cancel order, etc.)
&gt;&gt;
&gt;&gt; In such typical workflow scenario, is it a bad practice to expose rels as
&gt;&gt; "actions" (thus verbs)? I think of having server sending relevant actions
&gt;&gt; on each step (as part of resource representations), letting user discover
&gt;&gt; HTTP methods and target resource to interact with as a result of activating
&gt;&gt; the hypermedia control (action).
&gt;&gt;
&gt;&gt; In the example of AtomPub, we have a similar hypermedia control "edit"
&gt;&gt; (verb) to afford atom consumer a given feed entry can be edited. Which
&gt;&gt; translate with a PUT to the target href (the target feed entry).
&gt;&gt;
&gt;&gt; In other words, what is the best practice to express hypermedia actions
&gt;&gt; in a RESTful way, to allow consumer to control the workflow while the
&gt;&gt; server controls the affordances of the user (based on internal application
&gt;&gt; state)?
&gt;&gt;
&gt;&gt; Phil
&gt;&gt;
&gt;&gt; Le 8 nov. 2013 à 02:58, Mike Kelly &lt;mikekelly321@...&gt; a écrit :
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Fri, Nov 8, 2013 at 1:31 AM, Jan Algermissen
&gt;&gt; &lt;jan.algermissen@...&gt; wrote:
&gt;&gt; &gt; Hi Mike,
&gt;&gt; &gt;
&gt;&gt; &gt; On 08.11.2013, at 02:08, mike amundsen &lt;mamund@...&gt; wrote:
&gt;&gt; &gt;
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; not sure i understand the Q, but i'll offer this:
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; rel="http://example.com/rels/publisher" describes the relationship
&gt;&gt; between the source and the target.
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;
&gt;&gt; &gt; I like to try to emphasize what the target is *to the source* with the
&gt;&gt; goal that the application-level effect of the HTTP methods falls into place.
&gt;&gt; &gt;
&gt;&gt; &gt; This IMO helps a great deal with avoiding to layer specialized
&gt;&gt; application protocols on top of HTTP (which already is the application
&gt;&gt; protocol).
&gt;&gt; &gt;
&gt;&gt; &gt; IOW, it helps prevent redefinitions of the meaning of HTTP methods.
&gt;&gt; POST means POST, it cannot mean 'publish the source resource'. DELETE means
&gt;&gt; DELETE, it cannot mean 'unpublish the the source resource'.
&gt;&gt; &gt;
&gt;&gt;
&gt;&gt; Well, those methods have a general meaning within the uniform
&gt;&gt; interface of HTTP whose purpose is to add to the self-descriptiveness
&gt;&gt; of messages and, in doing so, to afford intermediation across the
&gt;&gt; system (e.g. web caching). The HTTP method definitions attribute
&gt;&gt; meaning designed for this purpose (e.g. establishing safety,
&gt;&gt; idempotency, cacheability, etc).
&gt;&gt;
&gt;&gt; Provided the link relations are not in conflict with the HTTP
&gt;&gt; definitions, and are merely qualifying the details of methods within
&gt;&gt; the context of a given transition, then it is wrong to think about
&gt;&gt; that in terms of "redefinition". It's qualification.
&gt;&gt;
&gt;&gt; In practice, it's much easier for consuming parties if your
&gt;&gt; documentation is specific by providing an explicit description of the
&gt;&gt; meaning and structure of the various requests possible over a given
&gt;&gt; link. Leaving your documentation so abstract that the reader is left
&gt;&gt; with the task of inferring every part of each possible request does
&gt;&gt; not seem like a very pragmatic approach for custom link relations (but
&gt;&gt; may be more appropriate for standardised link relations).
&gt;&gt;
&gt;&gt; &gt; If you find yourself in a situation that you absolutely must tell the
&gt;&gt; client developer this, rephrase the hypermedia semantic (here: the link rel
&gt;&gt; spec).
&gt;&gt; &gt;
&gt;&gt; &gt; There is nothing to say againts hints regarding the intended
&gt;&gt; 'canonical' use case but I can always only be a hint. AtomPub is an
&gt;&gt; example, where the spec tells us so much about the interactions between
&gt;&gt; client and server that it looks like a protocol when it is actually only
&gt;&gt; hints about a canonical application flow. Focussing on resource semantics
&gt;&gt; would have been much nicer, IMHO.
&gt;&gt; &gt;
&gt;&gt; &gt; One simply cannot constrain HTTP servers that way and still have REST.
&gt;&gt; &gt;
&gt;&gt;
&gt;&gt; The importance of HTTP methods from a REST point of view is that they
&gt;&gt; create **some** visibility of the client server interactions, so that
&gt;&gt; the messages can be understood to _a certain extent_ by
&gt;&gt; intermediaries. Provided that visibility is not impacted (i.e. a link
&gt;&gt; rel's qualification of a method doesn't _conflict_ with HTTP's) then
&gt;&gt; how does this have any bearing on the "RESTfulness" of the
&gt;&gt; application?
&gt;&gt;
&gt;&gt; Cheers,
&gt;&gt; M
&gt;&gt;  
&gt;&gt;
&gt;&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19551<br>
Sender:mike amundsen &lt;mamund@...&gt;<br>
Post Date/Time:2013-11-09 23:51:34<br>
Subject:Re: [rest-discuss] Link Relations<br>
Message:<br><br>
<pre>&lt;snip&gt;
Now how do I tell in this book representation that at this time, clearing
the shopping cart or adding the book to the shipping cart is not allowed
(eg based on authenticated user permissions) but reading it is allowed? I
wish user could discover from the representation rather than having to call
OPTIONS or learning after the fact (error message)...
&lt;/snip&gt;

If you wish to communicate this level of detail to clients (not at all a
bad thing) often people think of these as _actions_ instead of states and
just communicate the possible action:
rel="clear"
rel="add-book"
and so forth.

I try to steer clear of that whenever possible (as a design goal) and
express these things as "states" on the server that need to be communicated
to the client. for example (just making this up here...):
- "clear" (the resource can be cleared or removed)
- "edit" (the resource can be appended-to or child records can be added)
and so forth.

this means representations can look like this:
&lt;shopping-cart&gt;
  &lt;link href="..." rel="collection http://example.com/rels/shopping-cart"
state="read clear" /&gt;
  &lt;items count="9"&gt;
    &lt;item href="..." rel="item http://example.com/rels/book" state="read
clear"&gt;
      ...
    &lt;/item&gt;
    ...
  &lt;/items&gt;
&lt;/shopping-cart&gt;

or you can use a much more explicit design:
&lt;shopping-cart&gt;
  &lt;clear href="..." rel="collection http://example.com/rels/shopping-cart"
/&gt;
  &lt;read href="..." rel="collection http://example.com/rels/shopping-cart" /&gt;
  &lt;items count="9"&gt;
    &lt;item&gt;
      &lt;clear href="..." rel="item http://example.com/rels/book" /&gt;
      &lt;read href="..." rel="item http://example.com/rels/book" /&gt;
      ...
    &lt;/item&gt;
    ...
  &lt;/items&gt;
&lt;/shopping-cart&gt;

These are just two possibilities. Note that i didn't include a protocol
method in these designs, but that would be possible, too. an explicit
example (one that might support more than one protocol) might look like
this:
&lt;shopping-cart&gt;
  &lt;clear href="..." rel="collection http://example.com/rels/shopping-cart"
method="HTTP.DELETE"/&gt;
  &lt;read href="..." rel="collection http://example.com/rels/shopping-cart"
method="HTTP.GET"/&gt;
  &lt;items count="9"&gt;
    ...
  &lt;/items&gt;
&lt;/shopping-cart&gt;

Again, this is design so there are many possibilities.

&lt;snip&gt;
Also where in this context fit the concept of forms, allowing user to fill
in some parameters...
&lt;/snip&gt;

yes, i use forms quite often. this is about what state needs to be
transferred from the client to the server (usually we only think about
transferring state from server to client!). I might have a server that
requires additional data in order to add an item to a cart:

&lt;link href="..." rel="http://example.com/rels/shopping-cart"&gt;
  &lt;data name="quantity" value="1" /&gt;
  &lt;date name="stockid" value="q1w2e3" /&gt;
  &lt;date name="required-delivery-date" value="2013-12-24" /&gt;
&lt;/link&gt;
and so forth.

I am in the habit of including forms in responses[0]. However, some folks
prefer to only include links to forms and keep the forms as stand-alone
resources[1]. Still others think it best not to include this information at
all and keep that information as part of the documentation[2]

Again, these are design decisions you can make on your own when creating
your own message format (media type) or one that you can use to guide which
of the existing registered types will best fit your needs/aesthetics.

Cheers.

[0] http://amundsen.com/media-types/collection/format/#objects-template
[1] http://iansrobinson.com/2010/09/02/using-typed-links-to-forms/
[2] http://tools.ietf.org/html/draft-kelly-json-hal-06#section-8.2




mamund
+1.859.757.1449
skype: mca.amundsen
http://amundsen.com/blog/
http://twitter.com/mamund
https://github.com/mamund
http://www.linkedin.com/in/mamund


On Sat, Nov 9, 2013 at 5:46 PM, Philippe Marsteau &lt;marsteau@...&gt;wrote:

&gt; Interesting...
&gt;
&gt; Now how do I tell in this book representation that at this time, clearing
&gt; the shopping cart or adding the book to the shipping cart is not allowed
&gt; (eg based on authenticated user permissions) but reading it is allowed? I
&gt; wish user could discover from the representation rather than having to call
&gt; OPTIONS or learning after the fact (error message)...
&gt;
&gt; Also where in this context fit the concept of forms, allowing user to fill
&gt; in some parameters, before user can actually add the book in the shipping
&gt; cart (eg, number of books to add)? Would the representation include a link
&gt; to the form (instead of to the shopping cart directly), and its doc states
&gt; only GET is allowed? The idea is to let user discover which attributes are
&gt; need as input before a PUT (or POST or PATCH) can be called on the shopping
&gt; cart... Instead of having client to hard code editable input fields to be
&gt; requested to user ("knowing" the media type or profile of the shopping cart
&gt; resource).
&gt;
&gt; Thanks again, it helps.
&gt;
&gt; Phil
&gt;
&gt; Le 9 nov. 2013 à 16:53, mike amundsen &lt;mamund@...&gt; a écrit :
&gt;
&gt;  FWIW, you're getting in to "design" space here - and that's based on
&gt; context and preference. nothing right/wrong here so there are lots of
&gt; options.
&gt;
&gt; first, i usually indicate state properties of a resource using data
&gt; elements in the representation, not transition elements:
&gt;
&gt; &lt;book&gt;
&gt;   &lt;in-stock value="true" /&gt;
&gt;   &lt;link href="..." rel="http://example.com/rels/shopping-cart" /&gt;
&gt; &lt;/book&gt;
&gt;
&gt; again, instructions on the link identified as the shopping cart might look
&gt; like this:
&gt; - HTTP.GET returns the state of the shopping cart
&gt; - HTTP.POST adds the current book to the shopping cart
&gt; - HTTP.DELETE clears all items from the shopping cart
&gt; and so on...
&gt;
&gt; now clients (humans) can see that the "state" of the book is "in-stock"
&gt; and then decide to take an appropriate action.
&gt;
&gt;
&gt; as for "I believe there are cases where the server dictates the steps
&gt; before"...
&gt;
&gt; yes, the server may have rules about what "state" server-side resources
&gt; need to have before a task can be executed. This can be viewed as dictating
&gt; that "state" of things on the server, not dictating the order in which
&gt; things happen on the client. This POV is close to the way programmers had
&gt; to (re)learn to design user interfaces with teh advent of the pointer
&gt; device (mouse). Suddenly, users could not be "led" from input to input in a
&gt; certain order. Users had be power (and audacity) to click around on the
&gt; screen, enter things in various order and so on. It was bedlam (grin)!
&gt;
&gt; eventually, we learned to build UIs that used things like progressive
&gt; disclosure, disabling items until certain "state" in the UI is achieved,
&gt; etc.
&gt;
&gt; we need to do that same for hypermedia services on the web.
&gt;
&gt; hope this helps.
&gt;
&gt;
&gt; mamund
&gt; +1.859.757.1449
&gt; skype: mca.amundsen
&gt; http://amundsen.com/blog/
&gt; http://twitter.com/mamund
&gt; https://github.com/mamund
&gt; http://www.linkedin.com/in/mamund
&gt;
&gt;
&gt; On Sat, Nov 9, 2013 at 3:25 PM, Philippe Marsteau &lt;marsteau@gmail.com&gt;wrote:
&gt;
&gt;&gt; Appreciate the feedback and experience sharing.
&gt;&gt;
&gt;&gt; So reusing my use case if buying a book, what rels would define from the
&gt;&gt; root book collection resource? (assuming the application is designed to let
&gt;&gt; customers buy books).
&gt;&gt;
&gt;&gt; How do I let the consumer discover a book listed in the collection can
&gt;&gt; now be "bought"?
&gt;&gt;
&gt;&gt; I believe there are cases where the server dictates the steps before a
&gt;&gt; book order can be placed: server decides shipment info is ended or payment
&gt;&gt; info is needed. I mean the book listed in store does not have a model
&gt;&gt; relationship "orders" linking to it, does it?
&gt;&gt;
&gt;&gt; You cannot create an order until user goes through a server defined list
&gt;&gt; of steps. Furthermore, the steps could be different per user (eg one who
&gt;&gt; already stored his payment/shipping on file for future orders).
&gt;&gt;
&gt;&gt; While I completely understand it is the consumer who activates the
&gt;&gt; hypermedia controls, and thus the workflow progress depends on the user, I
&gt;&gt; need a way to let consumer discover through hypermedia controls "what" can
&gt;&gt; be done at each step of the application business workflow (here: what info
&gt;&gt; must be entered to complete the book order process?), based on user
&gt;&gt; permissions or internal application state...
&gt;&gt;
&gt;&gt; Your further guidance is appreciated!
&gt;&gt;
&gt;&gt; Le 9 nov. 2013 à 14:25, mike amundsen &lt;mamund@...&gt; a écrit :
&gt;&gt;
&gt;&gt;  I will say that i've gone both routes (using rels to indicate
&gt;&gt; relationships and using rels to indicate actions) and am not settled on
&gt;&gt; either.
&gt;&gt;
&gt;&gt; the "rel" community def. wants to see this attribute used to indicate
&gt;&gt; relationships. reviews of  recently registered values at the IANA show this.
&gt;&gt;
&gt;&gt; however, i can see the appeal and value of having action indicators on
&gt;&gt; hypermedia controls; esp. in cases where machines are doing the work of
&gt;&gt; selecting controls to activate. in this case it seems efficient to reduce
&gt;&gt; the "decision distance" of 1) find the control that has an id of the
&gt;&gt; desired target then, 2) look at the control to see what protocol action is
&gt;&gt; available to 1) find the control that has the id of the desired action of
&gt;&gt; the target. But this is, in the long run, a false efficiency. It _assumes_
&gt;&gt; the client code already "knows" things (action and target are coupled) and
&gt;&gt; constrains the possible options for the client ("you can only do a single
&gt;&gt; action for this control, want to do some other action? sorry, no control
&gt;&gt; for that here, move along").
&gt;&gt;
&gt;&gt; in the big picture, i've found keeping target identifiers (collection,
&gt;&gt; storage, document, person) decoupled from action (share, modify, copy,
&gt;&gt; move, approve, cancel) is a big win. while it adds some
&gt;&gt; indirection/complexity to the representation (both at design-time and
&gt;&gt; run-time) this pattern also adds more options and increases the
&gt;&gt; independence of the client application. including allowing clients to (in
&gt;&gt; some cases) create new successful workflows that the server didn't map out
&gt;&gt; even though it is completely allowed by the state machine.
&gt;&gt;
&gt;&gt; FWIW, if you want to continue to constrain clients to only following
&gt;&gt; strict server pre-defined paths, you can still do that while sticking to
&gt;&gt; the "rel is for relationships" pattern.
&gt;&gt;
&gt;&gt; Cheers.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; mamund
&gt;&gt; +1.859.757.1449
&gt;&gt; skype: mca.amundsen
&gt;&gt; http://amundsen.com/blog/
&gt;&gt; http://twitter.com/mamund
&gt;&gt; https://github.com/mamund
&gt;&gt; http://www.linkedin.com/in/mamund
&gt;&gt;
&gt;&gt;
&gt;&gt; On Sat, Nov 9, 2013 at 12:59 PM, Philippe Marsteau &lt;marsteau@...&gt;wrote:
&gt;&gt;
&gt;&gt;&gt; I see 2 distinct purposes of link relations: either to qualified a
&gt;&gt;&gt; transition from one state to another of the resource, or to describe how
&gt;&gt;&gt; two resources relate one to another.
&gt;&gt;&gt;
&gt;&gt;&gt; This discussion I think focused on the latter. I am specifically curious
&gt;&gt;&gt; of best practices for the former case, when a RESTful API aims at letting
&gt;&gt;&gt; consumer work through a specific workflow (eg. buying a book online).
&gt;&gt;&gt;
&gt;&gt;&gt; I thought the best practice was to let user land ton an entry point
&gt;&gt;&gt; resource (eg collection of books) and then let user evolve in the workflow:
&gt;&gt;&gt; first by affording user to initiate the workflow (eg. "rel=buy" which
&gt;&gt;&gt; likely translates with GETing a "buy-a-book-form" resource, letting user
&gt;&gt;&gt; discover which inputs are need to start the workflow). Then subsequently,
&gt;&gt;&gt; each step in the workflow will afford user to confirm an order, select
&gt;&gt;&gt; payment information, shipping details... Ultimately the server will confirm
&gt;&gt;&gt; creation of an order resource (and maybe  provide a shipment resource
&gt;&gt;&gt; allowing user to track shipping status or to cancel order, etc.)
&gt;&gt;&gt;
&gt;&gt;&gt; In such typical workflow scenario, is it a bad practice to expose rels
&gt;&gt;&gt; as "actions" (thus verbs)? I think of having server sending relevant
&gt;&gt;&gt; actions on each step (as part of resource representations), letting user
&gt;&gt;&gt; discover HTTP methods and target resource to interact with as a result of
&gt;&gt;&gt; activating the hypermedia control (action).
&gt;&gt;&gt;
&gt;&gt;&gt; In the example of AtomPub, we have a similar hypermedia control "edit"
&gt;&gt;&gt; (verb) to afford atom consumer a given feed entry can be edited. Which
&gt;&gt;&gt; translate with a PUT to the target href (the target feed entry).
&gt;&gt;&gt;
&gt;&gt;&gt; In other words, what is the best practice to express hypermedia actions
&gt;&gt;&gt; in a RESTful way, to allow consumer to control the workflow while the
&gt;&gt;&gt; server controls the affordances of the user (based on internal application
&gt;&gt;&gt; state)?
&gt;&gt;&gt;
&gt;&gt;&gt; Phil
&gt;&gt;&gt;
&gt;&gt;&gt; Le 8 nov. 2013 à 02:58, Mike Kelly &lt;mikekelly321@...&gt; a écrit :
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Fri, Nov 8, 2013 at 1:31 AM, Jan Algermissen
&gt;&gt;&gt; &lt;jan.algermissen@...&gt; wrote:
&gt;&gt;&gt; &gt; Hi Mike,
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; On 08.11.2013, at 02:08, mike amundsen &lt;mamund@...&gt; wrote:
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; not sure i understand the Q, but i'll offer this:
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; rel="http://example.com/rels/publisher" describes the relationship
&gt;&gt;&gt; between the source and the target.
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; I like to try to emphasize what the target is *to the source* with the
&gt;&gt;&gt; goal that the application-level effect of the HTTP methods falls into place.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; This IMO helps a great deal with avoiding to layer specialized
&gt;&gt;&gt; application protocols on top of HTTP (which already is the application
&gt;&gt;&gt; protocol).
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; IOW, it helps prevent redefinitions of the meaning of HTTP methods.
&gt;&gt;&gt; POST means POST, it cannot mean 'publish the source resource'. DELETE means
&gt;&gt;&gt; DELETE, it cannot mean 'unpublish the the source resource'.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Well, those methods have a general meaning within the uniform
&gt;&gt;&gt; interface of HTTP whose purpose is to add to the self-descriptiveness
&gt;&gt;&gt; of messages and, in doing so, to afford intermediation across the
&gt;&gt;&gt; system (e.g. web caching). The HTTP method definitions attribute
&gt;&gt;&gt; meaning designed for this purpose (e.g. establishing safety,
&gt;&gt;&gt; idempotency, cacheability, etc).
&gt;&gt;&gt;
&gt;&gt;&gt; Provided the link relations are not in conflict with the HTTP
&gt;&gt;&gt; definitions, and are merely qualifying the details of methods within
&gt;&gt;&gt; the context of a given transition, then it is wrong to think about
&gt;&gt;&gt; that in terms of "redefinition". It's qualification.
&gt;&gt;&gt;
&gt;&gt;&gt; In practice, it's much easier for consuming parties if your
&gt;&gt;&gt; documentation is specific by providing an explicit description of the
&gt;&gt;&gt; meaning and structure of the various requests possible over a given
&gt;&gt;&gt; link. Leaving your documentation so abstract that the reader is left
&gt;&gt;&gt; with the task of inferring every part of each possible request does
&gt;&gt;&gt; not seem like a very pragmatic approach for custom link relations (but
&gt;&gt;&gt; may be more appropriate for standardised link relations).
&gt;&gt;&gt;
&gt;&gt;&gt; &gt; If you find yourself in a situation that you absolutely must tell the
&gt;&gt;&gt; client developer this, rephrase the hypermedia semantic (here: the link rel
&gt;&gt;&gt; spec).
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; There is nothing to say againts hints regarding the intended
&gt;&gt;&gt; 'canonical' use case but I can always only be a hint. AtomPub is an
&gt;&gt;&gt; example, where the spec tells us so much about the interactions between
&gt;&gt;&gt; client and server that it looks like a protocol when it is actually only
&gt;&gt;&gt; hints about a canonical application flow. Focussing on resource semantics
&gt;&gt;&gt; would have been much nicer, IMHO.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; One simply cannot constrain HTTP servers that way and still have REST.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt;
&gt;&gt;&gt; The importance of HTTP methods from a REST point of view is that they
&gt;&gt;&gt; create **some** visibility of the client server interactions, so that
&gt;&gt;&gt; the messages can be understood to _a certain extent_ by
&gt;&gt;&gt; intermediaries. Provided that visibility is not impacted (i.e. a link
&gt;&gt;&gt; rel's qualification of a method doesn't _conflict_ with HTTP's) then
&gt;&gt;&gt; how does this have any bearing on the "RESTfulness" of the
&gt;&gt;&gt; application?
&gt;&gt;&gt;
&gt;&gt;&gt; Cheers,
&gt;&gt;&gt; M
&gt;&gt;&gt;  
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19552<br>
Sender:mike amundsen &lt;mamund@...&gt;<br>
Post Date/Time:2013-11-10 01:25:47<br>
Subject:Re: [rest-discuss] Link Relations<br>
Message:<br><br>
<pre>&lt;snip&gt;
A key requirement for me is to reduce as much as possible coupling,
therefore I try to design resources as generically as possible (a list of
simple attributes and a list of relationships/states) with the goal to
allow for maximum evolvability of the API - given the mostly UI-driven
interactions against the API.
&lt;/snip&gt;

If you favor JSON and want to reduce coupling between internal coding and
the shared messages, I highly recommend one of the recently-registered
hypermedia types such as HAL+JSON[1], Collection+JSON[2], and Siren[3]. I
find each of these has a unique strength and all of them do a good job of
leading you toward SoC between local components and shared state messages.

By treating the message as a structured format independent of your problem
domain (books, etc.) you get quite far down the path of decoupled
communications. HTML has been successful at this for more than a decade;
our servers continually transform local business objects in the this format
and enable applications running in a client app that knows nothing of the
problem domain, but *does* understand the message format and the protocol
details express _within_ the message (HTML.A, HTML.IMG, HTML.FORM).

&lt;snip&gt;What about the others experience with forms resources vs strongly
typed links?&lt;/snip&gt;

Yes, this convo has gotten a bit narrow since I am dominating the thread. I
know there are several others here who have experience in this space, too.

Cheers.

[1] http://stateless.co/hal_specification.html
[2] http://amundsen.com/media-types/collection/
[3] https://github.com/kevinswiber/siren



mamund
+1.859.757.1449
skype: mca.amundsen
http://amundsen.com/blog/
http://twitter.com/mamund
https://github.com/mamund
http://www.linkedin.com/in/mamund


On Sat, Nov 9, 2013 at 7:14 PM, Philippe Marsteau &lt;marsteau@...&gt;wrote:

&gt; Thank you Mike. That clarifies a lot.
&gt;
&gt; I think I misunderstood link relationships vs. capabilities/states. Your
&gt; proposed approaches help me see how to better design this.
&gt;
&gt; A key requirement for me is to reduce as much as possible coupling,
&gt; therefore I try to design resources as generically as possible (a list of
&gt; simple attributes and a list of relationships/states) with the goal to
&gt; allow for maximum evolvability of the API - given the mostly UI-driven
&gt; interactions against the API.
&gt;
&gt; Basically, I try to map the web pages one would interact with from a
&gt; browser, but stripping out the UI elements (using generic JSON like format).
&gt;
&gt; By keeping the media type as low entry barrier (simple) as possible,
&gt; assuming client will mostly render the data in its preferred technology,
&gt; adding attributes or actions becomes highly dynamic without requiring
&gt; consumer to "uptake" changes: attributes appear dynamically in UI front end
&gt; and new interactions (think of "more actions" drop box) becomes added
&gt; dynamically as well. I think your CJ media type is pretty generic too, so
&gt; maybe this idea/goal is familiar to you...
&gt;
&gt; I also understand this might not fit for system to system type of
&gt; interactions (scripted/automated integrations) and my goal might be too
&gt; idealistic. Have you seen such type of REST APIs? Am I heading in the right
&gt; direction?
&gt;
&gt; What about the others experience with forms resources vs strongly typed
&gt; links?
&gt;
&gt; Phil
&gt;
&gt; Le 9 nov. 2013 à 18:51, mike amundsen &lt;mamund@...&gt; a écrit :
&gt;
&gt; &lt;snip&gt;
&gt; Now how do I tell in this book representation that at this time, clearing
&gt; the shopping cart or adding the book to the shipping cart is not allowed
&gt; (eg based on authenticated user permissions) but reading it is allowed? I
&gt; wish user could discover from the representation rather than having to call
&gt; OPTIONS or learning after the fact (error message)...
&gt; &lt;/snip&gt;
&gt;
&gt; If you wish to communicate this level of detail to clients (not at all a
&gt; bad thing) often people think of these as _actions_ instead of states and
&gt; just communicate the possible action:
&gt; rel="clear"
&gt; rel="add-book"
&gt; and so forth.
&gt;
&gt; I try to steer clear of that whenever possible (as a design goal) and
&gt; express these things as "states" on the server that need to be
&gt; communicated to the client. for example (just making this up here...):
&gt; - "clear" (the resource can be cleared or removed)
&gt; - "edit" (the resource can be appended-to or child records can be added)
&gt; and so forth.
&gt;
&gt; this means representations can look like this:
&gt; &lt;shopping-cart&gt;
&gt;   &lt;link href="..." rel="collection http://example.com/rels/shopping-cart"
&gt; state="read clear" /&gt;
&gt;   &lt;items count="9"&gt;
&gt;     &lt;item href="..." rel="item http://example.com/rels/book" state="read
&gt; clear"&gt;
&gt;       ...
&gt;     &lt;/item&gt;
&gt;     ...
&gt;   &lt;/items&gt;
&gt; &lt;/shopping-cart&gt;
&gt;
&gt; or you can use a much more explicit design:
&gt; &lt;shopping-cart&gt;
&gt;   &lt;clear href="..." rel="collection http://example.com/rels/shopping-cart"
&gt; /&gt;
&gt;   &lt;read href="..." rel="collection http://example.com/rels/shopping-cart"
&gt; /&gt;
&gt;    &lt;items count="9"&gt;
&gt;     &lt;item&gt;
&gt;       &lt;clear href="..." rel="item http://example.com/rels/book" /&gt;
&gt;       &lt;read href="..." rel="item http://example.com/rels/book" /&gt;
&gt;       ...
&gt;     &lt;/item&gt;
&gt;     ...
&gt;   &lt;/items&gt;
&gt; &lt;/shopping-cart&gt;
&gt;
&gt; These are just two possibilities. Note that i didn't include a protocol
&gt; method in these designs, but that would be possible, too. an explicit
&gt; example (one that might support more than one protocol) might look like
&gt; this:
&gt; &lt;shopping-cart&gt;
&gt;   &lt;clear href="..." rel="collection http://example.com/rels/shopping-cart"
&gt; method="HTTP.DELETE"/&gt;
&gt;   &lt;read href="..." rel="collection http://example.com/rels/shopping-cart"
&gt; method="HTTP.GET"/&gt;
&gt;   &lt;items count="9"&gt;
&gt;     ...
&gt;   &lt;/items&gt;
&gt; &lt;/shopping-cart&gt;
&gt;
&gt; Again, this is design so there are many possibilities.
&gt;
&gt; &lt;snip&gt;
&gt; Also where in this context fit the concept of forms, allowing user to fill
&gt; in some parameters...
&gt; &lt;/snip&gt;
&gt;
&gt; yes, i use forms quite often. this is about what state needs to be
&gt; transferred from the client to the server (usually we only think about
&gt; transferring state from server to client!). I might have a server that
&gt; requires additional data in order to add an item to a cart:
&gt;
&gt; &lt;link href="..." rel="http://example.com/rels/shopping-cart"&gt;
&gt;   &lt;data name="quantity" value="1" /&gt;
&gt;   &lt;date name="stockid" value="q1w2e3" /&gt;
&gt;   &lt;date name="required-delivery-date" value="2013-12-24" /&gt;
&gt; &lt;/link&gt;
&gt; and so forth.
&gt;
&gt; I am in the habit of including forms in responses[0]. However, some folks
&gt; prefer to only include links to forms and keep the forms as stand-alone
&gt; resources[1]. Still others think it best not to include this information at
&gt; all and keep that information as part of the documentation[2]
&gt;
&gt; Again, these are design decisions you can make on your own when creating
&gt; your own message format (media type) or one that you can use to guide which
&gt; of the existing registered types will best fit your needs/aesthetics.
&gt;
&gt; Cheers.
&gt;
&gt; [0] http://amundsen.com/media-types/collection/format/#objects-template
&gt;  [1] http://iansrobinson.com/2010/09/02/using-typed-links-to-forms/
&gt; [2] http://tools.ietf.org/html/draft-kelly-json-hal-06#section-8.2
&gt;
&gt;
&gt;
&gt;
&gt; mamund
&gt; +1.859.757.1449
&gt; skype: mca.amundsen
&gt; http://amundsen.com/blog/
&gt; http://twitter.com/mamund
&gt; https://github.com/mamund
&gt; http://www.linkedin.com/in/mamund
&gt;
&gt;
&gt; On Sat, Nov 9, 2013 at 5:46 PM, Philippe Marsteau &lt;marsteau@...&gt;wrote:
&gt;
&gt;&gt; Interesting...
&gt;&gt;
&gt;&gt; Now how do I tell in this book representation that at this time, clearing
&gt;&gt; the shopping cart or adding the book to the shipping cart is not allowed
&gt;&gt; (eg based on authenticated user permissions) but reading it is allowed? I
&gt;&gt; wish user could discover from the representation rather than having to call
&gt;&gt; OPTIONS or learning after the fact (error message)...
&gt;&gt;
&gt;&gt; Also where in this context fit the concept of forms, allowing user to
&gt;&gt; fill in some parameters, before user can actually add the book in the
&gt;&gt; shipping cart (eg, number of books to add)? Would the representation
&gt;&gt; include a link to the form (instead of to the shopping cart directly), and
&gt;&gt; its doc states only GET is allowed? The idea is to let user discover which
&gt;&gt; attributes are need as input before a PUT (or POST or PATCH) can be called
&gt;&gt; on the shopping cart... Instead of having client to hard code editable
&gt;&gt; input fields to be requested to user ("knowing" the media type or profile
&gt;&gt; of the shopping cart resource).
&gt;&gt;
&gt;&gt; Thanks again, it helps.
&gt;&gt;
&gt;&gt; Phil
&gt;&gt;
&gt;&gt; Le 9 nov. 2013 à 16:53, mike amundsen &lt;mamund@...&gt; a écrit :
&gt;&gt;
&gt;&gt;  FWIW, you're getting in to "design" space here - and that's based on
&gt;&gt; context and preference. nothing right/wrong here so there are lots of
&gt;&gt; options.
&gt;&gt;
&gt;&gt; first, i usually indicate state properties of a resource using data
&gt;&gt; elements in the representation, not transition elements:
&gt;&gt;
&gt;&gt; &lt;book&gt;
&gt;&gt;   &lt;in-stock value="true" /&gt;
&gt;&gt;   &lt;link href="..." rel="http://example.com/rels/shopping-cart" /&gt;
&gt;&gt; &lt;/book&gt;
&gt;&gt;
&gt;&gt; again, instructions on the link identified as the shopping cart might
&gt;&gt; look like this:
&gt;&gt; - HTTP.GET returns the state of the shopping cart
&gt;&gt; - HTTP.POST adds the current book to the shopping cart
&gt;&gt; - HTTP.DELETE clears all items from the shopping cart
&gt;&gt; and so on...
&gt;&gt;
&gt;&gt; now clients (humans) can see that the "state" of the book is "in-stock"
&gt;&gt; and then decide to take an appropriate action.
&gt;&gt;
&gt;&gt;
&gt;&gt; as for "I believe there are cases where the server dictates the steps
&gt;&gt; before"...
&gt;&gt;
&gt;&gt; yes, the server may have rules about what "state" server-side resources
&gt;&gt; need to have before a task can be executed. This can be viewed as dictating
&gt;&gt; that "state" of things on the server, not dictating the order in which
&gt;&gt; things happen on the client. This POV is close to the way programmers had
&gt;&gt; to (re)learn to design user interfaces with teh advent of the pointer
&gt;&gt; device (mouse). Suddenly, users could not be "led" from input to input in a
&gt;&gt; certain order. Users had be power (and audacity) to click around on the
&gt;&gt; screen, enter things in various order and so on. It was bedlam (grin)!
&gt;&gt;
&gt;&gt; eventually, we learned to build UIs that used things like progressive
&gt;&gt; disclosure, disabling items until certain "state" in the UI is achieved,
&gt;&gt; etc.
&gt;&gt;
&gt;&gt; we need to do that same for hypermedia services on the web.
&gt;&gt;
&gt;&gt; hope this helps.
&gt;&gt;
&gt;&gt;
&gt;&gt; mamund
&gt;&gt; +1.859.757.1449
&gt;&gt; skype: mca.amundsen
&gt;&gt; http://amundsen.com/blog/
&gt;&gt; http://twitter.com/mamund
&gt;&gt; https://github.com/mamund
&gt;&gt; http://www.linkedin.com/in/mamund
&gt;&gt;
&gt;&gt;
&gt;&gt; On Sat, Nov 9, 2013 at 3:25 PM, Philippe Marsteau &lt;marsteau@gmail.com&gt;wrote:
&gt;&gt;
&gt;&gt;&gt; Appreciate the feedback and experience sharing.
&gt;&gt;&gt;
&gt;&gt;&gt; So reusing my use case if buying a book, what rels would define from the
&gt;&gt;&gt; root book collection resource? (assuming the application is designed to let
&gt;&gt;&gt; customers buy books).
&gt;&gt;&gt;
&gt;&gt;&gt; How do I let the consumer discover a book listed in the collection can
&gt;&gt;&gt; now be "bought"?
&gt;&gt;&gt;
&gt;&gt;&gt; I believe there are cases where the server dictates the steps before a
&gt;&gt;&gt; book order can be placed: server decides shipment info is ended or payment
&gt;&gt;&gt; info is needed. I mean the book listed in store does not have a model
&gt;&gt;&gt; relationship "orders" linking to it, does it?
&gt;&gt;&gt;
&gt;&gt;&gt; You cannot create an order until user goes through a server defined list
&gt;&gt;&gt; of steps. Furthermore, the steps could be different per user (eg one who
&gt;&gt;&gt; already stored his payment/shipping on file for future orders).
&gt;&gt;&gt;
&gt;&gt;&gt; While I completely understand it is the consumer who activates the
&gt;&gt;&gt; hypermedia controls, and thus the workflow progress depends on the user, I
&gt;&gt;&gt; need a way to let consumer discover through hypermedia controls "what" can
&gt;&gt;&gt; be done at each step of the application business workflow (here: what info
&gt;&gt;&gt; must be entered to complete the book order process?), based on user
&gt;&gt;&gt; permissions or internal application state...
&gt;&gt;&gt;
&gt;&gt;&gt; Your further guidance is appreciated!
&gt;&gt;&gt;
&gt;&gt;&gt; Le 9 nov. 2013 à 14:25, mike amundsen &lt;mamund@...&gt; a écrit :
&gt;&gt;&gt;
&gt;&gt;&gt;  I will say that i've gone both routes (using rels to indicate
&gt;&gt;&gt; relationships and using rels to indicate actions) and am not settled on
&gt;&gt;&gt; either.
&gt;&gt;&gt;
&gt;&gt;&gt; the "rel" community def. wants to see this attribute used to indicate
&gt;&gt;&gt; relationships. reviews of  recently registered values at the IANA show this.
&gt;&gt;&gt;
&gt;&gt;&gt; however, i can see the appeal and value of having action indicators on
&gt;&gt;&gt; hypermedia controls; esp. in cases where machines are doing the work of
&gt;&gt;&gt; selecting controls to activate. in this case it seems efficient to reduce
&gt;&gt;&gt; the "decision distance" of 1) find the control that has an id of the
&gt;&gt;&gt; desired target then, 2) look at the control to see what protocol action is
&gt;&gt;&gt; available to 1) find the control that has the id of the desired action of
&gt;&gt;&gt; the target. But this is, in the long run, a false efficiency. It _assumes_
&gt;&gt;&gt; the client code already "knows" things (action and target are coupled) and
&gt;&gt;&gt; constrains the possible options for the client ("you can only do a single
&gt;&gt;&gt; action for this control, want to do some other action? sorry, no control
&gt;&gt;&gt; for that here, move along").
&gt;&gt;&gt;
&gt;&gt;&gt; in the big picture, i've found keeping target identifiers (collection,
&gt;&gt;&gt; storage, document, person) decoupled from action (share, modify, copy,
&gt;&gt;&gt; move, approve, cancel) is a big win. while it adds some
&gt;&gt;&gt; indirection/complexity to the representation (both at design-time and
&gt;&gt;&gt; run-time) this pattern also adds more options and increases the
&gt;&gt;&gt; independence of the client application. including allowing clients to (in
&gt;&gt;&gt; some cases) create new successful workflows that the server didn't map out
&gt;&gt;&gt; even though it is completely allowed by the state machine.
&gt;&gt;&gt;
&gt;&gt;&gt; FWIW, if you want to continue to constrain clients to only following
&gt;&gt;&gt; strict server pre-defined paths, you can still do that while sticking to
&gt;&gt;&gt; the "rel is for relationships" pattern.
&gt;&gt;&gt;
&gt;&gt;&gt; Cheers.
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; mamund
&gt;&gt;&gt; +1.859.757.1449
&gt;&gt;&gt; skype: mca.amundsen
&gt;&gt;&gt; http://amundsen.com/blog/
&gt;&gt;&gt; http://twitter.com/mamund
&gt;&gt;&gt; https://github.com/mamund
&gt;&gt;&gt; http://www.linkedin.com/in/mamund
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Sat, Nov 9, 2013 at 12:59 PM, Philippe Marsteau &lt;marsteau@...&gt;wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I see 2 distinct purposes of link relations: either to qualified a
&gt;&gt;&gt;&gt; transition from one state to another of the resource, or to describe how
&gt;&gt;&gt;&gt; two resources relate one to another.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; This discussion I think focused on the latter. I am specifically
&gt;&gt;&gt;&gt; curious of best practices for the former case, when a RESTful API aims at
&gt;&gt;&gt;&gt; letting consumer work through a specific workflow (eg. buying a book
&gt;&gt;&gt;&gt; online).
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I thought the best practice was to let user land ton an entry point
&gt;&gt;&gt;&gt; resource (eg collection of books) and then let user evolve in the workflow:
&gt;&gt;&gt;&gt; first by affording user to initiate the workflow (eg. "rel=buy" which
&gt;&gt;&gt;&gt; likely translates with GETing a "buy-a-book-form" resource, letting user
&gt;&gt;&gt;&gt; discover which inputs are need to start the workflow). Then subsequently,
&gt;&gt;&gt;&gt; each step in the workflow will afford user to confirm an order, select
&gt;&gt;&gt;&gt; payment information, shipping details... Ultimately the server will confirm
&gt;&gt;&gt;&gt; creation of an order resource (and maybe  provide a shipment resource
&gt;&gt;&gt;&gt; allowing user to track shipping status or to cancel order, etc.)
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; In such typical workflow scenario, is it a bad practice to expose rels
&gt;&gt;&gt;&gt; as "actions" (thus verbs)? I think of having server sending relevant
&gt;&gt;&gt;&gt; actions on each step (as part of resource representations), letting user
&gt;&gt;&gt;&gt; discover HTTP methods and target resource to interact with as a result of
&gt;&gt;&gt;&gt; activating the hypermedia control (action).
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; In the example of AtomPub, we have a similar hypermedia control "edit"
&gt;&gt;&gt;&gt; (verb) to afford atom consumer a given feed entry can be edited. Which
&gt;&gt;&gt;&gt; translate with a PUT to the target href (the target feed entry).
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; In other words, what is the best practice to express hypermedia actions
&gt;&gt;&gt;&gt; in a RESTful way, to allow consumer to control the workflow while the
&gt;&gt;&gt;&gt; server controls the affordances of the user (based on internal application
&gt;&gt;&gt;&gt; state)?
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Phil
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Le 8 nov. 2013 à 02:58, Mike Kelly &lt;mikekelly321@...&gt; a écrit :
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On Fri, Nov 8, 2013 at 1:31 AM, Jan Algermissen
&gt;&gt;&gt;&gt; &lt;jan.algermissen@...&gt; wrote:
&gt;&gt;&gt;&gt; &gt; Hi Mike,
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt; On 08.11.2013, at 02:08, mike amundsen &lt;mamund@...&gt; wrote:
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt;&gt; &gt;&gt; not sure i understand the Q, but i'll offer this:
&gt;&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt;&gt; &gt;&gt; rel="http://example.com/rels/publisher" describes the relationship
&gt;&gt;&gt;&gt; between the source and the target.
&gt;&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt; I like to try to emphasize what the target is *to the source* with
&gt;&gt;&gt;&gt; the goal that the application-level effect of the HTTP methods falls into
&gt;&gt;&gt;&gt; place.
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt; This IMO helps a great deal with avoiding to layer specialized
&gt;&gt;&gt;&gt; application protocols on top of HTTP (which already is the application
&gt;&gt;&gt;&gt; protocol).
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt; IOW, it helps prevent redefinitions of the meaning of HTTP methods.
&gt;&gt;&gt;&gt; POST means POST, it cannot mean 'publish the source resource'. DELETE means
&gt;&gt;&gt;&gt; DELETE, it cannot mean 'unpublish the the source resource'.
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Well, those methods have a general meaning within the uniform
&gt;&gt;&gt;&gt; interface of HTTP whose purpose is to add to the self-descriptiveness
&gt;&gt;&gt;&gt; of messages and, in doing so, to afford intermediation across the
&gt;&gt;&gt;&gt; system (e.g. web caching). The HTTP method definitions attribute
&gt;&gt;&gt;&gt; meaning designed for this purpose (e.g. establishing safety,
&gt;&gt;&gt;&gt; idempotency, cacheability, etc).
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Provided the link relations are not in conflict with the HTTP
&gt;&gt;&gt;&gt; definitions, and are merely qualifying the details of methods within
&gt;&gt;&gt;&gt; the context of a given transition, then it is wrong to think about
&gt;&gt;&gt;&gt; that in terms of "redefinition". It's qualification.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; In practice, it's much easier for consuming parties if your
&gt;&gt;&gt;&gt; documentation is specific by providing an explicit description of the
&gt;&gt;&gt;&gt; meaning and structure of the various requests possible over a given
&gt;&gt;&gt;&gt; link. Leaving your documentation so abstract that the reader is left
&gt;&gt;&gt;&gt; with the task of inferring every part of each possible request does
&gt;&gt;&gt;&gt; not seem like a very pragmatic approach for custom link relations (but
&gt;&gt;&gt;&gt; may be more appropriate for standardised link relations).
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; &gt; If you find yourself in a situation that you absolutely must tell the
&gt;&gt;&gt;&gt; client developer this, rephrase the hypermedia semantic (here: the link rel
&gt;&gt;&gt;&gt; spec).
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt; There is nothing to say againts hints regarding the intended
&gt;&gt;&gt;&gt; 'canonical' use case but I can always only be a hint. AtomPub is an
&gt;&gt;&gt;&gt; example, where the spec tells us so much about the interactions between
&gt;&gt;&gt;&gt; client and server that it looks like a protocol when it is actually only
&gt;&gt;&gt;&gt; hints about a canonical application flow. Focussing on resource semantics
&gt;&gt;&gt;&gt; would have been much nicer, IMHO.
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt; One simply cannot constrain HTTP servers that way and still have REST.
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; The importance of HTTP methods from a REST point of view is that they
&gt;&gt;&gt;&gt; create **some** visibility of the client server interactions, so that
&gt;&gt;&gt;&gt; the messages can be understood to _a certain extent_ by
&gt;&gt;&gt;&gt; intermediaries. Provided that visibility is not impacted (i.e. a link
&gt;&gt;&gt;&gt; rel's qualification of a method doesn't _conflict_ with HTTP's) then
&gt;&gt;&gt;&gt; how does this have any bearing on the "RESTfulness" of the
&gt;&gt;&gt;&gt; application?
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Cheers,
&gt;&gt;&gt;&gt; M
&gt;&gt;&gt;&gt;  
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19553<br>
Sender:Charles Reese &lt;charles.reese@...&gt;<br>
Post Date/Time:2013-11-07 23:10:47<br>
Subject:Re: [rest-discuss] Link Relations<br>
Message:<br><br>
<pre>Hi Mike,

Thank you so much!

I'm still wondering about link rels for state-transitions affecting only
one resource. For example, suppose when creating a playlist, it defaults to
'private'. I want to turn it public. I could use a link rel like this:

/rel/playlist/publish

But again, I'm not using the method as the "verb". How would you handle
this?

Cheers,
Charles


On Wed, Nov 6, 2013 at 7:09 AM, mike amundsen &lt;mamund@...&gt; wrote:

&gt; Charles:
&gt;
&gt; First, if you use single strings ("edit", etc.) be sure they are
&gt; registered Link Relation Values. Here's a good list of references:
&gt; - IANA [1]
&gt; - microformats [2]
&gt; - Dublin Core [3]
&gt;
&gt; When you *do* use them, be sure to mention in your documentation which are
&gt; used and where they are registered.
&gt;
&gt; Next, for the cases where you can't find Link Rel Values that suit your
&gt; needs, use the 5988[4] rules for creating full URIs (not relative) and make
&gt; them URLs (resolvable) that point to your own documentation/glossary of
&gt; Link Rel Values online.
&gt;
&gt; Finally, when minting your own Link Rel Values, aim for describing the
&gt; relation between the two resources instead of the action to commit on the
&gt; "target" resource. Use protocol methods to express the "action" to commit:
&gt;
&gt; insert-song -&gt; song (w/ HTTP.POST)
&gt; remove-song -&gt; song (w/ HTTP.DELETE)
&gt;
&gt; Cheers.
&gt;
&gt; [1] http://www.iana.org/assignments/link-relations/link-relations.xhtml
&gt; [2] http://microformats.org/wiki/existing-rel-values
&gt; [3] http://dublincore.org/documents/dcmi-terms/
&gt; [4] http://tools.ietf.org/html/rfc5988
&gt;
&gt;
&gt;
&gt; mamund
&gt; +1.859.757.1449
&gt; skype: mca.amundsen
&gt; http://amundsen.com/blog/
&gt; http://twitter.com/mamund
&gt; https://github.com/mamund
&gt; http://www.linkedin.com/in/mamund
&gt;
&gt;
&gt; On Tue, Nov 5, 2013 at 9:52 PM, Charles Reese &lt;charles.reese@...&gt;wrote:
&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Hi all,
&gt;&gt;
&gt;&gt; I'm looking at HAL and Collection+JSON for an API I'm building. I was
&gt;&gt; wondering if there are any community norms for constructing link relations.
&gt;&gt;
&gt;&gt; Here is what I'm considering:
&gt;&gt;
&gt;&gt; Option 1:
&gt;&gt;
&gt;&gt; /rels/playlists
&gt;&gt; /rels/playlist
&gt;&gt; /rels/playlist/insert-song
&gt;&gt; /rels/playlist/remove-song
&gt;&gt;
&gt;&gt; Option 2:
&gt;&gt;
&gt;&gt; /rels/playlist
&gt;&gt; /rels/playlist/create
&gt;&gt; /rels/playlist/edit
&gt;&gt; /rels/playlist/delete
&gt;&gt; /rels/playlist/insert-song
&gt;&gt; /rels/playlist/remove-song
&gt;&gt;
&gt;&gt; Option 3:
&gt;&gt;
&gt;&gt; list
&gt;&gt; create
&gt;&gt; edit
&gt;&gt; delete
&gt;&gt; insert-song
&gt;&gt; remove-song
&gt;&gt;
&gt;&gt; The first option mixes the singular and plural for items and collections.
&gt;&gt; Then it tacks on a few actions for what doesn't fit well with CRUD. The
&gt;&gt; last option makes the state transitions explicit (but doesn't allow linking
&gt;&gt; for docs). The middle option is somewhat in between.
&gt;&gt;
&gt;&gt; Which of these is preferred? Are there better options?
&gt;&gt;
&gt;&gt; Charles
&gt;&gt;
&gt;&gt;
&gt;&gt; 
&gt;&gt;
&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19554<br>
Sender:Philippe Marsteau &lt;marsteau@...&gt;<br>
Post Date/Time:2013-11-09 20:25:15<br>
Subject:Re: [rest-discuss] Link Relations<br>
Message:<br><br>
<pre>Appreciate the feedback and experience sharing.

So reusing my use case if buying a book, what rels would define from the
root book collection resource? (assuming the application is designed to let
customers buy books).

How do I let the consumer discover a book listed in the collection can now
be "bought"?

I believe there are cases where the server dictates the steps before a book
order can be placed: server decides shipment info is ended or payment info
is needed. I mean the book listed in store does not have a model
relationship "orders" linking to it, does it?

You cannot create an order until user goes through a server defined list of
steps. Furthermore, the steps could be different per user (eg one who
already stored his payment/shipping on file for future orders).

While I completely understand it is the consumer who activates the
hypermedia controls, and thus the workflow progress depends on the user, I
need a way to let consumer discover through hypermedia controls "what" can
be done at each step of the application business workflow (here: what info
must be entered to complete the book order process?), based on user
permissions or internal application state...

Your further guidance is appreciated!

Le 9 nov. 2013 à 14:25, mike amundsen &lt;mamund@...&gt; a écrit :

I will say that i've gone both routes (using rels to indicate relationships
and using rels to indicate actions) and am not settled on either.

the "rel" community def. wants to see this attribute used to indicate
relationships. reviews of  recently registered values at the IANA show this.

however, i can see the appeal and value of having action indicators on
hypermedia controls; esp. in cases where machines are doing the work of
selecting controls to activate. in this case it seems efficient to reduce
the "decision distance" of 1) find the control that has an id of the
desired target then, 2) look at the control to see what protocol action is
available to 1) find the control that has the id of the desired action of
the target. But this is, in the long run, a false efficiency. It _assumes_
the client code already "knows" things (action and target are coupled) and
constrains the possible options for the client ("you can only do a single
action for this control, want to do some other action? sorry, no control
for that here, move along").

in the big picture, i've found keeping target identifiers (collection,
storage, document, person) decoupled from action (share, modify, copy,
move, approve, cancel) is a big win. while it adds some
indirection/complexity to the representation (both at design-time and
run-time) this pattern also adds more options and increases the
independence of the client application. including allowing clients to (in
some cases) create new successful workflows that the server didn't map out
even though it is completely allowed by the state machine.

FWIW, if you want to continue to constrain clients to only following strict
server pre-defined paths, you can still do that while sticking to the "rel
is for relationships" pattern.

Cheers.



mamund
+1.859.757.1449
skype: mca.amundsen
http://amundsen.com/blog/
http://twitter.com/mamund
https://github.com/mamund
http://www.linkedin.com/in/mamund


On Sat, Nov 9, 2013 at 12:59 PM, Philippe Marsteau &lt;marsteau@...&gt;wrote:

&gt; I see 2 distinct purposes of link relations: either to qualified a
&gt; transition from one state to another of the resource, or to describe how
&gt; two resources relate one to another.
&gt;
&gt; This discussion I think focused on the latter. I am specifically curious
&gt; of best practices for the former case, when a RESTful API aims at letting
&gt; consumer work through a specific workflow (eg. buying a book online).
&gt;
&gt; I thought the best practice was to let user land ton an entry point
&gt; resource (eg collection of books) and then let user evolve in the workflow:
&gt; first by affording user to initiate the workflow (eg. "rel=buy" which
&gt; likely translates with GETing a "buy-a-book-form" resource, letting user
&gt; discover which inputs are need to start the workflow). Then subsequently,
&gt; each step in the workflow will afford user to confirm an order, select
&gt; payment information, shipping details... Ultimately the server will confirm
&gt; creation of an order resource (and maybe  provide a shipment resource
&gt; allowing user to track shipping status or to cancel order, etc.)
&gt;
&gt; In such typical workflow scenario, is it a bad practice to expose rels as
&gt; "actions" (thus verbs)? I think of having server sending relevant actions
&gt; on each step (as part of resource representations), letting user discover
&gt; HTTP methods and target resource to interact with as a result of activating
&gt; the hypermedia control (action).
&gt;
&gt; In the example of AtomPub, we have a similar hypermedia control "edit"
&gt; (verb) to afford atom consumer a given feed entry can be edited. Which
&gt; translate with a PUT to the target href (the target feed entry).
&gt;
&gt; In other words, what is the best practice to express hypermedia actions in
&gt; a RESTful way, to allow consumer to control the workflow while the server
&gt; controls the affordances of the user (based on internal application state)?
&gt;
&gt; Phil
&gt;
&gt; Le 8 nov. 2013 à 02:58, Mike Kelly &lt;mikekelly321@...&gt; a écrit :
&gt;
&gt;
&gt;
&gt; On Fri, Nov 8, 2013 at 1:31 AM, Jan Algermissen
&gt; &lt;jan.algermissen@...&gt; wrote:
&gt; &gt; Hi Mike,
&gt; &gt;
&gt; &gt; On 08.11.2013, at 02:08, mike amundsen &lt;mamund@...&gt; wrote:
&gt; &gt;
&gt; &gt;&gt;
&gt; &gt;&gt; not sure i understand the Q, but i'll offer this:
&gt; &gt;&gt;
&gt; &gt;&gt; rel="http://example.com/rels/publisher" describes the relationship
&gt; between the source and the target.
&gt; &gt;&gt;
&gt; &gt;
&gt; &gt; I like to try to emphasize what the target is *to the source* with the
&gt; goal that the application-level effect of the HTTP methods falls into place.
&gt; &gt;
&gt; &gt; This IMO helps a great deal with avoiding to layer specialized
&gt; application protocols on top of HTTP (which already is the application
&gt; protocol).
&gt; &gt;
&gt; &gt; IOW, it helps prevent redefinitions of the meaning of HTTP methods. POST
&gt; means POST, it cannot mean 'publish the source resource'. DELETE means
&gt; DELETE, it cannot mean 'unpublish the the source resource'.
&gt; &gt;
&gt;
&gt; Well, those methods have a general meaning within the uniform
&gt; interface of HTTP whose purpose is to add to the self-descriptiveness
&gt; of messages and, in doing so, to afford intermediation across the
&gt; system (e.g. web caching). The HTTP method definitions attribute
&gt; meaning designed for this purpose (e.g. establishing safety,
&gt; idempotency, cacheability, etc).
&gt;
&gt; Provided the link relations are not in conflict with the HTTP
&gt; definitions, and are merely qualifying the details of methods within
&gt; the context of a given transition, then it is wrong to think about
&gt; that in terms of "redefinition". It's qualification.
&gt;
&gt; In practice, it's much easier for consuming parties if your
&gt; documentation is specific by providing an explicit description of the
&gt; meaning and structure of the various requests possible over a given
&gt; link. Leaving your documentation so abstract that the reader is left
&gt; with the task of inferring every part of each possible request does
&gt; not seem like a very pragmatic approach for custom link relations (but
&gt; may be more appropriate for standardised link relations).
&gt;
&gt; &gt; If you find yourself in a situation that you absolutely must tell the
&gt; client developer this, rephrase the hypermedia semantic (here: the link rel
&gt; spec).
&gt; &gt;
&gt; &gt; There is nothing to say againts hints regarding the intended 'canonical'
&gt; use case but I can always only be a hint. AtomPub is an example, where the
&gt; spec tells us so much about the interactions between client and server that
&gt; it looks like a protocol when it is actually only hints about a canonical
&gt; application flow. Focussing on resource semantics would have been much
&gt; nicer, IMHO.
&gt; &gt;
&gt; &gt; One simply cannot constrain HTTP servers that way and still have REST.
&gt; &gt;
&gt;
&gt; The importance of HTTP methods from a REST point of view is that they
&gt; create **some** visibility of the client server interactions, so that
&gt; the messages can be understood to _a certain extent_ by
&gt; intermediaries. Provided that visibility is not impacted (i.e. a link
&gt; rel's qualification of a method doesn't _conflict_ with HTTP's) then
&gt; how does this have any bearing on the "RESTfulness" of the
&gt; application?
&gt;
&gt; Cheers,
&gt; M
&gt;
&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19555<br>
Sender:Philippe Marsteau &lt;marsteau@...&gt;<br>
Post Date/Time:2013-11-09 22:46:47<br>
Subject:Re: [rest-discuss] Link Relations<br>
Message:<br><br>
<pre>Interesting...

Now how do I tell in this book representation that at this time, clearing
the shopping cart or adding the book to the shipping cart is not allowed
(eg based on authenticated user permissions) but reading it is allowed? I
wish user could discover from the representation rather than having to call
OPTIONS or learning after the fact (error message)...

Also where in this context fit the concept of forms, allowing user to fill
in some parameters, before user can actually add the book in the shipping
cart (eg, number of books to add)? Would the representation include a link
to the form (instead of to the shopping cart directly), and its doc states
only GET is allowed? The idea is to let user discover which attributes are
need as input before a PUT (or POST or PATCH) can be called on the shopping
cart... Instead of having client to hard code editable input fields to be
requested to user ("knowing" the media type or profile of the shopping cart
resource).

Thanks again, it helps.

Phil

Le 9 nov. 2013 à 16:53, mike amundsen &lt;mamund@...&gt; a écrit :

FWIW, you're getting in to "design" space here - and that's based on
context and preference. nothing right/wrong here so there are lots of
options.

first, i usually indicate state properties of a resource using data
elements in the representation, not transition elements:

&lt;book&gt;
  &lt;in-stock value="true" /&gt;
  &lt;link href="..." rel="http://example.com/rels/shopping-cart" /&gt;
&lt;/book&gt;

again, instructions on the link identified as the shopping cart might look
like this:
- HTTP.GET returns the state of the shopping cart
- HTTP.POST adds the current book to the shopping cart
- HTTP.DELETE clears all items from the shopping cart
and so on...

now clients (humans) can see that the "state" of the book is "in-stock" and
then decide to take an appropriate action.


as for "I believe there are cases where the server dictates the steps
before"...

yes, the server may have rules about what "state" server-side resources
need to have before a task can be executed. This can be viewed as dictating
that "state" of things on the server, not dictating the order in which
things happen on the client. This POV is close to the way programmers had
to (re)learn to design user interfaces with teh advent of the pointer
device (mouse). Suddenly, users could not be "led" from input to input in a
certain order. Users had be power (and audacity) to click around on the
screen, enter things in various order and so on. It was bedlam (grin)!

eventually, we learned to build UIs that used things like progressive
disclosure, disabling items until certain "state" in the UI is achieved,
etc.

we need to do that same for hypermedia services on the web.

hope this helps.


mamund
+1.859.757.1449
skype: mca.amundsen
http://amundsen.com/blog/
http://twitter.com/mamund
https://github.com/mamund
http://www.linkedin.com/in/mamund


On Sat, Nov 9, 2013 at 3:25 PM, Philippe Marsteau &lt;marsteau@...&gt;wrote:

&gt; Appreciate the feedback and experience sharing.
&gt;
&gt; So reusing my use case if buying a book, what rels would define from the
&gt; root book collection resource? (assuming the application is designed to let
&gt; customers buy books).
&gt;
&gt; How do I let the consumer discover a book listed in the collection can now
&gt; be "bought"?
&gt;
&gt; I believe there are cases where the server dictates the steps before a
&gt; book order can be placed: server decides shipment info is ended or payment
&gt; info is needed. I mean the book listed in store does not have a model
&gt; relationship "orders" linking to it, does it?
&gt;
&gt; You cannot create an order until user goes through a server defined list
&gt; of steps. Furthermore, the steps could be different per user (eg one who
&gt; already stored his payment/shipping on file for future orders).
&gt;
&gt; While I completely understand it is the consumer who activates the
&gt; hypermedia controls, and thus the workflow progress depends on the user, I
&gt; need a way to let consumer discover through hypermedia controls "what" can
&gt; be done at each step of the application business workflow (here: what info
&gt; must be entered to complete the book order process?), based on user
&gt; permissions or internal application state...
&gt;
&gt; Your further guidance is appreciated!
&gt;
&gt; Le 9 nov. 2013 à 14:25, mike amundsen &lt;mamund@...&gt; a écrit :
&gt;
&gt;  I will say that i've gone both routes (using rels to indicate
&gt; relationships and using rels to indicate actions) and am not settled on
&gt; either.
&gt;
&gt; the "rel" community def. wants to see this attribute used to indicate
&gt; relationships. reviews of  recently registered values at the IANA show this.
&gt;
&gt; however, i can see the appeal and value of having action indicators on
&gt; hypermedia controls; esp. in cases where machines are doing the work of
&gt; selecting controls to activate. in this case it seems efficient to reduce
&gt; the "decision distance" of 1) find the control that has an id of the
&gt; desired target then, 2) look at the control to see what protocol action is
&gt; available to 1) find the control that has the id of the desired action of
&gt; the target. But this is, in the long run, a false efficiency. It _assumes_
&gt; the client code already "knows" things (action and target are coupled) and
&gt; constrains the possible options for the client ("you can only do a single
&gt; action for this control, want to do some other action? sorry, no control
&gt; for that here, move along").
&gt;
&gt; in the big picture, i've found keeping target identifiers (collection,
&gt; storage, document, person) decoupled from action (share, modify, copy,
&gt; move, approve, cancel) is a big win. while it adds some
&gt; indirection/complexity to the representation (both at design-time and
&gt; run-time) this pattern also adds more options and increases the
&gt; independence of the client application. including allowing clients to (in
&gt; some cases) create new successful workflows that the server didn't map out
&gt; even though it is completely allowed by the state machine.
&gt;
&gt; FWIW, if you want to continue to constrain clients to only following
&gt; strict server pre-defined paths, you can still do that while sticking to
&gt; the "rel is for relationships" pattern.
&gt;
&gt; Cheers.
&gt;
&gt;
&gt;
&gt; mamund
&gt; +1.859.757.1449
&gt; skype: mca.amundsen
&gt; http://amundsen.com/blog/
&gt; http://twitter.com/mamund
&gt; https://github.com/mamund
&gt; http://www.linkedin.com/in/mamund
&gt;
&gt;
&gt; On Sat, Nov 9, 2013 at 12:59 PM, Philippe Marsteau &lt;marsteau@...&gt;wrote:
&gt;
&gt;&gt; I see 2 distinct purposes of link relations: either to qualified a
&gt;&gt; transition from one state to another of the resource, or to describe how
&gt;&gt; two resources relate one to another.
&gt;&gt;
&gt;&gt; This discussion I think focused on the latter. I am specifically curious
&gt;&gt; of best practices for the former case, when a RESTful API aims at letting
&gt;&gt; consumer work through a specific workflow (eg. buying a book online).
&gt;&gt;
&gt;&gt; I thought the best practice was to let user land ton an entry point
&gt;&gt; resource (eg collection of books) and then let user evolve in the workflow:
&gt;&gt; first by affording user to initiate the workflow (eg. "rel=buy" which
&gt;&gt; likely translates with GETing a "buy-a-book-form" resource, letting user
&gt;&gt; discover which inputs are need to start the workflow). Then subsequently,
&gt;&gt; each step in the workflow will afford user to confirm an order, select
&gt;&gt; payment information, shipping details... Ultimately the server will confirm
&gt;&gt; creation of an order resource (and maybe  provide a shipment resource
&gt;&gt; allowing user to track shipping status or to cancel order, etc.)
&gt;&gt;
&gt;&gt; In such typical workflow scenario, is it a bad practice to expose rels as
&gt;&gt; "actions" (thus verbs)? I think of having server sending relevant actions
&gt;&gt; on each step (as part of resource representations), letting user discover
&gt;&gt; HTTP methods and target resource to interact with as a result of activating
&gt;&gt; the hypermedia control (action).
&gt;&gt;
&gt;&gt; In the example of AtomPub, we have a similar hypermedia control "edit"
&gt;&gt; (verb) to afford atom consumer a given feed entry can be edited. Which
&gt;&gt; translate with a PUT to the target href (the target feed entry).
&gt;&gt;
&gt;&gt; In other words, what is the best practice to express hypermedia actions
&gt;&gt; in a RESTful way, to allow consumer to control the workflow while the
&gt;&gt; server controls the affordances of the user (based on internal application
&gt;&gt; state)?
&gt;&gt;
&gt;&gt; Phil
&gt;&gt;
&gt;&gt; Le 8 nov. 2013 à 02:58, Mike Kelly &lt;mikekelly321@...&gt; a écrit :
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Fri, Nov 8, 2013 at 1:31 AM, Jan Algermissen
&gt;&gt; &lt;jan.algermissen@...&gt; wrote:
&gt;&gt; &gt; Hi Mike,
&gt;&gt; &gt;
&gt;&gt; &gt; On 08.11.2013, at 02:08, mike amundsen &lt;mamund@...&gt; wrote:
&gt;&gt; &gt;
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; not sure i understand the Q, but i'll offer this:
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; rel="http://example.com/rels/publisher" describes the relationship
&gt;&gt; between the source and the target.
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;
&gt;&gt; &gt; I like to try to emphasize what the target is *to the source* with the
&gt;&gt; goal that the application-level effect of the HTTP methods falls into place.
&gt;&gt; &gt;
&gt;&gt; &gt; This IMO helps a great deal with avoiding to layer specialized
&gt;&gt; application protocols on top of HTTP (which already is the application
&gt;&gt; protocol).
&gt;&gt; &gt;
&gt;&gt; &gt; IOW, it helps prevent redefinitions of the meaning of HTTP methods.
&gt;&gt; POST means POST, it cannot mean 'publish the source resource'. DELETE means
&gt;&gt; DELETE, it cannot mean 'unpublish the the source resource'.
&gt;&gt; &gt;
&gt;&gt;
&gt;&gt; Well, those methods have a general meaning within the uniform
&gt;&gt; interface of HTTP whose purpose is to add to the self-descriptiveness
&gt;&gt; of messages and, in doing so, to afford intermediation across the
&gt;&gt; system (e.g. web caching). The HTTP method definitions attribute
&gt;&gt; meaning designed for this purpose (e.g. establishing safety,
&gt;&gt; idempotency, cacheability, etc).
&gt;&gt;
&gt;&gt; Provided the link relations are not in conflict with the HTTP
&gt;&gt; definitions, and are merely qualifying the details of methods within
&gt;&gt; the context of a given transition, then it is wrong to think about
&gt;&gt; that in terms of "redefinition". It's qualification.
&gt;&gt;
&gt;&gt; In practice, it's much easier for consuming parties if your
&gt;&gt; documentation is specific by providing an explicit description of the
&gt;&gt; meaning and structure of the various requests possible over a given
&gt;&gt; link. Leaving your documentation so abstract that the reader is left
&gt;&gt; with the task of inferring every part of each possible request does
&gt;&gt; not seem like a very pragmatic approach for custom link relations (but
&gt;&gt; may be more appropriate for standardised link relations).
&gt;&gt;
&gt;&gt; &gt; If you find yourself in a situation that you absolutely must tell the
&gt;&gt; client developer this, rephrase the hypermedia semantic (here: the link rel
&gt;&gt; spec).
&gt;&gt; &gt;
&gt;&gt; &gt; There is nothing to say againts hints regarding the intended
&gt;&gt; 'canonical' use case but I can always only be a hint. AtomPub is an
&gt;&gt; example, where the spec tells us so much about the interactions between
&gt;&gt; client and server that it looks like a protocol when it is actually only
&gt;&gt; hints about a canonical application flow. Focussing on resource semantics
&gt;&gt; would have been much nicer, IMHO.
&gt;&gt; &gt;
&gt;&gt; &gt; One simply cannot constrain HTTP servers that way and still have REST.
&gt;&gt; &gt;
&gt;&gt;
&gt;&gt; The importance of HTTP methods from a REST point of view is that they
&gt;&gt; create **some** visibility of the client server interactions, so that
&gt;&gt; the messages can be understood to _a certain extent_ by
&gt;&gt; intermediaries. Provided that visibility is not impacted (i.e. a link
&gt;&gt; rel's qualification of a method doesn't _conflict_ with HTTP's) then
&gt;&gt; how does this have any bearing on the "RESTfulness" of the
&gt;&gt; application?
&gt;&gt;
&gt;&gt; Cheers,
&gt;&gt; M
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19556<br>
Sender:Philippe Marsteau &lt;marsteau@...&gt;<br>
Post Date/Time:2013-11-10 00:14:48<br>
Subject:Re: [rest-discuss] Link Relations<br>
Message:<br><br>
<pre>Thank you Mike. That clarifies a lot.

I think I misunderstood link relationships vs. capabilities/states. Your
proposed approaches help me see how to better design this.

A key requirement for me is to reduce as much as possible coupling,
therefore I try to design resources as generically as possible (a list of
simple attributes and a list of relationships/states) with the goal to
allow for maximum evolvability of the API - given the mostly UI-driven
interactions against the API.

Basically, I try to map the web pages one would interact with from a
browser, but stripping out the UI elements (using generic JSON like format).

By keeping the media type as low entry barrier (simple) as possible,
assuming client will mostly render the data in its preferred technology,
adding attributes or actions becomes highly dynamic without requiring
consumer to "uptake" changes: attributes appear dynamically in UI front end
and new interactions (think of "more actions" drop box) becomes added
dynamically as well. I think your CJ media type is pretty generic too, so
maybe this idea/goal is familiar to you...

I also understand this might not fit for system to system type of
interactions (scripted/automated integrations) and my goal might be too
idealistic. Have you seen such type of REST APIs? Am I heading in the right
direction?

What about the others experience with forms resources vs strongly typed
links?

Phil

Le 9 nov. 2013 à 18:51, mike amundsen &lt;mamund@...&gt; a écrit :

&lt;snip&gt;
Now how do I tell in this book representation that at this time, clearing
the shopping cart or adding the book to the shipping cart is not allowed
(eg based on authenticated user permissions) but reading it is allowed? I
wish user could discover from the representation rather than having to call
OPTIONS or learning after the fact (error message)...
&lt;/snip&gt;

If you wish to communicate this level of detail to clients (not at all a
bad thing) often people think of these as _actions_ instead of states and
just communicate the possible action:
rel="clear"
rel="add-book"
and so forth.

I try to steer clear of that whenever possible (as a design goal) and
express these things as "states" on the server that need to be communicated
to the client. for example (just making this up here...):
- "clear" (the resource can be cleared or removed)
- "edit" (the resource can be appended-to or child records can be added)
and so forth.

this means representations can look like this:
&lt;shopping-cart&gt;
  &lt;link href="..." rel="collection http://example.com/rels/shopping-cart"
state="read clear" /&gt;
  &lt;items count="9"&gt;
    &lt;item href="..." rel="item http://example.com/rels/book" state="read
clear"&gt;
      ...
    &lt;/item&gt;
    ...
  &lt;/items&gt;
&lt;/shopping-cart&gt;

or you can use a much more explicit design:
&lt;shopping-cart&gt;
  &lt;clear href="..." rel="collection http://example.com/rels/shopping-cart"
/&gt;
  &lt;read href="..." rel="collection http://example.com/rels/shopping-cart" /&gt;
  &lt;items count="9"&gt;
    &lt;item&gt;
      &lt;clear href="..." rel="item http://example.com/rels/book" /&gt;
      &lt;read href="..." rel="item http://example.com/rels/book" /&gt;
      ...
    &lt;/item&gt;
    ...
  &lt;/items&gt;
&lt;/shopping-cart&gt;

These are just two possibilities. Note that i didn't include a protocol
method in these designs, but that would be possible, too. an explicit
example (one that might support more than one protocol) might look like
this:
&lt;shopping-cart&gt;
  &lt;clear href="..." rel="collection http://example.com/rels/shopping-cart"
method="HTTP.DELETE"/&gt;
  &lt;read href="..." rel="collection http://example.com/rels/shopping-cart"
method="HTTP.GET"/&gt;
  &lt;items count="9"&gt;
    ...
  &lt;/items&gt;
&lt;/shopping-cart&gt;

Again, this is design so there are many possibilities.

&lt;snip&gt;
Also where in this context fit the concept of forms, allowing user to fill
in some parameters...
&lt;/snip&gt;

yes, i use forms quite often. this is about what state needs to be
transferred from the client to the server (usually we only think about
transferring state from server to client!). I might have a server that
requires additional data in order to add an item to a cart:

&lt;link href="..." rel="http://example.com/rels/shopping-cart"&gt;
  &lt;data name="quantity" value="1" /&gt;
  &lt;date name="stockid" value="q1w2e3" /&gt;
  &lt;date name="required-delivery-date" value="2013-12-24" /&gt;
&lt;/link&gt;
and so forth.

I am in the habit of including forms in responses[0]. However, some folks
prefer to only include links to forms and keep the forms as stand-alone
resources[1]. Still others think it best not to include this information at
all and keep that information as part of the documentation[2]

Again, these are design decisions you can make on your own when creating
your own message format (media type) or one that you can use to guide which
of the existing registered types will best fit your needs/aesthetics.

Cheers.

[0] http://amundsen.com/media-types/collection/format/#objects-template
[1] http://iansrobinson.com/2010/09/02/using-typed-links-to-forms/
[2] http://tools.ietf.org/html/draft-kelly-json-hal-06#section-8.2




mamund
+1.859.757.1449
skype: mca.amundsen
http://amundsen.com/blog/
http://twitter.com/mamund
https://github.com/mamund
http://www.linkedin.com/in/mamund


On Sat, Nov 9, 2013 at 5:46 PM, Philippe Marsteau &lt;marsteau@...&gt;wrote:

&gt; Interesting...
&gt;
&gt; Now how do I tell in this book representation that at this time, clearing
&gt; the shopping cart or adding the book to the shipping cart is not allowed
&gt; (eg based on authenticated user permissions) but reading it is allowed? I
&gt; wish user could discover from the representation rather than having to call
&gt; OPTIONS or learning after the fact (error message)...
&gt;
&gt; Also where in this context fit the concept of forms, allowing user to fill
&gt; in some parameters, before user can actually add the book in the shipping
&gt; cart (eg, number of books to add)? Would the representation include a link
&gt; to the form (instead of to the shopping cart directly), and its doc states
&gt; only GET is allowed? The idea is to let user discover which attributes are
&gt; need as input before a PUT (or POST or PATCH) can be called on the shopping
&gt; cart... Instead of having client to hard code editable input fields to be
&gt; requested to user ("knowing" the media type or profile of the shopping cart
&gt; resource).
&gt;
&gt; Thanks again, it helps.
&gt;
&gt; Phil
&gt;
&gt; Le 9 nov. 2013 à 16:53, mike amundsen &lt;mamund@...&gt; a écrit :
&gt;
&gt;  FWIW, you're getting in to "design" space here - and that's based on
&gt; context and preference. nothing right/wrong here so there are lots of
&gt; options.
&gt;
&gt; first, i usually indicate state properties of a resource using data
&gt; elements in the representation, not transition elements:
&gt;
&gt; &lt;book&gt;
&gt;   &lt;in-stock value="true" /&gt;
&gt;   &lt;link href="..." rel="http://example.com/rels/shopping-cart" /&gt;
&gt; &lt;/book&gt;
&gt;
&gt; again, instructions on the link identified as the shopping cart might look
&gt; like this:
&gt; - HTTP.GET returns the state of the shopping cart
&gt; - HTTP.POST adds the current book to the shopping cart
&gt; - HTTP.DELETE clears all items from the shopping cart
&gt; and so on...
&gt;
&gt; now clients (humans) can see that the "state" of the book is "in-stock"
&gt; and then decide to take an appropriate action.
&gt;
&gt;
&gt; as for "I believe there are cases where the server dictates the steps
&gt; before"...
&gt;
&gt; yes, the server may have rules about what "state" server-side resources
&gt; need to have before a task can be executed. This can be viewed as dictating
&gt; that "state" of things on the server, not dictating the order in which
&gt; things happen on the client. This POV is close to the way programmers had
&gt; to (re)learn to design user interfaces with teh advent of the pointer
&gt; device (mouse). Suddenly, users could not be "led" from input to input in a
&gt; certain order. Users had be power (and audacity) to click around on the
&gt; screen, enter things in various order and so on. It was bedlam (grin)!
&gt;
&gt; eventually, we learned to build UIs that used things like progressive
&gt; disclosure, disabling items until certain "state" in the UI is achieved,
&gt; etc.
&gt;
&gt; we need to do that same for hypermedia services on the web.
&gt;
&gt; hope this helps.
&gt;
&gt;
&gt; mamund
&gt; +1.859.757.1449
&gt; skype: mca.amundsen
&gt; http://amundsen.com/blog/
&gt; http://twitter.com/mamund
&gt; https://github.com/mamund
&gt; http://www.linkedin.com/in/mamund
&gt;
&gt;
&gt; On Sat, Nov 9, 2013 at 3:25 PM, Philippe Marsteau &lt;marsteau@...&gt;wrote:
&gt;
&gt;&gt; Appreciate the feedback and experience sharing.
&gt;&gt;
&gt;&gt; So reusing my use case if buying a book, what rels would define from the
&gt;&gt; root book collection resource? (assuming the application is designed to let
&gt;&gt; customers buy books).
&gt;&gt;
&gt;&gt; How do I let the consumer discover a book listed in the collection can
&gt;&gt; now be "bought"?
&gt;&gt;
&gt;&gt; I believe there are cases where the server dictates the steps before a
&gt;&gt; book order can be placed: server decides shipment info is ended or payment
&gt;&gt; info is needed. I mean the book listed in store does not have a model
&gt;&gt; relationship "orders" linking to it, does it?
&gt;&gt;
&gt;&gt; You cannot create an order until user goes through a server defined list
&gt;&gt; of steps. Furthermore, the steps could be different per user (eg one who
&gt;&gt; already stored his payment/shipping on file for future orders).
&gt;&gt;
&gt;&gt; While I completely understand it is the consumer who activates the
&gt;&gt; hypermedia controls, and thus the workflow progress depends on the user, I
&gt;&gt; need a way to let consumer discover through hypermedia controls "what" can
&gt;&gt; be done at each step of the application business workflow (here: what info
&gt;&gt; must be entered to complete the book order process?), based on user
&gt;&gt; permissions or internal application state...
&gt;&gt;
&gt;&gt; Your further guidance is appreciated!
&gt;&gt;
&gt;&gt; Le 9 nov. 2013 à 14:25, mike amundsen &lt;mamund@...&gt; a écrit :
&gt;&gt;
&gt;&gt;  I will say that i've gone both routes (using rels to indicate
&gt;&gt; relationships and using rels to indicate actions) and am not settled on
&gt;&gt; either.
&gt;&gt;
&gt;&gt; the "rel" community def. wants to see this attribute used to indicate
&gt;&gt; relationships. reviews of  recently registered values at the IANA show this.
&gt;&gt;
&gt;&gt; however, i can see the appeal and value of having action indicators on
&gt;&gt; hypermedia controls; esp. in cases where machines are doing the work of
&gt;&gt; selecting controls to activate. in this case it seems efficient to reduce
&gt;&gt; the "decision distance" of 1) find the control that has an id of the
&gt;&gt; desired target then, 2) look at the control to see what protocol action is
&gt;&gt; available to 1) find the control that has the id of the desired action of
&gt;&gt; the target. But this is, in the long run, a false efficiency. It _assumes_
&gt;&gt; the client code already "knows" things (action and target are coupled) and
&gt;&gt; constrains the possible options for the client ("you can only do a single
&gt;&gt; action for this control, want to do some other action? sorry, no control
&gt;&gt; for that here, move along").
&gt;&gt;
&gt;&gt; in the big picture, i've found keeping target identifiers (collection,
&gt;&gt; storage, document, person) decoupled from action (share, modify, copy,
&gt;&gt; move, approve, cancel) is a big win. while it adds some
&gt;&gt; indirection/complexity to the representation (both at design-time and
&gt;&gt; run-time) this pattern also adds more options and increases the
&gt;&gt; independence of the client application. including allowing clients to (in
&gt;&gt; some cases) create new successful workflows that the server didn't map out
&gt;&gt; even though it is completely allowed by the state machine.
&gt;&gt;
&gt;&gt; FWIW, if you want to continue to constrain clients to only following
&gt;&gt; strict server pre-defined paths, you can still do that while sticking to
&gt;&gt; the "rel is for relationships" pattern.
&gt;&gt;
&gt;&gt; Cheers.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; mamund
&gt;&gt; +1.859.757.1449
&gt;&gt; skype: mca.amundsen
&gt;&gt; http://amundsen.com/blog/
&gt;&gt; http://twitter.com/mamund
&gt;&gt; https://github.com/mamund
&gt;&gt; http://www.linkedin.com/in/mamund
&gt;&gt;
&gt;&gt;
&gt;&gt; On Sat, Nov 9, 2013 at 12:59 PM, Philippe Marsteau &lt;marsteau@gmail.com&gt;wrote:
&gt;&gt;
&gt;&gt;&gt; I see 2 distinct purposes of link relations: either to qualified a
&gt;&gt;&gt; transition from one state to another of the resource, or to describe how
&gt;&gt;&gt; two resources relate one to another.
&gt;&gt;&gt;
&gt;&gt;&gt; This discussion I think focused on the latter. I am specifically curious
&gt;&gt;&gt; of best practices for the former case, when a RESTful API aims at letting
&gt;&gt;&gt; consumer work through a specific workflow (eg. buying a book online).
&gt;&gt;&gt;
&gt;&gt;&gt; I thought the best practice was to let user land ton an entry point
&gt;&gt;&gt; resource (eg collection of books) and then let user evolve in the workflow:
&gt;&gt;&gt; first by affording user to initiate the workflow (eg. "rel=buy" which
&gt;&gt;&gt; likely translates with GETing a "buy-a-book-form" resource, letting user
&gt;&gt;&gt; discover which inputs are need to start the workflow). Then subsequently,
&gt;&gt;&gt; each step in the workflow will afford user to confirm an order, select
&gt;&gt;&gt; payment information, shipping details... Ultimately the server will confirm
&gt;&gt;&gt; creation of an order resource (and maybe  provide a shipment resource
&gt;&gt;&gt; allowing user to track shipping status or to cancel order, etc.)
&gt;&gt;&gt;
&gt;&gt;&gt; In such typical workflow scenario, is it a bad practice to expose rels
&gt;&gt;&gt; as "actions" (thus verbs)? I think of having server sending relevant
&gt;&gt;&gt; actions on each step (as part of resource representations), letting user
&gt;&gt;&gt; discover HTTP methods and target resource to interact with as a result of
&gt;&gt;&gt; activating the hypermedia control (action).
&gt;&gt;&gt;
&gt;&gt;&gt; In the example of AtomPub, we have a similar hypermedia control "edit"
&gt;&gt;&gt; (verb) to afford atom consumer a given feed entry can be edited. Which
&gt;&gt;&gt; translate with a PUT to the target href (the target feed entry).
&gt;&gt;&gt;
&gt;&gt;&gt; In other words, what is the best practice to express hypermedia actions
&gt;&gt;&gt; in a RESTful way, to allow consumer to control the workflow while the
&gt;&gt;&gt; server controls the affordances of the user (based on internal application
&gt;&gt;&gt; state)?
&gt;&gt;&gt;
&gt;&gt;&gt; Phil
&gt;&gt;&gt;
&gt;&gt;&gt; Le 8 nov. 2013 à 02:58, Mike Kelly &lt;mikekelly321@gmail.com&gt; a écrit :
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Fri, Nov 8, 2013 at 1:31 AM, Jan Algermissen
&gt;&gt;&gt; &lt;jan.algermissen@...&gt; wrote:
&gt;&gt;&gt; &gt; Hi Mike,
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; On 08.11.2013, at 02:08, mike amundsen &lt;mamund@...&gt; wrote:
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; not sure i understand the Q, but i'll offer this:
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;&gt; rel="http://example.com/rels/publisher" describes the relationship
&gt;&gt;&gt; between the source and the target.
&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; I like to try to emphasize what the target is *to the source* with the
&gt;&gt;&gt; goal that the application-level effect of the HTTP methods falls into place.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; This IMO helps a great deal with avoiding to layer specialized
&gt;&gt;&gt; application protocols on top of HTTP (which already is the application
&gt;&gt;&gt; protocol).
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; IOW, it helps prevent redefinitions of the meaning of HTTP methods.
&gt;&gt;&gt; POST means POST, it cannot mean 'publish the source resource'. DELETE means
&gt;&gt;&gt; DELETE, it cannot mean 'unpublish the the source resource'.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Well, those methods have a general meaning within the uniform
&gt;&gt;&gt; interface of HTTP whose purpose is to add to the self-descriptiveness
&gt;&gt;&gt; of messages and, in doing so, to afford intermediation across the
&gt;&gt;&gt; system (e.g. web caching). The HTTP method definitions attribute
&gt;&gt;&gt; meaning designed for this purpose (e.g. establishing safety,
&gt;&gt;&gt; idempotency, cacheability, etc).
&gt;&gt;&gt;
&gt;&gt;&gt; Provided the link relations are not in conflict with the HTTP
&gt;&gt;&gt; definitions, and are merely qualifying the details of methods within
&gt;&gt;&gt; the context of a given transition, then it is wrong to think about
&gt;&gt;&gt; that in terms of "redefinition". It's qualification.
&gt;&gt;&gt;
&gt;&gt;&gt; In practice, it's much easier for consuming parties if your
&gt;&gt;&gt; documentation is specific by providing an explicit description of the
&gt;&gt;&gt; meaning and structure of the various requests possible over a given
&gt;&gt;&gt; link. Leaving your documentation so abstract that the reader is left
&gt;&gt;&gt; with the task of inferring every part of each possible request does
&gt;&gt;&gt; not seem like a very pragmatic approach for custom link relations (but
&gt;&gt;&gt; may be more appropriate for standardised link relations).
&gt;&gt;&gt;
&gt;&gt;&gt; &gt; If you find yourself in a situation that you absolutely must tell the
&gt;&gt;&gt; client developer this, rephrase the hypermedia semantic (here: the link rel
&gt;&gt;&gt; spec).
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; There is nothing to say againts hints regarding the intended
&gt;&gt;&gt; 'canonical' use case but I can always only be a hint. AtomPub is an
&gt;&gt;&gt; example, where the spec tells us so much about the interactions between
&gt;&gt;&gt; client and server that it looks like a protocol when it is actually only
&gt;&gt;&gt; hints about a canonical application flow. Focussing on resource semantics
&gt;&gt;&gt; would have been much nicer, IMHO.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; One simply cannot constrain HTTP servers that way and still have REST.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt;
&gt;&gt;&gt; The importance of HTTP methods from a REST point of view is that they
&gt;&gt;&gt; create **some** visibility of the client server interactions, so that
&gt;&gt;&gt; the messages can be understood to _a certain extent_ by
&gt;&gt;&gt; intermediaries. Provided that visibility is not impacted (i.e. a link
&gt;&gt;&gt; rel's qualification of a method doesn't _conflict_ with HTTP's) then
&gt;&gt;&gt; how does this have any bearing on the "RESTfulness" of the
&gt;&gt;&gt; application?
&gt;&gt;&gt;
&gt;&gt;&gt; Cheers,
&gt;&gt;&gt; M
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19557<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-11-10 10:23:00<br>
Subject:Re: [rest-discuss] Link Relations<br>
Message:<br><br>
<pre>
On 08.11.2013, at 00:10, Charles Reese &lt;charles.reese@...&gt; wrote:

&gt; 
&gt; Hi Mike,
&gt; 
&gt; Thank you so much!
&gt; 
&gt; I'm still wondering about link rels for state-transitions affecting only one resource. For example, suppose when creating a playlist, it defaults to 'private'. I want to turn it public. I could use a link rel like this:
&gt; 
&gt; /rel/playlist/publish
&gt; 
&gt; But again, I'm not using the method as the "verb". How would you handle this?

Make the state a resource and modify that:

PUT /playlist/77626/state
Content-Type: application/vnd.foo.state

&lt;state&gt;live&lt;/state&gt;

Personally, I aim for avoiding the need to introduce a media type for this and use a flag and the creational semantics of PUT:

PUT /playlist/77626/flags/isLiveFlag
Content-Length: 0

201 Created
....

Note that you even get create-if-not-exists semantisc when using If-None-Match: *

Dig deeper here: http://www.xent.com/pipermail/fork/2001-September/004712.html

Jan







&gt; 
&gt; Cheers,
&gt; Charles
&gt; 
&gt; 
&gt; On Wed, Nov 6, 2013 at 7:09 AM, mike amundsen &lt;mamund@...&gt; wrote:
&gt; Charles:
&gt; 
&gt; First, if you use single strings ("edit", etc.) be sure they are registered Link Relation Values. Here's a good list of references:
&gt; - IANA [1]
&gt; - microformats [2]
&gt; - Dublin Core [3]
&gt; 
&gt; When you *do* use them, be sure to mention in your documentation which are used and where they are registered.
&gt; 
&gt; Next, for the cases where you can't find Link Rel Values that suit your needs, use the 5988[4] rules for creating full URIs (not relative) and make them URLs (resolvable) that point to your own documentation/glossary of Link Rel Values online.
&gt; 
&gt; Finally, when minting your own Link Rel Values, aim for describing the relation between the two resources instead of the action to commit on the "target" resource. Use protocol methods to express the "action" to commit:
&gt; 
&gt; insert-song -&gt; song (w/ HTTP.POST)
&gt; remove-song -&gt; song (w/ HTTP.DELETE)
&gt; 
&gt; Cheers.
&gt; 
&gt; [1] http://www.iana.org/assignments/link-relations/link-relations.xhtml
&gt; [2] http://microformats.org/wiki/existing-rel-values
&gt; [3] http://dublincore.org/documents/dcmi-terms/
&gt; [4] http://tools.ietf.org/html/rfc5988
&gt; 
&gt; 
&gt; 
&gt; mamund
&gt; +1.859.757.1449
&gt; skype: mca.amundsen
&gt; http://amundsen.com/blog/
&gt; http://twitter.com/mamund
&gt; https://github.com/mamund
&gt; http://www.linkedin.com/in/mamund
&gt; 
&gt; 
&gt; On Tue, Nov 5, 2013 at 9:52 PM, Charles Reese &lt;charles.reese@...&gt; wrote:
&gt; 
&gt; 
&gt; Hi all,
&gt; 
&gt; I'm looking at HAL and Collection+JSON for an API I'm building. I was wondering if there are any community norms for constructing link relations.
&gt; 
&gt; Here is what I'm considering:
&gt; 
&gt; Option 1:
&gt; 
&gt; /rels/playlists
&gt; /rels/playlist
&gt; /rels/playlist/insert-song
&gt; /rels/playlist/remove-song
&gt; 
&gt; Option 2:
&gt; 
&gt; /rels/playlist
&gt; /rels/playlist/create
&gt; /rels/playlist/edit
&gt; /rels/playlist/delete
&gt; /rels/playlist/insert-song
&gt; /rels/playlist/remove-song
&gt; 
&gt; Option 3:
&gt; 
&gt; list
&gt; create
&gt; edit
&gt; delete
&gt; insert-song
&gt; remove-song
&gt; 
&gt; The first option mixes the singular and plural for items and collections. Then it tacks on a few actions for what doesn't fit well with CRUD. The last option makes the state transitions explicit (but doesn't allow linking for docs). The middle option is somewhat in between.
&gt; 
&gt; Which of these is preferred? Are there better options?
&gt; 
&gt; Charles
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19558<br>
Sender:Jan Algermissen &lt;jan.algermissen@...&gt;<br>
Post Date/Time:2013-11-10 10:28:45<br>
Subject:Re: [rest-discuss] Link Relations<br>
Message:<br><br>
<pre>
On 08.11.2013, at 00:10, Charles Reese &lt;charles.reese@...&gt; wrote:

&gt; 
&gt; Hi Mike,
&gt; 
&gt; Thank you so much!
&gt; 
&gt; I'm still wondering about link rels for state-transitions affecting only one resource. For example, suppose when creating a playlist, it defaults to 'private'. I want to turn it public. I could use a link rel like this:
&gt; 
&gt; /rel/playlist/publish
&gt; 
&gt; But again, I'm not using the method as the "verb". How would you handle this?

And another option is to 'move' the resource into the right collection. E.g. by putting an entry in an AtomPub collection that represents the live-playlists.

If you think of this as a queue, you are actually creating a better API, because 'publishing' is never a matter of the client actually doing it. Rather, the client  'marks' it for publishing - so the server can do it, when it has the time and resources to do so. Hence: queue semantics.

Jan





&gt; 
&gt; Cheers,
&gt; Charles
&gt; 
&gt; 
&gt; On Wed, Nov 6, 2013 at 7:09 AM, mike amundsen &lt;mamund@...&gt; wrote:
&gt; Charles:
&gt; 
&gt; First, if you use single strings ("edit", etc.) be sure they are registered Link Relation Values. Here's a good list of references:
&gt; - IANA [1]
&gt; - microformats [2]
&gt; - Dublin Core [3]
&gt; 
&gt; When you *do* use them, be sure to mention in your documentation which are used and where they are registered.
&gt; 
&gt; Next, for the cases where you can't find Link Rel Values that suit your needs, use the 5988[4] rules for creating full URIs (not relative) and make them URLs (resolvable) that point to your own documentation/glossary of Link Rel Values online.
&gt; 
&gt; Finally, when minting your own Link Rel Values, aim for describing the relation between the two resources instead of the action to commit on the "target" resource. Use protocol methods to express the "action" to commit:
&gt; 
&gt; insert-song -&gt; song (w/ HTTP.POST)
&gt; remove-song -&gt; song (w/ HTTP.DELETE)
&gt; 
&gt; Cheers.
&gt; 
&gt; [1] http://www.iana.org/assignments/link-relations/link-relations.xhtml
&gt; [2] http://microformats.org/wiki/existing-rel-values
&gt; [3] http://dublincore.org/documents/dcmi-terms/
&gt; [4] http://tools.ietf.org/html/rfc5988
&gt; 
&gt; 
&gt; 
&gt; mamund
&gt; +1.859.757.1449
&gt; skype: mca.amundsen
&gt; http://amundsen.com/blog/
&gt; http://twitter.com/mamund
&gt; https://github.com/mamund
&gt; http://www.linkedin.com/in/mamund
&gt; 
&gt; 
&gt; On Tue, Nov 5, 2013 at 9:52 PM, Charles Reese &lt;charles.reese@...&gt; wrote:
&gt; 
&gt; 
&gt; Hi all,
&gt; 
&gt; I'm looking at HAL and Collection+JSON for an API I'm building. I was wondering if there are any community norms for constructing link relations.
&gt; 
&gt; Here is what I'm considering:
&gt; 
&gt; Option 1:
&gt; 
&gt; /rels/playlists
&gt; /rels/playlist
&gt; /rels/playlist/insert-song
&gt; /rels/playlist/remove-song
&gt; 
&gt; Option 2:
&gt; 
&gt; /rels/playlist
&gt; /rels/playlist/create
&gt; /rels/playlist/edit
&gt; /rels/playlist/delete
&gt; /rels/playlist/insert-song
&gt; /rels/playlist/remove-song
&gt; 
&gt; Option 3:
&gt; 
&gt; list
&gt; create
&gt; edit
&gt; delete
&gt; insert-song
&gt; remove-song
&gt; 
&gt; The first option mixes the singular and plural for items and collections. Then it tacks on a few actions for what doesn't fit well with CRUD. The last option makes the state transitions explicit (but doesn't allow linking for docs). The middle option is somewhat in between.
&gt; 
&gt; Which of these is preferred? Are there better options?
&gt; 
&gt; Charles
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 


</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19559<br>
Sender:Erik Wilde &lt;dret@...&gt;<br>
Post Date/Time:2013-11-10 16:42:21<br>
Subject:Re: [rest-discuss] Link Relations<br>
Message:<br><br>
<pre>hey jan.

&gt; On Nov 10, 2013, at 2:23, Jan Algermissen &lt;jan.algermissen@nordsc.com&gt; wrote:
&gt; Make the state a resource and modify that:
&gt; 
&gt; PUT /playlist/77626/state
&gt; Content-Type: application/vnd.foo.state
&gt; 
&gt; &lt;state&gt;live&lt;/state&gt;
&gt; 
&gt; Personally, I aim for avoiding the need to introduce a media type for this ...

why create a separate media type? you're designing the playlist media type anyway, including a fragment that's embedded in the playlist representation to indicate the playlist status. simply allow PUT on a linked sub-resource with the exact same syntax. all you have to do is create a new document/message type in your media type: problem solved.

cheers,

dret.
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19560<br>
Sender:Charles Reese &lt;charles.reese@...&gt;<br>
Post Date/Time:2013-11-10 18:10:46<br>
Subject:Re: [rest-discuss] Link Relations<br>
Message:<br><br>
<pre>Jan, Mike, dret:

I guess publishing is a bad example. As dret writes, I can use a status
field and watch when it changes.

So... a better one.

Suppose you want to create a dashboard for Twitter to manage all your
friends. You can start by creating a resource with a link relation called
"https:/friender.com/rels/friends" along with the usual methods:

POST: to follow
DELETE: to stop following
GET: returns a list of all your friends .

But there is an edge case... Last week, there was a Category 5 hurricane
that went right through data center, and while your site was down, your
users went to plain-old Twitter and added some friends.

Now your dashboard and twitter are out of sync. We need to be able to add
"friends" without creating them on Twitter.

I'm wondering how you all would approach.

Cheers,
Charles


On Sun, Nov 10, 2013 at 8:42 AM, Erik Wilde &lt;dret@...&gt; wrote:

&gt; hey jan.
&gt;
&gt; &gt; On Nov 10, 2013, at 2:23, Jan Algermissen &lt;jan.algermissen@...&gt;
&gt; wrote:
&gt; &gt; Make the state a resource and modify that:
&gt; &gt;
&gt; &gt; PUT /playlist/77626/state
&gt; &gt; Content-Type: application/vnd.foo.state
&gt; &gt;
&gt; &gt; &lt;state&gt;live&lt;/state&gt;
&gt; &gt;
&gt; &gt; Personally, I aim for avoiding the need to introduce a media type for
&gt; this ...
&gt;
&gt; why create a separate media type? you're designing the playlist media type
&gt; anyway, including a fragment that's embedded in the playlist representation
&gt; to indicate the playlist status. simply allow PUT on a linked sub-resource
&gt; with the exact same syntax. all you have to do is create a new
&gt; document/message type in your media type: problem solved.
&gt;
&gt; cheers,
&gt;
&gt; dret.




On Sun, Nov 10, 2013 at 8:42 AM, Erik Wilde &lt;dret@...&gt; wrote:

&gt; hey jan.
&gt;
&gt; &gt; On Nov 10, 2013, at 2:23, Jan Algermissen &lt;jan.algermissen@...&gt;
&gt; wrote:
&gt; &gt; Make the state a resource and modify that:
&gt; &gt;
&gt; &gt; PUT /playlist/77626/state
&gt; &gt; Content-Type: application/vnd.foo.state
&gt; &gt;
&gt; &gt; &lt;state&gt;live&lt;/state&gt;
&gt; &gt;
&gt; &gt; Personally, I aim for avoiding the need to introduce a media type for
&gt; this ...
&gt;
&gt; why create a separate media type? you're designing the playlist media type
&gt; anyway, including a fragment that's embedded in the playlist representation
&gt; to indicate the playlist status. simply allow PUT on a linked sub-resource
&gt; with the exact same syntax. all you have to do is create a new
&gt; document/message type in your media type: problem solved.
&gt;
&gt; cheers,
&gt;
&gt; dret.
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19561<br>
Sender:mike amundsen &lt;mamund@...&gt;<br>
Post Date/Time:2013-11-10 19:17:48<br>
Subject:Re: [rest-discuss] Link Relations<br>
Message:<br><br>
<pre>&lt;snip&gt;
But there is an edge case... Last week, there was a Category 5 hurricane
that went right through data center, and while your site was down, your
users went to plain-old Twitter and added some friends.

Now your dashboard and twitter are out of sync. We need to be able to add
"friends" without creating them on Twitter.

I'm wondering how you all would approach.
&lt;/snip&gt;

LOL! are you just making sh*t up to see what we come up with?

if you what you need to do is offer a sync service, then create a resource
that exposes the required state and allow clients to manipulate that state
via representations using a hypermedia control that describes the
representation transfer.

Here's a possible solution to manipulating state between two storage
locations that the server already associates w/ your login-context (e.g. no
need for the client to tell the server what locations to sync up).

&lt;sync href="..." rel="http://example.com/rels/friends" /&gt;
HTTP.GET to return the status of your sync state (e.g. are you in-sync or
not?)
HTTP.POST to initiate the sync process
and so forth.

Of course, if you want to create a more complicated state management case;
one where the client is allowed to select one or both of the storage
locations for syncing, then you need a hypermedia control that allows
clients to include this additional state information:

// Just how the client would *know* these values is another matter but you
can work that out as needed.
&lt;sync href="..." rel="http://example.com/rels/friends"&gt;
  &lt;data name="source" value="" /&gt;
  &lt;data name="target" value="" /&gt;
&lt;/sync&gt;
HTTP.POST to initiate the sync process
and so forth.

In this case, the POST action might return a 201 w/ Location showing a
resource that representations the state of the sync progress. There are
other possibilities, too.

Keep in mind you are not managing *objects* (e.g. friends) here, you
are manipulating state by exchanging representations (hence the name
REpresentational State Transfer).

Cheers.





mamund
+1.859.757.1449
skype: mca.amundsen
http://amundsen.com/blog/
http://twitter.com/mamund
https://github.com/mamund
http://www.linkedin.com/in/mamund


On Sun, Nov 10, 2013 at 1:10 PM, Charles Reese &lt;charles.reese@...&gt;wrote:

&gt;
&gt;
&gt; Jan, Mike, dret:
&gt;
&gt; I guess publishing is a bad example. As dret writes, I can use a status
&gt; field and watch when it changes.
&gt;
&gt; So... a better one.
&gt;
&gt; Suppose you want to create a dashboard for Twitter to manage all your
&gt; friends. You can start by creating a resource with a link relation called
&gt; "https:/friender.com/rels/friends" along with the usual methods:
&gt;
&gt; POST: to follow
&gt; DELETE: to stop following
&gt; GET: returns a list of all your friends .
&gt;
&gt; But there is an edge case... Last week, there was a Category 5 hurricane
&gt; that went right through data center, and while your site was down, your
&gt; users went to plain-old Twitter and added some friends.
&gt;
&gt; Now your dashboard and twitter are out of sync. We need to be able to add
&gt; "friends" without creating them on Twitter.
&gt;
&gt; I'm wondering how you all would approach.
&gt;
&gt; Cheers,
&gt; Charles
&gt;
&gt;
&gt; On Sun, Nov 10, 2013 at 8:42 AM, Erik Wilde &lt;dret@...&gt; wrote:
&gt;
&gt; hey jan.
&gt;&gt;
&gt;&gt; &gt; On Nov 10, 2013, at 2:23, Jan Algermissen &lt;jan.algermissen@...&gt;
&gt;&gt; wrote:
&gt;&gt; &gt; Make the state a resource and modify that:
&gt;&gt; &gt;
&gt;&gt; &gt; PUT /playlist/77626/state
&gt;&gt; &gt; Content-Type: application/vnd.foo.state
&gt;&gt; &gt;
&gt;&gt; &gt; &lt;state&gt;live&lt;/state&gt;
&gt;&gt; &gt;
&gt;&gt; &gt; Personally, I aim for avoiding the need to introduce a media type for
&gt;&gt; this ...
&gt;&gt;
&gt;&gt; why create a separate media type? you're designing the playlist media
&gt;&gt; type anyway, including a fragment that's embedded in the playlist
&gt;&gt; representation to indicate the playlist status. simply allow PUT on a
&gt;&gt; linked sub-resource with the exact same syntax. all you have to do is
&gt;&gt; create a new document/message type in your media type: problem solved.
&gt;&gt;
&gt;&gt; cheers,
&gt;&gt;
&gt;&gt; dret.
&gt;
&gt;
&gt;
&gt;
&gt; On Sun, Nov 10, 2013 at 8:42 AM, Erik Wilde &lt;dret@...&gt; wrote:
&gt;
&gt;&gt; hey jan.
&gt;&gt;
&gt;&gt; &gt; On Nov 10, 2013, at 2:23, Jan Algermissen &lt;jan.algermissen@...&gt;
&gt;&gt; wrote:
&gt;&gt; &gt; Make the state a resource and modify that:
&gt;&gt; &gt;
&gt;&gt; &gt; PUT /playlist/77626/state
&gt;&gt; &gt; Content-Type: application/vnd.foo.state
&gt;&gt; &gt;
&gt;&gt; &gt; &lt;state&gt;live&lt;/state&gt;
&gt;&gt; &gt;
&gt;&gt; &gt; Personally, I aim for avoiding the need to introduce a media type for
&gt;&gt; this ...
&gt;&gt;
&gt;&gt; why create a separate media type? you're designing the playlist media
&gt;&gt; type anyway, including a fragment that's embedded in the playlist
&gt;&gt; representation to indicate the playlist status. simply allow PUT on a
&gt;&gt; linked sub-resource with the exact same syntax. all you have to do is
&gt;&gt; create a new document/message type in your media type: problem solved.
&gt;&gt;
&gt;&gt; cheers,
&gt;&gt;
&gt;&gt; dret.
&gt;
&gt;
&gt;
&gt;
&gt; 
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19562<br>
Sender:Charles Reese &lt;charles.reese@...&gt;<br>
Post Date/Time:2013-11-10 23:04:35<br>
Subject:Re: [rest-discuss] Link Relations<br>
Message:<br><br>
<pre>&gt; LOL! are you just making sh*t up to see what we come up with?

Yes and no. There are so many *bad* examples, it's hard to find good ones
from which to learn. I do need syncing/ingestion for what I'm doing. My
questions are really about the right way to expose this functionality via
hypermedia controls, what to use for rel values, and so on. Right now,
leaning towards this:

{ "collection" :
  "version : "1.0",
  "href" : "https://friender.com/api/friends".
    .
    .
    .
  "links" : [
    { "href" : "https://friender.com/api/sync/friends", "rel" : "sync" }
  ]
    .
    .
    .
}


On Sun, Nov 10, 2013 at 11:17 AM, mike amundsen &lt;mamund@...&gt; wrote:

&gt; &lt;snip&gt;
&gt; But there is an edge case... Last week, there was a Category 5 hurricane
&gt; that went right through data center, and while your site was down, your
&gt; users went to plain-old Twitter and added some friends.
&gt;
&gt; Now your dashboard and twitter are out of sync. We need to be able to add
&gt; "friends" without creating them on Twitter.
&gt;
&gt; I'm wondering how you all would approach.
&gt; &lt;/snip&gt;
&gt;
&gt; LOL! are you just making sh*t up to see what we come up with?
&gt;
&gt; if you what you need to do is offer a sync service, then create a resource
&gt; that exposes the required state and allow clients to manipulate that state
&gt; via representations using a hypermedia control that describes the
&gt; representation transfer.
&gt;
&gt; Here's a possible solution to manipulating state between two storage
&gt; locations that the server already associates w/ your login-context (e.g. no
&gt; need for the client to tell the server what locations to sync up).
&gt;
&gt; &lt;sync href="..." rel="http://example.com/rels/friends" /&gt;
&gt; HTTP.GET to return the status of your sync state (e.g. are you in-sync or
&gt; not?)
&gt; HTTP.POST to initiate the sync process
&gt; and so forth.
&gt;
&gt; Of course, if you want to create a more complicated state management case;
&gt; one where the client is allowed to select one or both of the storage
&gt; locations for syncing, then you need a hypermedia control that allows
&gt; clients to include this additional state information:
&gt;
&gt; // Just how the client would *know* these values is another matter but you
&gt; can work that out as needed.
&gt; &lt;sync href="..." rel="http://example.com/rels/friends"&gt;
&gt;   &lt;data name="source" value="" /&gt;
&gt;   &lt;data name="target" value="" /&gt;
&gt; &lt;/sync&gt;
&gt; HTTP.POST to initiate the sync process
&gt; and so forth.
&gt;
&gt; In this case, the POST action might return a 201 w/ Location showing a
&gt; resource that representations the state of the sync progress. There are
&gt; other possibilities, too.
&gt;
&gt; Keep in mind you are not managing *objects* (e.g. friends) here, you
&gt; are manipulating state by exchanging representations (hence the name
&gt; REpresentational State Transfer).
&gt;
&gt; Cheers.
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; mamund
&gt; +1.859.757.1449
&gt; skype: mca.amundsen
&gt; http://amundsen.com/blog/
&gt; http://twitter.com/mamund
&gt; https://github.com/mamund
&gt; http://www.linkedin.com/in/mamund
&gt;
&gt;
&gt; On Sun, Nov 10, 2013 at 1:10 PM, Charles Reese &lt;charles.reese@...&gt;wrote:
&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Jan, Mike, dret:
&gt;&gt;
&gt;&gt; I guess publishing is a bad example. As dret writes, I can use a status
&gt;&gt; field and watch when it changes.
&gt;&gt;
&gt;&gt; So... a better one.
&gt;&gt;
&gt;&gt; Suppose you want to create a dashboard for Twitter to manage all your
&gt;&gt; friends. You can start by creating a resource with a link relation called
&gt;&gt; "https:/friender.com/rels/friends" along with the usual methods:
&gt;&gt;
&gt;&gt; POST: to follow
&gt;&gt; DELETE: to stop following
&gt;&gt; GET: returns a list of all your friends .
&gt;&gt;
&gt;&gt; But there is an edge case... Last week, there was a Category 5 hurricane
&gt;&gt; that went right through data center, and while your site was down, your
&gt;&gt; users went to plain-old Twitter and added some friends.
&gt;&gt;
&gt;&gt; Now your dashboard and twitter are out of sync. We need to be able to add
&gt;&gt; "friends" without creating them on Twitter.
&gt;&gt;
&gt;&gt; I'm wondering how you all would approach.
&gt;&gt;
&gt;&gt; Cheers,
&gt;&gt; Charles
&gt;&gt;
&gt;&gt;
&gt;&gt; On Sun, Nov 10, 2013 at 8:42 AM, Erik Wilde &lt;dret@...&gt; wrote:
&gt;&gt;
&gt;&gt; hey jan.
&gt;&gt;&gt;
&gt;&gt;&gt; &gt; On Nov 10, 2013, at 2:23, Jan Algermissen &lt;jan.algermissen@...&gt;
&gt;&gt;&gt; wrote:
&gt;&gt;&gt; &gt; Make the state a resource and modify that:
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; PUT /playlist/77626/state
&gt;&gt;&gt; &gt; Content-Type: application/vnd.foo.state
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; &lt;state&gt;live&lt;/state&gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Personally, I aim for avoiding the need to introduce a media type for
&gt;&gt;&gt; this ...
&gt;&gt;&gt;
&gt;&gt;&gt; why create a separate media type? you're designing the playlist media
&gt;&gt;&gt; type anyway, including a fragment that's embedded in the playlist
&gt;&gt;&gt; representation to indicate the playlist status. simply allow PUT on a
&gt;&gt;&gt; linked sub-resource with the exact same syntax. all you have to do is
&gt;&gt;&gt; create a new document/message type in your media type: problem solved.
&gt;&gt;&gt;
&gt;&gt;&gt; cheers,
&gt;&gt;&gt;
&gt;&gt;&gt; dret.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Sun, Nov 10, 2013 at 8:42 AM, Erik Wilde &lt;dret@...&gt; wrote:
&gt;&gt;
&gt;&gt;&gt; hey jan.
&gt;&gt;&gt;
&gt;&gt;&gt; &gt; On Nov 10, 2013, at 2:23, Jan Algermissen &lt;jan.algermissen@...&gt;
&gt;&gt;&gt; wrote:
&gt;&gt;&gt; &gt; Make the state a resource and modify that:
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; PUT /playlist/77626/state
&gt;&gt;&gt; &gt; Content-Type: application/vnd.foo.state
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; &lt;state&gt;live&lt;/state&gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Personally, I aim for avoiding the need to introduce a media type for
&gt;&gt;&gt; this ...
&gt;&gt;&gt;
&gt;&gt;&gt; why create a separate media type? you're designing the playlist media
&gt;&gt;&gt; type anyway, including a fragment that's embedded in the playlist
&gt;&gt;&gt; representation to indicate the playlist status. simply allow PUT on a
&gt;&gt;&gt; linked sub-resource with the exact same syntax. all you have to do is
&gt;&gt;&gt; create a new document/message type in your media type: problem solved.
&gt;&gt;&gt;
&gt;&gt;&gt; cheers,
&gt;&gt;&gt;
&gt;&gt;&gt; dret.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; 
&gt;&gt;
&gt;
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19563<br>
Sender:mike amundsen &lt;mamund@...&gt;<br>
Post Date/Time:2013-11-11 00:13:18<br>
Subject:Re: [rest-discuss] Link Relations<br>
Message:<br><br>
<pre>yep - that could work. but are you planning on doing a GET for that link?

That looks liked a Cj representation and in Cj the links:[] and queries:[]
arrays support HTTP.GET.
The template supports POST &amp; PUT.
The href on items supports GET and DELETE.

You MAY want to use the link to point to another Cj representation that
exposes the sync details (in the items?) and has a template that includes
the state that needs to be transferred from client to server when
initiating a "sync" operation.

Just some ideas.



mamund
+1.859.757.1449
skype: mca.amundsen
http://amundsen.com/blog/
http://twitter.com/mamund
https://github.com/mamund
http://www.linkedin.com/in/mamund


On Sun, Nov 10, 2013 at 6:04 PM, Charles Reese &lt;charles.reese@...&gt;wrote:

&gt;
&gt;
&gt; &gt; LOL! are you just making sh*t up to see what we come up with?
&gt;
&gt; Yes and no. There are so many *bad* examples, it's hard to find good ones
&gt; from which to learn. I do need syncing/ingestion for what I'm doing. My
&gt; questions are really about the right way to expose this functionality via
&gt; hypermedia controls, what to use for rel values, and so on. Right now,
&gt; leaning towards this:
&gt;
&gt; { "collection" :
&gt;   "version : "1.0",
&gt;   "href" : "https://friender.com/api/friends".
&gt;     .
&gt;     .
&gt;     .
&gt;   "links" : [
&gt;     { "href" : "https://friender.com/api/sync/friends", "rel" : "sync" }
&gt;   ]
&gt;     .
&gt;     .
&gt;     .
&gt; }
&gt;
&gt;
&gt; On Sun, Nov 10, 2013 at 11:17 AM, mike amundsen &lt;mamund@...&gt; wrote:
&gt;
&gt;&gt; &lt;snip&gt;
&gt;&gt; But there is an edge case... Last week, there was a Category 5 hurricane
&gt;&gt; that went right through data center, and while your site was down, your
&gt;&gt; users went to plain-old Twitter and added some friends.
&gt;&gt;
&gt;&gt; Now your dashboard and twitter are out of sync. We need to be able to add
&gt;&gt; "friends" without creating them on Twitter.
&gt;&gt;
&gt;&gt; I'm wondering how you all would approach.
&gt;&gt; &lt;/snip&gt;
&gt;&gt;
&gt;&gt; LOL! are you just making sh*t up to see what we come up with?
&gt;&gt;
&gt;&gt; if you what you need to do is offer a sync service, then create a
&gt;&gt; resource that exposes the required state and allow clients to manipulate
&gt;&gt; that state via representations using a hypermedia control that describes
&gt;&gt; the representation transfer.
&gt;&gt;
&gt;&gt; Here's a possible solution to manipulating state between two storage
&gt;&gt; locations that the server already associates w/ your login-context (e.g. no
&gt;&gt; need for the client to tell the server what locations to sync up).
&gt;&gt;
&gt;&gt; &lt;sync href="..." rel="http://example.com/rels/friends" /&gt;
&gt;&gt; HTTP.GET to return the status of your sync state (e.g. are you in-sync or
&gt;&gt; not?)
&gt;&gt; HTTP.POST to initiate the sync process
&gt;&gt; and so forth.
&gt;&gt;
&gt;&gt; Of course, if you want to create a more complicated state management
&gt;&gt; case; one where the client is allowed to select one or both of the storage
&gt;&gt; locations for syncing, then you need a hypermedia control that allows
&gt;&gt; clients to include this additional state information:
&gt;&gt;
&gt;&gt; // Just how the client would *know* these values is another matter but
&gt;&gt; you can work that out as needed.
&gt;&gt; &lt;sync href="..." rel="http://example.com/rels/friends"&gt;
&gt;&gt;   &lt;data name="source" value="" /&gt;
&gt;&gt;   &lt;data name="target" value="" /&gt;
&gt;&gt; &lt;/sync&gt;
&gt;&gt; HTTP.POST to initiate the sync process
&gt;&gt; and so forth.
&gt;&gt;
&gt;&gt; In this case, the POST action might return a 201 w/ Location showing a
&gt;&gt; resource that representations the state of the sync progress. There are
&gt;&gt; other possibilities, too.
&gt;&gt;
&gt;&gt; Keep in mind you are not managing *objects* (e.g. friends) here, you
&gt;&gt; are manipulating state by exchanging representations (hence the name
&gt;&gt; REpresentational State Transfer).
&gt;&gt;
&gt;&gt; Cheers.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; mamund
&gt;&gt; +1.859.757.1449
&gt;&gt; skype: mca.amundsen
&gt;&gt; http://amundsen.com/blog/
&gt;&gt; http://twitter.com/mamund
&gt;&gt; https://github.com/mamund
&gt;&gt; http://www.linkedin.com/in/mamund
&gt;&gt;
&gt;&gt;
&gt;&gt; On Sun, Nov 10, 2013 at 1:10 PM, Charles Reese &lt;charles.reese@...&gt;wrote:
&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Jan, Mike, dret:
&gt;&gt;&gt;
&gt;&gt;&gt; I guess publishing is a bad example. As dret writes, I can use a status
&gt;&gt;&gt; field and watch when it changes.
&gt;&gt;&gt;
&gt;&gt;&gt; So... a better one.
&gt;&gt;&gt;
&gt;&gt;&gt; Suppose you want to create a dashboard for Twitter to manage all your
&gt;&gt;&gt; friends. You can start by creating a resource with a link relation called
&gt;&gt;&gt; "https:/friender.com/rels/friends" along with the usual methods:
&gt;&gt;&gt;
&gt;&gt;&gt; POST: to follow
&gt;&gt;&gt; DELETE: to stop following
&gt;&gt;&gt; GET: returns a list of all your friends .
&gt;&gt;&gt;
&gt;&gt;&gt; But there is an edge case... Last week, there was a Category 5 hurricane
&gt;&gt;&gt; that went right through data center, and while your site was down, your
&gt;&gt;&gt; users went to plain-old Twitter and added some friends.
&gt;&gt;&gt;
&gt;&gt;&gt; Now your dashboard and twitter are out of sync. We need to be able to
&gt;&gt;&gt; add "friends" without creating them on Twitter.
&gt;&gt;&gt;
&gt;&gt;&gt; I'm wondering how you all would approach.
&gt;&gt;&gt;
&gt;&gt;&gt; Cheers,
&gt;&gt;&gt; Charles
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Sun, Nov 10, 2013 at 8:42 AM, Erik Wilde &lt;dret@...&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt; hey jan.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; &gt; On Nov 10, 2013, at 2:23, Jan Algermissen &lt;jan.algermissen@...&gt;
&gt;&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt; &gt; Make the state a resource and modify that:
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt; PUT /playlist/77626/state
&gt;&gt;&gt;&gt; &gt; Content-Type: application/vnd.foo.state
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt; &lt;state&gt;live&lt;/state&gt;
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt; Personally, I aim for avoiding the need to introduce a media type for
&gt;&gt;&gt;&gt; this ...
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; why create a separate media type? you're designing the playlist media
&gt;&gt;&gt;&gt; type anyway, including a fragment that's embedded in the playlist
&gt;&gt;&gt;&gt; representation to indicate the playlist status. simply allow PUT on a
&gt;&gt;&gt;&gt; linked sub-resource with the exact same syntax. all you have to do is
&gt;&gt;&gt;&gt; create a new document/message type in your media type: problem solved.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; cheers,
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; dret.
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Sun, Nov 10, 2013 at 8:42 AM, Erik Wilde &lt;dret@...&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; hey jan.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; &gt; On Nov 10, 2013, at 2:23, Jan Algermissen &lt;jan.algermissen@...&gt;
&gt;&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt; &gt; Make the state a resource and modify that:
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt; PUT /playlist/77626/state
&gt;&gt;&gt;&gt; &gt; Content-Type: application/vnd.foo.state
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt; &lt;state&gt;live&lt;/state&gt;
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt; Personally, I aim for avoiding the need to introduce a media type for
&gt;&gt;&gt;&gt; this ...
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; why create a separate media type? you're designing the playlist media
&gt;&gt;&gt;&gt; type anyway, including a fragment that's embedded in the playlist
&gt;&gt;&gt;&gt; representation to indicate the playlist status. simply allow PUT on a
&gt;&gt;&gt;&gt; linked sub-resource with the exact same syntax. all you have to do is
&gt;&gt;&gt;&gt; create a new document/message type in your media type: problem solved.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; cheers,
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; dret.
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt; 
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19564<br>
Sender:Steve Klabnik &lt;steve@...&gt;<br>
Post Date/Time:2013-11-13 13:33:06<br>
Subject:Re: [rest-discuss] Link Relations<br>
Message:<br><br>
<pre>On 11/11/2013 12:04 AM, Charles Reese wrote:
&gt; There are so many *bad* examples, it's hard to find good ones from which
&gt; to learn.

An easy way to get started thinking about how to tackle these problems
is WWWWWD? (What would the world wide web do?)

I would have come to the same conclusion as Mike, but my initial thought
process would have been like this: What websites do I use that tackle
this kind of problem?

In my brain, I go to https://www.beeminder.com/ . I use this to keep
track of my DuoLingo scores, to make sure I'm keeping up with my German.

So, if Beeminder gets out of whack, there's a little button I can press
(read: hypermedia control) that says "re-sync data." That initiates a
background process to re-fetch the data and make it match. It redirects
back to the dashboard page, with a little "now syncing, check back
later" and a graphic to indicate that the synching process is taking
place. Said control is disabled until the process is done. In addition,
this process runs once a day, even if I don't activate the control.

Anyway, this isn't perfect in all cases, but I often find it a good
starting point when thinking about how to model a particular kind of
state machine.

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19565<br>
Sender:Ruben Verborgh &lt;ruben.verborgh@...&gt;<br>
Post Date/Time:2013-11-19 14:35:13<br>
Subject:your work on Web/REST APIs at WS-REST2014?<br>
Message:<br><br>
<pre>Dear REST enthousiasts,

All of you on this list are undoubtedly creating fascinating things with Web/REST APIs.
Did you realize that many people want to know more about the work youre doing?

If you submit your work to the WS-REST workshop, upon acceptance,
you get to present it in front of a highly specialized and curious audience.
This is a unique opportunity for them, and a rewarding experience for yourself.

Consider submitting a paper on your topic to the WS-REST workshop.
Several frequent posters of this list, including Mike Amundsen, Steve Klabnik and Erik Wilde,
are part of the expert team that will review your paper with great attention.

In case you wonder whether your interests match, dont hesitate to drop me an e-mail.
Read about the WS-REST workshop and its topics below, and follow @wsREST for more!

Best regards,

Ruben, Tom, Carlos  WS-REST 2014 organizers



WS-REST 2014  Fifth International Workshop on Web APIs and RESTful Design
WWW2014  7 April 2014  Seoul, Korea

Who?    Web researchers and engineers working on API servers and clients
What?   A full-day workshop on current and future challenges for Web APIs and their interaction
Why?    Web APIs are more important than ever, yet many unsolved problems demand our attention
When?   Full-day workshop on 7 April 2014  paper submissions before 7 January (hard deadline)
Where?  At the WWW2014 conference in Seoul, Korea


Thousands of APIs exist and their number is growing tremendously, while use cases become increasingly complex. In contrast to the human-oriented part of the Web, Web APIs are designed to be used by machines. This makes issues surrounding their design and integration significantly different from those of the traditional Web. However, this also enables the provisioning of new added-value automated solutions on the Web.
The discussion surrounding Web APIs and RESTful services is often held outside of research communities. This workshop brings together researchers and practitioners by providing an open discussion forum around the design and use of the programmable Web. It is the principal venue for discussing latests findings and research and development results around the issues, practices, and best principles surrounding Web APIs design and their use.


# PRESSING TOPICS #
We especially welcome research and engineering work in the following areas:
- development of intelligent and generic Web API clients
- dynamic combination of and interactions between Web APIs
- novel hypermedia-driven solutions
- tackling the tremendous growth and heterogeneity of APIs
- analysis and understanding of the social and economic factors surrounding the development, use, and adoption of Web APIs and mashups
- novel solutions for the automated discovery and profiling of Web APIs
- novel technologies for facilitating the development of mashups and services for the Web of Things
- lessons learnt from the deployment, maintenance and evolution of Web APIs and mashups


# ALL TOPICS #
In addition to the topics above, this workshop is also open to:
- applications of the REST architectural style to novel domains
- design patterns and anti-patterns for Web APIs
- automated Web API composition
- inverted REST (REST for push events)
- integration of pub/sub with REST
- REST-compliant transaction models
- frameworks for Web API implementation and consumption
- modeling Web APIs
- resource design and granularity
- evolution, versioning and extension of Web APIs
- REST-protocols beyond HTTP


# DETAILS AND DEADLINES #
We welcome full papers (8 pages) and vision papers (4 pages) in the WS-REST ACM template,
available at http://ws-rest.org/2014/cfp.

Paper submission:  Jan 7, 2014 through EasyChair
Notification:      Feb 4, 2014
Camera-ready:      Feb 12, 2014
Workshop:          Apr 7, 2014 at WWW2014 in Seoul, Korea


WS-REST2014 is organized by:
- Ruben Verborgh, Ghent University  iMinds, Belgium
- Thomas Steiner, Google Germany GmbH, Germany
- Carlos Pedrinaci, The Open University, UK

The WS-REST2014 program committee consists of the following people (and a few more pending):
- Jim Webber, Neo Technology
- Steve Vinoski, Verivue
- Steve Klabnik
- Ivan Zuzak, GitHub
- Joe Gregorio, Google
- Mike Amundsen, Layer7
- Stefan Tilkov, innoQ
- Benjamin Carlyle, Siemens
- Vlad Stirbu, Nokia
- Erik Wilde, EMC
- Rosa Alarcón, Pontificia Universidad Catolica de Chile
- Cesare Pautasso, University of Lugano
- Stefan Dietze, L3S Research Center
- Markus Lanthaler, Graz University of Technology
- Sylvia Schreier, FernUniversität in Hagen
- Yves Lafon, W3C
- Tomas Vitvar, Oracle


Get the latest updates at http://ws-rest.org/2014/cfp or via @wsREST.
Don't hesitate to e-mail us with questions or proposals.


Please consider a submission  we really look forward to seeing your work!

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19566<br>
Sender:mike amundsen &lt;mamund@...&gt;<br>
Post Date/Time:2013-11-21 04:29:16<br>
Subject:Announce: AWS + HAL = Hypermedia API<br>
Message:<br><br>
<pre>Amazon's new API Streaming API[1] offers a hypermedia interface based on
Mike Kelly's HAL hypermedia design.

AFAIK, this is the first time a "big  player" has published a hypermedia
API.



[1]
http://docs.aws.amazon.com/appstream/latest/developerguide/rest-api.html?tag=vig-20#rest-api-hal
[2] http://stateless.co/hal_specification.html
&lt;http://stateless.co/hal_specification.html&gt;
mamund &lt;http://stateless.co/hal_specification.html&gt;
+1.859.757.1449
skype: mca.amundsen
 &lt;http://stateless.co/hal_specification.html&gt;http://amundsen.com/blog/
http://twitter.com/mamund
https://github.com/mamund
http://www.linkedin.com/in/mamund
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19567<br>
Sender:Paul Cohen &lt;pacoispaco@...&gt;<br>
Post Date/Time:2013-11-21 08:45:27<br>
Subject:Re: [rest-discuss] Announce: AWS + HAL = Hypermedia API<br>
Message:<br><br>
<pre>Hi,

On Thu, Nov 21, 2013 at 5:29 AM, mike amundsen &lt;mamund@...&gt; wrote:
&gt; Amazon's new API Streaming API[1] offers a hypermedia interface based on Mike Kelly's HAL hypermedia design.
&gt;
&gt; AFAIK, this is the first time a "big  player" has published a hypermedia API.

Cool! Kudos to Mike for the effort he's put into HAL. It will be
interesting to how it works out in larger scale.

/Paul

-- 
Paul Cohen
www.seibostudios.se
mobile: +46 730 787 035
e-mail: paul.cohen@...

</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19568<br>
Sender:Matt McClure &lt;matthewlmcclure@...&gt;<br>
Post Date/Time:2013-11-21 13:52:07<br>
Subject:Re: [rest-discuss] Announce: AWS + HAL = Hypermedia API<br>
Message:<br><br>
<pre>
&gt; On Nov 20, 2013, at 11:29 PM, mike amundsen &lt;mamund@...&gt; wrote:
&gt; 
&gt; 
&gt; Amazon's new API Streaming API[1] offers a hypermedia interface based on Mike Kelly's HAL hypermedia design.

We are obviously not Amazon size, but I'll take this opportunity to share that MapMyFitness's new API also uses HAL. 

https://developer.mapmyapi.com/docs

-- 
http://matthewlmcclure.com
http://about.mapmyfitness.com</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19569<br>
Sender:Adrien Risser &lt;risseraka@...&gt;<br>
Post Date/Time:2013-11-21 14:03:32<br>
Subject:Re: [rest-discuss] Announce: AWS + HAL = Hypermedia API<br>
Message:<br><br>
<pre>On Thu, Nov 21, 2013 at 2:52 PM, Matt McClure &lt;matthewlmcclure@...&gt;wrote:

&gt;
&gt;
&gt;
&gt; On Nov 20, 2013, at 11:29 PM, mike amundsen &lt;mamund@...&gt; wrote:
&gt;
&gt;
&gt;
&gt;
&gt; Amazon's new API Streaming API[1] offers a hypermedia interface based on
&gt; Mike Kelly's HAL hypermedia design.
&gt;
&gt;
&gt; We are obviously not Amazon size, but I'll take this opportunity to share
&gt; that MapMyFitness's new API also uses HAL.
&gt;
&gt; https://developer.mapmyapi.com/docs
&gt;

Since it's time for shameless plugs, here's mine!

TF1's (France's channel 1) MyTF1 Connect &lt;http://www.tf1.fr/live/&gt;
(multi-platform
second-screen application) external data API is also powered by HAL.

http://web.connect.api.tf1.fr/
http://iphone.connect.api.tf1.fr/
etc...

Props to the REST-discuss mailing list and its resources to make us better
REST/Hypermedia architects or developers.

-- 
&gt; http://matthewlmcclure.com
&gt; http://about.mapmyfitness.com
&gt;
&gt;  
&gt;



-- 
Adrien Risser, JavaScript Engineer
M. +33 6 59 60 32 58
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19570<br>
Sender:mike amundsen &lt;mamund@...&gt;<br>
Post Date/Time:2013-11-21 14:17:03<br>
Subject:Re: [rest-discuss] Announce: AWS + HAL = Hypermedia API<br>
Message:<br><br>
<pre>would be cool to have a place where folks can "self-identify" their
hypermedia APIs.

anyone want to volunteer a wiki or some other process for this?



mamund
+1.859.757.1449
skype: mca.amundsen
http://amundsen.com/blog/
http://twitter.com/mamund
https://github.com/mamund
http://www.linkedin.com/in/mamund


On Thu, Nov 21, 2013 at 9:03 AM, Adrien Risser &lt;risseraka@...&gt; wrote:

&gt;
&gt;
&gt; On Thu, Nov 21, 2013 at 2:52 PM, Matt McClure &lt;matthewlmcclure@...&gt;wrote:
&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Nov 20, 2013, at 11:29 PM, mike amundsen &lt;mamund@...&gt; wrote:
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Amazon's new API Streaming API[1] offers a hypermedia interface based on
&gt;&gt; Mike Kelly's HAL hypermedia design.
&gt;&gt;
&gt;&gt;
&gt;&gt; We are obviously not Amazon size, but I'll take this opportunity to share
&gt;&gt; that MapMyFitness's new API also uses HAL.
&gt;&gt;
&gt;&gt; https://developer.mapmyapi.com/docs
&gt;&gt;
&gt;
&gt; Since it's time for shameless plugs, here's mine!
&gt;
&gt; TF1's (France's channel 1) MyTF1 Connect &lt;http://www.tf1.fr/live/&gt; (multi-platform
&gt; second-screen application) external data API is also powered by HAL.
&gt;
&gt; http://web.connect.api.tf1.fr/
&gt; http://iphone.connect.api.tf1.fr/
&gt; etc...
&gt;
&gt; Props to the REST-discuss mailing list and its resources to make us better
&gt; REST/Hypermedia architects or developers.
&gt;
&gt; --
&gt;&gt; http://matthewlmcclure.com
&gt;&gt; http://about.mapmyfitness.com
&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt; --
&gt; Adrien Risser, JavaScript Engineer
&gt; M. +33 6 59 60 32 58
&gt;
&gt;
&gt; 
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19571<br>
Sender:"Rushforth, Peter" &lt;peter.rushforth@...&gt;<br>
Post Date/Time:2013-11-21 14:44:26<br>
Subject:RE: [rest-discuss] Announce: AWS + HAL = Hypermedia API<br>
Message:<br><br>
<pre>I would have thought that Programmable Web would allow a filter on this, but the closest they come is REST, a term which is obviously corrupted by success.
Watch out!  Hypermedia may go the same route... ;-)

Peter Rushforth

________________________________
From: rest-discuss@yahoogroups.com [mailto:rest-discuss@yahoogroups.com] On Behalf Of mike amundsen
Sent: November 21, 2013 09:17
To: Adrien Risser
Cc: Matt McClure; hypermedia-web@googlegroups.com; hypermedia@...; rest-discuss
Subject: Re: [rest-discuss] Announce: AWS + HAL = Hypermedia API



would be cool to have a place where folks can "self-identify" their hypermedia APIs.

anyone want to volunteer a wiki or some other process for this?



mamund
+1.859.757.1449
skype: mca.amundsen
http://amundsen.com/blog/
http://twitter.com/mamund
https://github.com/mamund
http://www.linkedin.com/in/mamund


On Thu, Nov 21, 2013 at 9:03 AM, Adrien Risser &lt;risseraka@...&lt;mailto:risseraka@...&gt;&gt; wrote:


On Thu, Nov 21, 2013 at 2:52 PM, Matt McClure &lt;matthewlmcclure@gmail.com&lt;mailto:matthewlmcclure@...&gt;&gt; wrote:


On Nov 20, 2013, at 11:29 PM, mike amundsen &lt;mamund@...&lt;mailto:mamund@...&gt;&gt; wrote:



Amazon's new API Streaming API[1] offers a hypermedia interface based on Mike Kelly's HAL hypermedia design.

We are obviously not Amazon size, but I'll take this opportunity to share that MapMyFitness's new API also uses HAL.

https://developer.mapmyapi.com/docs

Since it's time for shameless plugs, here's mine!

TF1's (France's channel 1) MyTF1 Connect&lt;http://www.tf1.fr/live/&gt; (multi-platform second-screen application) external data API is also powered by HAL.

http://web.connect.api.tf1.fr/
http://iphone.connect.api.tf1.fr/
etc...

Props to the REST-discuss mailing list and its resources to make us better REST/Hypermedia architects or developers.

--
http://matthewlmcclure.com
http://about.mapmyfitness.com



--
Adrien Risser, JavaScript Engineer
M. +33 6 59 60 32 58&lt;tel:%2B33%206%2059%2060%2032%2058&gt;





</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19572<br>
Sender:mike amundsen &lt;mamund@...&gt;<br>
Post Date/Time:2013-11-21 14:50:40<br>
Subject:Re: [rest-discuss] Announce: AWS + HAL = Hypermedia API<br>
Message:<br><br>
<pre>hmm.....

a table with:
- name of service/API (e.g. "MapMyFitness")
- URL of API Docs
- URL of service (test, sandbox, production, etc.)
- List of registered media types supported (app/hal+json, app/siren, etc.)
- List of H-Factors supported by the API (LO, LI, LN, LT, LE, etc.)



mamund
+1.859.757.1449
skype: mca.amundsen
http://amundsen.com/blog/
http://twitter.com/mamund
https://github.com/mamund
http://www.linkedin.com/in/mamund


On Thu, Nov 21, 2013 at 9:44 AM, Rushforth, Peter &lt;
Peter.Rushforth@...&gt; wrote:

&gt;  I would have thought that Programmable Web would allow a filter on this,
&gt; but the closest they come is REST, a term which is obviously corrupted by
&gt; success.
&gt; Watch out!  Hypermedia may go the same route... ;-)
&gt;
&gt; Peter Rushforth
&gt;
&gt;  ------------------------------
&gt; *From:* rest-discuss@yahoogroups.com [mailto:rest-discuss@yahoogroups.com]
&gt; *On Behalf Of *mike amundsen
&gt; *Sent:* November 21, 2013 09:17
&gt; *To:* Adrien Risser
&gt; *Cc:* Matt McClure; hypermedia-web@...;
&gt; hypermedia@librelist.com; rest-discuss
&gt; *Subject:* Re: [rest-discuss] Announce: AWS + HAL = Hypermedia API
&gt;
&gt;
&gt;
&gt; would be cool to have a place where folks can "self-identify" their
&gt; hypermedia APIs.
&gt;
&gt;  anyone want to volunteer a wiki or some other process for this?
&gt;
&gt;
&gt;
&gt;  mamund
&gt; +1.859.757.1449
&gt; skype: mca.amundsen
&gt; http://amundsen.com/blog/
&gt; http://twitter.com/mamund
&gt; https://github.com/mamund
&gt; http://www.linkedin.com/in/mamund
&gt;
&gt;
&gt; On Thu, Nov 21, 2013 at 9:03 AM, Adrien Risser &lt;risseraka@...&gt;wrote:
&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;  On Thu, Nov 21, 2013 at 2:52 PM, Matt McClure &lt;matthewlmcclure@...
&gt;&gt; &gt; wrote:
&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;  On Nov 20, 2013, at 11:29 PM, mike amundsen &lt;mamund@...&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;  Amazon's new API Streaming API[1] offers a hypermedia interface based
&gt;&gt;&gt; on Mike Kelly's HAL hypermedia design.
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;  We are obviously not Amazon size, but I'll take this opportunity to
&gt;&gt;&gt; share that MapMyFitness's new API also uses HAL.
&gt;&gt;&gt;
&gt;&gt;&gt;  https://developer.mapmyapi.com/docs
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;  Since it's time for shameless plugs, here's mine!
&gt;&gt;
&gt;&gt;  TF1's (France's channel 1) MyTF1 Connect &lt;http://www.tf1.fr/live/&gt; (multi-platform
&gt;&gt; second-screen application) external data API is also powered by HAL.
&gt;&gt;
&gt;&gt;  http://web.connect.api.tf1.fr/
&gt;&gt;  http://iphone.connect.api.tf1.fr/
&gt;&gt;  etc...
&gt;&gt;
&gt;&gt;  Props to the REST-discuss mailing list and its resources to make us
&gt;&gt; better REST/Hypermedia architects or developers.
&gt;&gt;
&gt;&gt;    --
&gt;&gt;&gt; http://matthewlmcclure.com
&gt;&gt;&gt; http://about.mapmyfitness.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;  --
&gt;&gt; Adrien Risser, JavaScript Engineer
&gt;&gt; M. +33 6 59 60 32 58
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;   
&gt;
&gt;  --
&gt; You received this message because you are subscribed to the Google Groups
&gt; "Hypermedia Web" group.
&gt; To unsubscribe from this group and stop receiving emails from it, send an
&gt; email to hypermedia-web+unsubscribe@....
&gt; To post to this group, send email to hypermedia-web@....
&gt; Visit this group at http://groups.google.com/group/hypermedia-web.
&gt; For more options, visit https://groups.google.com/groups/opt_out.
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19573<br>
Sender:Ruben Verborgh &lt;ruben.verborgh@...&gt;<br>
Post Date/Time:2013-11-29 13:20:43<br>
Subject:The lie of the API<br>
Message:<br><br>
<pre>Dear all,

Even though people often perceive it as a technical artefact,
REST/hypermedia APIs offer tangible benefits that go beyond the technical aspects.

For instance, in the cultural heritage sector, much money is being spent on sustainable access.
Furthermore, it is one of the areas where uniform identification is of utmost importance.
So the fact that a single URL can identify the same resource across systems, 
regardless of representation, is crucial (but often not implemented as such).

Unfortunately, the two leading projects DPLA and Europeana got their API design wrong.
The API they offer for human visitors is distinct from the machine API.
As such, it is impossible to share identifiers between different systems.
Furthermore, the incorporation of API keys in URLs of JSON representations
makes it impossible to link to a machine-accessible version of a resource.

I've written a high-level blog post about these problems:
http://ruben.verborgh.org/blog/2013/11/29/the-lie-of-the-api/
If somebody doubts whether a REST API is a good idea, this could be a great starting point.

Cheers,

Ruben
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19574<br>
Sender:Glenn Block &lt;glenn.block@...&gt;<br>
Post Date/Time:2013-12-31 22:59:10<br>
Subject:Re: Issue Tracker, a hypermedia API sample using Collection+Json<br>
Message:<br><br>
<pre>Great point. Yes that is by design. If you send application/json it
defaults to the issue+Json format.

On Tuesday, December 31, 2013, Chris Martin wrote:

&gt; This is slick. It took me awhile to figure out how to use Cj with this
&gt; sample.
&gt;
&gt; For anyone wondering the same, use the correct media type in the request
&gt; header of IssuesFeature.
&gt;
&gt; Request.Headers.Accept.Add(new
&gt; MediaTypeWithQualityHeaderValue("application/vnd.collection+json"));
&gt;
&gt; On Saturday, October 5, 2013 3:29:09 AM UTC-7, Glenn Block wrote:
&gt;&gt;
&gt;&gt; Hello folks
&gt;&gt;
&gt;&gt; For our soon to be release Web Api Book (http://www.amazon.com/
&gt;&gt; Designing-Evolvable-Web-APIs-ASP-NET/dp/1449337716), we have a
&gt;&gt; hypermedia sample built in ASP.NET Web API. The app is an issue tracker
&gt;&gt; API which is designed as a gateway to an issue tracking system like Github.
&gt;&gt; The app uses my Collection+Json library (https://www.nuget.org/
&gt;&gt; packages/WebApiContrib.Formatting.CollectionJson.Client/)  for
&gt;&gt; supporting the CJ format.
&gt;&gt;
&gt;&gt; It includes BDD style acceptance style tests utilizing the in-memory
&gt;&gt; hosting feature of Web Api where each test sends an HTTP request message
&gt;&gt; (without incurring any network traffic).
&gt;&gt;
&gt;&gt; The app also includes a self-host if you want to test it out with your
&gt;&gt; favorite HTTP client.
&gt;&gt;
&gt;&gt; Source is here: https://github.com/webapibook/issuetracker.
&gt;&gt;
&gt;&gt; Feedback welcome.
&gt;&gt;
&gt;&gt; Thanks!
&gt;&gt; Glenn
&gt;&gt;
&gt;&gt;
&gt;&gt;  --
&gt; You received this message because you are subscribed to the Google Groups
&gt; "Collection+JSON" group.
&gt; To unsubscribe from this group and stop receiving emails from it, send an
&gt; email to collectionjson+unsubscribe@... &lt;javascript:_e({},
&gt; 'cvml', 'collectionjson%2Bunsubscribe@...');&gt;.
&gt; For more options, visit https://groups.google.com/groups/opt_out.
&gt;
</pre><br><br><br><br><br>
-----------------------------------------------------------------------------------<br>
Post ID:19575<br>
Sender:Glenn Block &lt;glenn.block@...&gt;<br>
Post Date/Time:2013-12-31 23:01:03<br>
Subject:Re: Issue Tracker, a hypermedia API sample using Collection+Json<br>
Message:<br><br>
<pre>Perhaps I should add a readme for the app?

On Tuesday, December 31, 2013, Chris Martin wrote:

&gt; This is slick. It took me awhile to figure out how to use Cj with this
&gt; sample.
&gt;
&gt; For anyone wondering the same, use the correct media type in the request
&gt; header of IssuesFeature.
&gt;
&gt; Request.Headers.Accept.Add(new
&gt; MediaTypeWithQualityHeaderValue("application/vnd.collection+json"));
&gt;
&gt; On Saturday, October 5, 2013 3:29:09 AM UTC-7, Glenn Block wrote:
&gt;&gt;
&gt;&gt; Hello folks
&gt;&gt;
&gt;&gt; For our soon to be release Web Api Book (http://www.amazon.com/
&gt;&gt; Designing-Evolvable-Web-APIs-ASP-NET/dp/1449337716), we have a
&gt;&gt; hypermedia sample built in ASP.NET Web API. The app is an issue tracker
&gt;&gt; API which is designed as a gateway to an issue tracking system like Github.
&gt;&gt; The app uses my Collection+Json library (https://www.nuget.org/
&gt;&gt; packages/WebApiContrib.Formatting.CollectionJson.Client/)  for
&gt;&gt; supporting the CJ format.
&gt;&gt;
&gt;&gt; It includes BDD style acceptance style tests utilizing the in-memory
&gt;&gt; hosting feature of Web Api where each test sends an HTTP request message
&gt;&gt; (without incurring any network traffic).
&gt;&gt;
&gt;&gt; The app also includes a self-host if you want to test it out with your
&gt;&gt; favorite HTTP client.
&gt;&gt;
&gt;&gt; Source is here: https://github.com/webapibook/issuetracker.
&gt;&gt;
&gt;&gt; Feedback welcome.
&gt;&gt;
&gt;&gt; Thanks!
&gt;&gt; Glenn
&gt;&gt;
&gt;&gt;
&gt;&gt;  --
&gt; You received this message because you are subscribed to the Google Groups
&gt; "Collection+JSON" group.
&gt; To unsubscribe from this group and stop receiving emails from it, send an
&gt; email to collectionjson+unsubscribe@... &lt;javascript:_e({},
&gt; 'cvml', 'collectionjson%2Bunsubscribe@...');&gt;.
&gt; For more options, visit https://groups.google.com/groups/opt_out.
&gt;
</pre><br><br><br><br><br>
