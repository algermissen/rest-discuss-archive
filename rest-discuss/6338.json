{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":210284534,"authorName":"Paul James","from":"Paul James &lt;yahoogroups@...&gt;","profile":"p4u1j4m3s","replyTo":"SENDER","senderId":"qPhf4atasdpqePADmbUSy8EgrxQVB8VKVOjhUdqoSgdDUqJjGq3M4LrgdEQEuo394TN_0ljFqIZtmpIFVlpd-repHhadUK7tR_k","spamInfo":{"isSpam":false,"reason":"3"},"subject":"Re: [rest-discuss] Submitting binary and metadata in a single request","postDate":"1151305891","msgId":6338,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ0OUY4OEEzLjkwOTAwMDhAcGVlai5jby51az4=","inReplyToHeader":"PEJBNjBBODQ4LTU0NEMtNDc3MS1BQzBBLTJBREI1MDE3QzNBOEB0b3BpY21hcHBpbmcuY29tPg==","referencesHeader":"PEJBNjBBODQ4LTU0NEMtNDc3MS1BQzBBLTJBREI1MDE3QzNBOEB0b3BpY21hcHBpbmcuY29tPg=="},"prevInTopic":6337,"nextInTopic":6339,"prevInTime":6337,"nextInTime":6339,"topicId":6335,"numMessagesInTopic":10,"msgSnippet":"Jan, How about thinking of the problem space as three related resources. One is your media data, one for your metadata, and one to represent your complete","rawEmail":"Return-Path: &lt;yahoogroups@...&gt;\r\nX-Sender: yahoogroups@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nReceived: (qmail 88875 invoked from network); 26 Jun 2006 07:11:58 -0000\r\nReceived: from unknown (66.218.66.217)\n  by m30.grp.scd.yahoo.com with QMQP; 26 Jun 2006 07:11:58 -0000\r\nReceived: from unknown (HELO smtp-node-q.griffin.com) (83.148.189.24)\n  by mta2.grp.scd.yahoo.com with SMTP; 26 Jun 2006 07:11:58 -0000\r\nReceived: from [192.168.0.4] (i.am.peej.co.uk [82.151.250.39])\n\tby smtp-node-q.griffin.com (Postfix) with ESMTP id D6D3510E8C60;\n\tMon, 26 Jun 2006 08:11:31 +0100 (BST)\r\nMessage-ID: &lt;449F88A3.9090008@...&gt;\r\nDate: Mon, 26 Jun 2006 08:11:31 +0100\r\nUser-Agent: Thunderbird 1.5.0.4 (X11/20060615)\r\nMIME-Version: 1.0\r\nTo: Jan Algermissen &lt;jalgermissen@...&gt;\r\nCc: rest-discuss@yahoogroups.com\r\nReferences: &lt;BA60A848-544C-4771-AC0A-2ADB5017C3A8@...&gt;\r\nIn-Reply-To: &lt;BA60A848-544C-4771-AC0A-2ADB5017C3A8@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 2:3:4:0\r\nFrom: Paul James &lt;yahoogroups@...&gt;\r\nSubject: Re: [rest-discuss] Submitting binary and metadata in a single request\r\nX-Yahoo-Group-Post: member; u=210284534; y=TGi61wj3jIkhsFbKvF5_EsExwO5mp4USDtOYwleSyxzGwqzk\r\nX-Yahoo-Profile: p4u1j4m3s\r\n\r\nJan,\n\nHow about thinking of the problem space as three related resources. One \nis your media data, one for your metadata, and one to represent your \ncomplete entry, tying the other two resources together. In that way the \nclient can POST the data and metadata at leisure and then finalise the \noperation by creating the entry resource. The entry resource would just \ncontain pointers (the URLs of) to the data and metadata. Would that be \natomic enough for you?\n\nPaul.\n\nJan Algermissen wrote:\n&gt;\n&gt; Hi,\n&gt;\n&gt; suppose I am writing a REST facade to a legacy system; one of the use\n&gt; cases being the creation of entries that consist of arbitrary media\n&gt; data and asociated metadata. One approach to do this is to first POST\n&gt; the media data (and have the server return the created entry with the\n&gt; link to the uploaded media data) and then to update the metadata with\n&gt; a PUT on the entry.\n&gt; (That is the approach Atom is taking, at least in APP v08[1])\n&gt;\n&gt; What if the legacy system requires the creation and metadata\n&gt; assignment be done as an atomic operation, IOW if the entry cannot be\n&gt; created in the absence of the metadata?\n&gt;\n&gt; The only solution I see so far is a multipart form data upload but\n&gt; I&#39;d really like to avoid having this clutter up my otherwise pretty\n&gt; consistent way of doing things in the system I have to build. E.g.\n&gt; I&#39;d need to introduce te meaning of the form fields to the client\n&gt; where it otherwise would just POST the binary and then GET, modify\n&gt; and PUT the associated entry XML data.\n&gt;\n&gt; I have been thinking about a multipart POSTing of an entry XML\n&gt; document right away with the content link pointing to the multipart\n&gt; part that contains the binary data. I think the multipart specs does\n&gt; license that, yes?\n&gt;\n&gt; I&#39;d really apprechiate any thoughts on this matter, thanks.\n&gt;\n&gt; Jan\n&gt;\n&gt; [1] http://www.ietf.org/internet-drafts/draft-ietf-atompub- \n&gt; &lt;http://www.ietf.org/internet-drafts/draft-ietf-atompub-&gt;\n&gt; protocol-08.txt\n&gt;\n&gt;  \n\n\n"}}