{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":22961148,"authorName":"David Stanek","from":"David Stanek &lt;dstanek@...&gt;","profile":"dstanekatt","replyTo":"SENDER","senderId":"C1MivcccVdkSdjR3VPzeQ-dar-67ukJpR4e47dhOh53LTccO9aE347pTiW31mKM9UEloSRLeiKgQRz1_AEIXopOmjGPw7qX3Cw","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [rest-discuss] Determining which Media type for post/put","postDate":"1276542712","msgId":15666,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PEFBTkxrVGluSDJHZWwzWUxNS3pMZmNZVXotVndod3hpYkgtMmZBdzN5cGRubUBtYWlsLmdtYWlsLmNvbT4=","inReplyToHeader":"PDIwMTAwNjE0MTAwNjU5LmVjNmU0OGU1LmVyaWNAYmlzb25zeXN0ZW1zLm5ldD4=","referencesHeader":"PEFBTkxrVGlsazJZWnJnY2U5M3dYcDlFSjRHZnBpckxlUVZ2bUowSnhjeFBZSEBtYWlsLmdtYWlsLmNvbT4JPDIwMTAwNjA0MDc0OTU2LmM5ZTNjMWM1LmVyaWNAYmlzb25zeXN0ZW1zLm5ldD4JPEFBTkxrVGltWFdjaHU5dHY0dmFFeWlGQjh6TFptME0yRjRpNlJjcU55QUZzU0BtYWlsLmdtYWlsLmNvbT4JPDIwMTAwNjA0MDkzOTEzLmVmNmNlYzE5LmVyaWNAYmlzb25zeXN0ZW1zLm5ldD4JPEFBTkxrVGlrSHZsZmJ2dkxQUUc2UmM5WjZMcjE5aFNheS1zT3VYSGJ5cXk0Q0BtYWlsLmdtYWlsLmNvbT4JPDIwMTAwNjA0MTQwOTE2LjNmZmQ3NTNjLmVyaWNAYmlzb25zeXN0ZW1zLm5ldD4JPEFBTkxrVGluU0plTndlckZZMTl4V1VYRFNDY0N5cG5Tdmt6WTc2LUdnVGFlNkBtYWlsLmdtYWlsLmNvbT4JPDIwMTAwNjA4MTAwMzIzLmFhNmVmOTllLmVyaWNAYmlzb25zeXN0ZW1zLm5ldD4JPEFBTkxrVGluVjh5eE4tUjRBRldBdk5hTHFwZWItdWY3Y08wV0ZtWDdEcGFSWEBtYWlsLmdtYWlsLmNvbT4JPDIwMTAwNjA5MTgwMDA1LjhhOGRhNzBiLmVyaWNAYmlzb25zeXN0ZW1zLm5ldD4JPEFBTkxrVGluVDRJdjUzRWhyaFBMR0dZYUxlMVFmaHBHVjFQTTE1NmNYQ0toWkBtYWlsLmdtYWlsLmNvbT4JPDIwMTAwNjExMDgxNDE4LjZkZGE0N2E5LmVyaWNAYmlzb25zeXN0ZW1zLm5ldD4JPEFBTkxrVGltRHFhWHVIUE52eS1RVUZaa0ZNYUhwU2NnSkNHLXNQcUtxRndzdUBtYWlsLmdtYWlsLmNvbT4JPDIwMTAwNjExMjMzMjU4LmUxYjdlNWY3LmVyaWNAYmlzb25zeXN0ZW1zLm5ldD4JPEFBTkxrVGltelViTmdyQnVuTXhHTGlLMGZvZDFSVlhxOGtXZTFkOC1LSEs2YkBtYWlsLmdtYWlsLmNvbT4JPDIwMTAwNjEyMTAzMjU1LjgwYzE1YThiLmVyaWNAYmlzb25zeXN0ZW1zLm5ldD4JPEFBTkxrVGluWUtUbk5oZmVTMl9UX1BJRklqV0p5SEtuUmJDWnFFTnM1MUhWV0BtYWlsLmdtYWlsLmNvbT4JPDIwMTAwNjE0MTAwNjU5LmVjNmU0OGU1LmVyaWNAYmlzb25zeXN0ZW1zLm5ldD4="},"prevInTopic":15665,"nextInTopic":15667,"prevInTime":15665,"nextInTime":15667,"topicId":15466,"numMessagesInTopic":82,"msgSnippet":"... Maybe my misunderstanding is because of the experimenting I have been doing with Varnish. What Varnish seems to do is keep a hash of the URL and associate","rawEmail":"Return-Path: &lt;dstanek@...&gt;\r\nX-Sender: dstanek@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 45252 invoked from network); 14 Jun 2010 19:11:56 -0000\r\nX-Received: from unknown (66.196.94.107)\n  by m12.grp.re1.yahoo.com with QMQP; 14 Jun 2010 19:11:56 -0000\r\nX-Received: from unknown (HELO mail-vw0-f50.google.com) (209.85.212.50)\n  by mta3.grp.re1.yahoo.com with SMTP; 14 Jun 2010 19:11:56 -0000\r\nX-Received: by vws10 with SMTP id 10so6883879vws.37\n        for &lt;rest-discuss@yahoogroups.com&gt;; Mon, 14 Jun 2010 12:11:53 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.224.41.14 with SMTP id m14mr2454766qae.336.1276542712378; Mon, \n\t14 Jun 2010 12:11:52 -0700 (PDT)\r\nX-Received: by 10.229.100.72 with HTTP; Mon, 14 Jun 2010 12:11:52 -0700 (PDT)\r\nIn-Reply-To: &lt;20100614100659.ec6e48e5.eric@...&gt;\r\nReferences: &lt;AANLkTilk2YZrgce93wXp9EJ4GfpirLeQVvmJ0JxcxPYH@...&gt;\n\t&lt;20100604074956.c9e3c1c5.eric@...&gt;\n\t&lt;AANLkTimXWchu9tv4vaEyiFB8zLZm0M2F4i6RcqNyAFsS@...&gt;\n\t&lt;20100604093913.ef6cec19.eric@...&gt;\n\t&lt;AANLkTikHvlfbvvLPQG6Rc9Z6Lr19hSay-sOuXHbyqy4C@...&gt;\n\t&lt;20100604140916.3ffd753c.eric@...&gt;\n\t&lt;AANLkTinSJeNwerFY19xWUXDSCcCypnSvkzY76-GgTae6@...&gt;\n\t&lt;20100608100323.aa6ef99e.eric@...&gt;\n\t&lt;AANLkTinV8yxN-R4AFWAvNaLqpeb-uf7cO0WFmX7DpaRX@...&gt;\n\t&lt;20100609180005.8a8da70b.eric@...&gt;\n\t&lt;AANLkTinT4Iv53EhrhPLGGYaLe1QfhpGV1PM156cXCKhZ@...&gt;\n\t&lt;20100611081418.6dda47a9.eric@...&gt;\n\t&lt;AANLkTimDqaXuHPNvy-QUFZkFMaHpScgJCG-sPqKqFwsu@...&gt;\n\t&lt;20100611233258.e1b7e5f7.eric@...&gt;\n\t&lt;AANLkTimzUbNgrBunMxGLiK0fod1RVXq8kWe1d8-KHK6b@...&gt;\n\t&lt;20100612103255.80c15a8b.eric@...&gt;\n\t&lt;AANLkTinYKTnNhfeS2_T_PIFIjWJyHKnRbCZqENs51HVW@...&gt;\n\t&lt;20100614100659.ec6e48e5.eric@...&gt;\r\nDate: Mon, 14 Jun 2010 15:11:52 -0400\r\nMessage-ID: &lt;AANLkTinH2Gel3YLMKzLfcYUz-VwhwxibH-2fAw3ypdnm@...&gt;\r\nTo: &quot;Eric J. Bowman&quot; &lt;eric@...&gt;\r\nCc: Peter Williams &lt;pezra@...&gt;, \n\t&quot;rest-discuss@yahoogroups.com&quot; &lt;rest-discuss@yahoogroups.com&gt;\r\nContent-Type: multipart/alternative; boundary=001485ebea5ee975c60489024210\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: David Stanek &lt;dstanek@...&gt;\r\nSubject: Re: [rest-discuss] Determining which Media type for post/put\r\nX-Yahoo-Group-Post: member; u=22961148; y=H9uxio2D6DFmi7upsZb3FOdImXZUygv5JjhffH4r8OayBtxhgiwDPdAypLH3vw\r\nX-Yahoo-Profile: dstanekatt\r\n\r\n\r\n--001485ebea5ee975c60489024210\r\nContent-Type: text/plain; charset=ISO-8859-1\r\n\r\nOn Mon, Jun 14, 2010 at 12:06 PM, Eric J. Bowman &lt;eric@...&gt;wrote:\n\n&gt;\n&gt; Assuming no Content-Location:\n&gt;\n&gt; Say I have a negotiated resource which returns both application/xhtml\n&gt; +xml and text/html variants. We send text/html to IE and application/\n&gt; xhtml+xml to Ffx. Let&#39;s say the first time a cache encounters this\n&gt; resource, the user agent is IE. The cache stores the text/html variant.\n&gt;\n&gt; Let&#39;s say the next request the cache encounters for the resource is\n&gt; from another IE. Cache responds with cached text/html variant. Next,\n&gt; the cache gets the same request from Ffx. Vary: User-Agent tells the\n&gt; cache to check the origin server. Origin responds with application/\n&gt; xhtml+xml variant, cache stores that variant, overwriting the text/\n&gt; html variant, because that&#39;s what the cache is being told to do.\n&gt;\n&gt; Now, another request for the resource comes to the cache from IE. The\n&gt; cache only has an application/xhtml+xml variant. Vary: User-Agent\n&gt; tells the cache to check the origin server. Origin server responds\n&gt; with text/html variant, which the cache stores, overwriting the\n&gt; application/xhtml+xml variant.\n&gt;\n&gt; This undesirable behavior results from not following the SHOULD. By\n&gt; including a URI in Content-Location, the cache has the additional\n&gt; information it needs to tag-and-bag variants. The cache can now\n&gt; associate URI A with text/html, and URI B with application/xhtml+xml,\n&gt; such that a series of IE-Ffx-IE requests will return the proper\n&gt; variant, instead of only caching the most-recent variant.\n&gt;\n&gt;\nMaybe my misunderstanding is because of the experimenting I have been doing\nwith Varnish. What Varnish seems to do is keep a hash of the URL and\nassociate any variants (using the Vary header) to that hash. It will not go\nback to the origin server even after a different variant was accessed. Once\nI had the text/plain version of /test in cache Varnish always returned it\neven after I curl-ed for the text/html variant of the resource. I was then\nable to purge /test to rinse and repeat.\n\nIs this non-compliant behavior?\n\n\n-- \nDavid\nblog: http://www.traceback.org\ntwitter: http://twitter.com/dstanek\n\r\n--001485ebea5ee975c60489024210\r\nContent-Type: text/html; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;div class=3D&quot;gmail_quote&quot;&gt;On Mon, Jun 14, 2010 at 12:06 PM, Eric J. Bowman=\r\n &lt;span dir=3D&quot;ltr&quot;&gt;&lt;&lt;a href=3D&quot;mailto:eric@...&quot;&gt;eric@bisons=\r\nystems.net&lt;/a&gt;&gt;&lt;/span&gt; wrote:&lt;br&gt;&lt;blockquote class=3D&quot;gmail_quote&quot; style=\r\n=3D&quot;margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;&quot;&gt;\n\n\n\n\n\n\n=\r\n\n\n\n\n\n\n\n\n&lt;div style=3D&quot;background-color:#fff&quot;&gt;\n&lt;span&gt;=A0&lt;/span&gt;&lt;div&gt;&lt;div&gt;&lt;di=\r\nv&gt;\nAssuming no Content-Location:&lt;br&gt;\n&lt;br&gt;\nSay I have a negotiated resource =\r\nwhich returns both application/xhtml&lt;br&gt;\n+xml and text/html variants.  We s=\r\nend text/html to IE and application/&lt;br&gt;\nxhtml+xml to Ffx.  Let&#39;s say t=\r\nhe first time a cache encounters this&lt;br&gt;\nresource, the user agent is IE.  =\r\nThe cache stores the text/html variant.&lt;br&gt;\n&lt;br&gt;\nLet&#39;s say the next req=\r\nuest the cache encounters for the resource is&lt;br&gt;\nfrom another IE.  Cache r=\r\nesponds with cached text/html variant.  Next,&lt;br&gt;\nthe cache gets the same r=\r\nequest from Ffx.  Vary: User-Agent tells the&lt;br&gt;\ncache to check the origin =\r\nserver.  Origin responds with application/&lt;br&gt;\nxhtml+xml variant, cache sto=\r\nres that variant, overwriting the text/&lt;br&gt;\nhtml variant, because that&#39;=\r\ns what the cache is being told to do.&lt;br&gt;\n&lt;br&gt;\nNow, another request for the=\r\n resource comes to the cache from IE.  The&lt;br&gt;\ncache only has an applicatio=\r\nn/xhtml+xml variant.  Vary: User-Agent&lt;br&gt;\ntells the cache to check the ori=\r\ngin server.  Origin server responds&lt;br&gt;\nwith text/html variant, which the c=\r\nache stores, overwriting the&lt;br&gt;\napplication/xhtml+xml variant.&lt;br&gt;\n&lt;br&gt;\nTh=\r\nis undesirable behavior results from not following the SHOULD.  By&lt;br&gt;\nincl=\r\nuding a URI in Content-Location, the cache has the additional&lt;br&gt;\ninformati=\r\non it needs to tag-and-bag variants.  The cache can now&lt;br&gt;\nassociate URI A=\r\n with text/html, and URI B with application/xhtml+xml,&lt;br&gt;\nsuch that a seri=\r\nes of IE-Ffx-IE requests will return the proper&lt;br&gt;\nvariant, instead of onl=\r\ny caching the most-recent variant.&lt;br&gt;\n&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockq=\r\nuote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Maybe my misunderstanding is because of the experi=\r\nmenting I have been doing with Varnish. What Varnish seems to do is keep a =\r\nhash of the URL and associate any variants (using the Vary header) to that =\r\nhash. It will not go back to the origin server even after a different varia=\r\nnt was accessed. Once I had the text/plain version of /test in cache Varnis=\r\nh always returned it even after I curl-ed for the text/html variant of the =\r\nresource. I was then able to purge /test to rinse and repeat.&lt;/div&gt;\n&lt;/div&gt;&lt;=\r\nbr clear=3D&quot;all&quot;&gt;Is this non-compliant behavior?&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;-- =\r\n&lt;br&gt;David&lt;br&gt;blog: &lt;a href=3D&quot;http://www.traceback.org&quot;&gt;http://www.tracebac=\r\nk.org&lt;/a&gt;&lt;br&gt;twitter: &lt;a href=3D&quot;http://twitter.com/dstanek&quot;&gt;http://twitter=\r\n.com/dstanek&lt;/a&gt;&lt;br&gt;\n\n&lt;/div&gt;\n\r\n--001485ebea5ee975c60489024210--\r\n\n"}}