{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":302633978,"authorName":"Daniel Yokomizo","from":"&quot;Daniel Yokomizo&quot; &lt;daniel.yokomizo@...&gt;","profile":"daniel_yokomiso","replyTo":"SENDER","senderId":"qgKWKykGiOUTOassYGJ61CIvyQwStKQah7i1G74I0qNi0DLOjzJQBdWObXpPhZ9ZZI5wHqxjPNL5_S5369r7zeBKdvlCRhGioJYP7xvGC04cuGah","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Fwd: [rest-discuss] Idempotency of PUT when using IF-MATCH","postDate":"1198897424","msgId":10112,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGU1YzZlY2FiMDcxMjI4MTkwM201N2RjMDE1YXA2MTJkNWZkNzdkZjI5OTJlQG1haWwuZ21haWwuY29tPg==","inReplyToHeader":"PGU1YzZlY2FiMDcxMjI4MDgyNXc3YmU0ZjE5ZmdmNTQ3NjMwMGRiYmNiOWNjQG1haWwuZ21haWwuY29tPg==","referencesHeader":"PGU1YzZlY2FiMDcxMjI3MjMyMHMzZGE1NGZwNmYwM2EwMDMwM2NiMGMxN0BtYWlsLmdtYWlsLmNvbT4JIDw0Nzc0RkNCNy4zMDAwMTA3QGdteC5kZT4JIDxlNWM2ZWNhYjA3MTIyODA2MDhyMWQxZTBkOWNxMTRjMWNkMGYzNjU5MDA4ZUBtYWlsLmdtYWlsLmNvbT4JIDw0Nzc1MUQyRS41MDgwMjAwQGdteC5kZT4JIDxlNWM2ZWNhYjA3MTIyODA4MjV3N2JlNGYxOWZnZjU0NzYzMDBkYmJjYjljY0BtYWlsLmdtYWlsLmNvbT4="},"prevInTopic":0,"nextInTopic":0,"prevInTime":10111,"nextInTime":10113,"topicId":10112,"numMessagesInTopic":1,"msgSnippet":"Forwarding to the list because I hit reply instead of reply all. Sigh... ... From: Daniel Yokomizo  Date: Dec 28, 2007 4:25 PM ","rawEmail":"Return-Path: &lt;daniel.yokomizo@...&gt;\r\nX-Sender: daniel.yokomizo@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 73255 invoked from network); 29 Dec 2007 03:03:45 -0000\r\nX-Received: from unknown (66.218.67.95)\n  by m43.grp.scd.yahoo.com with QMQP; 29 Dec 2007 03:03:45 -0000\r\nX-Received: from unknown (HELO fg-out-1718.google.com) (72.14.220.152)\n  by mta16.grp.scd.yahoo.com with SMTP; 29 Dec 2007 03:03:45 -0000\r\nX-Received: by fg-out-1718.google.com with SMTP id e21so2054069fga.17\n        for &lt;rest-discuss@yahoogroups.com&gt;; Fri, 28 Dec 2007 19:03:44 -0800 (PST)\r\nX-Received: by 10.86.71.1 with SMTP id t1mr9576599fga.33.1198897424521;\n        Fri, 28 Dec 2007 19:03:44 -0800 (PST)\r\nX-Received: by 10.86.89.19 with HTTP; Fri, 28 Dec 2007 19:03:44 -0800 (PST)\r\nMessage-ID: &lt;e5c6ecab0712281903m57dc015ap612d5fd77df2992e@...&gt;\r\nDate: Sat, 29 Dec 2007 03:03:44 +0000\r\nTo: rest-discuss@yahoogroups.com\r\nIn-Reply-To: &lt;e5c6ecab0712280825w7be4f19fgf5476300dbbcb9cc@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: 7bit\r\nContent-Disposition: inline\r\nReferences: &lt;e5c6ecab0712272320s3da54fp6f03a00303cb0c17@...&gt;\n\t &lt;4774FCB7.3000107@...&gt;\n\t &lt;e5c6ecab0712280608r1d1e0d9cq14c1cd0f3659008e@...&gt;\n\t &lt;47751D2E.5080200@...&gt;\n\t &lt;e5c6ecab0712280825w7be4f19fgf5476300dbbcb9cc@...&gt;\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: &quot;Daniel Yokomizo&quot; &lt;daniel.yokomizo@...&gt;\r\nSubject: Fwd: [rest-discuss] Idempotency of PUT when using IF-MATCH\r\nX-Yahoo-Group-Post: member; u=302633978; y=N6fuI36X4Ht7J0Ep1xhi11sdGUc_saHRhUBllxCyzU48dj2yW3pwBCJs\r\nX-Yahoo-Profile: daniel_yokomiso\r\n\r\nForwarding to the list because I hit reply instead of reply all. Sigh...\n\n\n---------- Forwarded message ----------\nFrom: Daniel Yokomizo &lt;daniel.yokomizo@...&gt;\nDate: Dec 28, 2007 4:25 PM\nSubject: Re: [rest-discuss] Idempotency of PUT when using IF-MATCH\nTo: Julian Reschke &lt;julian.reschke@...&gt;\n\n\nOn Dec 28, 2007 3:58 PM, Julian Reschke &lt;julian.reschke@...&gt; wrote:\n&gt; Daniel Yokomizo wrote:\n&gt; &gt; I wasn&#39;t entirely clear. Arguably all the versions of the entity are\n&gt; &gt; current, as the user may get older versions and at a future date\n&gt; &gt; branch on old versions. Instead of creating a protocol to handle\n&gt;\n&gt; That doesn&#39;t make them &quot;current&quot;. They may be current for other URLs.\n&gt;\n&gt; Or do you want to serve those older versions from the same URL? In that\n&gt; case it would be correct, and it would be a case of content negotiation\n&gt; (incl Vary header etc).\n&gt;\n&gt; &gt; versioning above HTTP I thought using the existing versioning support\n&gt; &gt; would be better.\n&gt;\n&gt; There already is a protocol for versioning over HTTP (RFC3253), so you\n&gt; don&#39;t need to invent anything new.\n&gt;\n&gt; &gt;  &gt; So yes, PUT isn&#39;t idempotent when used as a conditional request.\n&gt; &gt;\n&gt; &gt; Where is this specified? Or is a known convention?\n&gt; &gt;\n&gt; &gt; In this situation the server knows that this is a repeated submission\n&gt; &gt; and it&#39;s semantically safe to ignore it. I could just drop IF-MATCH in\n&gt;\n&gt; I don&#39;t see why it would be safe to ignore it. If a client puts FOO,\n&gt; then BAR, then FOO, ignoring the last one will not result in the state\n&gt; expected.\n\nIn this situations is PUT &lt;content&gt; IF-MATCH &lt;version&gt;, so the\nsequence is either\n\nPUT FOO IF-MATCH V1, PUT BAR IF-MATCH V2, PUT FOO IF-MATCH V3\n\nor\n\nPUT FOO IF-MATCH V1, PUT BAR IF-MATCH V2, PUT FOO IF-MATCH V1\n\nBoth sequences are explicit: override the third version with FOO or\noverride first version with FOO. The server can safely see if it&#39;s\nduplicate or not.\n\n&gt; &gt; this case and make the client send the version identifier in the\n&gt; &gt; request body, but I&#39;m not sure the problem would be much different. If\n&gt; &gt; I ignore IF-MATCH issues the same situation can happen and the server\n&gt; &gt; can safely ignore the duplicate PUT, but I would still ask the same\n&gt; &gt; question.\n&gt;\n&gt; It seems that the main issue here is ignoring the PUT, just because the\n&gt; content was sent before. How can you assume this is ok -- maybe the\n&gt; client intended to overwrite the second version with the first one?\n\nI&#39;m using SHA256 to digest the state of the entity, so if the digest\nis the same there&#39;s a really high degree (astronomically high) of\nconfidence that it&#39;s the same entity. As the client sends what they\nbelieve to be the current version (i.e. IF-MATCH) the server knows if\nit&#39;s the same request or a later one. As the system ensures no\ncollision of version ids (we just reject duplicates, the chance of\ncollision is really small), it&#39;s always safe to ignore the duplicate\nrequests. This algorithm is inspired by Git.\n\n\n&gt; BR, Julian\n\nBest regards,\nDaniel Yokomizo.\n\n"}}