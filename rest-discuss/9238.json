{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":303606877,"authorName":"Stian Soiland","from":"Stian Soiland &lt;ssoiland@...&gt;","profile":"stian_soiland","replyTo":"SENDER","senderId":"sfKQ0JI7F78djFaAyJA4LKi2XTPdbUA4kLp7_IrMYUUvao6lrG8Rua4ze5_GinoygxnSg442LT0ieftp8mog_sJr6YXhbDE0FTRtXg","spamInfo":{"isSpam":false,"reason":"0"},"subject":"How should wlan web authentication proxies behave?","postDate":"1182772638","msgId":9238,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PEE0RkUxMzM2LTFENTQtNDYwOC05NEVGLTc1ODRBMkJGNUREQUBjcy5tYW4uYWMudWs+"},"prevInTopic":0,"nextInTopic":9239,"prevInTime":9237,"nextInTime":9239,"topicId":9238,"numMessagesInTopic":3,"msgSnippet":"I was struggling with a problem with my Eclipse installation that turned out to be due to non-rest-ful behaviour of our wireless network router at the","rawEmail":"Return-Path: &lt;ssoiland@...&gt;\r\nX-Sender: ssoiland@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nReceived: (qmail 37348 invoked from network); 25 Jun 2007 11:58:00 -0000\r\nReceived: from unknown (66.218.67.33)\n  by m55.grp.scd.yahoo.com with QMQP; 25 Jun 2007 11:58:00 -0000\r\nReceived: from unknown (HELO tranquility.mcc.ac.uk) (130.88.200.145)\n  by mta7.grp.scd.yahoo.com with SMTP; 25 Jun 2007 11:58:00 -0000\r\nReceived: from webcam3.cs.man.ac.uk ([130.88.195.217])\n\tby tranquility.mcc.ac.uk with esmtp (Exim 4.63 (FreeBSD))\n\t(envelope-from &lt;ssoiland@...&gt;)\n\tid 1I2nCW-000Fdd-VV; Mon, 25 Jun 2007 12:57:49 +0100\r\nMime-Version: 1.0 (Apple Message framework v752.3)\r\nContent-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed\r\nMessage-Id: &lt;A4FE1336-1D54-4608-94EF-7584A2BF5DDA@...&gt;\r\nContent-Transfer-Encoding: 7bit\r\nDate: Mon, 25 Jun 2007 12:57:18 +0100\r\nTo: Rest List &lt;rest-discuss@yahoogroups.com&gt;\r\nX-Mailer: Apple Mail (2.752.3)\r\nX-UoM: Scanned by the University Mail System. See http://www.itservices.manchester.ac.uk/email/filtering/information/ for details.\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: Stian Soiland &lt;ssoiland@...&gt;\r\nSubject: How should wlan web authentication proxies behave?\r\nX-Yahoo-Group-Post: member; u=303606877; y=IUO891PNDgzQDTQRMFqipFhOoUATDFI7aJrFjZ8I-DqfrzgvugBm0A\r\nX-Yahoo-Profile: stian_soiland\r\n\r\nI was struggling with a problem with my Eclipse installation that  \nturned out to be due to non-rest-ful behaviour of our wireless  \nnetwork router at the University.\n\n\nOur wireless network is like this:\n\nBefore you have been &quot;authenticated&quot; any http requests to ANY address  \nwill redirect with 302 Found to the login page, while any other ports  \nare firewalled.\n\nIf the user&#39;s browser tries to access Google or similar it will  \nredirect to the login page, where filling in username and password,  \nand then pressing submit, opens up access. (Ideally the proxy should  \nredirect to the original request from this stage, but I this  \nfunctionality is implemented by the system administrators yet.)\n\n From now on all HTTP access from that client&#39;s IP (or MAC) address  \nis allowed unrestricted and behaves as normal.\n\n\nSo this is not a normal HTTP proxy, but intercepting on the TCP/IP  \nlayer. After authentication everything works as if I&#39;m on the wire. I  \nthink it&#39;s quite a cute solution for the basic cases, as there&#39;s no  \nconfiguration required and you only need to login once a day.\n\n\n\nNow the problem is this redirection-thing. What if the client is not  \na human-controlled browser, but a program? In my case the program was  \nEclipse, trying to download an XML Schema file. Here&#39;s a reproduction  \nof what probably happened (note that http:// \nzone1.cwg.its.manchester.ac.uk/ is only accessible from our wlan)\n\n\n: stain@mira ~/Desktop;curl -vL\nhttp://java.sun.com/xml/ns/persistence/persistence_1_0.xsd\n* About to connect() to java.sun.com port 80\n*   Trying 72.5.124.55... * connected\n* Connected to java.sun.com (72.5.124.55) port 80\n &gt; GET /xml/ns/persistence/persistence_1_0.xsd HTTP/1.1\nUser-Agent: curl/7.13.1 (powerpc-apple-darwin8.0) libcurl/7.13.1  \nOpenSSL/0.9.7l zlib/1.2.3\nHost: java.sun.com\nPragma: no-cache\nAccept: */*\n\n&lt; HTTP/1.1 302 Found\n&lt; Date: Mon, 25 Jun 2007 11:30:41 GMT\n&lt; Server: Apache/2.0.54 (Debian GNU/Linux) DAV/2 PHP/4.3.10-16  \nmod_ssl/2.0.54 OpenSSL/0.9.7e\n&lt; Location: http://zone1.cwg.its.manchester.ac.uk/redirect.html\n&lt; Content-Length: 235\n&lt; Connection: close\n&lt; Content-Type: text/html; charset=iso-8859-1\n   % Total    % Received % Xferd  Average Speed   Time    Time      \nTime  Current\n                                  Dload  Upload   Total   Spent     \nLeft  Speed\n   0   235    0     0    0     0      0      0 --:--:-- --:--:--  \n--:--:--     0* Closing connection #0\n* Issue another request to this URL: &#39;http:// \nzone1.cwg.its.manchester.ac.uk/redirect.html&#39;\n* About to connect() to zone1.cwg.its.manchester.ac.uk port 80\n*   Trying 10.11.0.25... * connected\n* Connected to zone1.cwg.its.manchester.ac.uk (10.11.0.25) port 80\n\n &gt; GET /redirect.html HTTP/1.1\nUser-Agent: curl/7.13.1 (powerpc-apple-darwin8.0) libcurl/7.13.1  \nOpenSSL/0.9.7l zlib/1.2.3\nHost: zone1.cwg.its.manchester.ac.uk\nPragma: no-cache\nAccept: */*\n\n&lt; HTTP/1.1 200 OK\n&lt; Date: Mon, 25 Jun 2007 11:30:42 GMT\n&lt; Server: Apache/2.0.54 (Debian GNU/Linux) DAV/2 PHP/4.3.10-16  \nmod_ssl/2.0.54 OpenSSL/0.9.7e\n&lt; Last-Modified: Fri, 10 Nov 2006 14:35:49 GMT\n&lt; ETag: &quot;24addd-466-77dc5b40&quot;\n&lt; Accept-Ranges: bytes\n&lt; Content-Length: 1126\n&lt; Content-Type: text/html\n100  1126  100  1126    0     0   5332      0 --:--:-- --:--:--  \n--:--:--  5332* Connection #0 to host zone1.cwg.its.manchester.ac.uk  \nleft intact\n\n* Closing connection #0\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;\n&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;\n&lt;head&gt;\n&lt;title&gt;Network Roaming Service&lt;/title&gt;\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html;  \ncharset=iso-8859-1&quot; /&gt;\n&lt;meta http-equiv=&quot;Refresh&quot; content=&quot;10;URL=https:// \nzone1.cwg.its.manchester.ac.uk/&quot; /&gt;\n&lt;meta content=&quot;Copyright 2006 University of Manchester. All rights  \nreserved.&quot; name=&quot;copyright&quot; /&gt;\n&lt;meta http-equiv=&quot;Content-Language&quot; content=&quot;EN&quot; /&gt;\n&lt;meta content=&quot;NOFOLLOW,INDEX name=robots&quot; /&gt;\n&lt;link href=&quot;style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div id=&quot;content&quot;&gt;\n&lt;h1&gt;Network Roaming Service&lt;/h1&gt;\n&lt;p&gt;If your browser supports SSL, please &lt;a href=&quot;https:// \nzone1.cwg.its.manchester.ac.uk/&quot;&gt;follow this link&lt;/a&gt; or wait ten  \nseconds to be redirected to a secured version of the Intranet.&lt;/p&gt;\n&lt;p&gt;If your browser does not support SSL encryption, then you can &lt;a  \nhref=&quot;http://zone1.cwg.its.manchester.ac.uk/&quot;&gt;follow this link&lt;/a&gt;  \ninstead for an &lt;b&gt;unsecured&lt;/b&gt; version of the site.&lt;/p&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n\nI found this HTML page stored by Eclipse as my referenced &quot;XML schema&quot;.\n\n\nAs you see, after the 302 to the authentication server, the login  \npage is returned with 200 OK. There is no Cache-Control: no-cache,  \nand the automatic clients are happy and caches the &quot;XML Schema&quot; which  \nof course won&#39;t work later on.\n\n(The page is a actually redirect to the https login form, but this is  \ndone by meta-http-equiv tags that the automatic clients normally  \ndon&#39;t evaluate)\n\n\nI can picture a lot of programs running on client machines these days  \nthat do similar &quot;update checks&quot; and so on. It is not fair for them to  \nbe able to distinguish from a real response and a wlan login page  \nwhen no appropriate headers have been supplied.\n\nThus, how *should* the proxy behave to make life easy both for human  \nbrowser users and automatic http clients? I adviced the system  \nadministrators to consider returning with 401 Unauthorized or 407  \nProxy Authentication Required and with a no-cache header, but I&#39;m not  \nvery certain if this is the best solution.  And is the initial 302  \nFound redirect from the original page all right, or should it be 303  \nSee other?\n\n\n-- \nStian Soiland, myGrid team\nSchool of Computer Science\nThe University of Manchester\nhttp://www.cs.man.ac.uk/~ssoiland/\n\n\n\n"}}