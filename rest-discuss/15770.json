{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":69164307,"authorName":"mike amundsen","from":"mike amundsen &lt;mamund@...&gt;","profile":"mamund","replyTo":"SENDER","senderId":"rUMOFpiR8Ka3JiitpJcGDAfztpsxQSp5g__6lMVQu76RinqhTzikMauM791GLRfRAyGO8aGDapYC0Q3VPsvXwpJ7aca1Q74","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [rest-discuss] Restful Approaches to some Enterprise Integration \tProblems","postDate":"1277931597","msgId":15770,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PEFBTkxrVGltUDRMRVB6MkNSc0ZYY3A3d2dTWEJTMGtMVDJjMzR4RlhFS051TUBtYWlsLmdtYWlsLmNvbT4=","inReplyToHeader":"PDM5NDQ0My4zOTEwMi5xbUB3ZWIxMTA3MTIubWFpbC5ncTEueWFob28uY29tPg==","referencesHeader":"PDE0NzgzNC4zNzA1LnFtQHdlYjExMDcxNC5tYWlsLmdxMS55YWhvby5jb20+CTwwRjY0NzRGRS1CNzUyLTQ4OEEtOTc5OC1EMzg0QUM2NkYxRjZAbWFjLmNvbT4JPDM5NDQ0My4zOTEwMi5xbUB3ZWIxMTA3MTIubWFpbC5ncTEueWFob28uY29tPg=="},"prevInTopic":15769,"nextInTopic":15771,"prevInTime":15769,"nextInTime":15771,"topicId":15761,"numMessagesInTopic":45,"msgSnippet":" I just need a way to guarantee that we don t end up in a state where billing suceeded but no product delivery document was created or vice versa. There","rawEmail":"Return-Path: &lt;mca@...&gt;\r\nX-Sender: mca@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 56862 invoked from network); 30 Jun 2010 21:00:00 -0000\r\nX-Received: from unknown (98.137.34.44)\n  by m12.grp.re1.yahoo.com with QMQP; 30 Jun 2010 21:00:00 -0000\r\nX-Received: from unknown (HELO mail-ww0-f45.google.com) (74.125.82.45)\n  by mta1.grp.sp2.yahoo.com with SMTP; 30 Jun 2010 20:59:59 -0000\r\nX-Received: by wwd20 with SMTP id 20so108198wwd.26\n        for &lt;rest-discuss@yahoogroups.com&gt;; Wed, 30 Jun 2010 13:59:59 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.216.89.199 with SMTP id c49mr7707007wef.29.1277931597646; Wed, \n\t30 Jun 2010 13:59:57 -0700 (PDT)\r\nX-Received: by 10.216.37.207 with HTTP; Wed, 30 Jun 2010 13:59:57 -0700 (PDT)\r\nIn-Reply-To: &lt;394443.39102.qm@...&gt;\r\nReferences: &lt;147834.3705.qm@...&gt;\n\t&lt;0F6474FE-B752-488A-9798-D384AC66F1F6@...&gt;\n\t&lt;394443.39102.qm@...&gt;\r\nDate: Wed, 30 Jun 2010 16:59:57 -0400\r\nX-Google-Sender-Auth: GJwUIrADU5jd2uVI5rxZAxkMHT0\r\nMessage-ID: &lt;AANLkTimP4LEPz2CRsFXcp7wgSXBS0kLT2c34xFXEKNuM@...&gt;\r\nTo: Bryan Taylor &lt;bryan_w_taylor@...&gt;\r\nCc: Jan Algermissen &lt;algermissen1971@...&gt;, REST Discuss &lt;rest-discuss@yahoogroups.com&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: mike amundsen &lt;mamund@...&gt;\r\nSubject: Re: [rest-discuss] Restful Approaches to some Enterprise Integration \n\tProblems\r\nX-Yahoo-Group-Post: member; u=69164307; y=vSBTrUATwPEaj8Io89ikx1FZDQZC3BL43gRmKv9me2Ij\r\nX-Yahoo-Profile: mamund\r\n\r\n&lt;snip&gt;\n I just need a way to guarantee that we don&#39;t end up in a\nstate wher=\r\ne billing suceeded but no product delivery document was\ncreated or vice ver=\r\nsa. There are three changes to be made and we need\nto assure that either al=\r\nl three or zero of them occur.\n&lt;/snip&gt;\n\nThink about Amazon.com. they don&#39;t =\r\nexpose DT, yet solve the problem\nthousands of times each day. even w/ third=\r\n party sellers.\n\nMost of the time I need this kind of behavior I implement =\r\na &quot;Saga&quot;\n(search Garcia-Molina)\n\nExample:\nclient POSTs an order to server1\n=\r\nserver1 replies 202 Accepted w/ Location /orders/1\n\nserver1 POSTs a billing=\r\n request to server2\nserver2 replies 201 Created w/ Location of completed bi=\r\nlling\n\nserver1 updates /orders/1 w/ progress indicating billing was success=\r\nful\n\nserver1 POSTs a shipping request to server3\nserver3 replies 400 &quot;we do=\r\nn&#39;t ship to that person&quot;\n\nserver1 updates /orders/1 w/ progress indicating =\r\nshipping failed\n\nserver1 POSTs refund request to server2\nserver2 replies 20=\r\n0 OK\n\nserver1 updates /orders/1 w/ progress indicating refund was processed=\r\n\nand job is done\n\nThe limitation: each step must be reversible.\n\nand none o=\r\nf this needs to bleed out to the client.\n\nmca\nhttp://amundsen.com/blog/\nhtt=\r\np://mamund.com/foaf.rdf#me\n\n\n\n\nOn Wed, Jun 30, 2010 at 16:03, Bryan Taylor =\r\n&lt;bryan_w_taylor@...&gt; wrote:\n&gt;\n&gt; From: Jan Algermissen &lt;algermissen197=\r\n1@...&gt;\n&gt;&gt; &gt; 2) Distributed Transactions - we need a paradigm to allow s=\r\ntate changes on multiple services to happen so that the changes succeed or =\r\nfail as a unit\n&gt;\n&gt;&gt; Why do you need distributed transactions? The usual (an=\r\nd orthogonal to REST-or-not) answer is that you rather do those things with=\r\n compensations anyway. 2PC is an illusion.\n&gt;\n&gt; I don&#39;t &quot;need&quot; distributed t=\r\nransactions per se, but I don&#39;t know what else to call the problem they sol=\r\nve.\n&gt;\n&gt; I need a way for multiple resources in different &quot;services&quot; (an\n&gt; a=\r\nutonomous group of servers) to change in sync. I&#39;ll give an example.\n&gt; If w=\r\ne receive an order, I need to have the billing service process the\n&gt; billin=\r\ng request and link back to the order, the operations service to\n&gt; create a =\r\nproduct delivery resource and link it to the order, and the\n&gt; order itself =\r\nbe updated to reflect that these things occurred.\n&gt;\n&gt; I don&#39;t necessarily n=\r\need a two phase commit approach to &quot;distributed\n&gt; transactions&quot;, I just nee=\r\nd a way to guarantee that we don&#39;t end up in a\n&gt; state where billing suceed=\r\ned but no product delivery document was\n&gt; created or vice versa. There are =\r\nthree changes to be made and we need\n&gt; to assure that either all three or z=\r\nero of them occur.\n&gt;\n&gt; What do you mean by 2PC is an illusion? I think it v=\r\niolates principles\n&gt; of service orientation (autonomy, loose coupling, and =\r\nconversational\n&gt; state) and the CAP theorem tells me that if I try to get g=\r\nlobal\n&gt; consistency I cannot have both availability and tolerance for\n&gt; unr=\r\neliable networks, but 2PC certainly can achieve the goal I&#39;m after\n&gt; if the=\r\nse were not important. I don&#39;t know whether or not it violates\n&gt; RESTful pr=\r\ninciples. If it does, then there must be some way to fulfill\n&gt; the same fun=\r\nctional goals (eg: don&#39;t ship the product and fail to bill\n&gt; or vice versa)=\r\n.\n&gt;\n&gt; Compensations seems like a reasonable approach: I decompose the\n&gt; int=\r\neraction with each service into state changes that can be undone and\n&gt; I in=\r\nvoke them all (using a solution for guaranteed delivery) until I\n&gt; know whe=\r\nther they resolved successfully or not, and if not, I use\n&gt; guaranteed deli=\r\nvery to request the undo.\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; ------------------------------------\n=\r\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt;\n\n"}}