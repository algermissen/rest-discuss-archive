{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":340209025,"authorName":"Martin Grotzke","from":"Martin Grotzke &lt;mg@...&gt;","profile":"martin.grotzke","replyTo":"SENDER","senderId":"QZxcMQRqXNBwdzjKLLwzgLatdxWwe0nqrk7Deb6Yf6p21doGTnbFXHSq-mpW8xdulU0jgzWQREofNsGdnCFqL34tug","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [rest-discuss] How to design validation of e.g. username,\temail-address, password","postDate":"1205428208","msgId":10487,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDEyMDU0MjgyMDguMzIxMi4xNjEuY2FtZWxAbG9jYWxob3N0LmxvY2FsZG9tYWluLnRsZD4=","inReplyToHeader":"PGU1YzZlY2FiMDgwMzEzMDgxN2s3MzQyNjZhMHA1YTVjZGIwOTMyNzkzNGY4QG1haWwuZ21haWwuY29tPg==","referencesHeader":"PDEyMDUzNTI5MTQuMzE3NS4xNjguY2FtZWxAbG9jYWxob3N0LmxvY2FsZG9tYWluLnRsZD4JIDxlNWM2ZWNhYjA4MDMxMjE1MTV1OTkyMWJjYmtkYTVhYmU2NmY4ZGQ5YzY1QG1haWwuZ21haWwuY29tPgkgPDEyMDUzOTQ5OTEuMzIxMi4zMi5jYW1lbEBsb2NhbGhvc3QubG9jYWxkb21haW4udGxkPgkgPGU1YzZlY2FiMDgwMzEzMDgxN2s3MzQyNjZhMHA1YTVjZGIwOTMyNzkzNGY4QG1haWwuZ21haWwuY29tPg=="},"prevInTopic":10485,"nextInTopic":10488,"prevInTime":10486,"nextInTime":10488,"topicId":10467,"numMessagesInTopic":11,"msgSnippet":"Hi Daniel, thanx for clarification - sorry for my 409/200 confusion :) I have two issues/questions left: 1) How do I distinguish between username and email","rawEmail":"Return-Path: &lt;mg@...&gt;\r\nX-Sender: mg@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 44566 invoked from network); 13 Mar 2008 17:10:14 -0000\r\nX-Received: from unknown (66.218.67.94)\n  by m42.grp.scd.yahoo.com with QMQP; 13 Mar 2008 17:10:14 -0000\r\nX-Received: from unknown (HELO mail.baseserver.net) (80.190.253.131)\n  by mta15.grp.scd.yahoo.com with SMTP; 13 Mar 2008 17:10:13 -0000\r\nX-Received: from [192.168.2.228] (unknown [195.177.48.115])\n\tby mail.baseserver.net (Postfix) with ESMTP id 40D149B53E;\n\tThu, 13 Mar 2008 18:10:10 +0100 (CET)\r\nTo: Daniel Yokomizo &lt;daniel.yokomizo@...&gt;\r\nCc: rest-discuss &lt;rest-discuss@yahoogroups.com&gt;\r\nIn-Reply-To: &lt;e5c6ecab0803130817k734266a0p5a5cdb09327934f8@...&gt;\r\nReferences: &lt;1205352914.3175.168.camel@...&gt;\n\t &lt;e5c6ecab0803121515u9921bcbkda5abe66f8dd9c65@...&gt;\n\t &lt;1205394991.3212.32.camel@...&gt;\n\t &lt;e5c6ecab0803130817k734266a0p5a5cdb09327934f8@...&gt;\r\nContent-Type: multipart/signed; micalg=pgp-sha1; protocol=&quot;application/pgp-signature&quot;; boundary=&quot;=-Ov8cKqHwuCKaz2R/2IN+&quot;\r\nDate: Thu, 13 Mar 2008 18:10:08 +0100\r\nMessage-Id: &lt;1205428208.3212.161.camel@...&gt;\r\nMime-Version: 1.0\r\nX-Mailer: Evolution 2.12.3 (2.12.3-3.fc8) \r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Martin Grotzke &lt;mg@...&gt;\r\nSubject: Re: [rest-discuss] How to design validation of e.g. username,\n\temail-address, password\r\nX-Yahoo-Group-Post: member; u=340209025; y=JVtXJvNlisSoxH3hSGQncnEoCoiyh54fNRyIjqBBQoTCUqj8N4QPoZ0\r\nX-Yahoo-Profile: martin.grotzke\r\n\r\n\r\n--=-Ov8cKqHwuCKaz2R/2IN+\r\nContent-Type: text/plain\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nHi Daniel,\n\nthanx for clarification - sorry for my 409/200 confusion :)\n\nI =\r\nhave two issues/questions left:\n1) How do I distinguish between username an=\r\nd email when I provide a HEAD\n   for /users/{uid}? If it&#39;s meant to be the =\r\nvalidation for email, I \n   must check that the given uid is a correct emai=\r\nl address (syntax),\n   for usernames I must not perform this validation...\n=\r\n2) What would you suggest for password validation?\n\nThanx && cheers,\nMartin=\r\n\n\n\nOn Thu, 2008-03-13 at 15:17 +0000, Daniel Yokomizo wrote:\n&gt; On Thu, Mar =\r\n13, 2008 at 7:56 AM, Martin Grotzke &lt;mg@...&gt; wrote:\n&gt; &gt; Hi,\n&gt; &gt;\n&gt; &gt;  &gt;=\r\n Why not just HEAD /user/{username}? If the status code is 404 then it\n&gt; &gt; =\r\n &gt; is free for use. If username isn&#39;t the UID for users in the URI you\n&gt; &gt; =\r\n &gt; can use queries for that: HEAD /user?username=3D{username}. For email\n&gt; =\r\n&gt;  &gt; something similar can be used. You can have both username and email as=\r\n\n&gt; &gt;  &gt; UID to find a single user with HEAD /user/{uid}, if both identifier=\r\ns\n&gt; &gt;  &gt; give an unique user, there&#39;s no reason to choose just one.\n&gt; &gt;  Bu=\r\nt we do not want that users can use the email-address of another user\n&gt; &gt;  =\r\nas username. Additionally we validate email-addresses slightly different\n&gt; =\r\n&gt;  than usernames. So it&#39;s important what&#39;s validated - username of\n&gt; &gt;  em=\r\nail-address.\n&gt; \n&gt; I&#39;m saying that your validation code can call HEAD /users=\r\n/{username}\n&gt; and HEAD /users/{email}, both must return 404 to be able to i=\r\nnsert a\n&gt; new user. There&#39;s no need to think that you can use two different=\r\n\n&gt; things in the URL (if you can unambiguously see which is which). I did\n&gt;=\r\n a login process that worked like that, you could log on with either an\n&gt; u=\r\nid or the email, both had to be unique. Also in both cases you can\n&gt; return=\r\n a 400 if the username or email is invalid.\n&gt; \n&gt; &gt;  But just for the userna=\r\nme HEAD sounds well. So 404 would be the status\n&gt; &gt;  code if the username i=\r\ns still available, 409 if the username is already\n&gt; &gt;  taken, and 400 if th=\r\ne username is not well formed?\n&gt; \n&gt; 409 should be returned when you are try=\r\ning to PUT and there&#39;s a\n&gt; conflict. In this moment we are trying to see if=\r\n the resource is\n&gt; available.\n&gt; \n&gt; &gt;  &gt; &gt;  Or would it be better to have it=\r\n at s.th.\n&gt; &gt;  &gt; &gt;  like /username/validation/{username}, /email/validation=\r\n/{email}\n&gt; &gt;  &gt;\n&gt; &gt;  &gt; Unless username and email are resources in your app,=\r\n it makes more\n&gt; &gt;  &gt; sense to go to the top level resource (i.e. user) and=\r\n query it.\n&gt; &gt;  Given that we have to distinguish between username and emai=\r\nl, you would\n&gt; &gt;  suggest to have s.th. like /users/validation/email/{email=\r\n}?\n&gt; \n&gt; Validation is an activity, not a resource. A validator would be an\n=\r\n&gt; resource, but it smells like a disguised RPC IMHO. In summary my\n&gt; approa=\r\nch would be:\n&gt; \n&gt; 1. Client issues a HEAD /users/{username} and HEAD /users=\r\n/{email}\n&gt; 2. Server process the request see if the uid provided is valid\n&gt;=\r\n (returning 400 if it&#39;s invalid), see if such value exists in the\n&gt; databas=\r\ne (returning a 404 if it doesn&#39;t exist) and returns 200.\n&gt; 3. Client sees i=\r\nf a 400 is returned and corrects the input, if a 404\n&gt; is returned it can u=\r\nse the usernmae/email if 200 is returned it knows\n&gt; it can&#39;t.\n&gt; 4. Client i=\r\nssues a POST /users with the information in the request\n&gt; body url encoded.=\r\n You could use a PUT /users/{username} but then the\n&gt; server must be able t=\r\no understand that this is a new user instead of\n&gt; an existing one. One appr=\r\noach is to check the authorization header, if\n&gt; it exists and is valid it&#39;s=\r\n an update of an existing user, otherwise\n&gt; it&#39;s a new user.\n&gt; 5. Server pr=\r\nocess the request and if there&#39;s a conflict it issues a\n&gt; 409, otherwise it=\r\n returns a 201.\n&gt; \n&gt; A concern you always need to have when exposing resour=\r\nces is how you\n&gt; deal with sensitive information. If anyone can issue a GET=\r\n\n&gt; /users/{username} the server will return a representation of this\n&gt; reso=\r\nurce, so perhaps you want to require an authorization to GET (the\n&gt; credent=\r\nial must match the user) and let anyone issue HEAD (as it\n&gt; doesn&#39;t send a =\r\nbody). Also take care with the cache headers to ensure\n&gt; that nothing is ca=\r\nched.\n&gt; \n&gt; &gt;  &gt; &gt;  And what were possible response status codes? I&#39;d think =\r\nthis could\n&gt; &gt;  &gt; &gt;  always be 200, with more details in the response body,=\r\n as even a GET\n&gt; &gt;  &gt; &gt;  with a username that is syntactically not correct =\r\nwould be a valid\n&gt; &gt;  &gt; &gt;  request. Or should 200 be only returned if every=\r\nthing is ok, and 400 if\n&gt; &gt;  &gt; &gt;  the email address is not correct, and 409=\r\n if the username is already\n&gt; &gt;  &gt; &gt;  taken?\n&gt; &gt;  &gt;\n&gt; &gt;  &gt; 400 for syntax e=\r\nrrors (e.g. invalid characters in username/email)\n&gt; &gt;  &gt; should be ok. 409 =\r\nshouldn&#39;t be used in this case, because the request\n&gt; &gt;  &gt; completed withou=\r\nt errors, a 409 should be issued only if the request\n&gt; &gt;  &gt; could not be co=\r\nmpleted.\n&gt; &gt;  I thought 409 would be good to indicate s.th. like &quot;usename a=\r\nlready\n&gt; &gt;  taken&quot;. But this would occur in a PUT/POST request, not during =\r\na GET\n&gt; &gt;  request, what HEAD is related to. Does this mean, that if I want=\r\n to be\n&gt; &gt;  able to return 409 to indicate a conflict, that I would have to=\r\n use\n&gt; &gt;  PUT/POST? How else would it be possible to distinguish between &quot;n=\r\not well\n&gt; &gt;  formed&quot; (400) and &quot;already taken&quot; (??) using response status c=\r\nodes?\n&gt; \n&gt; If HEAD /users/{username} return 200 it means that there&#39;s a use=\r\nr with\n&gt; that username, so it&#39;s already taken.\n&gt; \n&gt; &gt;  &gt; &gt;  I find it reall=\r\ny hard to model such operations as resources, just to\n&gt; &gt;  &gt; &gt;  mention thi=\r\ns :)\n&gt; &gt;  &gt;\n&gt; &gt;  &gt; Instead of thinking about the interaction (i.e. validati=\r\nng a username)\n&gt; &gt;  &gt; try to focus on what resources are necessary to inter=\r\nact with. So we\n&gt; &gt;  &gt; can quickly figure out that the users resource is a =\r\ngood way to find\n&gt; &gt;  &gt; an user by username, so we ask for it and if there&#39;=\r\ns none we know the\n&gt; &gt;  &gt; username is available.\n&gt; &gt;  I&#39;m trying hard, real=\r\nly! :) The username of course is an easy one. Using\n&gt; &gt;  others gets more c=\r\nomplicated...\n&gt; &gt;\n&gt; &gt;  Thanx a lot,\n&gt; &gt;  cheers,\n&gt; &gt;  Martin\n&gt; \n&gt; Best rega=\r\nrds,\n&gt; Daniel Yokomizo.\n&gt; \n-- \nMartin Grotzke\nBernstorffstr. 17, 22767 Hamb=\r\nurg\nTel.      +49 (0) 40.98239888\nMobil     +49 (0) 170.9365656\nE-Mail    m=\r\ng@...\nOnline    http://www.javakaffee.de\n\r\n--=-Ov8cKqHwuCKaz2R/2IN+\r\nContent-Type: application/pgp-signature; name=signature.asc\r\nContent-Description: This is a digitally signed message part\r\n\r\n[ Attachment content not displayed ]\r\n--=-Ov8cKqHwuCKaz2R/2IN+--\r\n\n"}}