{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":429395558,"authorName":"Robert Brewer","from":"&quot;Robert Brewer&quot; &lt;fumanchu@...&gt;","profile":"aminusfu","replyTo":"SENDER","senderId":"5zKiaFa7-TkkjSdas0PtAS6mLfUJhEWXs00aJ1XhtcLaZQcvyYGT3kAF8lQgO0AutxlcTWE0S3-71FqtgwSUy0qsACF0mOtDMS_XpA","spamInfo":{"isSpam":false,"reason":"0"},"subject":"RE: [rest-discuss] Determining which Media type for post/put","postDate":"1276540457","msgId":15665,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PEYxOTYyNjQ2RDNCNjQ2NDJCN0M5QTA2MDY4RUUxRTY0MEQ2RUNCNzZAZXgxMC5ob3N0ZWRleGNoYW5nZS5sb2NhbD4=","inReplyToHeader":"PDIwMTAwNjE0MTAwNjU5LmVjNmU0OGU1LmVyaWNAYmlzb25zeXN0ZW1zLm5ldD4=","referencesHeader":"PEFBTkxrVGlsazJZWnJnY2U5M3dYcDlFSjRHZnBpckxlUVZ2bUowSnhjeFBZSEBtYWlsLmdtYWlsLmNvbT48MjAxMDA2MDQwNzQ5NTYuYzllM2MxYzUuZXJpY0BiaXNvbnN5c3RlbXMubmV0PjxBQU5Ma1RpbVhXY2h1OXR2NHZhRXlpRkI4ekxabTBNMkY0aTZSY3FOeUFGc1NAbWFpbC5nbWFpbC5jb20+PDIwMTAwNjA0MDkzOTEzLmVmNmNlYzE5LmVyaWNAYmlzb25zeXN0ZW1zLm5ldD48QUFOTGtUaWtIdmxmYnZ2TFBRRzZSYzlaNkxyMTloU2F5LXNPdVhIYnlxeTRDQG1haWwuZ21haWwuY29tPjwyMDEwMDYwNDE0MDkxNi4zZmZkNzUzYy5lcmljQGJpc29uc3lzdGVtcy5uZXQ+PEFBTkxrVGluU0plTndlckZZMTl4V1VYRFNDY0N5cG5Tdmt6WTc2LUdnVGFlNkBtYWlsLmdtYWlsLmNvbT48MjAxMDA2MDgxMDAzMjMuYWE2ZWY5OWUuZXJpY0BiaXNvbnN5c3RlbXMubmV0PjxBQU5Ma1RpblY4eXhOLVI0QUZXQXZOYUxxcGViLXVmN2NPMFdGbVg3RHBhUlhAbWFpbC5nbWFpbC5jb20+PDIwMTAwNjA5MTgwMDA1LjhhOGRhNzBiLmVyaWNAYmlzb25zeXN0ZW1zLm5ldD48QUFOTGtUaW5UNEl2NTNFaHJoUExHR1lhTGUxUWZocEdWMVBNMTU2Y1hDS2haQG1haWwuZ21haWwuY29tPjwyMDEwMDYxMTA4MTQxOC42ZGRhNDdhOS5lcmljQGJpc29uc3lzdGVtcy5uZXQ+PEFBTkxrVGltRHFhWHVIUE52eS1RVUZaa0ZNYUhwU2NnSkNHLXNQcUtxRndzdUBtYWlsLmdtYWlsLmNvbT48MjAxMDA2MTEyMzMyNTguZTFiN2U1ZjcuZXJpY0BiaXNvbnN5c3RlbXMubmV0PjxBQU5Ma1RpbXpVYk5nckJ1bk14R0xpSzBmb2QxUlZYcThrV2UxZDgtS0hLNmJAbWFpbC5nbWFpbC5jb20+PDIwMTAwNjEyMTAzMjU1LjgwYzE1YThiLmVyaWNAYmlzb25zeXN0ZW1zLm5ldD48QUFOTGtUaW5ZS1RuTmhmZVMyX1RfUElGSWpXSnlIS25SYkNacUVOczUxSFZXQG1haWwuZ21haWwuY29tPiA8MjAxMDA2MTQxMDA2NTkuZWM2ZTQ4ZTUuZXJpY0BiaXNvbnN5c3RlbXMubmV0Pg=="},"prevInTopic":15662,"nextInTopic":15666,"prevInTime":15664,"nextInTime":15666,"topicId":15466,"numMessagesInTopic":82,"msgSnippet":"... I thought I was understanding until this point; perhaps it s just stronger here than you intend in order to fend off borking @type . Roy said, ...a","rawEmail":"Return-Path: &lt;fumanchu@...&gt;\r\nX-Sender: fumanchu@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 28896 invoked from network); 14 Jun 2010 18:34:27 -0000\r\nX-Received: from unknown (66.196.94.107)\n  by m1.grp.sp2.yahoo.com with QMQP; 14 Jun 2010 18:34:27 -0000\r\nX-Received: from unknown (HELO EX16.myhostedexchange.com) (69.50.2.26)\n  by mta3.grp.re1.yahoo.com with SMTP; 14 Jun 2010 18:34:27 -0000\r\nX-Received: from ex10.myhostedexchange.com ([69.50.2.26]) by EX16.myhostedexchange.com with Microsoft SMTPSVC(6.0.3790.4675);\n\t Mon, 14 Jun 2010 11:34:22 -0700\r\nX-MimeOLE: Produced By Microsoft Exchange V6.5\r\nContent-class: urn:content-classes:message\r\nMIME-Version: 1.0\r\nContent-Type: text/plain;\n\tcharset=&quot;us-ascii&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nDate: Mon, 14 Jun 2010 11:34:17 -0700\r\nMessage-ID: &lt;F1962646D3B64642B7C9A06068EE1E640D6ECB76@...&gt;\r\nIn-Reply-To: &lt;20100614100659.ec6e48e5.eric@...&gt;\r\nX-MS-Has-Attach: \r\nX-MS-TNEF-Correlator: \r\nThread-Topic: [rest-discuss] Determining which Media type for post/put\r\nThread-Index: AcsL28xgaWb4ryhpTPWE+cXp7jQ5sQABuMog\r\nReferences: &lt;AANLkTilk2YZrgce93wXp9EJ4GfpirLeQVvmJ0JxcxPYH@...&gt;&lt;20100604074956.c9e3c1c5.eric@...&gt;&lt;AANLkTimXWchu9tv4vaEyiFB8zLZm0M2F4i6RcqNyAFsS@...&gt;&lt;20100604093913.ef6cec19.eric@...&gt;&lt;AANLkTikHvlfbvvLPQG6Rc9Z6Lr19hSay-sOuXHbyqy4C@...&gt;&lt;20100604140916.3ffd753c.eric@...&gt;&lt;AANLkTinSJeNwerFY19xWUXDSCcCypnSvkzY76-GgTae6@...&gt;&lt;20100608100323.aa6ef99e.eric@...&gt;&lt;AANLkTinV8yxN-R4AFWAvNaLqpeb-uf7cO0WFmX7DpaRX@...&gt;&lt;20100609180005.8a8da70b.eric@...&gt;&lt;AANLkTinT4Iv53EhrhPLGGYaLe1QfhpGV1PM156cXCKhZ@...&gt;&lt;20100611081418.6dda47a9.eric@...&gt;&lt;AANLkTimDqaXuHPNvy-QUFZkFMaHpScgJCG-sPqKqFwsu@...&gt;&lt;20100611233258.e1b7e5f7.eric@...&gt;&lt;AANLkTimzUbNgrBunMxGLiK0fod1RVXq8kWe1d8-KHK6b@...&gt;&lt;20100612103255.80c15a8b.eric@...&gt;&lt;AANLkTinYKTnNhfeS2_T_PIFIjWJyHKnRbCZqENs51HVW@...&gt; &lt;20100614100659.ec6e48e5.eric@...&gt;\r\nTo: &quot;Eric J. Bowman&quot; &lt;eric@...&gt;,\n\t&quot;Peter Williams&quot; &lt;pezra@...&gt;\r\nCc: &lt;rest-discuss@yahoogroups.com&gt;\r\nReturn-Path: fumanchu@...\r\nX-OriginalArrivalTime: 14 Jun 2010 18:34:22.0829 (UTC) FILETIME=[358709D0:01CB0BF0]\r\nFrom: &quot;Robert Brewer&quot; &lt;fumanchu@...&gt;\r\nSubject: RE: [rest-discuss] Determining which Media type for post/put\r\nX-Yahoo-Group-Post: member; u=429395558; y=921q-iWlKlfZpCGay4ALrVF-FBvQWBrCONff1q7Xni8Sqho\r\nX-Yahoo-Profile: aminusfu\r\n\r\nEric J. Bowman wrote:\n&gt; Peter Williams wrote:\n&gt; &gt;  1. HTTP is designed for =\r\nevery representation to be a resource in\n&gt; &gt;  it&#39;s own right.\n&gt; \n&gt; No, HTTP=\r\n supports compression using content negotiation, such variants\n&gt; are not re=\r\nsources.  They are byte-for-byte identical except for\n&gt; transfer coding, so=\r\n they can&#39;t be different resources.\n&gt; \n&gt; An XML and a YAML variant of the s=\r\name resource may contain the same\n&gt; data, but they are not byte-for-byte id=\r\nentical except for transfer\n&gt; coding.  Therefore, while they can be variant=\r\ns of a resource, they are\n&gt; also resources themselves, whether you assign t=\r\nhem URIs or not.\n\nI thought I was understanding until this point; perhaps i=\r\nt&#39;s just\nstronger here than you intend in order to fend off &quot;borking @type&quot;=\r\n. Roy\nsaid, &quot;...a resource R is a temporally varying membership function\nMR=\r\n(t), which for time t maps to a set of entities, or values, which are\nequiv=\r\nalent. The values in the set may be resource representations\nand/or resourc=\r\ne identifiers.&quot; [1] I take that to mean you can Vary\nrepresentations or, as=\r\n you advocate, make them into resources and assign\nthem URI&#39;s. But it doesn=\r\n&#39;t seem to prefer one over the other, nor does\nit indicate that the variant=\r\ns are independent resources whether you\nassign them URI&#39;s or not.\n\n&gt; Assumi=\r\nng no Content-Location:\n&gt; \n&gt; Say I have a negotiated resource which returns=\r\n both application/xhtml\n&gt; +xml and text/html variants.  We send text/html t=\r\no IE and application/\n&gt; xhtml+xml to Ffx.  Let&#39;s say the first time a cache=\r\n encounters this\n&gt; resource, the user agent is IE.  The cache stores the te=\r\nxt/html\n&gt; variant.\n&gt; \n&gt; Let&#39;s say the next request the cache encounters for=\r\n the resource is\n&gt; from another IE.  Cache responds with cached text/html v=\r\nariant.  Next,\n&gt; the cache gets the same request from Ffx.  Vary: User-Agen=\r\nt tells the\n&gt; cache to check the origin server.  Origin responds with appli=\r\ncation/\n&gt; xhtml+xml variant, cache stores that variant, overwriting the tex=\r\nt/\n&gt; html variant, because that&#39;s what the cache is being told to do.\n&gt; \n&gt; =\r\nNow, another request for the resource comes to the cache from IE.  The\n&gt; ca=\r\nche only has an application/xhtml+xml variant.  Vary: User-Agent\n&gt; tells th=\r\ne cache to check the origin server.  Origin server responds\n&gt; with text/htm=\r\nl variant, which the cache stores, overwriting the\n&gt; application/xhtml+xml =\r\nvariant.\n&gt; \n&gt; This undesirable behavior results from not following the SHOU=\r\nLD.  By\n&gt; including a URI in Content-Location, the cache has the additional=\r\n\n&gt; information it needs to tag-and-bag variants.  The cache can now\n&gt; assoc=\r\niate URI A with text/html, and URI B with application/xhtml+xml,\n&gt; such tha=\r\nt a series of IE-Ffx-IE requests will return the proper\n&gt; variant, instead =\r\nof only caching the most-recent variant.\n\nI was under the impression that t=\r\nhe cache needed three things to\ntag-and-bag variants: 1) the URI, 2) the Va=\r\nry response header, and 3)\nthe request headers. Since HTTP, at least, has s=\r\nynchronous requests and\nresponses, a cache should have all of those for any=\r\n given conversation.\nWe recently upgraded CherryPy&#39;s cache to this model [2=\r\n], and it seems to\nwork well. Django apparently does the same [3]. Squid se=\r\nems to have\nextensions to do this [4]. Varnish is at least discussing the i=\r\nssue [5].\n\nI was a bit surprised to hear that the idea that &quot;most caches...=\r\nsimply\nwon&#39;t cache responses whose Vary header consists of anything more th=\r\nan\n&#39;Accept-Encoding&#39;&quot; [6]. If that&#39;s true, then I see it as an unfortunate\n=\r\nlimitation of the ideal--an engineering problem to be suffered through,\nnot=\r\n part and parcel of the REST style. That suffering takes the form of\nassign=\r\ning URI&#39;s to variants via Content-Location, as you say, but also\nof working=\r\n to improve proper support for Vary in caches [7] (IE6 seems\nthe worst offe=\r\nnder, but note the comment from Eric Law regarding IE7\nimprovements). I wou=\r\nld very much like to see Mark fix or put up a new\nversion of that resource =\r\n[8] to see how the state of browser caching in\n2010 compares to 2006. Firef=\r\nox 3.5.9, at least, passes the Vary tests\ntherein.\n\nUser-Agent is something=\r\n of an extreme case--it has perhaps the most\ndiverse set of values of any h=\r\neader save Cookie. Even proper Vary\nsupport in caches doesn&#39;t help that sit=\r\nuation; assigning URI&#39;s to\nvariants does. But that alone doesn&#39;t elevate UR=\r\nI&#39;s-per-variant to a\npreferred style in my (very humble, willing to learn) =\r\nopinion.\n\nI&#39;m still not convinced that those practical realities inform RES=\r\nT;\nrather, they seem to be mismatches between REST and the implementation\no=\r\nf caches on the one hand and the design of the User-Agent header on the\noth=\r\ner.\n\nNone of which means &quot;borking @type&quot; (using &quot;type&quot; attributes to indica=\r\nte\nthe type of the response) is a good idea--but the OP&#39;s question (and\nmca=\r\n&#39;s initial answer) seemed to me to be more about the type of the\n*request* =\r\nentity, which has little to do with all of the above.\n\n\nRobert Brewer\nfuman=\r\nchu@...\n\n[1]\nhttp://www.ics.uci.edu/~fielding/pubs/dissertation/rest=\r\n_arch_style.htm#s\nec_5_2\n[2] http://www.cherrypy.org/browser/trunk/cherrypy=\r\n/lib/caching.py#L128\n[3]\nhttp://docs.djangoproject.com/en/dev/topics/cache/=\r\n#using-vary-headers\n[4] http://squid.sourceforge.net/vary/\n[5] http://varni=\r\nsh-cache.org/wiki/ArchitectureVary\n[6] http://tech.groups.yahoo.com/group/r=\r\nest-discuss/message/15532\n[7] http://www.mnot.net/blog/2006/05/11/browser_c=\r\naching.\n[8] http://www.mnot.net/javascript/xmlhttprequest/cache.html\n\n"}}