{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":454665725,"authorName":"Juergen Brendel","from":"Juergen Brendel &lt;juergen.brendel@...&gt;","profile":"brendel.juergen","replyTo":"SENDER","senderId":"sSdj156ird5HeLW2j9vzQ-MkYkNLCa2PLsuoXX7Onl7mTC1OOZw33O05IImUEXHHJfabt-4YfHR_9nkTVQg1gOK7lVmbyON7Q9X2cl64x5bolv843g","spamInfo":{"isSpam":false,"reason":"0"},"subject":"RESTful way to pop first item in a queue","postDate":"1281034748","msgId":16148,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDEyODEwMzQ3NDguMjkxNy4zMDMuY2FtZWxAYmFja3BhY2s+"},"prevInTopic":0,"nextInTopic":16149,"prevInTime":16147,"nextInTime":16149,"topicId":16148,"numMessagesInTopic":46,"msgSnippet":"Hello! Let s say I have a queue resource: /foo I can POST new entries into the queue. I can even refer to individual entries within the queue: /foo/ But","rawEmail":"Return-Path: &lt;juergen.brendel@...&gt;\r\nX-Sender: juergen.brendel@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 92802 invoked from network); 5 Aug 2010 18:59:14 -0000\r\nX-Received: from unknown (98.137.34.44)\n  by m1.grp.sp2.yahoo.com with QMQP; 5 Aug 2010 18:59:14 -0000\r\nX-Received: from unknown (HELO mail-px0-f178.google.com) (209.85.212.178)\n  by mta1.grp.sp2.yahoo.com with SMTP; 5 Aug 2010 18:59:14 -0000\r\nX-Received: by pxi1 with SMTP id 1so596986pxi.37\n        for &lt;rest-discuss@yahoogroups.com&gt;; Thu, 05 Aug 2010 11:59:14 -0700 (PDT)\r\nX-Received: by 10.114.74.7 with SMTP id w7mr12703294waa.85.1281034754096;\n        Thu, 05 Aug 2010 11:59:14 -0700 (PDT)\r\nReturn-Path: &lt;juergen.brendel@...&gt;\r\nX-Received: from [10.1.1.4] (ip-118-90-22-123.xdsl.xnet.co.nz [118.90.22.123])\n        by mx.google.com with ESMTPS id d39sm934057wam.4.2010.08.05.11.59.11\n        (version=TLSv1/SSLv3 cipher=RC4-MD5);\n        Thu, 05 Aug 2010 11:59:13 -0700 (PDT)\r\nTo: rest-discuss@yahoogroups.com\r\nContent-Type: text/plain; charset=&quot;UTF-8&quot;\r\nOrganization: MuleSoft\r\nDate: Fri, 06 Aug 2010 06:59:08 +1200\r\nMessage-ID: &lt;1281034748.2917.303.camel@backpack&gt;\r\nMime-Version: 1.0\r\nX-Mailer: Evolution 2.28.1 \r\nContent-Transfer-Encoding: 7bit\r\nFrom: Juergen Brendel &lt;juergen.brendel@...&gt;\r\nReply-To: juergen.brendel@...\r\nSubject: RESTful way to pop first item in a queue\r\nX-Yahoo-Group-Post: member; u=454665725; y=rXBQmgTgCjOU1PEz7JhDZ7p4iRq4RIU1c-8cnWe8lCmtwwt1J5SwD6OJ\r\nX-Yahoo-Profile: brendel.juergen\r\n\r\n\nHello!\n\nLet&#39;s say I have a queue resource: /foo\n\nI can POST new entries into the queue. I can even refer to individual\nentries within the queue: /foo/&lt;id&gt;\n\nBut how do I pop the next entry? How do I construct a single request\nthat gets me the next/first entry but also removes the entry at the same\ntime?\n\nMaybe I can implement a special resource /foo/next, which always refers\nto the next entry in the queue. But clearly, I can&#39;t use GET to pop the\nentry, since that would not be idempotent.\n\nThe queue has multiple consumers, so the &#39;pop&#39; operation should be\natomic. This seems to rule out the possibility of doing a GET to\nretrieve the latest element, followed by a DELETE to remove it. Someone\nelse could have gotten the &#39;latest&#39; element in the meantime, thus\ncausing the same element to be consumed twice.\n\nMaybe I can cause a &#39;move&#39;, where a single request causes the next\nelement to be renamed to a unique ID, which is then returned to the\nclient, who then is the only one who has a handle on that object. The\nclient can then work with the resource. But the question now is:\n\na) What happens when the client fails before it can delete the resource?\nb) What is the best way to &#39;move&#39; an item in that way?\n\n\nJuergen\n\n\n\n-- \nJuergen Brendel\nhttp://restx.mulesoft.org \n\n\n\n"}}