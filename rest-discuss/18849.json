{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":529832687,"authorName":"francoisverry","from":"&quot;francoisverry&quot; &lt;f.verry@...&gt;","profile":"francoisverry","replyTo":"SENDER","senderId":"OTOMVUzXCk7kviXdzxEOQWNYy0asUjFA_Rb9uunKJEXHqxiCysakj_1_i4Y-f-2DYf3KRP8JgunHNV0P9fDVn_0QTx8KE9ZTRj0","spamInfo":{"isSpam":false,"reason":"12"},"subject":"REST &quot;create if not exists&quot;","postDate":"1338666614","msgId":18849,"canDelete":false,"contentTrasformed":false,"systemMessage":true,"headers":{"messageIdInHeader":"PGpxZHFwbStnMDU4QGVHcm91cHMuY29tPg=="},"prevInTopic":0,"nextInTopic":18851,"prevInTime":18848,"nextInTime":18850,"topicId":18849,"numMessagesInTopic":7,"msgSnippet":"Hello I m new to REST, and I m trying to integrate it in my company. We currently are trying to design a multi-criteria search engine with REST principles. I","rawEmail":"Return-Path: &lt;f.verry@...&gt;\r\nReceived: (qmail 49392 invoked from network); 3 Jun 2012 18:53:46 -0000\r\nReceived: from unknown (98.137.34.45)\n  by m2.grp.sp2.yahoo.com with QMQP; 3 Jun 2012 18:53:46 -0000\r\nReceived: from unknown (HELO ng4-vm5.bullet.mail.gq1.yahoo.com) (98.136.219.44)\n  by mta2.grp.sp2.yahoo.com with SMTP; 3 Jun 2012 18:53:46 -0000\r\nDKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoogroups.com; s=lima; t=1338749625; bh=yYGLN1ucYDk5ip74LKBMoD35i+UNITbUIJduFc09TPk=; h=Received:Received:X-Sender:X-Apparently-To:X-Received:X-Received:X-Received:X-Received:X-Received:Date:To:Message-ID:User-Agent:MIME-Version:Content-Type:X-Mailer:X-Yahoo-Newman-Property:X-Originating-IP:X-eGroups-Msg-Info:X-Yahoo-Post-IP:From:Subject:X-Yahoo-Group-Post:X-Yahoo-Profile:X-YGroups-SubInfo:Sender:X-eGroups-Approved-By:X-eGroups-Auth; b=eohihY3LnQDhCfO8xEXwsvN7SduLP0sYWQwh3XjDhW5UBBYcZfMc4fZyClm5nh0eqU58KpNbofmFHtpjsjRd41k6oFOd4Lu4p04iTyNsIGCQw2wq6Fzi13dhW/XmqQYG\r\nReceived: from [98.137.0.81] by ng4.bullet.mail.gq1.yahoo.com with NNFMP; 03 Jun 2012 18:53:45 -0000\r\nReceived: from [98.137.34.73] by tg10.bullet.mail.gq1.yahoo.com with NNFMP; 03 Jun 2012 18:53:45 -0000\r\nX-Sender: f.verry@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 62079 invoked from network); 2 Jun 2012 19:50:15 -0000\r\nX-Received: from unknown (98.137.35.162)\n  by m6.grp.sp2.yahoo.com with QMQP; 2 Jun 2012 19:50:15 -0000\r\nX-Received: from unknown (HELO ng15-vm5.bullet.mail.gq1.yahoo.com) (98.136.219.187)\n  by mta6.grp.sp2.yahoo.com with SMTP; 2 Jun 2012 19:50:15 -0000\r\nX-Received: from [98.137.0.85] by ng15.bullet.mail.gq1.yahoo.com with NNFMP; 02 Jun 2012 19:50:15 -0000\r\nX-Received: from [98.137.34.72] by tg5.bullet.mail.gq1.yahoo.com with NNFMP; 02 Jun 2012 19:50:15 -0000\r\nDate: Sat, 02 Jun 2012 19:50:14 -0000\r\nTo: rest-discuss@yahoogroups.com\r\nMessage-ID: &lt;jqdqpm+g058@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: multipart/alternative; boundary=&quot;6-3826841965-9070831048=:3&quot;\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: &quot;francoisverry&quot; &lt;f.verry@...&gt;\r\nSubject: REST &quot;create if not exists&quot;\r\nX-Yahoo-Group-Post: member; u=529832687; y=pIcBebW7mG5BYDhvbnU-EB_RKPuObvSyJO5mEcCMq_0guooLqMkLerb8eiK-oraRuLfZQ0CLqdcTcL4\r\nX-Yahoo-Profile: francoisverry\r\nX-eGroups-Approved-By: gonga_thrash &lt;distobj@...&gt; via web; 03 Jun 2012 18:53:45 -0000\r\n\r\n\r\n--6-3826841965-9070831048=:3\r\nContent-Type: text/plain; charset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nHello\n\nI&#39;m new to REST, and I&#39;m trying to integrate it in my company. We\ncu=\r\nrrently are trying to design a multi-criteria search engine with REST\nprinc=\r\niples. I use as a reference the O&#39;Reilly &quot;RESTful Web Services&quot;.\n\nI don&#39;t k=\r\nnow if the following problem has been discussed somewhere, but\nI&#39;ve been un=\r\nable to find anything that matches it. If you happen to know\nresources that=\r\n could help me, please let me know.\n\nIn a multi-critera search engine, we h=\r\nave two types of resources :\n&quot;Results&quot; and &quot;Filters&quot;. Results are items sea=\r\nrched for, and Filters are\nsets of criteria which allows us to isolate a su=\r\nbset of Results.\n\nFor example :\n\n     GET /results returns the total number=\r\n of results\n     GET /results/{result-id} returns one specific result\n     =\r\nGET /filters returns a specification on criteria usage (eg. an empty\n&lt;form&gt;=\r\n)\n     GET /filters/{filter-id} returns one specific filter (eg. a filled\n&lt;=\r\nform&gt;)\n     GET /filters/{filter-id}/results returns the total number of re=\r\nsults\nmatching the filter, and links to the corresponding /results/{result-=\r\nid}\n\nWe want to allow the registration of filters. Imagine a filter as the\n=\r\ncomposition of 3 criteria, c1, c2 and c3. My first thought was to\nregister =\r\na filter through a POST request.\n\n     Request :\n\n     POST /filters HTTP/1=\r\n.1\n\n     c1=3Dfoo&c2=3Dbar&c3=3Dbaz\n\n     Response :\n\n     HTTP/1.1 201 Cre=\r\nated\n     Location: /filters/123456\n\nBut if I (or someone else) do it again=\r\n, I&#39;ll end up with another\n{filter-id}, e.g. 123457. Then we&#39;ll have two re=\r\nsources with the exact\nsame meaning and content.\n\nIf I want to use one URI =\r\nfor one criteria set, PUT seems more\nappropriate. The thing is, the {filter=\r\n-id} is assigned &quot;randomly&quot; by the\nserver. As a client, I can&#39;t guess nor f=\r\norce it. From there, I see the\nfollowing solutions, neither I find satisfyi=\r\nng :\n\n1/ I try to map artificially my URIs to the criteria set. I could use=\r\n a\nhash of the representation. e.g. :\n\n     Request :\n\n     PUT /filters/53=\r\nc11504ba50e14b60407b13a72c0e53 HTTP/1.1\n\n     c1=3Dfoo&c2=3Dbar&c3=3Dbaz\n\n =\r\n    Response :\n\n     HTTP/1.1 200 OK\n\n     &lt;form method=3D&quot;PUT&quot;\naction=3D&quot;/=\r\nfilters/53c11504ba50e14b60407b13a72c0e53&quot;&gt;\n         &lt;input name=3D&quot;c1&quot; valu=\r\ne=3D&quot;foo&quot; /&gt;\n         &lt;input name=3D&quot;c2&quot; value=3D&quot;bar&quot; /&gt;\n         &lt;input n=\r\name=3D&quot;c3&quot; value=3D&quot;baz&quot; /&gt;\n         &lt;input type=3D&quot;submit&quot; /&gt;\n     &lt;/form&gt;=\r\n\n\nThe problem is : it is artificial. If my criteria set changes, or if its\n=\r\nrepresentation changes, I could end up with conflicts or doubles.\n\n2/ I tri=\r\nck the client into believing it actually created something new,\nwhether or =\r\nnot it has. This means, even if /filters/123456 already\nexists, my server w=\r\nill answer it to anyone POSTing the\n&quot;c1=3Dfoo&c2=3Dbar&c3=3Dbaz&quot; content.\n\n=\r\nThe problem is : it&#39;s a fraud. Only the initial POST really &quot;appends&quot;\nsomet=\r\nhing.\n\n3/ I answer the second-and-further POST requests with a &quot;409 Conflic=\r\nt&quot;\nanswer, and the correct location.\n\nThe problem is : it is not actually a=\r\nn error. The client doesn&#39;t care to\nregister something, it just has no way =\r\nto know wheter or not the\nresource he is looking for already exists.\n\n4/ I =\r\ndo a preliminary check\n\n     Request :\n\n     GET /filters?c1=3Dfoo&c2=3Dbar=\r\n&c3=3Dbaz HTTP/1.1\n\n     Response :\n\n     HTTP/1.1 301 Moved Permanently\n  =\r\n   Location: /filters/123456\n\nThe problem is : If the resource doesn&#39;t exis=\r\nts at that time, I&#39;ll be\nwilling to create it. If I do, nothing ensures me =\r\nthat someone hasn&#39;t\ncreated it inbetween. Then, if I want to put aside a lo=\r\ncation for my\nresource, it implies my GET isn&#39;t safe anymore.\n\n5/ The last =\r\noption I see is that the URI should contains the whole\ncontent of the resou=\r\nrce, as it is its &quot;natural&quot; identifier. This is\nespecially difficult if I h=\r\nave a large set of criteria, and if their\nvalues are complex. This is why w=\r\ne use ids in the first place.\n\nThanks in advance for your help\n\nFran=E7ois\n=\r\n\n\n\r\n--6-3826841965-9070831048=:3\r\nContent-Type: text/html; charset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nHello&lt;br&gt;&lt;br&gt;I&#39;m new to REST, and I&#39;m trying to integrate it in my company.=\r\n We currently are trying to design a multi-criteria search engine with REST=\r\n principles. I use as a reference the O&#39;Reilly &quot;RESTful Web Services&quot;.&lt;br&gt;&lt;=\r\nbr&gt;I don&#39;t know if the following problem has been discussed somewhere, but =\r\nI&#39;ve been unable to find anything that matches it. If you happen to know re=\r\nsources that could help me, please let me know.&lt;br&gt;&lt;br&gt;In a multi-critera s=\r\nearch engine, we have two types of resources : &quot;Results&quot; and &quot;Filters&quot;. Res=\r\nults are items searched for, and Filters are sets of criteria which allows =\r\nus to isolate a subset of Results.&lt;br&gt;&lt;br&gt;For example :&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;=\r\n&nbsp; &lt;font style=3D&quot;background-color: rgb(0, 255, 255);&quot; face=3D&quot;courier =\r\nnew&quot;&gt;GET /results&lt;/font&gt; returns the total number of results&lt;br&gt;&nbsp;&nbsp=\r\n;&nbsp; &lt;span style=3D&quot;font-family: courier new;background-color: rgb(0, 25=\r\n5, 255);&quot;&gt;GET /results/{result-id}&lt;/span&gt; returns one specific result&lt;br&gt;&n=\r\nbsp;&nbsp;&nbsp; &lt;span style=3D&quot;background-color: rgb(0, 255, 255);font-fam=\r\nily: courier new;&quot;&gt;GET /filters&lt;/span&gt; returns a specification on criteria =\r\nusage (eg. an empty &lt;form&gt;)&lt;br&gt;&nbsp;&nbsp;&nbsp; &lt;span style=3D&quot;font=\r\n-family: courier new;background-color: rgb(0, 255, 255);&quot;&gt;GET /filters/{fil=\r\nter-id}&lt;/span&gt; returns one specific filter (eg. a filled &lt;form&gt;)&lt;br&gt;&=\r\nnbsp;&nbsp;&nbsp; &lt;span style=3D&quot;font-family: courier new;background-color:=\r\n rgb(0, 255, 255);&quot;&gt;GET /filters/{filter-id}/results&lt;/span&gt; returns the tot=\r\nal number of results matching the filter, and links to the corresponding /r=\r\nesults/{result-id}&lt;br&gt;&lt;br&gt;We want to allow the registration of filters. Ima=\r\ngine a filter as the composition of 3 criteria, c1, c2 and c3. My first tho=\r\nught was to register a filter through a POST request.&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&n=\r\nbsp; Request :&lt;br&gt;&lt;br&gt;&lt;span style=3D&quot;font-family: courier new;background-co=\r\nlor: rgb(0, 255, 255);&quot;&gt;&nbsp;&nbsp;&nbsp; POST /filters HTTP/1.1&lt;/span&gt;&lt;br=\r\n style=3D&quot;font-family: courier new;background-color: rgb(0, 255, 255);&quot;&gt;&lt;br=\r\n style=3D&quot;font-family: courier new;background-color: rgb(0, 255, 255);&quot;&gt;&lt;sp=\r\nan style=3D&quot;font-family: courier new;background-color: rgb(0, 255, 255);&quot;&gt;&=\r\nnbsp;&nbsp;&nbsp; c1=3Dfoo&amp;c2=3Dbar&amp;c3=3Dbaz&lt;/span&gt;&lt;br style=3D&quot;fon=\r\nt-family: courier new;background-color: rgb(0, 255, 255);&quot;&gt;&lt;br&gt;&nbsp;&nbsp;=\r\n&nbsp; Response :&lt;br&gt;&lt;br&gt;&lt;span style=3D&quot;font-family: courier new;background=\r\n-color: rgb(0, 255, 255);&quot;&gt;&nbsp;&nbsp;&nbsp; HTTP/1.1 201 Created&lt;/span&gt;&lt;b=\r\nr style=3D&quot;font-family: courier new;background-color: rgb(0, 255, 255);&quot;&gt;&lt;s=\r\npan style=3D&quot;font-family: courier new;background-color: rgb(0, 255, 255);&quot;&gt;=\r\n&nbsp;&nbsp;&nbsp; Location: /filters/123456&lt;/span&gt;&lt;br style=3D&quot;font-family=\r\n: courier new;background-color: rgb(0, 255, 255);&quot;&gt;&lt;br&gt;But if I (or someone=\r\n else) do it again, I&#39;ll end up with another {filter-id}, e.g. 123457. Then=\r\n we&#39;ll have two resources with the exact same meaning and content.&lt;br&gt;&lt;br&gt;I=\r\nf I want to use one URI for one criteria set, PUT seems more appropriate. T=\r\nhe thing is, the {filter-id} is assigned &quot;randomly&quot; by the server. As a cli=\r\nent, I can&#39;t guess nor force it. From there, I see the following solutions,=\r\n neither I find satisfying :&lt;br&gt;&lt;br&gt;1/ I try to map artificially my URIs to=\r\n the criteria set. I could use a hash of the representation. e.g. :&lt;br&gt;&lt;br&gt;=\r\n&nbsp;&nbsp;&nbsp; Request :&lt;br&gt;&lt;br&gt;&lt;span style=3D&quot;font-family: courier new=\r\n;background-color: rgb(0, 255, 255);&quot;&gt;&nbsp;&nbsp;&nbsp; PUT /filters/53c11=\r\n504ba50e14b60407b13a72c0e53 HTTP/1.1&lt;/span&gt;&lt;br style=3D&quot;font-family: courie=\r\nr new;background-color: rgb(0, 255, 255);&quot;&gt;&lt;br style=3D&quot;font-family: courie=\r\nr new;background-color: rgb(0, 255, 255);&quot;&gt;&lt;span style=3D&quot;font-family: cour=\r\nier new;background-color: rgb(0, 255, 255);&quot;&gt;&nbsp;&nbsp;&nbsp; c1=3Dfoo&am=\r\np;c2=3Dbar&amp;c3=3Dbaz&lt;/span&gt;&lt;br style=3D&quot;font-family: courier new;backgro=\r\nund-color: rgb(0, 255, 255);&quot;&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp; Response :&lt;br&gt;&lt;br&gt;&lt;spa=\r\nn style=3D&quot;background-color: rgb(0, 255, 255);font-family: courier new;&quot;&gt;&n=\r\nbsp;&nbsp;&nbsp; HTTP/1.1 200 OK&lt;/span&gt;&lt;br style=3D&quot;background-color: rgb(0=\r\n, 255, 255);font-family: courier new;&quot;&gt;&lt;br style=3D&quot;background-color: rgb(0=\r\n, 255, 255);font-family: courier new;&quot;&gt;&lt;span style=3D&quot;background-color: rgb=\r\n(0, 255, 255);font-family: courier new;&quot;&gt;&nbsp;&nbsp;&nbsp; &lt;form method=\r\n=3D&quot;PUT&quot; action=3D&quot;/filters/53c11504ba50e14b60407b13a72c0e53&quot;&gt;&lt;/span&gt;&lt;br=\r\n style=3D&quot;background-color: rgb(0, 255, 255);font-family: courier new;&quot;&gt;&lt;sp=\r\nan style=3D&quot;background-color: rgb(0, 255, 255);font-family: courier new;&quot;&gt;&=\r\nnbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input name=3D&quot;c1&quot; value=3D&quot;fo=\r\no&quot; /&gt;&lt;/span&gt;&lt;br style=3D&quot;background-color: rgb(0, 255, 255);font-family:=\r\n courier new;&quot;&gt;&lt;span style=3D&quot;background-color: rgb(0, 255, 255);font-famil=\r\ny: courier new;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input name=\r\n=3D&quot;c2&quot; value=3D&quot;bar&quot; /&gt;&lt;/span&gt;&lt;br style=3D&quot;background-color: rgb(0, 255=\r\n, 255);font-family: courier new;&quot;&gt;&lt;span style=3D&quot;background-color: rgb(0, 2=\r\n55, 255);font-family: courier new;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=\r\nsp; &lt;input name=3D&quot;c3&quot; value=3D&quot;baz&quot; /&gt;&lt;/span&gt;&lt;br style=3D&quot;background=\r\n-color: rgb(0, 255, 255);font-family: courier new;&quot;&gt;&lt;span style=3D&quot;backgrou=\r\nnd-color: rgb(0, 255, 255);font-family: courier new;&quot;&gt;&nbsp;&nbsp;&nbsp;&nb=\r\nsp;&nbsp;&nbsp;&nbsp; &lt;input type=3D&quot;submit&quot; /&gt;&lt;/span&gt;&lt;br style=3D&quot;ba=\r\nckground-color: rgb(0, 255, 255);font-family: courier new;&quot;&gt;&lt;span style=3D&quot;=\r\nbackground-color: rgb(0, 255, 255);font-family: courier new;&quot;&gt;&nbsp;&nbsp;&=\r\nnbsp; &lt;/form&gt;&lt;/span&gt;&lt;br style=3D&quot;background-color: rgb(0, 255, 255);f=\r\nont-family: courier new;&quot;&gt;&lt;br&gt;The problem is : it is artificial. If my crit=\r\neria set changes, or if its representation changes, I could end up with con=\r\nflicts or doubles.&lt;br&gt;&lt;br&gt;2/ I trick the client into believing it actually =\r\ncreated something new, whether or not it has. This means, even if /filters/=\r\n123456 already exists, my server will answer it to anyone POSTing the &quot;c1=\r\n=3Dfoo&amp;c2=3Dbar&amp;c3=3Dbaz&quot; content.&lt;br&gt;&lt;br&gt;The problem is : it&#39;s a f=\r\nraud. Only the initial POST really &quot;appends&quot; something.&lt;br&gt;&lt;br&gt;3/ I answer =\r\nthe second-and-further POST requests with a &quot;409 Conflict&quot; answer, and the =\r\ncorrect location.&lt;br&gt;&lt;br&gt;The problem is : it is not actually an error. The =\r\nclient doesn&#39;t care to register something, it just has no way to know whete=\r\nr or not the resource he is looking for already exists.&lt;br&gt;&lt;br&gt;4/ I do a pr=\r\neliminary check&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp; Request :&lt;br&gt;&lt;br&gt;&lt;span style=3D&quot;f=\r\nont-family: courier new;background-color: rgb(0, 255, 255);&quot;&gt;&nbsp;&nbsp;&n=\r\nbsp; GET /filters?c1=3Dfoo&amp;c2=3Dbar&amp;c3=3Dbaz HTTP/1.1&lt;/span&gt;&lt;br sty=\r\nle=3D&quot;font-family: courier new;background-color: rgb(0, 255, 255);&quot;&gt;&lt;br&gt;&nb=\r\nsp;&nbsp;&nbsp; Response :&lt;br&gt;&lt;br&gt;&lt;span style=3D&quot;font-family: courier new;b=\r\nackground-color: rgb(0, 255, 255);&quot;&gt;&nbsp;&nbsp;&nbsp; HTTP/1.1 301 Moved P=\r\nermanently&lt;/span&gt;&lt;br style=3D&quot;font-family: courier new;background-color: rg=\r\nb(0, 255, 255);&quot;&gt;&lt;span style=3D&quot;font-family: courier new;background-color: =\r\nrgb(0, 255, 255);&quot;&gt;&nbsp;&nbsp;&nbsp; Location: /filters/123456&lt;/span&gt;&lt;br s=\r\ntyle=3D&quot;font-family: courier new;background-color: rgb(0, 255, 255);&quot;&gt;&lt;br&gt;T=\r\nhe problem is : If the resource doesn&#39;t exists at that time, I&#39;ll be willin=\r\ng to create it. If I do, nothing ensures me that someone hasn&#39;t created it =\r\ninbetween. Then, if I want to put aside a location for my resource, it impl=\r\nies my GET isn&#39;t safe anymore.&lt;br&gt;&lt;br&gt;5/ The last option I see is that the =\r\nURI should contains the whole content of the resource, as it is its &quot;natura=\r\nl&quot; identifier. This is especially difficult if I have a large set of criter=\r\nia, and if their values are complex. This is why we use ids in the first pl=\r\nace.&lt;br&gt;&lt;br&gt;Thanks in advance for your help&lt;br&gt;&lt;br&gt;Fran=E7ois&lt;br&gt;&lt;br&gt;\n\r\n--6-3826841965-9070831048=:3--\r\n\n"}}