{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":205190690,"authorName":"Subbu Allamaraju","from":"Subbu Allamaraju &lt;subbu.allamaraju@...&gt;","profile":"sallamar","replyTo":"SENDER","senderId":"xQy-F3q1v6C_n5d-dQMlf32Y1HFJiGq67Mp84zzRrTD8-GviDSY_Y0izHLdR9ZA8iBIiKLS13k2tWZTIcj6jS0pvsPdAc_IdrzZm7AWQkSbN9xQP","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [rest-discuss] Returning a Response Body for 400 errors","postDate":"1203006212","msgId":10387,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PEQzREEwQkY4LUJGMUEtNDIyMy1BNzE2LTBCNkMxODk3QTFFOUBnbWFpbC5jb20+","inReplyToHeader":"PEVDQ0NDNjc2LTU2NDUtNENGNi05OTg1LTUxQ0VCRTdBQzFGMUBnbWFpbC5jb20+","referencesHeader":"PGZvb2RlYStxYm9mQGVHcm91cHMuY29tPiA8NEZFNERDMUItM0VCOS00RDZBLTg3NEItOTQxMzMwRjQ0OTAwQGdtYWlsLmNvbT4gPEVDQ0NDNjc2LTU2NDUtNENGNi05OTg1LTUxQ0VCRTdBQzFGMUBnbWFpbC5jb20+"},"prevInTopic":10386,"nextInTopic":10388,"prevInTime":10386,"nextInTime":10388,"topicId":10381,"numMessagesInTopic":10,"msgSnippet":"This looks like a bug in the HttpURLConnection. Per RFC 2616, the server SHOULD include an entity containing an explanation of the error situation for all","rawEmail":"Return-Path: &lt;subbu.allamaraju@...&gt;\r\nX-Sender: subbu.allamaraju@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 90262 invoked from network); 14 Feb 2008 16:23:23 -0000\r\nX-Received: from unknown (66.218.67.96)\n  by m49.grp.scd.yahoo.com with QMQP; 14 Feb 2008 16:23:23 -0000\r\nX-Received: from unknown (HELO el-out-1112.google.com) (209.85.162.182)\n  by mta17.grp.scd.yahoo.com with SMTP; 14 Feb 2008 16:23:23 -0000\r\nX-Received: by el-out-1112.google.com with SMTP id m34so484149ele.11\n        for &lt;rest-discuss@yahoogroups.com&gt;; Thu, 14 Feb 2008 08:23:22 -0800 (PST)\r\nX-Received: by 10.143.160.1 with SMTP id m1mr1316004wfo.90.1203006202229;\n        Thu, 14 Feb 2008 08:23:22 -0800 (PST)\r\nReturn-Path: &lt;subbu.allamaraju@...&gt;\r\nX-Received: from oildiepresent-lm.corp.yahoo.com ( [207.126.230.225])\n        by mx.google.com with ESMTPS id 30sm7329983wff.11.2008.02.14.08.23.21\n        (version=TLSv1/SSLv3 cipher=OTHER);\n        Thu, 14 Feb 2008 08:23:21 -0800 (PST)\r\nCc: rest-discuss@yahoogroups.com\r\nMessage-Id: &lt;D3DA0BF8-BF1A-4223-A716-0B6C1897A1E9@...&gt;\r\nTo: Griffin Caprio &lt;griffin.caprio@...&gt;\r\nIn-Reply-To: &lt;ECCCC676-5645-4CF6-9985-51CEBE7AC1F1@...&gt;\r\nContent-Type: multipart/alternative; boundary=Apple-Mail-1--786770698\r\nMime-Version: 1.0 (Apple Message framework v919.2)\r\nDate: Thu, 14 Feb 2008 08:23:32 -0800\r\nReferences: &lt;foodea+qbof@...&gt; &lt;4FE4DC1B-3EB9-4D6A-874B-941330F44900@...&gt; &lt;ECCCC676-5645-4CF6-9985-51CEBE7AC1F1@...&gt;\r\nX-Mailer: Apple Mail (2.919.2)\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Subbu Allamaraju &lt;subbu.allamaraju@...&gt;\r\nSubject: Re: [rest-discuss] Returning a Response Body for 400 errors\r\nX-Yahoo-Group-Post: member; u=205190690; y=2KMwgo6DVmzjtu2n-_Nm8ZXkb5PcPtor0JRJRq1jmFaoiOE\r\nX-Yahoo-Profile: sallamar\r\n\r\n\r\n--Apple-Mail-1--786770698\r\nContent-Type: text/plain;\n\tcharset=US-ASCII;\n\tformat=flowed;\n\tdelsp=yes\r\nContent-Transfer-Encoding: 7bit\r\n\r\nThis looks like a bug in the HttpURLConnection. Per RFC 2616, &quot;the  \nserver SHOULD include an entity containing an explanation of the error  \nsituation&quot; for all 4xx errors. Accordingly, it is not necessarily the  \nbest choice for a client side API such as HttpURLConnection to consume  \nthe body and translate those errors into generic exceptions.\n\nSubbu\n\nOn Feb 14, 2008, at 7:15 AM, Griffin Caprio wrote:\n\n&gt; Hi all,\n&gt;\n&gt; What&#39;s the best way to return specific errors to a client if they  \n&gt; make a malformed request?  My company has a REST web service that  \n&gt; accepts POSTed data to it.  We wanted to return a 400 response code  \n&gt; in cases where the data being sent is invalid for some reason  \n&gt; ( invalid XML, invalid business rules, etc.. ) .  We also wanted to  \n&gt; return specific validation messages as part of the response body.\n&gt;\n&gt; However, we&#39;re running into problems with some java clients because  \n&gt; apparently the HttpUrlConnection class in the JDK swallows the  \n&gt; response bodies when a 400 or higher return code is sent back:\n&gt;\n&gt; From HttpUrlConnection ( around line 970 )\n&gt;\n&gt; if (respCode &gt;= 400) {\n&gt;    if (respCode == 404 || respCode == 410) {\n&gt;        throw new FileNotFoundException(url.toString());\n&gt;    } else {\n&gt;       throw new java.io.IOException(\n&gt;                          &quot;Server returned HTTP&quot;\n&gt;                          + &quot; response code: &quot; + respCode\n&gt;                          + &quot; for URL: &quot; + url.toString());\n&gt;    }\n&gt; }\n&gt;\n&gt;\n&gt; So my question: Is what we&#39;re trying to do not really correct?  I&#39;ve  \n&gt; looked in the HTTP spec and it says that an Entity Body may be  \n&gt; returned with a 400 error, so maybe it&#39;s just a bug in the Java  \n&gt; implementation?\n&gt;\n&gt; Any input would be appreciated.\n&gt;\n&gt; Thanks,\n&gt; Griffin\n&gt; \n\nSubbu\n\nhttp://subbu.org\n\n\r\n--Apple-Mail-1--786770698\r\nContent-Type: text/html;\n\tcharset=US-ASCII\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;html&gt;&lt;body style=3D&quot;word-wrap: break-word; -webkit-nbsp-mode: space; -webk=\r\nit-line-break: after-white-space; &quot;&gt;This looks like a bug in the HttpURLCon=\r\nnection. Per RFC 2616, &quot;the server SHOULD include an entity containing an e=\r\nxplanation of the&nbsp;error situation&quot; for all 4xx errors. Accordingly, it=\r\n is not necessarily the best choice for a client side API such as&nbsp;Http=\r\nURLConnection to consume the body and translate those errors into generic e=\r\nxceptions.&lt;div&gt;&lt;br class=3D&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;Subbu&lt;br&gt;&lt;=\r\ndiv&gt;&lt;br class=3D&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;On Feb 14, 2008,=\r\n at 7:15 AM, Griffin Caprio wrote:&lt;/div&gt;&lt;br class=3D&quot;Apple-interchange-newl=\r\nine&quot;&gt;&lt;blockquote type=3D&quot;cite&quot;&gt;&lt;div style=3D&quot;word-wrap: break-word; -webkit=\r\n-nbsp-mode: space; -webkit-line-break: after-white-space; &quot;&gt; Hi all,&lt;div&gt;&lt;b=\r\nr class=3D&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;What&#39;s the best way to retu=\r\nrn specific errors to a client if they make a malformed request? &nbsp;My c=\r\nompany has a REST web service that accepts POSTed data to it. &nbsp;We want=\r\ned to return a 400 response code in cases where the data being sent is inva=\r\nlid for some reason ( invalid XML, invalid business rules, etc.. ) . &nbsp;=\r\nWe also wanted to return specific validation messages as part of the respon=\r\nse body. &nbsp;&lt;/div&gt;&lt;div&gt;&lt;br class=3D&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div=\r\n&gt;However, we&#39;re running into problems with some java clients because appare=\r\nntly the HttpUrlConnection class in the JDK swallows the response bodies wh=\r\nen a 400 or higher return code is sent back:&lt;/div&gt;&lt;div&gt;&lt;br class=3D&quot;webkit-=\r\nblock-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;From HttpUrlConnection ( around line 970 )&lt;/d=\r\niv&gt;&lt;div&gt;&lt;br class=3D&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;&lt;span class=3D&quot;Ap=\r\nple-style-span&quot; style=3D&quot;color: rgb(0, 0, 255); font-family: Arial; &quot;&gt;&lt;stro=\r\nng&gt;&lt;font color=3D&quot;#7f0055&quot;&gt;if&lt;/font&gt;&lt;/strong&gt;&lt;font color=3D&quot;#000000&quot;&gt;&nbsp;=\r\n(respCode &gt;=3D&nbsp;&lt;/font&gt;&lt;font color=3D&quot;#990000&quot;&gt;&lt;b&gt;400&lt;/b&gt;&lt;/font&gt;&lt;fon=\r\nt color=3D&quot;#000000&quot;&gt;) {&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;span class=3D&quot;Apple-style-span&quot;=\r\n style=3D&quot;color: rgb(0, 0, 255); font-family: Arial; &quot;&gt;&lt;font color=3D&quot;#7f00=\r\n55&quot;&gt;&lt;b&gt;&nbsp;&nbsp; if&lt;/b&gt;&lt;/font&gt;&lt;font color=3D&quot;#000000&quot;&gt;&nbsp;(respCode =\r\n=3D=3D&nbsp;&lt;/font&gt;&lt;font color=3D&quot;#990000&quot;&gt;&lt;b&gt;404&lt;/b&gt;&lt;/font&gt;&lt;font color=3D&quot;=\r\n#000000&quot;&gt;&nbsp;|| respCode =3D=3D&nbsp;&lt;/font&gt;&lt;font color=3D&quot;#990000&quot;&gt;&lt;b&gt;41=\r\n0&lt;/b&gt;&lt;/font&gt;&lt;font color=3D&quot;#000000&quot;&gt;) {&lt;br&gt;&lt;/font&gt;&lt;font color=3D&quot;#000000&quot;&gt;&=\r\nnbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw&nbsp;&lt;/font&gt;&lt;font color=3D&quot;#7f005=\r\n5&quot;&gt;&lt;b&gt;new&lt;/b&gt;&lt;/font&gt;&lt;font color=3D&quot;#000000&quot;&gt;&nbsp;&lt;/font&gt;&lt;a href=3D&quot;http://=\r\nwww.java2s.com/Open-Source/Java-Document/JDK-Core/io-nio/java/io/FileNotFou=\r\nndException.java.htm&quot;&gt;&lt;b&gt;&lt;font color=3D&quot;#003399&quot;&gt;FileNotFoundException&lt;/fon=\r\nt&gt;&lt;/b&gt;&lt;/a&gt;&lt;font color=3D&quot;#000000&quot;&gt;(url.toString());&lt;br&gt;&lt;/font&gt;&lt;font color=\r\n=3D&quot;#000000&quot;&gt;&nbsp;&nbsp; }&nbsp;&lt;/font&gt;&lt;font color=3D&quot;#7f0055&quot;&gt;&lt;b&gt;else&lt;/b&gt;=\r\n&lt;/font&gt;&lt;font color=3D&quot;#000000&quot;&gt;&nbsp;{&lt;br&gt;&lt;/font&gt;&lt;font color=3D&quot;#000000&quot;&gt;&n=\r\nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw&nbsp;&lt;/font&gt;&lt;font color=3D&quot;#7f0055&quot;&gt;&lt;b&gt;n=\r\new&lt;/b&gt;&lt;/font&gt;&lt;font color=3D&quot;#000000&quot;&gt;&nbsp;&lt;/font&gt;&lt;a href=3D&quot;http://www.jav=\r\na2s.com/Open-Source/Java-Document/JDK-Core/io-nio/java/io/IOException.java.=\r\nhtm&quot;&gt;&lt;b&gt;&lt;font color=3D&quot;#003399&quot;&gt;java.io.IOException&lt;/font&gt;&lt;/b&gt;&lt;/a&gt;&lt;font col=\r\nor=3D&quot;#000000&quot;&gt;(&lt;br&gt;&lt;/font&gt;&lt;font color=3D&quot;#000000&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;=\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=\r\nsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/font&gt;&lt;font color=3D&quot;#2=\r\na00ff&quot;&gt;&quot;Server returned HTTP&quot;&lt;/font&gt;&lt;br&gt;&lt;font color=3D&quot;#000000&quot;&gt;&nbsp;&nbsp=\r\n;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=\r\nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +&nbsp;&lt;/font&gt;&lt;f=\r\nont color=3D&quot;#2a00ff&quot;&gt;&quot; response code: &quot;&lt;/font&gt;&lt;font color=3D&quot;#000000&quot;&gt;&nbs=\r\np;+ respCode&lt;br&gt;&lt;/font&gt;&lt;font color=3D&quot;#000000&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=\r\np;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=\r\nnbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +&nbsp;&lt;/font&gt;&lt;font color=3D&quot;#2a0=\r\n0ff&quot;&gt;&quot; for URL: &quot;&lt;/font&gt;&lt;font color=3D&quot;#000000&quot;&gt;&nbsp;+ url.toString());&lt;br=\r\n&gt;&lt;/font&gt;&lt;font color=3D&quot;#000000&quot;&gt;&nbsp;&nbsp; }&lt;br&gt;&lt;/font&gt;&lt;font color=3D&quot;#00=\r\n0000&quot;&gt;}&lt;/font&gt;&lt;/span&gt;&lt;div&gt;&lt;font class=3D&quot;Apple-style-span&quot; face=3D&quot;Arial&quot;&gt;&lt;=\r\nbr class=3D&quot;webkit-block-placeholder&quot;&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font class=3D&quot;Appl=\r\ne-style-span&quot; face=3D&quot;Arial&quot;&gt;&lt;br class=3D&quot;webkit-block-placeholder&quot;&gt;&lt;/font&gt;=\r\n&lt;/div&gt;&lt;div&gt;&lt;font class=3D&quot;Apple-style-span&quot; face=3D&quot;Arial&quot;&gt;So my question: =\r\nIs what we&#39;re trying to do not really correct? &nbsp;I&#39;ve looked in the HTT=\r\nP spec and it says that an Entity Body may be returned with a 400 error, so=\r\n maybe it&#39;s just a bug in the Java implementation?&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font c=\r\nlass=3D&quot;Apple-style-span&quot; face=3D&quot;Arial&quot;&gt;&lt;br class=3D&quot;webkit-block-placehol=\r\nder&quot;&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font class=3D&quot;Apple-style-span&quot; face=3D&quot;Arial&quot;&gt;Any =\r\ninput would be appreciated.&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font class=3D&quot;Apple-style-spa=\r\nn&quot; face=3D&quot;Arial&quot;&gt;&lt;br class=3D&quot;webkit-block-placeholder&quot;&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;=\r\n&lt;font class=3D&quot;Apple-style-span&quot; face=3D&quot;Arial&quot;&gt;Thanks,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;f=\r\nont class=3D&quot;Apple-style-span&quot; face=3D&quot;Arial&quot;&gt;Griffin&lt;/font&gt;&lt;/div&gt; &lt;span wi=\r\ndth=3D&quot;1&quot; style=3D&quot;color: white;&quot;&gt;&lt;/span&gt; &lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;div=\r\n apple-content-edited=3D&quot;true&quot;&gt; &lt;span class=3D&quot;Apple-style-span&quot; style=3D&quot;b=\r\norder-collapse: separate; color: rgb(0, 0, 0); font-family: Helvetica; font=\r\n-size: 12px; font-style: normal; font-variant: normal; font-weight: normal;=\r\n letter-spacing: normal; line-height: normal; orphans: 2; text-align: auto;=\r\n text-indent: 0px; text-transform: none; white-space: normal; widows: 2; wo=\r\nrd-spacing: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-ver=\r\ntical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-=\r\nsize-adjust: auto; -webkit-text-stroke-width: 0; &quot;&gt;&lt;div style=3D&quot;word-wrap:=\r\n break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-spac=\r\ne; &quot;&gt;&lt;span class=3D&quot;Apple-style-span&quot; style=3D&quot;border-collapse: separate; c=\r\nolor: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: no=\r\nrmal; font-variant: normal; font-weight: normal; letter-spacing: normal; li=\r\nne-height: normal; orphans: 2; text-indent: 0px; text-transform: none; whit=\r\ne-space: normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-sp=\r\nacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-=\r\nin-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width:=\r\n 0px; &quot;&gt;&lt;div style=3D&quot;word-wrap: break-word; -webkit-nbsp-mode: space; -web=\r\nkit-line-break: after-white-space; &quot;&gt;&lt;div&gt;&lt;div style=3D&quot;word-wrap: break-wo=\r\nrd; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; &quot;&gt;&lt;div=\r\n style=3D&quot;word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-bre=\r\nak: after-white-space; &quot;&gt;&lt;div style=3D&quot;word-wrap: break-word; -webkit-nbsp-=\r\nmode: space; -webkit-line-break: after-white-space; &quot;&gt;&lt;div&gt;Subbu&lt;/div&gt;&lt;div&gt;=\r\n&lt;br class=3D&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;&lt;a href=3D&quot;http://subbu.o=\r\nrg&quot;&gt;http://subbu.org&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/=\r\nspan&gt; &lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;\r\n--Apple-Mail-1--786770698--\r\n\n"}}