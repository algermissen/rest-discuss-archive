{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":513331638,"authorName":"Juan Lanus","from":"Juan Lanus &lt;juan.lanus@...&gt;","profile":"juanmlanus","replyTo":"SENDER","senderId":"Lq095HnvVw-0QBytJZWK-79tg61d0Z7rY415HKOMoE0qXyqwSXy8r6F3wc6g8I_7euZBI_b-NDU9CqCfs4C6882gTvkGfYBn","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [rest-discuss] REST &quot;create if not exists&quot;","postDate":"1338818653","msgId":18857,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PENBTXFUMjk0WVVLb0M3QkZaUE9Nek5URFpBS3hlTUNkLTgrcVBXc3JORVFkME5jSHpMQUBtYWlsLmdtYWlsLmNvbT4=","inReplyToHeader":"PENBQ1FvbmgrTz1aRzFVZkhTb0NqckdqOGg4QUR1Rm9PMG05Y0NQYXZKeWhXMUhBYkcxUUBtYWlsLmdtYWlsLmNvbT4=","referencesHeader":"PGpxZHFwbStnMDU4QGVHcm91cHMuY29tPiA8RTFEMjY5NTYtQTQ4MS00MUYyLUI4OTEtMTE3NTYzQ0I0REY3QGFjbS5vcmc+IDxDQUNRb25oK089WkcxVWZIU29DanJHajhoOEFEdUZvTzBtOWNDUGF2SnloVzFIQWJHMVFAbWFpbC5nbWFpbC5jb20+"},"prevInTopic":18856,"nextInTopic":18858,"prevInTime":18856,"nextInTime":18858,"topicId":18849,"numMessagesInTopic":7,"msgSnippet":"Hi  Fran√ßois, I m addressing the *duplicate filters* issue from tha standpoint of user interaction, which is what I do. Not having that much information about","rawEmail":"Return-Path: &lt;juan.lanus@...&gt;\r\nX-Sender: juan.lanus@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 81025 invoked from network); 4 Jun 2012 14:04:58 -0000\r\nX-Received: from unknown (98.137.34.46)\n  by m9.grp.sp2.yahoo.com with QMQP; 4 Jun 2012 14:04:58 -0000\r\nX-Received: from unknown (HELO mail-lb0-f172.google.com) (209.85.217.172)\n  by mta3.grp.sp2.yahoo.com with SMTP; 4 Jun 2012 14:04:57 -0000\r\nX-Received: by lbbgo11 with SMTP id go11so3268511lbb.3\n        for &lt;rest-discuss@yahoogroups.com&gt;; Mon, 04 Jun 2012 07:04:53 -0700 (PDT)\r\nX-Received: by 10.152.145.41 with SMTP id sr9mr12767557lab.25.1338818693667;\n Mon, 04 Jun 2012 07:04:53 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.112.26.67 with HTTP; Mon, 4 Jun 2012 07:04:13 -0700 (PDT)\r\nIn-Reply-To: &lt;CACQonh+O=ZG1UfHSoCjrGj8h8ADuFoO0m9cCPavJyhW1HAbG1Q@...&gt;\r\nReferences: &lt;jqdqpm+g058@...&gt; &lt;E1D26956-A481-41F2-B891-117563CB4DF7@...&gt;\n &lt;CACQonh+O=ZG1UfHSoCjrGj8h8ADuFoO0m9cCPavJyhW1HAbG1Q@...&gt;\r\nDate: Mon, 4 Jun 2012 11:04:13 -0300\r\nMessage-ID: &lt;CAMqT294YUKoC7BFZPOMzNTDZAKxeMCd-8+qPWsrNEQd0NcHzLA@...&gt;\r\nTo: =?ISO-8859-1?Q?Fran=E7ois_Verry?= &lt;f.verry@...&gt;\r\nCc: rest-discuss@yahoogroups.com\r\nContent-Type: multipart/alternative; boundary=bcaec5396502a79b7104c1a60473\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Juan Lanus &lt;juan.lanus@...&gt;\r\nSubject: Re: [rest-discuss] REST &quot;create if not exists&quot;\r\nX-Yahoo-Group-Post: member; u=513331638; y=u4s_s8hQEEMUljIIWZLz-MUtwp32-yg50jTHjHsaiKyltECANg\r\nX-Yahoo-Profile: juanmlanus\r\n\r\n\r\n--bcaec5396502a79b7104c1a60473\r\nContent-Type: text/plain; charset=windows-1252\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nHi  Fran=E7ois,\n\nI&#39;m addressing the *duplicate filters* issue from tha stan=\r\ndpoint of user\ninteraction, which is what I do.\nNot having that much inform=\r\nation about your system, I=B4m free to guess so I\nthink the application and=\r\n the users are regular.\n\nThe filters thing might is used by some teams to e=\r\nndorse some of their\nresponsabilities on the users. Especially, teams domin=\r\nated by IT engineers\n(like me).\nWe think *&quot;this will allow them to do any q=\r\nuery&quot;* with emphasis in the word\n&quot;any&quot;.\nActually, non-IT people frequently =\r\ncan&#39;t do any query. What is simple to\nus, like writing a boolean expression=\r\n, requires a mindset that made us IT\nguys. Non-IT people lack that mindset =\r\n(have diverse mindsets) and thus they\ncan&#39;t translate a natural language re=\r\nquirement into an algebraic statement.\nThe typical example is a query for a=\r\nll people in Texas AND New York, doomed\nto return zero items (we say TX and=\r\n NY en English, but TX or NY in\nboolean). That said, back to subject.\n\nWhat=\r\n I&#39;m willing to communicate is that queries and filters have to be\nwritten =\r\nby IT people, on behalf of user&#39;s needs. This requires a previous\nwork to d=\r\netect what the users really need, in order to provide them a\nsolution engin=\r\neered by a pro. It might have to be a permanent task, albeit\nonce the users=\r\n have what they want this tends to be quite stable.\n\nUsers can identify que=\r\nries and filters by natural language descriptive\nnames, like &quot;Monday mornin=\r\ng events&quot; or &quot;Cash movements greater than $3333&quot;.\nNot &quot;123456&quot;.\nLet them se=\r\ne a list of query/filter names where thay can choose, and\nprovide a &quot;new&quot; a=\r\nction so the boolean-savvy users can do their magic. Be\nprepared to see few=\r\n of these.\n\nUsers don&#39;t usually speak SQL or Boolean Algebra. They also don=\r\n&#39;t speak\nREST.\nThey don&#39;t want to, and they shouldn&#39;t need to, having IT pr=\r\nos around.\n\nAs a twist, I&#39;d like to suggest (if your application is such th=\r\nat you\nexpect the users to do filters by the meny thousands) the implementa=\r\ntion of\na normalization algorithm th reduce queries to a *signature *such a=\r\ns that\nof OO methods in order to be able to recognize duplicates automatica=\r\nlly and\nmerge them in statistics without any user involvement.\n--\nJuan Lanu=\r\ns\n\n\n\n\n\n\n\nOn Mon, Jun 4, 2012 at 12:58 AM, Fran=E7ois Verry &lt;f.verry@gmail.c=\r\nom&gt; wrote:\n\n&gt; **\n&gt;\n&gt;\n&gt; Thanks all for your answers.\n&gt;\n&gt; I have added the &quot;c=\r\nookbook&quot; to my list just after posting this message,\n&gt; and I&#39;ll be buying i=\r\nt this week.\n&gt;\n&gt; As for the multiple advices here, I&#39;ll take them all. I&#39;m =\r\nnot sure exactly\n&gt; what solution I&#39;ll finally get along with, but my questi=\r\non was more about\n&gt; understanding what makes the options valid or not. I&#39;m =\r\nglad you provided\n&gt; many distincts answers, and maybe, depending on the cas=\r\nes (as it seemed\n&gt; quite a common problem to me) I&#39;ll be using either one s=\r\nolution or the\n&gt; other.\n&gt;\n&gt; To answer the duplication issue, it occured to =\r\nme that it may not be\n&gt; necessary. To be precise, the current system handle=\r\ns &quot;grocery lists&quot;\n&gt; duplicates :) But there are a lot of recordings, and I&#39;=\r\nm wondering if\n&gt; duplication doesn&#39;t prevents us from having statistics. If=\r\n I treat the\n&gt; resource as &quot;descriptive data&quot;, then I can duplicate them. B=\r\nut identifying\n&gt; each resource as unique would help knowing, for example, w=\r\nhich filters are\n&gt; the most common.\n&gt;\n&gt; There is also another motivation : =\r\nwe have process running over those\n&gt; filters, that create notifications whe=\r\nn a new result matches the filters.\n&gt; Reducing the number of filters will r=\r\neduce the amount of time to process\n&gt; notifications as well.\n&gt;\n&gt; Then, than=\r\nks to you all, it is more clear in my head now :)\n&gt;\n&gt; Fran=E7ois\n&gt;\n&gt; 2012/6=\r\n/3 Philippe Mougin &lt;pmougin@...&gt;\n&gt;\n&gt;&gt; Hi Fran=E7ois,\n&gt;&gt;\n&gt;&gt; I would go f=\r\nor #5 if possible. If you don&#39;t need to store and/or\n&gt;&gt; manipulate filters =\r\nas independent resources, you&#39;ll benefit getting them\n&gt;&gt; out of your resour=\r\nce space, as this will vastly simplify your system.\n&gt;&gt;\n&gt;&gt; Now, instead of G=\r\nET  /filters/{filter-id}/results you would do GET\n&gt;&gt; /results?c1=3Dfoo&c2=\r\n=3Dbar&c3=3Dbaz. If your filters needs to be more complex\n&gt;&gt; than a simple =\r\nset of key/values, you can create a little syntax to express\n&gt;&gt; them; e.g. =\r\n: GET /results?filter=3Dc1%3Dfoo%20ANDc2%3Dbar%20OR%20c3%3Dbaz.\n&gt;&gt;\n&gt;&gt; If yo=\r\nu can&#39;t do that (maybe your filters are too long to fit in a URL\n&gt;&gt; (but th=\r\nis probably isn&#39;t the case)), and if for some reason you absolutely\n&gt;&gt; need=\r\n to not have multiple URLs for identical filters, you should go for\n&gt;&gt; your=\r\n solution #2. The problem you see about it isn&#39;t a real one. This isn&#39;t\n&gt;&gt; =\r\na fraud, as the meaning of POST isn&#39;t necessarily to append something, but\n=\r\n&gt;&gt; can be as generic as &quot;Providing a block of data to a data-handling proce=\r\nss&quot;.\n&gt;&gt;\n&gt;&gt; Best,\n&gt;&gt;\n&gt;&gt; Philippe Mougin\n&gt;&gt;\n&gt;&gt; Le 2 juin 2012 =E0 21:50, fran=\r\ncoisverry a =E9crit :\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; Hello\n&gt;&gt;\n&gt;&gt; I&#39;m new to REST, and I&#39;m tryi=\r\nng to integrate it in my company. We\n&gt;&gt; currently are trying to design a mu=\r\nlti-criteria search engine with REST\n&gt;&gt; principles. I use as a reference th=\r\ne O&#39;Reilly &quot;RESTful Web Services&quot;.\n&gt;&gt;\n&gt;&gt; I don&#39;t know if the following prob=\r\nlem has been discussed somewhere, but\n&gt;&gt; I&#39;ve been unable to find anything =\r\nthat matches it. If you happen to know\n&gt;&gt; resources that could help me, ple=\r\nase let me know.\n&gt;&gt;\n&gt;&gt; In a multi-critera search engine, we have two types =\r\nof resources :\n&gt;&gt; &quot;Results&quot; and &quot;Filters&quot;. Results are items searched for, =\r\nand Filters are\n&gt;&gt; sets of criteria which allows us to isolate a subset of =\r\nResults.\n&gt;&gt;\n&gt;&gt; For example :\n&gt;&gt;\n&gt;&gt;     GET /results returns the total numbe=\r\nr of results\n&gt;&gt;     GET /results/{result-id} returns one specific result\n&gt;&gt;=\r\n     GET /filters returns a specification on criteria usage (eg. an empty\n&gt;=\r\n&gt; &lt;form&gt;)\n&gt;&gt;     GET /filters/{filter-id} returns one specific filter (eg. =\r\na filled\n&gt;&gt; &lt;form&gt;)\n&gt;&gt;     GET /filters/{filter-id}/results returns the tot=\r\nal number of results\n&gt;&gt; matching the filter, and links to the corresponding=\r\n /results/{result-id}\n&gt;&gt;\n&gt;&gt; We want to allow the registration of filters. I=\r\nmagine a filter as the\n&gt;&gt; composition of 3 criteria, c1, c2 and c3. My firs=\r\nt thought was to register\n&gt;&gt; a filter through a POST request.\n&gt;&gt;\n&gt;&gt;     Req=\r\nuest :\n&gt;&gt;\n&gt;&gt;     POST /filters HTTP/1.1\n&gt;&gt;\n&gt;&gt;     c1=3Dfoo&c2=3Dbar&c3=3Dba=\r\nz\n&gt;&gt;\n&gt;&gt;     Response :\n&gt;&gt;\n&gt;&gt;     HTTP/1.1 201 Created\n&gt;&gt;     Location: /fil=\r\nters/123456\n&gt;&gt;\n&gt;&gt; But if I (or someone else) do it again, I&#39;ll end up with =\r\nanother\n&gt;&gt; {filter-id}, e.g. 123457. Then we&#39;ll have two resources with the=\r\n exact same\n&gt;&gt; meaning and content.\n&gt;&gt;\n&gt;&gt; If I want to use one URI for one =\r\ncriteria set, PUT seems more\n&gt;&gt; appropriate. The thing is, the {filter-id} =\r\nis assigned &quot;randomly&quot; by the\n&gt;&gt; server. As a client, I can&#39;t guess nor for=\r\nce it. From there, I see the\n&gt;&gt; following solutions, neither I find satisfy=\r\ning :\n&gt;&gt;\n&gt;&gt; 1/ I try to map artificially my URIs to the criteria set. I cou=\r\nld use a\n&gt;&gt; hash of the representation. e.g. :\n&gt;&gt;\n&gt;&gt;     Request :\n&gt;&gt;\n&gt;&gt;   =\r\n  PUT /filters/53c11504ba50e14b60407b13a72c0e53 HTTP/1.1\n&gt;&gt;\n&gt;&gt;     c1=3Dfoo=\r\n&c2=3Dbar&c3=3Dbaz\n&gt;&gt;\n&gt;&gt;     Response :\n&gt;&gt;\n&gt;&gt;     HTTP/1.1 200 OK\n&gt;&gt;\n&gt;&gt;    =\r\n &lt;form method=3D&quot;PUT&quot; action=3D&quot;/filters/53c11504ba50e14b60407b13a72c0e53&quot;&gt;=\r\n\n&gt;&gt;         &lt;input name=3D&quot;c1&quot; value=3D&quot;foo&quot; /&gt;\n&gt;&gt;         &lt;input name=3D&quot;c=\r\n2&quot; value=3D&quot;bar&quot; /&gt;\n&gt;&gt;         &lt;input name=3D&quot;c3&quot; value=3D&quot;baz&quot; /&gt;\n&gt;&gt;      =\r\n   &lt;input type=3D&quot;submit&quot; /&gt;\n&gt;&gt;     &lt;/form&gt;\n&gt;&gt;\n&gt;&gt; The problem is : it is ar=\r\ntificial. If my criteria set changes, or if its\n&gt;&gt; representation changes, =\r\nI could end up with conflicts or doubles.\n&gt;&gt;\n&gt;&gt; 2/ I trick the client into =\r\nbelieving it actually created something new,\n&gt;&gt; whether or not it has. This=\r\n means, even if /filters/123456 already exists,\n&gt;&gt; my server will answer it=\r\n to anyone POSTing the &quot;c1=3Dfoo&c2=3Dbar&c3=3Dbaz&quot;\n&gt;&gt; content.\n&gt;&gt;\n&gt;&gt; The p=\r\nroblem is : it&#39;s a fraud. Only the initial POST really &quot;appends&quot;\n&gt;&gt; somethi=\r\nng.\n&gt;&gt;\n&gt;&gt; 3/ I answer the second-and-further POST requests with a &quot;409 Conf=\r\nlict&quot;\n&gt;&gt; answer, and the correct location.\n&gt;&gt;\n&gt;&gt; The problem is : it is not=\r\n actually an error. The client doesn&#39;t care to\n&gt;&gt; register something, it ju=\r\nst has no way to know wheter or not the resource\n&gt;&gt; he is looking for alrea=\r\ndy exists.\n&gt;&gt;\n&gt;&gt; 4/ I do a preliminary check\n&gt;&gt;\n&gt;&gt;     Request :\n&gt;&gt;\n&gt;&gt;     =\r\nGET /filters?c1=3Dfoo&c2=3Dbar&c3=3Dbaz HTTP/1.1\n&gt;&gt;\n&gt;&gt;     Response :\n&gt;&gt;\n&gt;&gt;=\r\n     HTTP/1.1 301 Moved Permanently\n&gt;&gt;     Location: /filters/123456\n&gt;&gt;\n&gt;&gt; =\r\nThe problem is : If the resource doesn&#39;t exists at that time, I&#39;ll be\n&gt;&gt; wi=\r\nlling to create it. If I do, nothing ensures me that someone hasn&#39;t\n&gt;&gt; crea=\r\nted it inbetween. Then, if I want to put aside a location for my\n&gt;&gt; resourc=\r\ne, it implies my GET isn&#39;t safe anymore.\n&gt;&gt;\n&gt;&gt; 5/ The last option I see is =\r\nthat the URI should contains the whole\n&gt;&gt; content of the resource, as it is=\r\n its &quot;natural&quot; identifier. This is\n&gt;&gt; especially difficult if I have a larg=\r\ne set of criteria, and if their values\n&gt;&gt; are complex. This is why we use i=\r\nds in the first place.\n&gt;&gt;\n&gt;&gt; Thanks in advance for your help\n&gt;&gt;\n&gt;&gt; Fran=E7o=\r\nis\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;  \n&gt;\n\r\n--bcaec5396502a79b7104c1a60473\r\nContent-Type: text/html; charset=windows-1252\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;font face=3D&quot;verdana, sans-serif&quot;&gt;Hi=A0\n&lt;span&gt;Fran=E7ois,&lt;/span&gt;&lt;/font&gt;&lt;di=\r\nv&gt;&lt;font color=3D&quot;#222222&quot; face=3D&quot;verdana, sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;div&gt;&lt;fon=\r\nt color=3D&quot;#222222&quot; face=3D&quot;verdana, sans-serif&quot;&gt;I&#39;m addressing the &lt;i&gt;=\r\nduplicate filters&lt;/i&gt;=A0issue from tha standpoint of user interaction, whic=\r\nh is what I do.=A0&lt;/font&gt;&lt;/div&gt;\n\n\n&lt;div&gt;&lt;font color=3D&quot;#222222&quot; face=3D&quot;verd=\r\nana, sans-serif&quot;&gt;Not having that much information about your system, I=B4m =\r\nfree to guess so I think the application and the users are regular.=A0&lt;/fon=\r\nt&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=3D&quot;#222222&quot; face=3D&quot;verdana, sans-serif&quot;&gt;&lt;br&gt;\n\n\n&lt;/=\r\nfont&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=3D&quot;#222222&quot; face=3D&quot;verdana, sans-serif&quot;&gt;The fi=\r\nlters thing might is used by some teams to endorse some of their responsabi=\r\nlities on the users. Especially, teams dominated by IT engineers (like me).=\r\n=A0&lt;/font&gt;&lt;/div&gt;\n\n\n&lt;div&gt;&lt;font color=3D&quot;#222222&quot; face=3D&quot;verdana, sans-serif=\r\n&quot;&gt;We think &lt;i&gt;&quot;this will allow them to do &lt;b&gt;any&lt;/b&gt;=A0query&quot;&lt;/i&gt;=\r\n=A0with emphasis in the word &quot;any&quot;.=A0&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font col=\r\nor=3D&quot;#222222&quot; face=3D&quot;verdana, sans-serif&quot;&gt;Actually, non-IT people frequen=\r\ntly can&#39;t do any query. What is simple to us, like writing a boolean ex=\r\npression, requires a mindset that made us IT guys. Non-IT people lack that =\r\nmindset (have diverse mindsets) and thus they can&#39;t translate a natural=\r\n language requirement into an algebraic statement. The typical example is a=\r\n query for all people in Texas AND New York, doomed to return zero items (w=\r\ne say TX and NY en English, but TX or NY in boolean).=A0&lt;/font&gt;&lt;span style=\r\n=3D&quot;color:rgb(34,34,34);font-family:verdana,sans-serif&quot;&gt;That said, back to =\r\nsubject.=A0&lt;/span&gt;&lt;/div&gt;\n\n\n&lt;div&gt;&lt;font color=3D&quot;#222222&quot; face=3D&quot;verdana, sa=\r\nns-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=3D&quot;#222222&quot; face=3D&quot;verdana, sa=\r\nns-serif&quot;&gt;What I&#39;m willing to communicate is that queries and filters h=\r\nave to be written by IT people, on behalf of user&#39;s needs. This require=\r\ns a previous work to detect what the users really need, in order to provide=\r\n them a solution engineered by a pro. It might have to be a permanent task,=\r\n albeit once the users have what they want this tends to be quite stable.=\r\n=A0&lt;/font&gt;&lt;/div&gt;\n\n\n&lt;div&gt;&lt;font color=3D&quot;#222222&quot; face=3D&quot;verdana, sans-serif=\r\n&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=3D&quot;#222222&quot; face=3D&quot;verdana, sans-serif=\r\n&quot;&gt;Users can identify queries and filters by natural language descriptive na=\r\nmes, like &quot;Monday morning events&quot; or &quot;Cash movements greater=\r\n than $3333&quot;. Not &quot;123456&quot;.=A0&lt;/font&gt;&lt;/div&gt;\n\n\n&lt;div&gt;&lt;font col=\r\nor=3D&quot;#222222&quot; face=3D&quot;verdana, sans-serif&quot;&gt;Let them see a list of query/fi=\r\nlter names where thay can choose, and provide a &quot;new&quot; action so t=\r\nhe boolean-savvy users can do their magic. Be prepared to see few of these.=\r\n=A0&lt;/font&gt;&lt;/div&gt;\n\n\n&lt;div&gt;&lt;font color=3D&quot;#222222&quot; face=3D&quot;verdana, sans-serif=\r\n&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=3D&quot;#222222&quot; face=3D&quot;verdana, sans-serif=\r\n&quot;&gt;Users don&#39;t usually speak SQL or Boolean Algebra. They also don&#39;t=\r\n speak REST.=A0&lt;/font&gt;&lt;/div&gt;\n\n\n&lt;div&gt;&lt;font color=3D&quot;#222222&quot; face=3D&quot;verdana=\r\n, sans-serif&quot;&gt;They don&#39;t want to, and they shouldn&#39;t need to, havin=\r\ng IT pros around.=A0&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=3D&quot;#222222&quot; face=3D&quot;verda=\r\nna, sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;\n\n\n&lt;font color=3D&quot;#222222&quot; face=3D&quot;ve=\r\nrdana, sans-serif&quot;&gt;As a twist, I&#39;d like to suggest (if your application=\r\n is such that you expect the users to do filters by the meny thousands) the=\r\n implementation of a normalization algorithm th reduce queries to a &lt;i&gt;sign=\r\nature=A0&lt;/i&gt;such as that of OO methods in order to be able to recognize dup=\r\nlicates automatically and merge them in statistics without any user involve=\r\nment.=A0&lt;/font&gt;&lt;/div&gt;\n\n\n&lt;div&gt;&lt;font color=3D&quot;#222222&quot; face=3D&quot;verdana, sans-=\r\nserif&quot;&gt;--&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=3D&quot;#222222&quot; face=3D&quot;verdana, sans-se=\r\nrif&quot;&gt;Juan Lanus&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=3D&quot;#222222&quot; face=3D&quot;verdana, s=\r\nans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;\n\n\n&lt;font color=3D&quot;#222222&quot; face=3D&quot;verdana=\r\n, sans-serif&quot;&gt;=A0&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=3D&quot;#222222&quot; face=3D&quot;verdana,=\r\n sans-serif&quot;&gt;=A0&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=3D&quot;#222222&quot; face=3D&quot;verdana, =\r\nsans-serif&quot;&gt;=A0&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=3D&quot;#222222&quot; face=3D&quot;verdana, s=\r\nans-serif&quot;&gt;=A0&lt;/font&gt;&lt;/div&gt;\n\n\n&lt;div&gt;&lt;font color=3D&quot;#222222&quot;&gt;&lt;font face=3D&quot;ve=\r\nrdana, sans-serif&quot;&gt;=A0&lt;/font&gt;&lt;br&gt;&lt;/font&gt;&lt;br&gt;&lt;div class=3D&quot;gmail_quote&quot;&gt;On M=\r\non, Jun 4, 2012 at 12:58 AM, Fran=E7ois Verry &lt;span dir=3D&quot;ltr&quot;&gt;&lt;&lt;a href=\r\n=3D&quot;mailto:f.verry@...&quot; target=3D&quot;_blank&quot;&gt;f.verry@...&lt;/a&gt;&gt;&lt;/=\r\nspan&gt; wrote:&lt;br&gt;\n\n\n&lt;blockquote class=3D&quot;gmail_quote&quot; style=3D&quot;margin:0 0 0 =\r\n.8ex;border-left:1px #ccc solid;padding-left:1ex&quot;&gt;\n\n\n&lt;u&gt;&lt;/u&gt;\n\n\n\n\n\n\n\n\n\n\n&lt;div=\r\n&gt;\n&lt;span&gt;=A0&lt;/span&gt;\n\n\n&lt;div&gt;\n  &lt;div&gt;\n\n\n    &lt;div&gt;\n      \n      \n      &lt;p&gt;Thank=\r\ns all for your answers.&lt;br&gt;&lt;br&gt;I have added the &quot;cookbook&quot; to my =\r\nlist just after posting this message, and I&#39;ll be buying it this week.&lt;=\r\nbr&gt;&lt;br&gt;As for the multiple advices here, I&#39;ll take them all. I&#39;m no=\r\nt sure exactly what solution I&#39;ll finally get along with, but my questi=\r\non was more about understanding what makes the options valid or not. I&#39;=\r\nm glad you provided many distincts answers, and maybe, depending on the cas=\r\nes (as it seemed quite a common problem to me) I&#39;ll be using either one=\r\n solution or the other.&lt;br&gt;\n\n\n\n&lt;br&gt;To answer the duplication issue, it occu=\r\nred to me that it may not be necessary. To be precise, the current system h=\r\nandles &quot;grocery lists&quot; duplicates :) But there are a lot of recor=\r\ndings, and I&#39;m wondering if duplication doesn&#39;t prevents us from ha=\r\nving statistics. If I treat the resource as &quot;descriptive data&quot;, t=\r\nhen I can duplicate them. But identifying each resource as unique would hel=\r\np knowing, for example, which filters are the most common.&lt;br&gt;\n\n\n\n&lt;br&gt;There=\r\n is also another motivation : we have process running over those filters, t=\r\nhat create notifications when a new result matches the filters. Reducing th=\r\ne number of filters will reduce the amount of time to process notifications=\r\n as well.&lt;br&gt;\n\n\n\n&lt;br&gt;Then, thanks to you all, it is more clear in my head n=\r\now :)&lt;br&gt;&lt;br&gt;Fran=E7ois &lt;br&gt;&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;div class=3D&quot;gmail_quote&quot;&gt;20=\r\n12/6/3 Philippe Mougin &lt;span dir=3D&quot;ltr&quot;&gt;&lt;&lt;a href=3D&quot;mailto:pmougin@acm.=\r\norg&quot; target=3D&quot;_blank&quot;&gt;pmougin@...&lt;/a&gt;&gt;&lt;/span&gt;&lt;br&gt;\n\n\n\n&lt;blockquote cl=\r\nass=3D&quot;gmail_quote&quot; style=3D&quot;border-left:1px #ccc solid&quot;&gt;&lt;div&gt;&lt;div&gt;Hi Fran=\r\n=E7ois,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I would go for #5 if possible. If you don&=\r\n#39;t need to store and/or manipulate filters as independent resources, you=\r\n&#39;ll benefit getting them out of your resource space, as this will vastl=\r\ny simplify your system.&lt;/div&gt;\n\n\n\n&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Now, instead of GET =\r\n=A0/filters/{filter-id}/results you would do GET /results?c1=3Dfoo&amp;c2=\r\n=3Dbar&amp;c3=3Dbaz. If your filters needs to be more complex than a simple=\r\n set of key/values, you can create a little syntax to express them; e.g. :=\r\n=A0GET /results?filter=3Dc1%3Dfoo%20ANDc2%3Dbar%20OR%20c3%3Dbaz.&lt;/div&gt;\n\n\n\n&lt;=\r\ndiv&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If you can&#39;t do that (maybe your filters are too lon=\r\ng to fit in a URL (but this probably isn&#39;t the case)), and if for some =\r\nreason you absolutely need to not have multiple URLs for identical filters,=\r\n you should go for your solution #2. The problem you see about it isn&#39;t=\r\n a real one. This isn&#39;t a fraud, as the meaning of POST isn&#39;t neces=\r\nsarily to append something, but can be as generic as &quot;Providing a bloc=\r\nk of data=A0to a data-handling process&quot;.&lt;/div&gt;\n\n\n\n&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;=\r\nBest,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Philippe Mougin&lt;/div&gt;&lt;div&gt;=A0&lt;/div&gt;&lt;div&gt;&lt;div=\r\n&gt;Le 2 juin 2012 =E0 21:50, francoisverry a =E9crit :&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;bl=\r\nockquote type=3D&quot;cite&quot;&gt;\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;div&gt;\n&lt;span&gt;=A0&lt;/span&gt;\n\n\n&lt;div&gt;\n  &lt;div&gt;=\r\n\n\n\n    &lt;div&gt;&lt;p&gt;Hello&lt;br&gt;&lt;br&gt;I&#39;m new to REST, and I&#39;m trying to inte=\r\ngrate it in my company. We currently are trying to design a multi-criteria =\r\nsearch engine with REST principles. I use as a reference the O&#39;Reilly &=\r\nquot;RESTful Web Services&quot;.&lt;br&gt;\n\n\n\n&lt;br&gt;I don&#39;t know if the followi=\r\nng problem has been discussed somewhere, but I&#39;ve been unable to find a=\r\nnything that matches it. If you happen to know resources that could help me=\r\n, please let me know.&lt;br&gt;&lt;br&gt;In a multi-critera search engine, we have two =\r\ntypes of resources : &quot;Results&quot; and &quot;Filters&quot;. Results a=\r\nre items searched for, and Filters are sets of criteria which allows us to =\r\nisolate a subset of Results.&lt;br&gt;\n\n\n\n&lt;br&gt;For example :&lt;br&gt;&lt;br&gt;=A0=A0=A0 &lt;fon=\r\nt style=3D&quot;background-color:rgb(0,255,255)&quot; face=3D&quot;courier new&quot;&gt;GET /resul=\r\nts&lt;/font&gt; returns the total number of results&lt;br&gt;=A0=A0=A0 &lt;span style=3D&quot;f=\r\nont-family:courier new;background-color:rgb(0,255,255)&quot;&gt;GET /results/{resul=\r\nt-id}&lt;/span&gt; returns one specific result&lt;br&gt;\n\n\n\n=A0=A0=A0 &lt;span style=3D&quot;ba=\r\nckground-color:rgb(0,255,255);font-family:courier new&quot;&gt;GET /filters&lt;/span&gt; =\r\nreturns a specification on criteria usage (eg. an empty &lt;form&gt;)&lt;br&gt;=\r\n=A0=A0=A0 &lt;span style=3D&quot;font-family:courier new;background-color:rgb(0,255=\r\n,255)&quot;&gt;GET /filters/{filter-id}&lt;/span&gt; returns one specific filter (eg. a f=\r\nilled &lt;form&gt;)&lt;br&gt;\n\n\n\n=A0=A0=A0 &lt;span style=3D&quot;font-family:courier new=\r\n;background-color:rgb(0,255,255)&quot;&gt;GET /filters/{filter-id}/results&lt;/span&gt; r=\r\neturns the total number of results matching the filter, and links to the co=\r\nrresponding /results/{result-id}&lt;br&gt;\n\n\n\n&lt;br&gt;We want to allow the registrati=\r\non of filters. Imagine a filter as the composition of 3 criteria, c1, c2 an=\r\nd c3. My first thought was to register a filter through a POST request.&lt;br&gt;=\r\n&lt;br&gt;=A0=A0=A0 Request :&lt;br&gt;&lt;br&gt;&lt;span style=3D&quot;font-family:courier new;backg=\r\nround-color:rgb(0,255,255)&quot;&gt;=A0=A0=A0 POST /filters HTTP/1.1&lt;/span&gt;&lt;br styl=\r\ne=3D&quot;font-family:courier new;background-color:rgb(0,255,255)&quot;&gt;\n\n\n\n&lt;br style=\r\n=3D&quot;font-family:courier new;background-color:rgb(0,255,255)&quot;&gt;&lt;span style=3D=\r\n&quot;font-family:courier new;background-color:rgb(0,255,255)&quot;&gt;=A0=A0=A0 c1=3Dfo=\r\no&amp;c2=3Dbar&amp;c3=3Dbaz&lt;/span&gt;&lt;br style=3D&quot;font-family:courier new;back=\r\nground-color:rgb(0,255,255)&quot;&gt;\n\n\n\n&lt;br&gt;=A0=A0=A0 Response :&lt;br&gt;&lt;br&gt;&lt;span styl=\r\ne=3D&quot;font-family:courier new;background-color:rgb(0,255,255)&quot;&gt;=A0=A0=A0 HTT=\r\nP/1.1 201 Created&lt;/span&gt;&lt;br style=3D&quot;font-family:courier new;background-col=\r\nor:rgb(0,255,255)&quot;&gt;&lt;span style=3D&quot;font-family:courier new;background-color:=\r\nrgb(0,255,255)&quot;&gt;=A0=A0=A0 Location: /filters/123456&lt;/span&gt;&lt;br style=3D&quot;font=\r\n-family:courier new;background-color:rgb(0,255,255)&quot;&gt;\n\n\n\n&lt;br&gt;But if I (or s=\r\nomeone else) do it again, I&#39;ll end up with another {filter-id}, e.g. 12=\r\n3457. Then we&#39;ll have two resources with the exact same meaning and con=\r\ntent.&lt;br&gt;&lt;br&gt;If I want to use one URI for one criteria set, PUT seems more =\r\nappropriate. The thing is, the {filter-id} is assigned &quot;randomly&quot;=\r\n by the server. As a client, I can&#39;t guess nor force it. From there, I =\r\nsee the following solutions, neither I find satisfying :&lt;br&gt;\n\n\n\n&lt;br&gt;1/ I tr=\r\ny to map artificially my URIs to the criteria set. I could use a hash of th=\r\ne representation. e.g. :&lt;br&gt;&lt;br&gt;=A0=A0=A0 Request :&lt;br&gt;&lt;br&gt;&lt;span style=3D&quot;f=\r\nont-family:courier new;background-color:rgb(0,255,255)&quot;&gt;=A0=A0=A0 PUT /filt=\r\ners/53c11504ba50e14b60407b13a72c0e53 HTTP/1.1&lt;/span&gt;&lt;br style=3D&quot;font-famil=\r\ny:courier new;background-color:rgb(0,255,255)&quot;&gt;\n\n\n\n&lt;br style=3D&quot;font-family=\r\n:courier new;background-color:rgb(0,255,255)&quot;&gt;&lt;span style=3D&quot;font-family:co=\r\nurier new;background-color:rgb(0,255,255)&quot;&gt;=A0=A0=A0 c1=3Dfoo&amp;c2=3Dbar&=\r\namp;c3=3Dbaz&lt;/span&gt;&lt;br style=3D&quot;font-family:courier new;background-color:rg=\r\nb(0,255,255)&quot;&gt;\n\n\n\n&lt;br&gt;=A0=A0=A0 Response :&lt;br&gt;&lt;br&gt;&lt;span style=3D&quot;background=\r\n-color:rgb(0,255,255);font-family:courier new&quot;&gt;=A0=A0=A0 HTTP/1.1 200 OK&lt;/s=\r\npan&gt;&lt;br style=3D&quot;background-color:rgb(0,255,255);font-family:courier new&quot;&gt;&lt;=\r\nbr style=3D&quot;background-color:rgb(0,255,255);font-family:courier new&quot;&gt;\n\n\n\n&lt;s=\r\npan style=3D&quot;background-color:rgb(0,255,255);font-family:courier new&quot;&gt;=A0=\r\n=A0=A0 &lt;form method=3D&quot;PUT&quot; action=3D&quot;/filters/53c11504ba=\r\n50e14b60407b13a72c0e53&quot;&gt;&lt;/span&gt;&lt;br style=3D&quot;background-color:rgb(0,=\r\n255,255);font-family:courier new&quot;&gt;\n\n\n\n&lt;span style=3D&quot;background-color:rgb(0=\r\n,255,255);font-family:courier new&quot;&gt;=A0=A0=A0=A0=A0=A0=A0 &lt;input name=3D&=\r\nquot;c1&quot; value=3D&quot;foo&quot; /&gt;&lt;/span&gt;&lt;br style=3D&quot;background-c=\r\nolor:rgb(0,255,255);font-family:courier new&quot;&gt;&lt;span style=3D&quot;background-colo=\r\nr:rgb(0,255,255);font-family:courier new&quot;&gt;=A0=A0=A0=A0=A0=A0=A0 &lt;input n=\r\name=3D&quot;c2&quot; value=3D&quot;bar&quot; /&gt;&lt;/span&gt;&lt;br style=3D&quot;backg=\r\nround-color:rgb(0,255,255);font-family:courier new&quot;&gt;\n\n\n\n&lt;span style=3D&quot;back=\r\nground-color:rgb(0,255,255);font-family:courier new&quot;&gt;=A0=A0=A0=A0=A0=A0=A0 =\r\n&lt;input name=3D&quot;c3&quot; value=3D&quot;baz&quot; /&gt;&lt;/span&gt;&lt;br sty=\r\nle=3D&quot;background-color:rgb(0,255,255);font-family:courier new&quot;&gt;&lt;span style=\r\n=3D&quot;background-color:rgb(0,255,255);font-family:courier new&quot;&gt;=A0=A0=A0=A0=\r\n=A0=A0=A0 &lt;input type=3D&quot;submit&quot; /&gt;&lt;/span&gt;&lt;br style=3D&quot;back=\r\nground-color:rgb(0,255,255);font-family:courier new&quot;&gt;\n\n\n\n&lt;span style=3D&quot;bac=\r\nkground-color:rgb(0,255,255);font-family:courier new&quot;&gt;=A0=A0=A0 &lt;/form&g=\r\nt;&lt;/span&gt;&lt;br style=3D&quot;background-color:rgb(0,255,255);font-family:courier n=\r\new&quot;&gt;&lt;br&gt;The problem is : it is artificial. If my criteria set changes, or i=\r\nf its representation changes, I could end up with conflicts or doubles.&lt;br&gt;=\r\n\n\n\n\n&lt;br&gt;2/ I trick the client into believing it actually created something =\r\nnew, whether or not it has. This means, even if /filters/123456 already exi=\r\nsts, my server will answer it to anyone POSTing the &quot;c1=3Dfoo&amp;c2=\r\n=3Dbar&amp;c3=3Dbaz&quot; content.&lt;br&gt;\n\n\n\n&lt;br&gt;The problem is : it&#39;s a f=\r\nraud. Only the initial POST really &quot;appends&quot; something.&lt;br&gt;&lt;br&gt;3/=\r\n I answer the second-and-further POST requests with a &quot;409 Conflict&qu=\r\not; answer, and the correct location.&lt;br&gt;\n\n\n\n&lt;br&gt;The problem is : it is not=\r\n actually an error. The client doesn&#39;t care to register something, it j=\r\nust has no way to know wheter or not the resource he is looking for already=\r\n exists.&lt;br&gt;&lt;br&gt;4/ I do a preliminary check&lt;br&gt;\n\n\n\n&lt;br&gt;=A0=A0=A0 Request :&lt;=\r\nbr&gt;&lt;br&gt;&lt;span style=3D&quot;font-family:courier new;background-color:rgb(0,255,25=\r\n5)&quot;&gt;=A0=A0=A0 GET /filters?c1=3Dfoo&amp;c2=3Dbar&amp;c3=3Dbaz HTTP/1.1&lt;/spa=\r\nn&gt;&lt;br style=3D&quot;font-family:courier new;background-color:rgb(0,255,255)&quot;&gt;\n\n\n=\r\n\n&lt;br&gt;=A0=A0=A0 Response :&lt;br&gt;&lt;br&gt;&lt;span style=3D&quot;font-family:courier new;bac=\r\nkground-color:rgb(0,255,255)&quot;&gt;=A0=A0=A0 HTTP/1.1 301 Moved Permanently&lt;/spa=\r\nn&gt;&lt;br style=3D&quot;font-family:courier new;background-color:rgb(0,255,255)&quot;&gt;&lt;sp=\r\nan style=3D&quot;font-family:courier new;background-color:rgb(0,255,255)&quot;&gt;=A0=A0=\r\n=A0 Location: /filters/123456&lt;/span&gt;&lt;br style=3D&quot;font-family:courier new;ba=\r\nckground-color:rgb(0,255,255)&quot;&gt;\n\n\n\n&lt;br&gt;The problem is : If the resource doe=\r\nsn&#39;t exists at that time, I&#39;ll be willing to create it. If I do, no=\r\nthing ensures me that someone hasn&#39;t created it inbetween. Then, if I w=\r\nant to put aside a location for my resource, it implies my GET isn&#39;t sa=\r\nfe anymore.&lt;br&gt;\n\n\n\n&lt;br&gt;5/ The last option I see is that the URI should cont=\r\nains the whole content of the resource, as it is its &quot;natural&quot; id=\r\nentifier. This is especially difficult if I have a large set of criteria, a=\r\nnd if their values are complex. This is why we use ids in the first place.&lt;=\r\nbr&gt;\n\n\n\n&lt;br&gt;Thanks in advance for your help&lt;br&gt;&lt;br&gt;Fran=E7ois&lt;br&gt;&lt;br&gt;\n&lt;/p&gt;\n\n=\r\n    &lt;/div&gt;\n     \n\n    \n    &lt;div style=3D&quot;color:#fff&quot;&gt;&lt;/div&gt;\n\n\n&lt;/div&gt;\n\n\n\n  \n=\r\n\n\n\n\n\n\n&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/d=\r\niv&gt;&lt;br&gt;\n&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;/p&gt;\n\n    &lt;/div&gt;\n     \n\n    \n    &lt;div style=3D&quot;color=\r\n:#fff;min-height:0&quot;&gt;&lt;/div&gt;\n\n\n&lt;/div&gt;\n\n\n\n  \n\n\n\n\n\n\n&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/di=\r\nv&gt;&lt;/div&gt;\n\r\n--bcaec5396502a79b7104c1a60473--\r\n\n"}}