{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":40455398,"authorName":"Julian Reschke","from":"Julian Reschke &lt;julian.reschke@...&gt;","profile":"JulianReschke","replyTo":"SENDER","senderId":"diOLwLPhJ4hW7VA-0IS9M7Q4hiKduZsjqPFcbUFau0lSvdYjhsyajZZjZgeuKnpSSNzcUgzmqsCFcj2a1nbsUKmzMsxqFTy9y_KtCCY","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: Fwd: [rest-discuss] Re: Idempotency of PUT when using IF-MATCH","postDate":"1198924079","msgId":10116,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ3NzYyMTJGLjIwODAzMDZAZ214LmRlPg==","inReplyToHeader":"PGU1YzZlY2FiMDcxMjI4MTkwNHY1YWVjNDc5Mm5mOGM4ZTg4NjQxMThjYzVjQG1haWwuZ21haWwuY29tPg==","referencesHeader":"PGU1YzZlY2FiMDcxMjI3MjMyMHMzZGE1NGZwNmYwM2EwMDMwM2NiMGMxN0BtYWlsLmdtYWlsLmNvbT4JIDwyMDA3MTIyODE2MDg0Ny5HQTE1MjUyQGtsYW5ncmF1bT4JIDxlNWM2ZWNhYjA3MTIyODA4Mzd4ODY0NjNjY2c5MmY3ZTE5MjExMmM0MTU2QG1haWwuZ21haWwuY29tPgkgPEYzNUZFMkU0LTFDMjEtNDgyQy1BNjhBLTFDQzlGQzVBQUQ3NEBnYml2LmNvbT4JIDxlNWM2ZWNhYjA3MTIyODEzMzh5Nzk5OTBiYzlvZjZmNTFlY2I3MmVkYTQwMEBtYWlsLmdtYWlsLmNvbT4gPGU1YzZlY2FiMDcxMjI4MTkwNHY1YWVjNDc5Mm5mOGM4ZTg4NjQxMThjYzVjQG1haWwuZ21haWwuY29tPg=="},"prevInTopic":10113,"nextInTopic":0,"prevInTime":10115,"nextInTime":10117,"topicId":10113,"numMessagesInTopic":2,"msgSnippet":"... It implies that the request was rejected because the conditions evaluated to false. ... Why would it assume that? Just because a retry returns 412 doesn t","rawEmail":"Return-Path: &lt;julian.reschke@...&gt;\r\nX-Sender: julian.reschke@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 88569 invoked from network); 29 Dec 2007 10:28:03 -0000\r\nX-Received: from unknown (66.218.67.97)\n  by m47.grp.scd.yahoo.com with QMQP; 29 Dec 2007 10:28:03 -0000\r\nX-Received: from unknown (HELO mail.gmx.net) (213.165.64.20)\n  by mta18.grp.scd.yahoo.com with SMTP; 29 Dec 2007 10:28:02 -0000\r\nX-Received: (qmail invoked by alias); 29 Dec 2007 10:28:01 -0000\r\nX-Received: from p508F83B6.dip0.t-ipconnect.de (EHLO [192.168.178.22]) [80.143.131.182]\n  by mail.gmx.net (mp001) with SMTP; 29 Dec 2007 11:28:01 +0100\r\nX-Authenticated: #1915285\r\nX-Provags-ID: V01U2FsdGVkX1/WJvkEhJvWoqKgJ34vIycfe5C8TBPoiG0evQsFdC\n\tvJu8pJHOjz9bLG\r\nMessage-ID: &lt;4776212F.2080306@...&gt;\r\nDate: Sat, 29 Dec 2007 11:27:59 +0100\r\nUser-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.8.0.4) Gecko/20060516 Thunderbird/1.5.0.4 Mnenhy/0.7.4.666\r\nMIME-Version: 1.0\r\nTo: Daniel Yokomizo &lt;daniel.yokomizo@...&gt;\r\nCc: rest-discuss@yahoogroups.com\r\nReferences: &lt;e5c6ecab0712272320s3da54fp6f03a00303cb0c17@...&gt;\t &lt;20071228160847.GA15252@klangraum&gt;\t &lt;e5c6ecab0712280837x86463ccg92f7e192112c4156@...&gt;\t &lt;F35FE2E4-1C21-482C-A68A-1CC9FC5AAD74@...&gt;\t &lt;e5c6ecab0712281338y79990bc9of6f51ecb72eda400@...&gt; &lt;e5c6ecab0712281904v5aec4792nf8c8e8864118cc5c@...&gt;\r\nIn-Reply-To: &lt;e5c6ecab0712281904v5aec4792nf8c8e8864118cc5c@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-Y-GMX-Trusted: 0\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Julian Reschke &lt;julian.reschke@...&gt;\r\nSubject: Re: Fwd: [rest-discuss] Re: Idempotency of PUT when using IF-MATCH\r\nX-Yahoo-Group-Post: member; u=40455398; y=sIkB_YlVKUoYLyMAjGQmnQbP6E_v8_hBTntrYKwXB3l0QSHJBMdapQ\r\nX-Yahoo-Profile: JulianReschke\r\n\r\nDaniel Yokomizo wrote:\n&gt;  &gt; In that case, client A definitely wants to receive the 412, since\n&gt;  &gt; otherwise it will never know about client B&#39;s changes.\n&gt; \n&gt; I see, but doesn&#39;t a 412 imply that the operation failed? The trick\n\nIt implies that the request was rejected because the conditions \nevaluated to false.\n\n&gt; part is that client A don&#39;t know if request was processed (e.g.\n&gt; connection issues) and as PUT is idempotent it automatically retries.\n&gt; If it gets a 412 it will assume the request was never processed in the\n&gt; first place, when it was. The only way I see to let it know the\n\nWhy would it assume that? Just because a retry returns 412 doesn&#39;t mean \nthe original request didn&#39;t succeed.\n\n&gt; request was processed is returning a 20X, but it won&#39;t be able to know\n&gt; that B processed it later. We can return &quot;Cache-Control:\n&gt; must-revalidate&quot; to indicate the content is stale.\n\nIt seems that you&#39;re looking for a way for the server to indicate in a \nresponse to a retry that it&#39;s aware that this is a retry, and the \noriginal request succeeded.\n\nI don&#39;t believe you can do that without extensions.\n\n&gt; This situation worries me because the server knows the request is a\n&gt; duplicate submission, it knows the initial submission worked and there\n&gt; are no correct usage that would issue this twice if it was not to for\n&gt; PUT&#39;s idempotency.\n&gt; \n&gt; Rephrasing my original question, is it against the spec to return a\n&gt; 20X (with &quot;Cache-Control: must-revalidate&quot; if other submissions\n&gt; already happened), instead of 412? Is this usage of &quot;Vary: If-Match&quot;\n&gt; and If-Match unsound?\n\nYes, I think this is incorrect.\n\n &gt; ...\n\nBR, Julian\n\n\n"}}