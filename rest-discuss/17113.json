{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":471953374,"authorName":"Alejandro Nicolas","from":"Alejandro Nicolas &lt;anicola@...&gt;","replyTo":"SENDER","senderId":"Bqk_bwCKTKkTJo05Xr-2Xs7LxlbEPrv-eYFZg-U2XNiRfLzLbWREFfnBlG_UMRkUTu-fyB8WlUCsdO_cayR1lQ0EXRoe2XDdNZgKwg","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [rest-discuss] Re: Typed resources for agent-driven negotiation?","postDate":"1292319916","msgId":17113,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PEFBTkxrVGlrRUtuWjI9UTJ5Mkx1WisyanR5MmExeWdhVlhkUCttYTlPay1uQUBtYWlsLmdtYWlsLmNvbT4=","inReplyToHeader":"PEFBTkxrVGlrVGZxTGlyLW42WTdzNU83OTBmYXZxPU44MzJuY3NSc0V4cFU2dEBtYWlsLmdtYWlsLmNvbT4=","referencesHeader":"PEFBTkxrVGlubmRBMjJ1VHd5VkRHSlllU3FfRkpwRTFMUHJPVm1Gc1VFU3NzZkBtYWlsLmdtYWlsLmNvbT4JPGllNWh1ZSttNThkQGVHcm91cHMuY29tPgk8QUFOTGtUaWtoRldaeXdEaG9PcEM1Y1h2b0Y2RE5vS1cxNVRxY3hSdGI1b3VQQG1haWwuZ21haWwuY29tPgk8QUFOTGtUaW5HcXV1VmdqVVBGSzg1czkxQ1VmMW5HMkI3MUw0NGhTVENabUZfQG1haWwuZ21haWwuY29tPgk8QUFOTGtUaWtUZnFMaXItbjZZN3M1Tzc5MGZhdnE9TjgzMm5jc1JzRXhwVTZ0QG1haWwuZ21haWwuY29tPg=="},"prevInTopic":17112,"nextInTopic":0,"prevInTime":17112,"nextInTime":17114,"topicId":17103,"numMessagesInTopic":9,"msgSnippet":"Well, I have to correct myself aboutÂ my statement IMHO conneg HTTP spec should be defined within the HTTP protocol boundaries as that is the case. Following","rawEmail":"Return-Path: &lt;anicola@...&gt;\r\nX-Sender: anicola@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 87455 invoked from network); 14 Dec 2010 09:45:18 -0000\r\nX-Received: from unknown (66.196.94.106)\n  by m16.grp.re1.yahoo.com with QMQP; 14 Dec 2010 09:45:18 -0000\r\nX-Received: from unknown (HELO mail-wy0-f175.google.com) (74.125.82.175)\n  by mta2.grp.re1.yahoo.com with SMTP; 14 Dec 2010 09:45:18 -0000\r\nX-Received: by wyb40 with SMTP id 40so354007wyb.20\n        for &lt;rest-discuss@yahoogroups.com&gt;; Tue, 14 Dec 2010 01:45:17 -0800 (PST)\r\nMIME-Version: 1.0\r\nX-Received: by 10.216.156.84 with SMTP id l62mr1066820wek.58.1292319917384; Tue,\n 14 Dec 2010 01:45:17 -0800 (PST)\r\nX-Received: by 10.227.127.200 with HTTP; Tue, 14 Dec 2010 01:45:16 -0800 (PST)\r\nIn-Reply-To: &lt;AANLkTikTfqLir-n6Y7s5O790favq=N832ncsRsExpU6t@...&gt;\r\nReferences: &lt;AANLkTinndA22uTwyVDGJYeSq_FJpE1LPrOVmFsUESssf@...&gt;\n\t&lt;ie5hue+m58d@...&gt;\n\t&lt;AANLkTikhFWZywDhoOpC5cXvoF6DNoKW15TqcxRtb5ouP@...&gt;\n\t&lt;AANLkTinGquuVgjUPFK85s91CUf1nG2B71L44hSTCZmF_@...&gt;\n\t&lt;AANLkTikTfqLir-n6Y7s5O790favq=N832ncsRsExpU6t@...&gt;\r\nDate: Tue, 14 Dec 2010 10:45:16 +0100\r\nMessage-ID: &lt;AANLkTikEKnZ2=Q2y2LuZ+2jty2a1ygaVXdP+ma9Ok-nA@...&gt;\r\nTo: Andrew Wahbe &lt;andrew.wahbe@...&gt;\r\nCc: Mike Kelly &lt;mike@...&gt;, rest-discuss@yahoogroups.com\r\nContent-Type: text/plain; charset=UTF-8\r\nContent-Transfer-Encoding: quoted-printable\r\nFrom: Alejandro Nicolas &lt;anicola@...&gt;\r\nSubject: Re: [rest-discuss] Re: Typed resources for agent-driven negotiation?\r\nX-Yahoo-Group-Post: member; u=471953374\r\n\r\nWell, I have to correct myself about=C2=A0my statement &quot;IMHO conneg HTTP\nsp=\r\nec should be defined within the HTTP protocol boundaries&quot; as that is\nthe ca=\r\nse. Following Mike Amundsen&#39;s answer, it is US who have been\ntalking about =\r\nusing HTML&#39;s anchor type attribute to implement this\nfeature in HTML, but l=\r\neaving aside the validity of this approach as\nper http://lists.w3.org/Archi=\r\nves/Public/public-html/2009Oct/0658.html,\nHTML spec only talks about an ent=\r\nity body possibly containing an\nhypertextual menu to the different represen=\r\ntations URI&#39;s, which was at\nthe core of my doubt ;)\n\nOn 14 December 2010 10=\r\n:36, Alejandro Nicolas &lt;anicola@...&gt; wrote:\n&gt;\n&gt; I thank you all for y=\r\nour healthy contribution to my answer.\n&gt; In reality my doubt was more=C2=A0=\r\nin a=C2=A0abstract level. Somehow I felt the statement &quot;with each represent=\r\nation identified by its own URI&quot; not in fully conformance=C2=A0with the RES=\r\nT architectural style.\n&gt; Regarding the implementation, I can image an entit=\r\ny body for a 300 response with anchors embedding the target media-types as=\r\n=C2=A0dynamically generated and=C2=A0short-lived, being a different case th=\r\nat a normal body for a 200 response.=C2=A0It is probably good to expand the=\r\n conneg=C2=A0possibilities by leveraging the media types, even if I also th=\r\nink that&#39;s not the original intent in the HTML specification.=C2=A0But, wha=\r\nt if the client doesn&#39;t even support html? Perhaps it is an automated clien=\r\nt not understanding HTML. IMHO conneg HTTP spec should be defined within th=\r\ne HTTP protocol boundaries.\n&gt; Moreover, IMHO agent-driven conneg it is not =\r\nonly intended as a fail-over case for the server-driven one, so the user-ag=\r\nent should be able to rely in the normal content negotiation process, i.e. =\r\nby setting Accept headers when knowing the representations available behind=\r\n the resource&#39;s URI:\n&gt; &quot;Agent-driven negotiation is advantageous when the r=\r\nesponse would vary over commonly-used dimensions (such as type, language, o=\r\nr encoding), when the origin server is unable to determine a user agent&#39;s c=\r\napabilities from examining the request, and generally when public caches ar=\r\ne used to distribute server load and reduce network usage.&quot;\n&gt; Cheers,\n&gt; Ale=\r\njandro\n&gt; On 13 December 2010 19:53, Andrew Wahbe &lt;andrew.wahbe@...&gt; w=\r\nrote:\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; On Mon, Dec 13, 2010 at 12:08 PM, Mike Kelly &lt;mike@mykanj=\r\no.co.uk&gt; wrote:\n&gt;&gt; &gt; On Mon, Dec 13, 2010 at 4:34 PM, wahbedahbe &lt;andrew.wa=\r\nhbe@...&gt; wrote:\n&gt;&gt; &gt;&gt;\n&gt;&gt; &gt;&gt; --- In rest-discuss@yahoogroups.com, mike=\r\n amundsen &lt;mamund@...&gt; wrote:\n&gt;&gt; &gt;&gt;&gt;\n&gt;&gt; &gt;&gt;&gt; There is nothing in the spec th=\r\nat details the representation to use\n&gt;&gt; &gt;&gt;&gt; for a 300 response. However, it=\r\n does indicate that the selection can\n&gt;&gt; &gt;&gt;&gt; be done automatically or &quot;manu=\r\nally by the user selecting from a\n&gt;&gt; &gt;&gt;&gt; generated (possibly hypertext) men=\r\nu.&quot;[1]\n&gt;&gt; &gt;&gt;&gt;\n&gt;&gt; &gt;&gt;&gt; This leads to an assumption that a set of hypertext li=\r\nnks (e.g. HTML\n&gt;&gt; &gt;&gt;&gt; anchor tags) would work just fine for human consumpti=\r\non:\n&gt;&gt; &gt;&gt;&gt; &lt;a href=3D&quot;...&quot;&gt;Pie char&lt;/a&gt;\n&gt;&gt; &gt;&gt;&gt; &lt;a href=3D&quot;...&quot;&gt;Data Table&lt;/=\r\na&gt;\n&gt;&gt; &gt;&gt;&gt; &lt;a href=3D&quot;...&quot;&gt;Text List&lt;/a&gt;\n&gt;&gt; &gt;&gt;&gt;\n&gt;&gt; &gt;&gt;&gt; Since the HTML A tag =\r\nhas &quot;type&quot; as an optional &quot;typoe&quot; attribute[2],\n&gt;&gt; &gt;&gt;&gt; the same content can=\r\n be modified to help client applications make\n&gt;&gt; &gt;&gt;&gt; automated choices.\n&gt;&gt; =\r\n&gt;&gt;&gt; &lt;a href=3D&quot;...&quot; type=3D&quot;image/png&quot;&gt;Pie char&lt;/a&gt;\n&gt;&gt; &gt;&gt;&gt; &lt;a href=3D&quot;...&quot; =\r\ntype=3D&quot;text/html&quot;&gt;Data Table&lt;/a&gt;\n&gt;&gt; &gt;&gt;&gt; &lt;a href=3D&quot;...&quot; type=3D&quot;text/plain=\r\n&quot;&gt;Text List&lt;/a&gt;\n&gt;&gt; &gt;&gt;&gt;\n&gt;&gt; &gt;&gt;&gt; Finally, since the HTTP 1.1 spec also indicat=\r\nes the information could\n&gt;&gt; &gt;&gt;&gt; be carried in a header, the new Web Linking=\r\n spec[3] could be used as a\n&gt;&gt; &gt;&gt;&gt; guide for returning the same information=\r\n as Link Headers:\n&gt;&gt; &gt;&gt;&gt; Link: &lt;...&gt;; type=3D&quot;image/png&quot;,&lt;...&gt;;type=3D&quot;text=\r\n/html&quot;,&lt;...&gt;;type=3D&quot;text/plain&quot;\n&gt;&gt; &gt;&gt;&gt;\n&gt;&gt; &gt;&gt;&gt; This last option works well =\r\nfor clients that are not expecting an HTML\n&gt;&gt; &gt;&gt;&gt; response body (e.g. image=\r\n viewers that want to negotiate for a\n&gt;&gt; &gt;&gt;&gt; preferred binary format, etc.)=\r\n.\n&gt;&gt; &gt;&gt;&gt;\n&gt;&gt; &gt;&gt;&gt; [1] http://www.w3.org/Protocols/rfc2616/rfc2616-sec12.html#=\r\nsec12.2\n&gt;&gt; &gt;&gt;&gt; [2] http://www.w3.org/TR/html4/struct/links.html#h-12.2\n&gt;&gt; &gt;=\r\n&gt;&gt; [3] http://tools.ietf.org/html/rfc5988#section-5\n&gt;&gt; &gt;&gt;&gt;\n&gt;&gt; &gt;&gt;&gt; mca\n&gt;&gt; &gt;&gt;=\r\n&gt; http://amundsen.com/blog/\n&gt;&gt; &gt;&gt;&gt; http://twitter.com@mamund\n&gt;&gt; &gt;&gt;&gt; http://=\r\nmamund.com/foaf.rdf#me\n&gt;&gt; &gt;&gt;&gt;\n&gt;&gt; &gt;&gt;&gt;\n&gt;&gt; &gt;&gt;&gt; #RESTFest 2010\n&gt;&gt; &gt;&gt;&gt; http://re=\r\nst-fest.googlecode.com\n&gt;&gt; &gt;&gt;&gt;\n&gt;&gt; &gt;&gt;&gt;\n&gt;&gt; &gt;&gt;\n&gt;&gt; &gt;&gt; Great answer!\n&gt;&gt; &gt;&gt;\n&gt;&gt; &gt;&gt; =\r\nAndrew\n&gt;&gt; &gt;&gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt; Maybe not:\n&gt;&gt; &gt;\n&gt;&gt; &gt; http://lists.w3.org/Archives/Pu=\r\nblic/public-html/2009Oct/0658.html\n&gt;&gt; &gt;\n&gt;&gt; &gt; &quot;The purpose of conneg is to r=\r\nemove such explicit type indications\n&gt;&gt; &gt; from the distributed content (HTM=\r\nL) so that such coupling of\n&gt;&gt; &gt; standards would not be embedded in the web=\r\n for eternity. =C2=A0The rel\n&gt;&gt; &gt; attribute should be used to state the pur=\r\npose of a generic link\n&gt;&gt; &gt; so that the user agent can adjust its acceptanc=\r\ne criteria\n&gt;&gt; &gt; according to that purpose, not according to some specific\n&gt;=\r\n&gt; &gt; media format. =C2=A0Existing formats are revised or replaced by\n&gt;&gt; &gt; al=\r\nternative formats far more often than the relation semantics\n&gt;&gt; &gt; (and name=\r\ns) change, and giving the user agent the flexibility\n&gt;&gt; &gt; to support new me=\r\ndia types without changing existing content\n&gt;&gt; &gt; is critical to enabling de=\r\nployment of new types.&quot;\n&gt;&gt; &gt;\n&gt;&gt; &gt;\n&gt;&gt; &gt; Cheers,\n&gt;&gt; &gt; Mike\n&gt;&gt; &gt;\n&gt;&gt;\n&gt;&gt; As Mike=\r\n and Nathan have both said: using the type attribute to drive\n&gt;&gt; the values=\r\n of the Accept header and using it to help guide the\n&gt;&gt; selection of links =\r\nare quite different and I interpreted Roy&#39;s\n&gt;&gt; comments to be about the for=\r\nmer.\n&gt;&gt;\n&gt;&gt; But for me the most important point is that when returning a 300=\r\n\n&gt;&gt; response, the server is saying that content negotiation can&#39;t be done\n&gt;=\r\n&gt; and the client has to chose for itself. This could be because the\n&gt;&gt; Acce=\r\npt header values were not specific enough or some server-related\n&gt;&gt; issue. =\r\nOnce you&#39;ve got to the point where you are returning 300 you\n&gt;&gt; have to pro=\r\nvide the client with a set of options -- the expected media\n&gt;&gt; type for eac=\r\nh option is a reasonable thing to specify. You can&#39;t\n&gt;&gt; expect the next ste=\r\np to rely on content negotiation or it would have\n&gt;&gt; worked on the first re=\r\nquest.\n&gt;&gt; i.e. GET /foo resulting in a 300 response listing only /foo as an=\r\n\n&gt;&gt; option (and expecting conneg to work on the 2nd try) isn&#39;t going to go\n=\r\n&gt;&gt; anywhere.\n&gt;&gt;\n&gt;&gt; Regards,\n&gt;&gt;\n&gt;&gt; Andrew\n&gt;&gt;\n&gt;&gt; \n\n"}}