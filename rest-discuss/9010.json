{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":10229189,"authorName":"Andrzej Jan Taramina","from":"&quot;Andrzej Jan Taramina&quot; &lt;andrzej@...&gt;","profile":"ataramina","replyTo":"SENDER","senderId":"O_Upwe7J5lr63Zz1ECmiTuORd6qy5iV98-IW_7OrEed_i6UeW4KSybRUjKr9jJS3dmasyj_u7ooxHk5zjaK9LZmyu6L5pexDUGY_N5hLhMdJcKo","spamInfo":{"isSpam":false,"reason":"3"},"subject":"Re: Message queues","postDate":"1181781301","msgId":9010,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ2NzA1NEY1LjEzODgzLjFDQUJCOEBhbmRyemVqLmNoYWVyb24uY29tPg==","inReplyToHeader":"PDExODE3NzcwOTguMjI1Mi45NDU2NS5tNDlAeWFob29ncm91cHMuY29tPg==","referencesHeader":"PDExODE3NzcwOTguMjI1Mi45NDU2NS5tNDlAeWFob29ncm91cHMuY29tPg=="},"prevInTopic":9009,"nextInTopic":9011,"prevInTime":9009,"nextInTime":9011,"topicId":8955,"numMessagesInTopic":70,"msgSnippet":"... Part of the problem I see with a GET followed by a DELETE, is dependent on what the client does with the GETted queue entry.  What if another client also","rawEmail":"Return-Path: &lt;andrzej@...&gt;\r\nX-Sender: andrzej@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nReceived: (qmail 34797 invoked from network); 14 Jun 2007 00:37:32 -0000\r\nReceived: from unknown (66.218.66.167)\n  by m37.grp.scd.yahoo.com with QMQP; 14 Jun 2007 00:37:32 -0000\r\nReceived: from unknown (HELO smtp1.xplornet.com) (207.179.143.253)\n  by mta6.grp.scd.yahoo.com with SMTP; 14 Jun 2007 00:37:32 -0000\r\nReceived: from [192.168.0.5] (xplr-ts-t11-208-114-168-141.barrettxplore.com [208.114.168.141])\n\t(authenticated bits=0)\n\tby smtp1.xplornet.com (8.13.8/8.13.8) with ESMTP id l5E0Z5cC002431;\n\tWed, 13 Jun 2007 21:35:15 -0300\r\nOrganization: Chaeron Corporation\r\nTo: rest-discuss@yahoogroups.com\r\nDate: Wed, 13 Jun 2007 20:35:01 -0400\r\nMIME-Version: 1.0\r\nCc: &quot;=?ISO-8859-1?Q?beno=EEt_Fleury?=&quot; &lt;benoit.fleury@...&gt;\r\nMessage-ID: &lt;467054F5.13883.1CABB8@...&gt;\r\nPriority: normal\r\nIn-reply-to: &lt;1181777098.2252.94565.m49@yahoogroups.com&gt;\r\nReferences: &lt;1181777098.2252.94565.m49@yahoogroups.com&gt;\r\nX-mailer: Pegasus Mail for Windows (4.41)\r\nContent-type: text/plain; charset=US-ASCII\r\nContent-transfer-encoding: 7BIT\r\nContent-description: Mail message body\r\nX-eGroups-Msg-Info: 2:3:4:0\r\nFrom: &quot;Andrzej Jan Taramina&quot; &lt;andrzej@...&gt;\r\nReply-To: andrzej@...\r\nSubject: Re: Message queues\r\nX-Yahoo-Group-Post: member; u=10229189; y=1Tw_Vn-1V0gTxGBtVf9zH4Oz4Up4UX_WdpYzt0bxEYRH6KiR\r\nX-Yahoo-Profile: ataramina\r\n\r\nBenoit said:\n\n&gt; Yep I forgot the idempotency requirement of PUT. You&#39;re right.\n&gt; Thanks.\n&gt; \n&gt; So use POST ? Or is this new resource a bad idea ?\n\nPart of the problem I see with a GET followed by a DELETE, is dependent on \nwhat the client does with the GETted queue entry.  What if another client \nalso did a GET, completed their processing and then issued the DELETE \nsuccessfully, thus popping the message?  Does that mean that the first client \nshould not have done any processing on the message they did a GET on, since \nthe POP (DELETE) will fail?  As it is typical, the answer is &quot;it depends&quot; on \nthe application specifics.\n\nWhat if you did something like this instead:\n\n1) GET the next message (using a nice, generic URL that points to the &quot;next&quot; \nmessage resource, eg. somequeue/next), which also returns a specific URL for \nthat message, for example, somequeue/msg/42.\n\n2) PUT to the returned message URL, somequeue/msg/42, a state change that \n&quot;grants ownership&quot; of that message to a client id.  PUT \nsomequeue/msg/42?clientID=me. A 200 means you now own that message, and can \ngo ahead and process it.  A 409 (Conflict) means someone else got it before \nyou did, and you should sh*tcan the message and try to get the next one \nagain.\n\n3) When you are done processing the message, you do a DELETE  \nsomequeue/msg/42?clientID=me, to pop it permanently.  A 200 means it&#39;s gone.  \nA 403 (Forbidden) would be returned if you didn&#39;t already &quot;own&quot; the specified \nmessage.\n\nWould that come closer to providing a scenario that is restful, but also \nprovides message queuing semantics?  Obviously at the expense of extra HTTP \ncalls.  \n\nThe server could potentially (if the app scenario warrants it) implement a \ntimeout so that if a DELETE was not received in some specified time interval, \nthe message &quot;ownership&quot; would be released. In that case a DELETE after the \ntimeout could return a 408 (Request Timeout), though that might be stretching \nthe meaning of a 408 somewhat.\n\nSimilarily, once you &quot;own&quot; a message, you could also release the ownership by \nusing a PUT, rather than a DELETE, effectively requeuing the message for \nothers to potentially GET.  Also, doing a GET only, is like a &quot;peek&quot; in the \nthe queue, without the corresponding pop, which is a common use case/feature \nin many message queuing systems.\n\nJust some quick thoughts on the messaging topic....\n\n\n\n\n\n\n\n\nAndrzej Jan Taramina\nChaeron Corporation: Enterprise System Solutions\nhttp://www.chaeron.com\n\n\n"}}