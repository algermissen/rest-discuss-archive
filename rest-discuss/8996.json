{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":252643374,"authorName":"Yohanes Santoso","from":"Yohanes Santoso &lt;yahoo-rest-discuss@...&gt;","profile":"gnome_g","replyTo":"SENDER","senderId":"LS02T8uKzPoWk2zQK4f0qSew2WGtHjssEL4qaXHr2wJPKWosgmcHlNDjFWMdi60Rxu12e2AMmLCKEAqOqIj_OS4fZjoWhyx3YHabeHN1QXRmzwqHiUKEzdsk3Q","spamInfo":{"isSpam":false,"reason":"3"},"subject":"Re: [rest-discuss] Message queues","postDate":"1181751408","msgId":8996,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDg3NHBsYjk2ZHIuZnNmQG1pY3JvamV0LmF0aC5jeD4=","inReplyToHeader":"PDIwMDcwNjEzMTU0NzMxLkdBMjQ5NDdAYmx1ZXpvby5vcmc+IChDaHJpcyBCdXJkZXNzJ3MgbWVzc2FnZSBvZgkiV2VkLCAxMyBKdW4gMjAwNyAxNjo0NzozMSArMDEwMCIp","referencesHeader":"PDIwMDcwNjEyMjAwODIwLkdEOTgwN0BzbGlua3AuY29tPgk8ODc4eGFvNTJ1Ni5mc2ZAa2FuZ2EudGFwc2VsbGZlcnJpZXIuY28udWs+CTw4N2Q0eno5YWtwLmZzZkBtaWNyb2pldC5hdGguY3g+IDwyMDA3MDYxMzE1NDczMS5HQTI0OTQ3QGJsdWV6b28ub3JnPg=="},"prevInTopic":8995,"nextInTopic":8997,"prevInTime":8995,"nextInTime":8997,"topicId":8955,"numMessagesInTopic":70,"msgSnippet":"... Because that would have been too easy, right? :) DELETE has to be idempotent. If it returns you message A the first time, then if there is nothing else","rawEmail":"Return-Path: &lt;yahoo-rest-discuss@...&gt;\r\nX-Sender: yahoo-rest-discuss@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nReceived: (qmail 68960 invoked from network); 13 Jun 2007 16:18:12 -0000\r\nReceived: from unknown (66.218.67.36)\n  by m40.grp.scd.yahoo.com with QMQP; 13 Jun 2007 16:18:12 -0000\r\nReceived: from unknown (HELO microjet.ath.cx) (64.142.109.140)\n  by mta10.grp.scd.yahoo.com with SMTP; 13 Jun 2007 16:18:12 -0000\r\nReceived: (qmail 4817 invoked from network); 13 Jun 2007 16:13:51 -0000\r\nReceived: from unknown (HELO jenny-gnome.dyndns.org) (127.0.0.1)\n  by localhost.sonic.net with SMTP; 13 Jun 2007 16:13:51 -0000\r\nReceived: (qmail 15358 invoked by uid 1000); 13 Jun 2007 12:16:48 -0400\r\nTo: rest-discuss@yahoogroups.com\r\nReferences: &lt;20070612200820.GD9807@...&gt;\n\t&lt;878xao52u6.fsf@...&gt;\n\t&lt;87d4zz9akp.fsf@...&gt; &lt;20070613154731.GA24947@...&gt;\r\nDate: Wed, 13 Jun 2007 12:16:48 -0400\r\nIn-Reply-To: &lt;20070613154731.GA24947@...&gt; (Chris Burdess&#39;s message of\n\t&quot;Wed, 13 Jun 2007 16:47:31 +0100&quot;)\r\nMessage-ID: &lt;874plb96dr.fsf@...&gt;\r\nUser-Agent: Gnus/5.110006 (No Gnus v0.6) Emacs/21.4 (gnu/linux)\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=us-ascii\r\nX-eGroups-Msg-Info: 2:3:4:0\r\nFrom: Yohanes Santoso &lt;yahoo-rest-discuss@...&gt;\r\nSubject: Re: [rest-discuss] Message queues\r\nX-Yahoo-Group-Post: member; u=252643374; y=bjiIGf83ee7zgeZ6wnFnaVI53AqbMEFKcQlxZoTmFpyaOw\r\nX-Yahoo-Profile: gnome_g\r\n\r\nChris Burdess &lt;dog@...&gt; writes:\n\n&gt; Yohanes Santoso wrote:\n&gt;&gt; Nic James Ferrier &lt;nferrier@...&gt; writes:\n&gt;&gt; &gt; - everything in the queue disappears when you create the snapshot.\n&gt;&gt; \n&gt;&gt; Which may not be suitable when there are multiple consumers\n&gt;&gt; waiting.\n&gt;\n&gt; I&#39;m still unclear why the queue cannot be implemented using DELETE to\n&gt; pop the queue entry. \n\nBecause that would have been too easy, right? :)\n\nDELETE has to be idempotent. If it returns you message A the first\ntime, then if there is nothing else happening afterwards, another\nDELETE should return message A again too. So, how do you advance to\nthe next message? You would have to do something so that the next\nDELETE returns a different message, but that means DELETE alone is not\ndoing the popping.\n\nFurthermore, even if DELETE does the popping, the network is not\nreliable. There will be cases where you need to retry that\noperation. How do you do that if the popping is not retryable?\n\nPopping as a single action, like presented in most Queue library, is\nnot a problem because data transfer is reliable within a process (if\nit is not, you have a whole other, much more serious problem).\n\n&gt; You GET the current state of the queue, which contains links to the\n&gt; individual queue entry URLs. Then you pick the first queue entry\n&gt; you&#39;re interested in and DELETE it. Either you are successful, and\n&gt; the server returns 200 and the entity representing the queue entry,\n&gt; or some other client has beaten you to it, you get a 404, and you\n&gt; have to try the next entry.\n\nThis is similar to spinlock: repeatedly try to lock until you succeed.\n\n&gt; What&#39;s wrong with this?\n\nSpinlock is wonderful if there is a high probability that you&#39;ll get\nthe lock soon, real soon. Otherwise it will start to generate\nunnecessary load. In networking, you can&#39;t afford unnecessary\nload because of high latency and limited bandwidth. \n\nFurthermore, since network is not reliable, how do you re-get the\nmessage if the DELETE response to you is interrupted mid-way (network\nis not reliable)?\n\nSee httplr which is quite complex for something that is conceptually\nsimple because it acknowledges that network is not reliable.\n\nYS.\n\n\n"}}