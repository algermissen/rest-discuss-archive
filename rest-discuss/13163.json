{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":209043068,"authorName":"Solomon Duskis","from":"Solomon Duskis &lt;sduskis@...&gt;","profile":"sduskis","replyTo":"SENDER","senderId":"Oh8dUII_CwwyaS4Z_x2-3GnZHBJzAPe8C5LuLQ9e-gFq6nVyqiNVyTbnOvgX8CYwYlcDFzcp8PXvV1pys1UbxosKSn6e_hCeTg","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [rest-discuss] Trailer header and tomcat","postDate":"1249500030","msgId":13163,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDU1YzYwZTM3MDkwODA1MTIyMHE3NmUxZTIxM2kzYWI5YzMyODdkMzZkMDdmQG1haWwuZ21haWwuY29tPg==","inReplyToHeader":"PGg1Y2diYStnaTVoQGVHcm91cHMuY29tPg==","referencesHeader":"PGg1Y2diYStnaTVoQGVHcm91cHMuY29tPg=="},"prevInTopic":13162,"nextInTopic":13164,"prevInTime":13162,"nextInTime":13164,"topicId":13162,"numMessagesInTopic":11,"msgSnippet":"I m not sure that you re on the right discussion list for this issue.  With that said, you have to set headers before you open the outgoing stream.  One way to","rawEmail":"Return-Path: &lt;sduskis@...&gt;\r\nX-Sender: sduskis@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 60030 invoked from network); 5 Aug 2009 19:21:30 -0000\r\nX-Received: from unknown (69.147.108.200)\n  by m4.grp.re1.yahoo.com with QMQP; 5 Aug 2009 19:21:30 -0000\r\nX-Received: from unknown (HELO qw-out-1920.google.com) (74.125.92.147)\n  by mta1.grp.re1.yahoo.com with SMTP; 5 Aug 2009 19:21:30 -0000\r\nX-Received: by qw-out-1920.google.com with SMTP id 5so144185qwf.52\n        for &lt;rest-discuss@yahoogroups.com&gt;; Wed, 05 Aug 2009 12:20:30 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.229.80.3 with SMTP id r3mr2635841qck.104.1249500030415; Wed, \n\t05 Aug 2009 12:20:30 -0700 (PDT)\r\nIn-Reply-To: &lt;h5cgba+gi5h@...&gt;\r\nReferences: &lt;h5cgba+gi5h@...&gt;\r\nDate: Wed, 5 Aug 2009 15:20:30 -0400\r\nMessage-ID: &lt;55c60e370908051220q76e1e213i3ab9c3287d36d07f@...&gt;\r\nTo: Keyur Shah &lt;keyurva@...&gt;\r\nCc: rest-discuss@yahoogroups.com\r\nContent-Type: multipart/alternative; boundary=0016364269bd75b59e047069e502\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Solomon Duskis &lt;sduskis@...&gt;\r\nSubject: Re: [rest-discuss] Trailer header and tomcat\r\nX-Yahoo-Group-Post: member; u=209043068; y=mCWOhGm8OPU4tNmC0cV35ukOGCovu-RX9Slg2-rDIiVakg\r\nX-Yahoo-Profile: sduskis\r\n\r\n\r\n--0016364269bd75b59e047069e502\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nI&#39;m not sure that you&#39;re on the right discussion list for this issue.  With=\r\n\nthat said, you have to set headers before you open the outgoing stream.  O=\r\nne\nway to do that is to write to a buffer (such as a ByteArrayOutputStream)=\r\n,\nget the size, write the headers and then flushing the buffer to the\nservl=\r\netResponse&#39;s OutputStream.\n-Solomon\n\nOn Wed, Aug 5, 2009 at 1:43 PM, Keyur =\r\nShah &lt;keyurva@...&gt; wrote:\n\n&gt;\n&gt;\n&gt; Tomcat by default sends chunked resp=\r\nonses =3D&gt; Transfer-Encoding:chunked\n&gt;\n&gt; I&#39;m calculating the ETag for the r=\r\nesponse dynamically as the content is\n&gt; being written to the response strea=\r\nm. Since I&#39;ll know the final value of the\n&gt; ETag only when the stream is cl=\r\nosed, I indicate that using the Trailer\n&gt; header =3D&gt; Trailer: ETag\n&gt;\n&gt; I&#39;m=\r\n ensuring that just before the stream is closed, I set the ETag header\n&gt; =\r\n=3D&gt; ETag: SomeETagValue\n&gt;\n&gt; However, when I look at the response on the cl=\r\nient, the ETag header was\n&gt; never written.\n&gt;\n&gt; Is this a tomcat specific bu=\r\ng or am I doing something wrong?\n&gt;\n&gt; Thanks,\n&gt; Keyur\n&gt;\n&gt;  \n&gt;\n\r\n--0016364269bd75b59e047069e502\r\nContent-Type: text/html; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nI&#39;m not sure that you&#39;re on the right discussion list for this issu=\r\ne. =A0With that said, you have to set headers before you open the outgoing =\r\nstream. =A0One way to do that is to write to a buffer (such as a ByteArrayO=\r\nutputStream), get the size, write the headers and then flushing the buffer =\r\nto the servletResponse&#39;s OutputStream.&lt;div&gt;\n&lt;br&gt;&lt;/div&gt;&lt;div&gt;-Solomon&lt;br&gt;=\r\n&lt;br&gt;&lt;div class=3D&quot;gmail_quote&quot;&gt;On Wed, Aug 5, 2009 at 1:43 PM, Keyur Shah &lt;=\r\nspan dir=3D&quot;ltr&quot;&gt;&lt;&lt;a href=3D&quot;mailto:keyurva@...&quot;&gt;keyurva@...=\r\n&lt;/a&gt;&gt;&lt;/span&gt; wrote:&lt;br&gt;&lt;blockquote class=3D&quot;gmail_quote&quot; style=3D&quot;margin=\r\n:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;&quot;&gt;\n\n\n\n\n\n\n\n\n\n\n\n&lt;div =\r\nstyle=3D&quot;background-color:#ffffff&quot;&gt;\n&lt;span&gt;=A0&lt;/span&gt;\n\n&lt;div style=3D&quot;width:6=\r\n55px&quot;&gt;\n&lt;div style=3D&quot;width:470px;margin:0;padding:0 25px 0 0;float:left&quot;&gt;\n\n=\r\n    &lt;div&gt;\n                  &lt;p&gt;Tomcat by default sends chunked responses =\r\n=3D&gt; Transfer-Encoding:chunked&lt;br&gt;\n&lt;br&gt;\nI&#39;m calculating the ETag for=\r\n the response dynamically as the content is being written to the response s=\r\ntream. Since I&#39;ll know the final value of the ETag only when the stream=\r\n is closed, I indicate that using the Trailer header =3D&gt; Trailer: ETag&lt;=\r\nbr&gt;\n\n&lt;br&gt;\nI&#39;m ensuring that just before the stream is closed, I set the=\r\n ETag header =3D&gt; ETag: SomeETagValue&lt;br&gt;\n&lt;br&gt;\nHowever, when I look at t=\r\nhe response on the client, the ETag header was never written.&lt;br&gt;\n&lt;br&gt;\nIs t=\r\nhis a tomcat specific bug or am I doing something wrong?&lt;br&gt;\n&lt;br&gt;\nThanks,&lt;b=\r\nr&gt;\nKeyur&lt;br&gt;\n&lt;br&gt;\n&lt;/p&gt;\n \n\n    &lt;/div&gt;  \n\n    \n    &lt;div width=3D&quot;1&quot; style=3D&quot;=\r\ncolor:white;clear:both&quot;&gt;&lt;/div&gt;\n\t\n\t&lt;/div&gt;\n\t\n\t\n\n\n\t\n\n\n\t\n\t\n\t\n\t\n\t\n\n&lt;/blockquote&gt;=\r\n&lt;/div&gt;&lt;br&gt;&lt;/div&gt;\n\r\n--0016364269bd75b59e047069e502--\r\n\n"}}