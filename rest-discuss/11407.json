{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":284199208,"authorName":"vincent lari","from":"vincent lari &lt;vincent.lari@...&gt;","profile":"vincent.lari","replyTo":"SENDER","senderId":"_FRmf0QITcMUzX73eAc8TiiF_xDg9dAJBW0aKEUZMTBItm_sCPqU2ujIIsLlPQft68e4v6QsQz3NNF2_Ecag0uewUveUIysRpNgv","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Migrating to AtomPub - a few issues","postDate":"1225130263","msgId":11407,"canDelete":false,"contentTrasformed":false,"systemMessage":true,"headers":{"messageIdInHeader":"PDU5NDI4NS40OTk2LnFtQHdlYjQ1MzE0Lm1haWwuc3AxLnlhaG9vLmNvbT4="},"prevInTopic":0,"nextInTopic":11408,"prevInTime":11406,"nextInTime":11408,"topicId":11407,"numMessagesInTopic":6,"msgSnippet":"Hello, I m looking at the feasibility of porting an existing application to Atom/AtomPub. The application is mostly based on vcard/hcard and ical/hcalendar;","rawEmail":"Return-Path: &lt;vincent.lari@...&gt;\r\nReceived: (qmail 28626 invoked from network); 27 Oct 2008 18:06:43 -0000\r\nReceived: from unknown (66.218.67.95)\n  by m57.grp.scd.yahoo.com with QMQP; 27 Oct 2008 18:06:43 -0000\r\nReceived: from unknown (HELO n27b.bullet.sp1.yahoo.com) (209.131.38.244)\n  by mta16.grp.scd.yahoo.com with SMTP; 27 Oct 2008 18:06:43 -0000\r\nReceived: from [69.147.65.147] by n27.bullet.sp1.yahoo.com with NNFMP; 27 Oct 2008 18:06:43 -0000\r\nReceived: from [66.218.67.195] by t10.bullet.mail.sp1.yahoo.com with NNFMP; 27 Oct 2008 18:06:43 -0000\r\nX-Sender: vincent.lari@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 79315 invoked from network); 27 Oct 2008 17:57:43 -0000\r\nX-Received: from unknown (66.218.67.97)\n  by m57.grp.scd.yahoo.com with QMQP; 27 Oct 2008 17:57:43 -0000\r\nX-Received: from unknown (HELO web45314.mail.sp1.yahoo.com) (68.180.197.168)\n  by mta18.grp.scd.yahoo.com with SMTP; 27 Oct 2008 17:57:43 -0000\r\nX-Received: (qmail 5138 invoked by uid 60001); 27 Oct 2008 17:57:43 -0000\r\nX-YMail-OSG: vMBZBSkVM1nO9T5JmtoZLvaEYiD0uVhbbzpuTVKxMaG6pmAxgaNqvXtZdjdvVYNk2dSeKFex3bUk66Pd7lOJEXbkj.3BvCoM_aPZ3P42iNgBYUVxAAjgdTw3pMFzfOU6G__jhUrck8VhPw45fwY2ideDAEo-\r\nX-Received: from [209.90.181.37] by web45314.mail.sp1.yahoo.com via HTTP; Mon, 27 Oct 2008 10:57:43 PDT\r\nX-Mailer: YahooMailWebService/0.7.247.3\r\nDate: Mon, 27 Oct 2008 10:57:43 -0700 (PDT)\r\nTo: rest-discuss@yahoogroups.com\r\nMIME-Version: 1.0\r\nContent-Type: multipart/alternative; boundary=&quot;0-1829855213-1225130263=:4996&quot;\r\nMessage-ID: &lt;594285.4996.qm@...&gt;\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: vincent lari &lt;vincent.lari@...&gt;\r\nReply-To: vincent.lari@...\r\nSubject: Migrating to AtomPub - a few issues\r\nX-Yahoo-Group-Post: member; u=284199208; y=MZyH595xOwPL0PoGlGlucs5bXZyv-kxo7dDkpTDBv_q4Y_7gKrxB\r\nX-Yahoo-Profile: vincent.lari\r\nX-Yahoo-Newman-Property: groups-system\r\nX-eGroups-Approved-By: gonga_thrash &lt;distobj@...&gt; via web; 27 Oct 2008 18:06:42 -0000\r\n\r\n\r\n--0-1829855213-1225130263=:4996\r\nContent-Type: text/plain; charset=iso-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nHello,\n\nI&#39;m looking at the feasibility of porting an existing application t=\r\no Atom/AtomPub.\nThe application is mostly based on vcard/hcard and ical/hca=\r\nlendar; We&#39;d use Atom essentially  to encapsulate the hcalendar and hcard p=\r\nayload, and link to the corresponding vcard/ical representation.\nMigrating =\r\nto AtomPub is trivial for 95% of our resources; the 5% I&#39;m struggling with =\r\nhas to do with those resources that are more &#39;process&#39; resources.\n\nConsider=\r\n goecoding, for intance. I have the &#39;/addresses&#39; resource that clients use =\r\nto obtain a lat/long, as well as the normalized address.\n\n For instance:\n\nG=\r\nET /addresses?streetAddr=3D4150+Network+Circle&locality=3DSanta+Clara&posta=\r\nl=3D95054\nAccept: xhtml\nHost: my.app.com\n\n(note that the state and country =\r\nare missing).\nThe server responds:\n\n200 OK\nContent-Type: xhtml\n\n&lt;div class=\r\n=3D&quot;vcard&quot;&gt;\n  &lt;div class=3D&quot;adr&quot;&gt;\n    &lt;span class=3D&quot;street-address&quot;&gt;4150 N=\r\network Circle&lt;/span&gt;\n    &lt;span class=3D&quot;locality&quot;&gt;Santa Clara&lt;/span&gt;, \n    =\r\n &lt;abbr class=3D&quot;region&quot; title=3D&quot;California&quot;&gt;CA&lt;/abbr&gt; \n     &lt;span class=3D=\r\n&quot;postal-code&quot;&gt;95054&lt;/span&gt;\n    &lt;div class=3D&quot;country-name&quot;&gt;USA&lt;/div&gt;\n  &lt;/di=\r\nv&gt; \n  &lt;div class=3D&quot;geo&quot;&gt;GEO: \n    &lt;span class=3D&quot;latitude&quot;&gt;37.39576&lt;/span&gt;=\r\n, \n    &lt;span class=3D&quot;longitude&quot;&gt;-121.952&lt;/span&gt;\n  &lt;/div&gt; \n&lt;/div&gt;\n\n\nMy  pro=\r\nblem is that the &#39;/addresses&#39; resource does not belong in the Service Docum=\r\nent,as it isn&#39;t a collection in the AtomPub sense:\n- I don&#39;t POST to it to =\r\ncreate new entries\n- I don&#39;t GET known entries (I search them) from the col=\r\nlection.\n\n\nI think I have three options=A0to=A0solve this:\n\nOption #1:  mak=\r\ne /addresses behave like a collection. Instead of GETing an address, I POST=\r\n it:\n\nPOST /addresses\nAccept: application/atom+xml\nHost: our.app.com\n\nstree=\r\ntAddr=3D4150 Network+ Circle\nlocality=3DSanta Clara \npostal=3D95054\n\nTo whi=\r\nch the server responds:\n\n\n201 CREATED\nLocation: http://our.app.com/address/=\r\n37.39576,-121.952#4150+Network+Circle\nContent-Type: application/atom+xml\n\n&lt;=\r\nentry&gt;\n...\n  &lt;author&gt;...&lt;/author&gt;\n  &lt;link rel=3D&quot;self&quot; type=3D&quot;application/=\r\natom+xml&quot; href=3D&quot;http://our.app.com/address/37.39576,-121.952#4150+Network=\r\n+Circle&quot; /&gt;\n  &lt;link rel=3D&quot;alternate&quot; type=3D&quot;text/directory&quot; href=3D&quot;http:=\r\n//our.app.com/address/37.39576,-121.952#4150+Network+Circle&quot; /&gt;\n&lt;div class=\r\n=3D&quot;vcard&quot;&gt;\n  &lt;div class=3D&quot;adr&quot;&gt;\n    &lt;span class=3D&quot;street-address&quot;&gt;4150 N=\r\network Circle&lt;/span&gt;\n    &lt;span class=3D&quot;locality&quot;&gt;Santa Clara&lt;/span&gt;, \n    =\r\n &lt;abbr class=3D&quot;region&quot; title=3D&quot;California&quot;&gt;CA&lt;/abbr&gt; \n     &lt;span class=3D=\r\n&quot;postal-code&quot;&gt;95054&lt;/span&gt;\n    &lt;div class=3D&quot;country-name&quot;&gt;USA&lt;/div&gt;\n  &lt;/di=\r\nv&gt; \n  &lt;div class=3D&quot;geo&quot;&gt;GEO: \n    &lt;span class=3D&quot;latitude&quot;&gt;37.39576&lt;/span&gt;=\r\n, \n    &lt;span class=3D&quot;longitude&quot;&gt;-121.952&lt;/span&gt;\n  &lt;/div&gt; \n&lt;/div&gt;\n&lt;/entry&gt;\n=\r\n\nNote that I&#39;m appending the street address to the URI (#4150+Network+Circl=\r\ne) because it&#39;s the only piece of information the server can&#39;t determine by=\r\n reverse-geocoding the lat/long.\n\nThis works, but I know the client will ne=\r\nver GET the created uri once it has processed the response of the POST. Wha=\r\nt I end up doing is query-via-POST. \n\n\n\nOption #2: keep my &#39;/address&#39; resou=\r\nrce as is, create an Atom that represents the geocoding service, and have c=\r\nollection of services in the Service document.\n\nThe Service doc would look =\r\nlike this:\n\n&lt;service xmlns=3D&quot;http://www.w3.org/2007/app&quot;\n            xmlns=\r\n:atom=3D&quot;http://www.w3.org/2005/Atom&quot;&gt;\n     &lt;workspace&gt;\n       &lt;atom:title&gt;=\r\nsome title&lt;/atom:title&gt;\n       &lt;collection href=3D&quot;http://our.app.com/tools=\r\n&quot; &gt;\n         =A0=A0=A0&lt;atom:title&gt;A bunch of tools&lt;/atom:title&gt; \n          =\r\n    &lt;/collection&gt;\n     &lt;/worspace&gt;\n....\n&lt;/service&gt;\n\nThis entry would=A0 par=\r\nt of the &#39;tools&#39; collection:\n\n&lt;entry&gt;\n  &lt;title&gt;Geocoding Resource&lt;/title&gt;\n =\r\n &lt;author&gt;...&lt;/author&gt;\n  &lt;link rel=3D&quot;self&quot; type=3D&quot;text/html&quot; href=3D&quot;http:=\r\n//our.app.com/addresses&quot; /&gt;\n  &lt;link rel=3D&quot;geocode&quot; type=3D&quot;text/directory&quot;=\r\n href=3D&quot;http://our.app.com/addresses&quot; /&gt;\n&lt;/entry&gt;\n\n\nOption #3: I keep hear=\r\ning about APP extensions, but I&#39;m not sure how this would work in my case.\n=\r\n\n\nYour feedback on this would be greatly appreciated.\n\nThanks,\n\nVincent.\n\n\n=\r\n\n\n\n      __________________________________________________________________=\r\n\nBe smarter than spam. See how smart SpamGuard is at giving junk email the =\r\nboot with the All-new Yahoo! Mail.  Click on Options in Mail and switch to =\r\nNew Mail today or register for free at http://mail.yahoo.ca\r\n--0-1829855213-1225130263=:4996\r\nContent-Type: text/html; charset=iso-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;table cellspacing=3D&quot;0&quot; cellpadding=3D&quot;0&quot; border=3D&quot;0&quot; &gt;&lt;tr&gt;&lt;td valign=3D&quot;=\r\ntop&quot; style=3D&quot;font: inherit;&quot;&gt;Hello,&lt;BR&gt;&lt;BR&gt;I&#39;m looking at the feasibility =\r\nof porting an existing application to Atom/AtomPub.&lt;BR&gt;The application is m=\r\nostly based on vcard/hcard and ical/hcalendar; We&#39;d use Atom &lt;SPAN&gt;essentia=\r\nlly&lt;/SPAN&gt;  to encapsulate the hcalendar and hcard payload, and link to the=\r\n corresponding vcard/ical representation.&lt;BR&gt;Migrating to AtomPub is trivia=\r\nl for 95% of our resources; the 5% I&#39;m struggling with has to do with those=\r\n resources that are more &#39;process&#39; resources.&lt;BR&gt;&lt;BR&gt;Consider goecoding, fo=\r\nr intance. I have the &#39;/addresses&#39; resource that clients use to obtain a la=\r\nt/long, as well as the normalized address.&lt;BR&gt;&lt;BR&gt; For instance:&lt;BR&gt;&lt;BR&gt;GET=\r\n /addresses?streetAddr=3D4150+Network+Circle&amp;locality=3DSanta+Clara&amp=\r\n;postal=3D95054&lt;BR&gt;Accept: xhtml&lt;BR&gt;Host: my.app.com&lt;BR&gt;&lt;BR&gt;(note that the =\r\nstate and country are missing).&lt;BR&gt;The server responds:&lt;BR&gt;&lt;BR&gt;200\n OK&lt;BR&gt;C=\r\nontent-Type: xhtml&lt;BR&gt;&lt;BR&gt;&lt;div class=3D&quot;vcard&quot;&gt;&lt;BR&gt;  &lt;div class=3D=\r\n&quot;adr&quot;&gt;&lt;BR&gt;    &lt;span class=3D&quot;street-address&quot;&gt;4150 Network Circle&l=\r\nt;/span&gt;&lt;BR&gt;    &lt;span class=3D&quot;locality&quot;&gt;Santa Clara&lt;/span&gt;,=\r\n &lt;BR&gt;     &lt;abbr class=3D&quot;region&quot; title=3D&quot;California&quot;&gt;CA&lt;/abbr&gt;=\r\n &lt;BR&gt;     &lt;span class=3D&quot;postal-code&quot;&gt;95054&lt;/span&gt;&lt;BR&gt;    &lt;d=\r\niv class=3D&quot;country-name&quot;&gt;USA&lt;/div&gt;&lt;BR&gt;  &lt;/div&gt; &lt;BR&gt;  &lt;di=\r\nv class=3D&quot;geo&quot;&gt;GEO: &lt;BR&gt;    &lt;span class=3D&quot;latitude&quot;&gt;37.39576&lt;=\r\n/span&gt;, &lt;BR&gt;    &lt;span class=3D&quot;longitude&quot;&gt;-121.952&lt;/span&gt;&lt;BR=\r\n&gt;  &lt;/div&gt; &lt;BR&gt;&lt;/div&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;My  problem is that the &#39;/addre=\r\nsses&#39; resource does not belong in the Service Document,as it isn&#39;t a collec=\r\ntion in the AtomPub sense:&lt;BR&gt;- I don&#39;t POST to it to create new entries&lt;BR=\r\n&gt;- I don&#39;t GET known entries (I search them) from the collection.&lt;BR&gt;&lt;BR&gt;&lt;B=\r\nR&gt;I think I have three options=A0to=A0solve this:&lt;BR&gt;&lt;BR&gt;Option #1:  make /=\r\naddresses\n behave like a collection. Instead of GETing an address, I POST i=\r\nt:&lt;BR&gt;&lt;BR&gt;POST /addresses&lt;BR&gt;Accept: application/atom+xml&lt;BR&gt;Host: our.app.=\r\ncom&lt;BR&gt;&lt;BR&gt;streetAddr=3D4150 Network+ Circle&lt;BR&gt;locality=3DSanta Clara &lt;BR&gt;=\r\npostal=3D95054&lt;BR&gt;&lt;BR&gt;To which the server responds:&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;201 CREATED&lt;=\r\nBR&gt;Location: http://our.app.com/address/37.39576,-121.952#4150+Network+Circ=\r\nle&lt;BR&gt;Content-Type: application/atom+xml&lt;BR&gt;&lt;BR&gt;&lt;entry&gt;&lt;BR&gt;...&lt;BR&gt;  &=\r\nlt;author&gt;...&lt;/author&gt;&lt;BR&gt;  &lt;link rel=3D&quot;self&quot; type=3D&quot;applicat=\r\nion/atom+xml&quot; href=3D&quot;http://our.app.com/address/37.39576,-121.952#4150+Net=\r\nwork+Circle&quot; /&gt;&lt;BR&gt;  &lt;link rel=3D&quot;alternate&quot; type=3D&quot;text/directory&quot; =\r\nhref=3D&quot;http://our.app.com/address/37.39576,-121.952#4150+Network+Circle&quot; /=\r\n&gt;&lt;BR&gt;&lt;div class=3D&quot;vcard&quot;&gt;&lt;BR&gt;  &lt;div class=3D&quot;adr&quot;&gt;&lt;BR&gt;    &=\r\nlt;span class=3D&quot;street-address&quot;&gt;4150 Network Circle&lt;/span&gt;&lt;BR&gt;   =\r\n &lt;span class=3D&quot;locality&quot;&gt;Santa Clara&lt;/span&gt;, &lt;BR&gt;     &lt;abbr=\r\n class=3D&quot;region&quot;\n title=3D&quot;California&quot;&gt;CA&lt;/abbr&gt; &lt;BR&gt;     &lt;spa=\r\nn class=3D&quot;postal-code&quot;&gt;95054&lt;/span&gt;&lt;BR&gt;    &lt;div class=3D&quot;count=\r\nry-name&quot;&gt;USA&lt;/div&gt;&lt;BR&gt;  &lt;/div&gt; &lt;BR&gt;  &lt;div class=3D&quot;geo&quot;&g=\r\nt;GEO: &lt;BR&gt;    &lt;span class=3D&quot;latitude&quot;&gt;37.39576&lt;/span&gt;, &lt;BR&gt;  =\r\n  &lt;span class=3D&quot;longitude&quot;&gt;-121.952&lt;/span&gt;&lt;BR&gt;  &lt;/div&gt; &lt;=\r\nBR&gt;&lt;/div&gt;&lt;BR&gt;&lt;/entry&gt;&lt;BR&gt;&lt;BR&gt;Note that I&#39;m appending the street=\r\n address to the URI (#4150+Network+Circle) because it&#39;s the only piece of i=\r\nnformation the server can&#39;t determine by reverse-geocoding the lat/long.&lt;BR=\r\n&gt;&lt;BR&gt;This works, but I know the client will never GET the created uri once =\r\nit has processed the response of the POST. What I end up doing is query-via=\r\n-POST. &lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Option #2: keep my &#39;/address&#39; resource as is, create=\r\n an Atom that represents the geocoding service, and have collection of serv=\r\nices in the Service document.&lt;BR&gt;&lt;BR&gt;The Service doc would look like this:&lt;=\r\nBR&gt;&lt;BR&gt;&lt;service\n xmlns=3D&quot;http://www.w3.org/2007/app&quot;&lt;BR&gt;            xml=\r\nns:atom=3D&quot;http://www.w3.org/2005/Atom&quot;&gt;&lt;BR&gt;     &lt;workspace&gt;&lt;BR&gt;  =\r\n     &lt;atom:title&gt;some title&lt;/atom:title&gt;&lt;BR&gt;       &lt;collecti=\r\non href=3D&quot;http://our.app.com/tools&quot; &gt;&lt;BR&gt;         =A0=A0=A0&lt;atom:tit=\r\nle&gt;A bunch of tools&lt;/atom:title&gt; &lt;BR&gt;              &lt;/collection=\r\n&gt;&lt;BR&gt;     &lt;/worspace&gt;&lt;BR&gt;....&lt;BR&gt;&lt;/service&gt;&lt;BR&gt;&lt;BR&gt;This entr=\r\ny would=A0 part of the &#39;tools&#39; collection:&lt;BR&gt;&lt;BR&gt;&lt;entry&gt;&lt;BR&gt;  &lt;ti=\r\ntle&gt;Geocoding Resource&lt;/title&gt;&lt;BR&gt;  &lt;author&gt;...&lt;/author&g=\r\nt;&lt;BR&gt;  &lt;link rel=3D&quot;self&quot; type=3D&quot;text/html&quot; href=3D&quot;http://our.app.com=\r\n/addresses&quot; /&gt;&lt;BR&gt;  &lt;link rel=3D&quot;geocode&quot; type=3D&quot;text/directory&quot; hre=\r\nf=3D&quot;http://our.app.com/addresses&quot; /&gt;&lt;BR&gt;&lt;/entry&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Optio=\r\nn #3: I keep hearing about APP extensions, but I&#39;m not sure how this would =\r\nwork in my case.&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Your feedback on this would be greatly\n appreci=\r\nated.&lt;BR&gt;&lt;BR&gt;Thanks,&lt;BR&gt;&lt;BR&gt;Vincent.&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;br&gt;\n\n\n\n =\r\n     &lt;hr size=3D1&gt;Now with a new friend-happy design! Try the new &lt;a href=\r\n=3D&quot;http://ca.beta.messenger.yahoo.com/&quot;&gt;&lt;b&gt;Yahoo! Canada Messenger&lt;/b&gt;&lt;/a&gt;\r\n--0-1829855213-1225130263=:4996--\r\n\n"}}