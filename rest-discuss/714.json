{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":23186829,"authorName":"Paul Prescod","from":"Paul Prescod &lt;paul@...&gt;","replyTo":"SENDER","senderId":"1-MTRG34-txr93duzhayRYhIHsD_Jqu0-GhWU4XM-IlXtXpw_Q2YLalJVFPjxbjtIFFmLTmuv-0tGbs7rHYLbO_pJ7b45g","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [rest-discuss] required headers in the notification message","postDate":"1013703247","msgId":714,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDNDNkJFMjRGLjEyOEE5QUE2QHByZXNjb2QubmV0Pg==","referencesHeader":"PE5FQkJKSUhNTUxLSEVPUE5PR0hEQ0VMSUZLQUEubHVjYXNAZ29uemUuY29tPg=="},"prevInTopic":704,"nextInTopic":715,"prevInTime":713,"nextInTime":715,"topicId":674,"numMessagesInTopic":33,"msgSnippet":"... Right now the spec says: The HTTP method used for the notification is up to the application. As you ve urged I m trying not to over-constrain. Mark Baker","rawEmail":"Return-Path: &lt;paul@...&gt;\r\nX-Sender: paul@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nReceived: (EGP: mail-8_0_2); 14 Feb 2002 16:16:19 -0000\r\nReceived: (qmail 18970 invoked from network); 14 Feb 2002 16:16:19 -0000\r\nReceived: from unknown (216.115.97.172)\n  by m12.grp.snv.yahoo.com with QMQP; 14 Feb 2002 16:16:19 -0000\r\nReceived: from unknown (HELO smtp1.ActiveState.com) (209.17.183.249)\n  by mta2.grp.snv.yahoo.com with SMTP; 14 Feb 2002 16:16:19 -0000\r\nReceived: from smtp3.ActiveState.com (smtp3.ActiveState.com [192.168.3.19])\n\tby smtp1.ActiveState.com (8.11.6/8.11.6) with ESMTP id g1EGGGl25558\n\tfor &lt;rest-discuss@yahoogroups.com&gt;; Thu, 14 Feb 2002 08:16:16 -0800\r\nReceived: from prescod.net (ssh1.ActiveState.com [192.168.3.32])\n\tby smtp3.ActiveState.com (8.11.6/8.11.6) with ESMTP id g1EGGFL25304\n\tfor &lt;rest-discuss@yahoogroups.com&gt;; Thu, 14 Feb 2002 08:16:15 -0800\r\nMessage-ID: &lt;3C6BE24F.128A9AA6@...&gt;\r\nDate: Thu, 14 Feb 2002 08:14:07 -0800\r\nX-Mailer: Mozilla 4.76 [en] (Windows NT 5.0; U)\r\nX-Accept-Language: en\r\nMIME-Version: 1.0\r\nTo: rest-discuss@yahoogroups.com\r\nSubject: Re: [rest-discuss] required headers in the notification message\r\nReferences: &lt;NEBBJIHMMLKHEOPNOGHDCELIFKAA.lucas@...&gt;\r\nContent-Type: text/plain; charset=us-ascii\r\nContent-Transfer-Encoding: 7bit\r\nX-Filtered-By: PerlMx makes it fast and easy.  See http://www.ActiveState.com/Products/PerlMx/Header\r\nFrom: Paul Prescod &lt;paul@...&gt;\r\nX-Yahoo-Group-Post: member; u=23186829\r\n\r\nLucas Gonze wrote:\n&gt; \n&gt; About the notification message definition:\n&gt; &quot;A notification message must have the following headers:\n&gt; Watched-URI: (URI of the watched resource)\n&gt; Subscription-URI: URI of the subscription object&quot;\n&gt; \n&gt; I believe that the Watched-URI and Subscription-URI are not properly a required\n&gt; part of the notification message.  In the idempotent notification model the\n&gt; Subscriber URI contains the entire content of the callback.  There are several\n&gt; reasons.\n&gt;\n&gt; 1) It is not properly a subscriber URI but a notification URI.  This follows\n&gt; from the fact that the sink receives notifications via PUT.  If you PUT multiple\n&gt; notifications to the same URI, and they contain data related to different\n&gt; subscriptions, they will wipe one another out.\n\nRight now the spec says:\n\n&quot;The HTTP method used for the notification is up to the application.&quot;\n\nAs you&#39;ve urged I&#39;m trying not to over-constrain. Mark Baker feels like\nit makes sense to use PUT and POST in some circumstances. I actually\nprefer NOTIFY. I don&#39;t see the harm in allowing choice. The only thing\nI&#39;ll go do right now is add:\n\n&quot; but the method must not be GET, HEAD or any other method that is\ndefined to be safe (side-effect-free).&quot;\n\n&gt; 2) If the subscription URI in the notification is used as the callback address\n&gt; for renewing/deleting/pending the subscription, or if the Watched-URI is used as\n&gt; the callback address for picking up further events, then an attacker can rewrite\n&gt; these headers to contain the target URI of a distributed denial of service\n&gt; attack.  To prevent rewriting, the notification message would have to be either\n&gt; signed or encrypted, and if the sink has to handle signed or encrypted messages,\n&gt; it can&#39;t be a plain vanilla HTTP server.  So the sink MUST NOT use either the\n&gt; Watched-URI or Subscription-URI as the callback address for\n&gt; renewing/deleting/pending the subscription.\n\nI see your problem. But also look at it from the opposite point of view.\nDirecting clients at an alternate server (i.e. mirror) is a useful form\nof load balancing.\n\nI&#39;m not convinced that the DOS is a real problem. In order to generate\n1000000 hits on the target machine (&quot;take that capitalist bastards!&quot;)\nyou&#39;d have to generate 1000000 notifications. Why wouldn&#39;t you just\ndirectly make the 1000000 GET connections and be done with it? Maybe for\nobfuscation but the point remains that the number of hits you generate\nis in the same ballpark as the number of notifications you make so it is\nreally hard to make a serious hit.\n\n&gt; 3) If the Watched-URI and Subscription-URI in a notification message are used by\n&gt; the sink to identify the resource in question, an attacker can eavesdrop to\n&gt; discover any meaningful data within those URIs.  For example the\n&gt; Subscription-URI may hold enough information to modify a subscription.  If the\n&gt; Subscription-URI had been obtained within the context of an HTTPS connection,\n&gt; including it within an uncrypted notification message would disclose a secret.\n\nArguably you should use real authentication rather than just hoping that\nURIs don&#39;t leak out.\n\n&gt;...\n&gt; I don&#39;t mean to block off whatever the utility of the notification headers is,\n&gt; though.  Explanations of the intended use of those headers would help in finding\n&gt; an alternative way to meet the need...\n\nThere are three virtues. 1. a notification message gives you enough\ninformation to know what is going on even if you didn&#39;t play games with\nthe subscription URI. 2. this is very useful for the email binding where\npeople usually don&#39;t like to invent hundreds of email addresses. 3. the\nserver can do a form of load-balancing so that they don&#39;t slashdot\nthemselves.\n\nIf we ignore the first two and say that only 3 is important then we\ncould remove the subscription URI and make the Watched-URI a MAY.\n\nThis could be used to solve 2:\n\nhttp://developer.netscape.com/viewsource/husted_mailto/mailto.html\n\nAnd I guess 1 is more of a theoretical problem. So I suggest the\nfollowing:\n\n&quot;\nA notification message MAY have the following headers: \n\nWatched-URI: (URI of the watched resource) \n\nThe Watched-URI may be any valid URI for the resource that generated the\nnotification. It need not be the original URI but it must refer to the\nsame resource. If the client wants to retrieve a representation of the\nresource it SHOULD use this URI, not the original one. This will allow\npublishers to do a simple form of load balancing.\n&quot;\n\n Paul Prescod\n\n"}}