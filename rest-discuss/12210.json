{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":248248154,"authorName":"Bruno Harbulot","from":"Bruno Harbulot &lt;Bruno.Harbulot@...&gt;","profile":"bruno_harbulot","replyTo":"SENDER","senderId":"Ys5HzFtRlGyK57sMc09bqD8IRNP9c7_IIZUBmxil-a_8yUcbBMl4wB2i7HZv-9twQCg0Vr4b82o3KFE2WZ9cDig2iXRwPvpOBXr4YXdf_KXqZl1b3Mnj","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: Multi-user authentication for REST web service","postDate":"1236628186","msgId":12210,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ5QjU3MkRBLjkwOTA4MDFAbWFuY2hlc3Rlci5hYy51az4=","inReplyToHeader":"PGY4YjM5YWNlMDkwMjE3MDkxOXZkOTQzZmFkc2ViMTU2OWIyNzhhM2I4NzRAbWFpbC5nbWFpbC5jb20+","referencesHeader":"PGduY2E4Mytrb2U0QGVHcm91cHMuY29tPgkgPGY4YjM5YWNlMDkwMjE2MTgwNXQyNmE0YzdkMnBmY2NmNDM1YzAyM2RiNjAzQG1haWwuZ21haWwuY29tPgkgPDE1OTg2ZWYwOTAyMTcwNDUwdzQwMjdhY2JldTMwN2UxNjM4MGU1MzIyYzdAbWFpbC5nbWFpbC5jb20+IDxmOGIzOWFjZTA5MDIxNzA5MTl2ZDk0M2ZhZHNlYjE1NjliMjc4YTNiODc0QG1haWwuZ21haWwuY29tPg=="},"prevInTopic":12137,"nextInTopic":0,"prevInTime":12209,"nextInTime":12211,"topicId":12131,"numMessagesInTopic":7,"msgSnippet":"Hi Craig, ... I ve just had a look at this sample SecurityFilter, and I ve noticed that you had modelled user as a role. We ve had a discussion on a similar","rawEmail":"Return-Path: &lt;Bruno.Harbulot@...&gt;\r\nX-Sender: Bruno.Harbulot@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 97921 invoked from network); 9 Mar 2009 19:49:48 -0000\r\nX-Received: from unknown (69.147.108.201)\n  by m2.grp.re1.yahoo.com with QMQP; 9 Mar 2009 19:49:48 -0000\r\nX-Received: from unknown (HELO serenity.mcc.ac.uk) (130.88.200.93)\n  by mta2.grp.re1.yahoo.com with SMTP; 9 Mar 2009 19:49:47 -0000\r\nX-Received: from kelvin.its.manchester.ac.uk ([130.88.25.195])\n\tby serenity.mcc.ac.uk with esmtps (TLSv1:AES256-SHA:256)\n\t(Exim 4.69 (FreeBSD))\n\t(envelope-from &lt;Bruno.Harbulot@...&gt;)\n\tid 1LglTv-000KXJ-Cn; Mon, 09 Mar 2009 19:49:47 +0000\r\nX-Received: from mirabelle.rcs.manchester.ac.uk ([130.88.1.123]:54437 helo=mymachine)\n\tby kelvin.its.manchester.ac.uk with esmtpsa (TLSv1:AES256-SHA:256)\n\t(Exim 4.69)\n\t(envelope-from &lt;Bruno.Harbulot@...&gt;)\n\tid 1LglTv-0003Ik-7z; Mon, 09 Mar 2009 19:49:47 +0000\r\nMessage-ID: &lt;49B572DA.9090801@...&gt;\r\nDate: Mon, 09 Mar 2009 19:49:46 +0000\r\nUser-Agent: Thunderbird 2.0.0.19 (Macintosh/20081209)\r\nMIME-Version: 1.0\r\nTo: craigmcc@...\r\nCc: rest-discuss@yahoogroups.com\r\nReferences: &lt;gnca83+koe4@...&gt;\t &lt;f8b39ace0902161805t26a4c7d2pfccf435c023db603@...&gt;\t &lt;15986ef0902170450w4027acbeu307e16380e5322c7@...&gt; &lt;f8b39ace0902170919vd943fadseb1569b278a3b874@...&gt;\r\nIn-Reply-To: &lt;f8b39ace0902170919vd943fadseb1569b278a3b874@...&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: 7bit\r\nX-Authenticated-Sender: Bruno Harbulot from mirabelle.rcs.manchester.ac.uk (mymachine) [130.88.1.123]:54437\r\nX-Authenticated-From: Bruno.Harbulot@...\r\nX-UoM: Scanned by the University Mail System. See http://www.itservices.manchester.ac.uk/email/filtering/information/ for details.\r\nX-eGroups-Msg-Info: 1:6:0:0:0\r\nFrom: Bruno Harbulot &lt;Bruno.Harbulot@...&gt;\r\nSubject: Re: Multi-user authentication for REST web service\r\nX-Yahoo-Group-Post: member; u=248248154; y=EgsOikYNpm9KlTfzXeDmtbhVq_K49CNuHrM-q6D7974Q0g1Fbjhv3j0\r\nX-Yahoo-Profile: bruno_harbulot\r\n\r\nHi Craig,\n\nCraig McClanahan wrote:\n&gt; \n&gt; \n&gt; On Tue, Feb 17, 2009 at 4:50 AM, Jeff Thorn &lt;jeff@... \n&gt; &lt;mailto:jeff%40thorntechnologies.com&gt;&gt; wrote:\n&gt;  &gt; Hi Craig,\n&gt;  &gt; Thanks for the response. I haven&#39;t committed 100% to a particular \n&gt; framework\n&gt;  &gt; yet. Out of curiosity, how would you implement it in Jersery?\n&gt;  &gt;\n&gt; \n&gt; Jersey 1.0.2 (recently released) includes a mechanism to provide\n&gt; filters that are invoked either globally, or on particular resource\n&gt; URIs. In addition, you can use a filter to inject a security context\n&gt; that includes logic to perform role based authorization. To see an\n&gt; example of this in action, check out the &quot;atompub-contacts-server&quot;\n&gt; example in the &quot;samples&quot; directory. In particular, look at class\n&gt; &quot;com.sun.jersey.samples.contacts.auth.SecurityFilter&quot;.\n\n\nI&#39;ve just had a look at this sample SecurityFilter, and I&#39;ve noticed \nthat you had modelled &quot;user&quot; as a role.\nWe&#39;ve had a discussion on a similar topic on the Restlet-code mailing \nlist [1][2]. I was saying that &quot;owner&quot; (same is &quot;user&quot; in your example) \nwas not a role as such, but a property of the resource.\n\nI&#39;ll quote my own post in [1]:\n&gt; [...] assuming that you can express the owner from the relevant part \n&gt; of the URI seems dangerous. It might work in some cases with &quot;pretty \n&gt; URIs&quot;, but in practice, that&#39;s going to be hard to generalise.\n&gt; Suppose you have &quot;message&quot; resources (for example, for a forum) all \n&gt; stored in a DB. Each message row contains the content of the message and \n&gt; which user wrote it (at least). Only authors of a given message and \n&gt; admins can delete this message. You&#39;re going to have URI of the form \n&gt; &quot;/message/{messageId}&quot;. &quot;Admin&quot; is going to be a role, but there&#39;s no \n&gt; way you can simply express the &quot;owner&quot; property as a role in the \n&gt; configuration file. (Again, I&#39;d be happy to be proven wrong with an \n&gt; example.)\n&gt; As I&#39;ve said in the previous thread, &quot;owner&quot; is not usually a role in \n&gt; the RBAC sense.\n&gt; In the servlet model, it&#39;s quite hard to have &quot;owner&quot; being a role for a \n&gt; particular resource for example. The only way can think of it would be \n&gt; to have a filter load the resource before it reaches the servlet, decide \n&gt; whether or not to give the user that &quot;owner&quot; role and only then protect \n&gt; the target servlet. It sounds feasible, but I&#39;m not sure if it&#39;s very \n&gt; natural.\n&gt; If you do the simplistic comparison of Servlet to Restlet by mapping \n&gt; servlet filters to restlet filters and servlet to resource, you end up \n&gt; having some logic that would be natural to have in the resource class \n&gt; (loading the row from the DB) in the filter. This doesn&#39;t seem like good \n&gt; practice in Restlet either.\n\n\nThe sample SecurityFilter in Jersey seems to rely on the fact that it&#39;s \na &quot;pretty&quot; URI from which the owner name can be deduced.\nAlthough URIs ought to be opaque for the client application, they don&#39;t \nhave to be opaque for the server, so that&#39;s fair enough. However, I&#39;m \nnot convinced that model can work well in general.\n\n    (a) Even if you can tell whether a user is the owner from the URI \n(&quot;this.principal.getName().endsWith(pathParam)&quot; in this example), it \nmeans that the SecurityFilter has to know about this URI structure and \nwon&#39;t be easy to re-use in another context;\n\n    (b) When there is no way to guess the role from what you get from \nURI and in the user Principal, this is likely to have to duplicate (or \nto split) some of the task of the resource class into the filter (for \nexample, by loading the owner from a database, probably based on the \nresource type, or perhaps by extracting who has which role from the \nresource itself). In addition, if these role mappings are loaded from a \ndatabase (where the resource data is too), all this should probably be \ndone as part of the same transaction.\n\n\nCould you give a bit of background on why you decided to model the owner \n(or &quot;user&quot; in your example) as a role?\n\nMore generally, do you have examples of RBAC systems (Servlet/Java or \nnot) where being the owner of a specific resource is modelled as a role?\n\n\nBest wishes,\n\nBruno.\n\n\n[1] \nhttp://restlet.tigris.org/ds/viewMessage.do?dsForumId=7458&dsMessageId=1256759\n[2] \nhttp://restlet.tigris.org/ds/viewMessage.do?dsForumId=7458&dsMessageId=1134688\n\n"}}