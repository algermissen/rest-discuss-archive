{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":71474733,"authorName":"patrickdlogan","from":"&quot;patrickdlogan&quot; &lt;patrick.d.logan@...&gt;","profile":"patrickdlogan","replyTo":"SENDER","senderId":"O5mcPbDYGfgWLzF54_Gv6ZUEo-UsdOziWtBF3eFm8FOslKqEMa3mghtemZmT16YKAUKo9dsPVEpyNd6iMn3Gir_7yq-eNA_nEeH4_r1oQt_ekQ","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: RESTful Queues","postDate":"1103323642","msgId":4715,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGNwdm5scSttbjhsQGVHcm91cHMuY29tPg==","inReplyToHeader":"PEVNRUFJQ0FHT1BPSUlGSk5QQkhKSUVBTkREQUEuZHN0cm9uZ0BhZ2VudGlzc29mdHdhcmUuY29tPg=="},"prevInTopic":4714,"nextInTopic":4716,"prevInTime":4714,"nextInTime":4716,"topicId":4698,"numMessagesInTopic":21,"msgSnippet":"... [Various race conditions described here. Other exist.] ... The problem is the GET followed by the DELETE are intended to be atomic. A side effect is needed","rawEmail":"Return-Path: &lt;patrick.d.logan@...&gt;\r\nX-Sender: patrick.d.logan@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nReceived: (qmail 36758 invoked from network); 17 Dec 2004 22:47:44 -0000\r\nReceived: from unknown (66.218.66.217)\n  by m24.grp.scd.yahoo.com with QMQP; 17 Dec 2004 22:47:44 -0000\r\nReceived: from unknown (HELO n12a.bulk.scd.yahoo.com) (66.94.237.20)\n  by mta2.grp.scd.yahoo.com with SMTP; 17 Dec 2004 22:47:44 -0000\r\nReceived: from [66.218.69.5] by n12.bulk.scd.yahoo.com with NNFMP; 17 Dec 2004 22:47:23 -0000\r\nReceived: from [66.218.67.129] by mailer5.bulk.scd.yahoo.com with NNFMP; 17 Dec 2004 22:47:23 -0000\r\nDate: Fri, 17 Dec 2004 22:47:22 -0000\r\nTo: rest-discuss@yahoogroups.com\r\nMessage-ID: &lt;cpvnlq+mn8l@...&gt;\r\nIn-Reply-To: &lt;EMEAICAGOPOIIFJNPBHJIEANDDAA.dstrong@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Length: 1317\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Remote-IP: 66.94.237.20\r\nFrom: &quot;patrickdlogan&quot; &lt;patrick.d.logan@...&gt;\r\nSubject: Re: RESTful Queues\r\nX-Yahoo-Group-Post: member; u=71474733\r\nX-Yahoo-Profile: patrickdlogan\r\n\r\n\n&gt; he was interested in reliable delivery of the messages on the queue\n&gt; to a single consumer...\n&gt; \n&gt; &quot;How to I acknowledge successful reciept so the message can be\n&gt; deleted from the queue&quot;.\n&gt;\n[Various race conditions described here. Other exist.]\n&gt;\n&gt; I think perhaps an entirely different approach is needed to\n&gt; guarentee the message is only processed by one consumer.\n\nThe problem is the GET followed by the DELETE are intended to be\natomic. A side effect is needed in the first method to establish some\nmechanism for atomicity with the second method. So GET is not the\nright first method.\n\nThe ideal solution would be one method. Somethng like &quot;TAKE&quot;,\ni.e. &quot;IN&quot; using Linda terms.\n\nMaybe PUT could be used to replace the resource using a representation\nthat indicates it is &quot;locked&quot;. A subsequent PUT while the resource is\nlocked would get a 409 conflict.\n\nMaybe POST could be used to place a lock &quot;subordinate&quot; to the\nresource, or PUT could be used to put a representation of a lock\nresource whose URI is, or includes, the head of the queue.\n\nMaybe WebDAV should be used. But in general, race conditions are going\nto come up especially with sequences of methods that are intended to\nbe atomic, so they have to be collapsed into a single method or the\nfirst method has to include a useful side effect.\n\n-Patrick\n\n\n\n\n\n"}}