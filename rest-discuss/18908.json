{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":403546864,"authorName":"Moore, Jonathan (CIM)","from":"&quot;Moore, Jonathan (CIM)&quot; &lt;jonathan_moore@...&gt;","profile":"jonathan_t_moore","replyTo":"SENDER","senderId":"mS6MVDcqbb5xrS-ek6mFoZ7KfSFD4F-KKPNcN78uhLBq55SuKd9mLvkVAA1L4J2eWNbibhjgA15XAoE1td34AQD0G_Z7RWnG9XOdRwzOO-OJsZIw5Usm8tQddw","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [rest-discuss] API errors and media-types","postDate":"1341187519","msgId":18908,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDBFM0RCMzE2LUY5REYtNEExQy1CQ0Y0LUMwODQyRjRBMTc5RUBDb21jYXN0LmNvbT4=","inReplyToHeader":"PGpzbGQ5MCttOGpjQGVHcm91cHMuY29tPg==","referencesHeader":"PGpzbGQ5MCttOGpjQGVHcm91cHMuY29tPg=="},"prevInTopic":18907,"nextInTopic":0,"prevInTime":18907,"nextInTime":18909,"topicId":18907,"numMessagesInTopic":2,"msgSnippet":"I hadn t thought about using custom media types for errors, but I have run across the Webmachine behavior you mentioned, and believe it to be a bug. Although","rawEmail":"Return-Path: &lt;jonathan_moore@...&gt;\r\nX-Sender: jonathan_moore@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 27161 invoked from network); 2 Jul 2012 00:05:24 -0000\r\nX-Received: from unknown (98.137.34.45)\n  by m7.grp.sp2.yahoo.com with QMQP; 2 Jul 2012 00:05:24 -0000\r\nX-Received: from unknown (HELO cable.comcast.com) (69.241.43.119)\n  by mta2.grp.sp2.yahoo.com with SMTP; 2 Jul 2012 00:05:23 -0000\r\nX-Received: from ([24.40.56.115])\n\tby pacdcavaout01.cable.comcast.com with ESMTP  id 97wm3m1.17939842;\n\tSun, 01 Jul 2012 19:55:21 -0400\r\nX-Received: from PACDCEXMB03.cable.comcast.com ([169.254.3.168]) by\n PACDCEXHUB02.cable.comcast.com ([fe80::492e:3fa1:c2ad:e04e%13]) with mapi id\n 14.02.0309.002; Sun, 1 Jul 2012 20:05:19 -0400\r\nTo: &quot;andrei.neculau@...&quot; &lt;andrei.neculau@...&gt;\r\nCc: &quot;rest-discuss@yahoogroups.com&quot; &lt;rest-discuss@yahoogroups.com&gt;\r\nThread-Topic: [rest-discuss] API errors and media-types\r\nThread-Index: AQHNV8TV5hXzz6BBqkO0IC3F5w+s/JcVHTI3\r\nDate: Mon, 2 Jul 2012 00:05:19 +0000\r\nMessage-ID: &lt;0E3DB316-F9DF-4A1C-BCF4-C0842F4A179E@...&gt;\r\nReferences: &lt;jsld90+m8jc@...&gt;\r\nIn-Reply-To: &lt;jsld90+m8jc@...&gt;\r\nAccept-Language: en-US\r\nContent-Language: en-US\r\nX-MS-Has-Attach:\r\nX-MS-TNEF-Correlator:\r\nContent-Type: multipart/alternative;\n\tboundary=&quot;_000_0E3DB316F9DF4A1CBCF4C0842F4A179EComcastcom_&quot;\r\nMIME-Version: 1.0\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: &quot;Moore, Jonathan (CIM)&quot; &lt;jonathan_moore@...&gt;\r\nSubject: Re: [rest-discuss] API errors and media-types\r\nX-Yahoo-Group-Post: member; u=403546864; y=bYGN2Zz-yTCajS7d6se4xt9rypWlYo5X0DJtFa0N1K3txSo0HjwLMVtBxw\r\nX-Yahoo-Profile: jonathan_t_moore\r\n\r\n\r\n--_000_0E3DB316F9DF4A1CBCF4C0842F4A179EComcastcom_\r\nContent-Type: text/plain; charset=&quot;Windows-1252&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nI hadn&#39;t thought about using custom media types for errors, but I have run =\r\nacross the Webmachine behavior you mentioned, and believe it to be a bug. A=\r\nlthough sending a 415 when the client does not accept the &quot;natural&quot; media t=\r\nype served with another error (409 in your case) is unconditionally complia=\r\nnt with HTTP/1.1, this SHOULD is specifically called out in the spec as one=\r\n that servers may find useful to relax--and this is a good example.\n\nI&#39;d pr=\r\nobably choose to serve a 409 with the error media type most likely to make =\r\nsense to a human reader in this case, as I&#39;m not sure I would expect a clie=\r\nnt to be able to recover from the error automatically if it didn&#39;t advertis=\r\ne support for one specifically in its Accept header.\n\nJon\n........\nJon Moor=\r\ne\nComcast Cable\n\nOn Jul 1, 2012, at 4:05 PM, &quot;andrei.neculau@...&lt;mail=\r\nto:andrei.neculau@...&gt;&quot; &lt;andrei.neculau@...&lt;mailto:andrei.necul=\r\nau@...&gt;&gt; wrote:\n\n\n\nGiven that you have a specific media-type(s) for g=\r\niving extended API errors e.g. application/vnd.andrei.error-v1+json, applic=\r\nation/vnd.andrei.error-v2+json\nwhich of the following do you find natural?\n=\r\n\n#1 Be specific about which error media-type(s) you can accept\nGET &lt;http://=\r\n.../resource&gt; http://.../resource\nAccept: application/vnd.andrei.some-media=\r\n-type-v1+json, application/vnd.andrei.error-v1+json\n=3D&gt;\n409 CONFLICT\nConte=\r\nnt-Type: application/vnd.andrei.error-v1+json\n\n#2 If the client lacks speci=\r\nfication of an error media-type, assume that it can process the lowest/high=\r\nest version\nGET &lt;http://.../resource&gt; http://.../resource\nAccept: applicati=\r\non/vnd.andrei.some-media-type-v1+json\n=3D&gt;\n409 CONFLICT\nContent-Type: appli=\r\ncation/vnd.andrei.error-v2+json\n\n#3 If the client lacks specification of an=\r\n error media-type, do not return any media-type nor payload - just the HTTP=\r\n status code\nGET &lt;http://.../resource&gt; http://.../resource\nAccept: applicat=\r\nion/vnd.andrei.some-media-type-v1+json\n=3D&gt;\n409 CONFLICT\n\nThe thing is that=\r\n for #1 and #3 to take place, basho&#39;s webmachine for instance would have to=\r\n do content-negotiation again, but only for the media-types defined as erro=\r\nr media-types and without throwing a 415 MEDIA TYPE NOT SUPPORTED.\n\nThank y=\r\nou for your time\nAndrei\n\nNB. I&#39;ve posted the above and some more comments a=\r\nlso at &lt;https://groups.google.com/forum/?hl=3Den&fromgroups#&gt; https://group=\r\ns.google.com/forum/?hl=3Den&fromgroups#!topic/api-craft/7c4unolo8Rw and I&#39;d=\r\n want to pick your brain as well\n\n\n\n\r\n--_000_0E3DB316F9DF4A1CBCF4C0842F4A179EComcastcom_\r\nContent-Type: text/html; charset=&quot;Windows-1252&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta http-equiv=3D&quot;Content-Type&quot; content=3D&quot;text/html; chars=\r\net=3DWindows-1252&quot;&gt;\n&lt;/head&gt;\n&lt;body bgcolor=3D&quot;#FFFFFF&quot;&gt;\n&lt;div&gt;I hadn&#39;t though=\r\nt about using custom media types for errors, but I have run across the Webm=\r\nachine behavior you mentioned, and believe it to be a bug. Although sending=\r\n a 415 when the client does not accept the &quot;natural&quot; media type s=\r\nerved with another error\n (409 in your case) is unconditionally compliant w=\r\nith HTTP/1.1, this SHOULD is specifically called out in the spec as one tha=\r\nt servers may find useful to relax--and this is a good example.&lt;/div&gt;\n&lt;div&gt;=\r\n&lt;br&gt;\n&lt;/div&gt;\n&lt;div&gt;I&#39;d probably choose to serve a 409 with the error media ty=\r\npe most likely to make sense to a human reader in this case, as I&#39;m not sur=\r\ne I would expect a client to be able to recover from the error automaticall=\r\ny if it didn&#39;t advertise support for one specifically\n in its Accept header=\r\n.&nbsp;&lt;/div&gt;\n&lt;div&gt;&lt;br&gt;\n&lt;/div&gt;\n&lt;div&gt;Jon&lt;br&gt;\n........\n&lt;div&gt;Jon Moore&lt;/div&gt;\n&lt;=\r\ndiv&gt;Comcast Cable&lt;/div&gt;\n&lt;/div&gt;\n&lt;div&gt;&lt;br&gt;\nOn Jul 1, 2012, at 4:05 PM, &quot;=\r\n&lt;a href=3D&quot;mailto:andrei.neculau@...&quot;&gt;andrei.neculau@...&lt;/a&gt;&qu=\r\not; &lt;&lt;a href=3D&quot;mailto:andrei.neculau@...&quot;&gt;andrei.neculau@...=\r\nm&lt;/a&gt;&gt; wrote:&lt;br&gt;\n&lt;br&gt;\n&lt;/div&gt;\n&lt;div&gt;&lt;/div&gt;\n&lt;blockquote type=3D&quot;cite&quot;&gt;\n&lt;di=\r\nv&gt;&lt;span style=3D&quot;display:none&quot;&gt;&nbsp;&lt;/span&gt;\n&lt;div id=3D&quot;ygrp-text&quot;&gt;\n&lt;p&gt;Give=\r\nn that you have a specific media-type(s) for giving extended API errors e.g=\r\n. application/vnd.andrei.error-v1&#43;json, application/vnd.andrei.error-v2=\r\n&#43;json&lt;br&gt;\nwhich of the following do you find natural?&lt;br&gt;\n&lt;br&gt;\n#1 Be sp=\r\necific about which error media-type(s) you can accept&lt;br&gt;\nGET &lt;a href=3D&quot;ht=\r\ntp://.../resource&quot;&gt;&lt;/a&gt;&lt;a href=3D&quot;http://.../resource&quot;&gt;http://.../resource&lt;=\r\n/a&gt;&lt;br&gt;\nAccept: application/vnd.andrei.some-media-type-v1&#43;json, applica=\r\ntion/vnd.andrei.error-v1&#43;json&lt;br&gt;\n=3D&gt;&lt;br&gt;\n409 CONFLICT&lt;br&gt;\nContent-=\r\nType: application/vnd.andrei.error-v1&#43;json&lt;br&gt;\n&lt;br&gt;\n#2 If the client la=\r\ncks specification of an error media-type, assume that it can process the lo=\r\nwest/highest version&lt;br&gt;\nGET &lt;a href=3D&quot;http://.../resource&quot;&gt;&lt;/a&gt;&lt;a href=3D=\r\n&quot;http://.../resource&quot;&gt;http://.../resource&lt;/a&gt;&lt;br&gt;\nAccept: application/vnd.a=\r\nndrei.some-media-type-v1&#43;json&lt;br&gt;\n=3D&gt;&lt;br&gt;\n409 CONFLICT&lt;br&gt;\nContent-=\r\nType: application/vnd.andrei.error-v2&#43;json&lt;br&gt;\n&lt;br&gt;\n#3 If the client la=\r\ncks specification of an error media-type, do not return any media-type nor =\r\npayload - just the HTTP status code&lt;br&gt;\nGET &lt;a href=3D&quot;http://.../resource&quot;=\r\n&gt;&lt;/a&gt;&lt;a href=3D&quot;http://.../resource&quot;&gt;http://.../resource&lt;/a&gt;&lt;br&gt;\nAccept: ap=\r\nplication/vnd.andrei.some-media-type-v1&#43;json&lt;br&gt;\n=3D&gt;&lt;br&gt;\n409 CONFLI=\r\nCT&lt;br&gt;\n&lt;br&gt;\nThe thing is that for #1 and #3 to take place, basho&#39;s webmachi=\r\nne for instance would have to do content-negotiation again, but only for th=\r\ne media-types defined as error media-types and without throwing a 415 MEDIA=\r\n TYPE NOT SUPPORTED.&lt;br&gt;\n&lt;br&gt;\nThank you for your time&lt;br&gt;\nAndrei&lt;br&gt;\n&lt;br&gt;\nN=\r\nB. I&#39;ve posted the above and some more comments also at &lt;a href=3D&quot;https://=\r\ngroups.google.com/forum/?hl=3Den&amp;fromgroups#&quot;&gt;\n&lt;/a&gt;&lt;a href=3D&quot;https://g=\r\nroups.google.com/forum/?hl=3Den&amp;fromgroups#&quot;&gt;https://groups.google.com/=\r\nforum/?hl=3Den&amp;fromgroups#&lt;/a&gt;!topic/api-craft/7c4unolo8Rw and I&#39;d want=\r\n to pick your brain as well&lt;br&gt;\n&lt;br&gt;\n&lt;/p&gt;\n&lt;/div&gt;\n&lt;!-- end group email --&gt;&lt;/=\r\ndiv&gt;\n&lt;/blockquote&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n\r\n--_000_0E3DB316F9DF4A1CBCF4C0842F4A179EComcastcom_--\r\n\n"}}