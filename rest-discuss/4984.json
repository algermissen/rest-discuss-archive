{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":93099516,"authorName":"Josh Sled","from":"Josh Sled &lt;jsled@...&gt;","profile":"joshsled","replyTo":"SENDER","senderId":"LB2ehQJ4m51pURrlVU9Wv4H0LCbFNcDPFJsWxza8shvOpl1jO_tm00los2R934Awh3YJQ3LsHAj9bazcK7tWGrym1qrWE9yuaA","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [rest-discuss] coding question","postDate":"1113023017","msgId":4984,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDIwMDUwNDA5MDUwMzM3LkdBMTMyOTBAcGhvZW5peC5hc3luY2hyb25vdXMub3JnPg==","inReplyToHeader":"PFBpbmUuTkVCLjQuNjIuMDUwNDA4MTgzMjU2MC4xNjUwNEBwYW5peDIucGFuaXguY29tPg==","referencesHeader":"PFBpbmUuTkVCLjQuNjIuMDUwNDA4MTgzMjU2MC4xNjUwNEBwYW5peDIucGFuaXguY29tPg=="},"prevInTopic":4983,"nextInTopic":4985,"prevInTime":4983,"nextInTime":4985,"topicId":4983,"numMessagesInTopic":14,"msgSnippet":"... [deletia] ... How about a declarative resource-space pattern mapping plus a dispatcher? HEAD /foo stripBody( getFoo() ) GET /foo getFoo() GET /foo?withArgs","rawEmail":"Return-Path: &lt;jsled@...&gt;\r\nX-Sender: jsled@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nReceived: (qmail 57948 invoked from network); 9 Apr 2005 05:03:37 -0000\r\nReceived: from unknown (66.218.66.172)\n  by m2.grp.scd.yahoo.com with QMQP; 9 Apr 2005 05:03:37 -0000\r\nReceived: from unknown (HELO phoenix.asynchronous.org) (216.114.142.253)\n  by mta4.grp.scd.yahoo.com with SMTP; 9 Apr 2005 05:03:37 -0000\r\nReceived: (qmail 13343 invoked by uid 1000); 9 Apr 2005 01:03:37 -0400\r\nDate: Sat, 9 Apr 2005 01:03:37 -0400\r\nTo: lucas@...\r\nCc: rest-discuss@yahoogroups.com\r\nMessage-ID: &lt;20050409050337.GA13290@...&gt;\r\nReferences: &lt;Pine.NEB.4.62.0504081832560.16504@...&gt;\r\nMime-Version: 1.0\r\nContent-Type: text/plain; charset=us-ascii\r\nContent-Disposition: inline\r\nIn-Reply-To: &lt;Pine.NEB.4.62.0504081832560.16504@...&gt;\r\nUser-Agent: Mutt/1.4.2.1i\r\nX-Unexpected-Header: Nobody expects the Unexpected Header!\r\nOrganization: asynchronous.org\r\nX-eGroups-Msg-Info: 1:12:0\r\nFrom: Josh Sled &lt;jsled@...&gt;\r\nSubject: Re: [rest-discuss] coding question\r\nX-Yahoo-Group-Post: member; u=93099516\r\nX-Yahoo-Profile: joshsled\r\n\r\nOn Fri, Apr 08, 2005 at 06:38:34PM -1000, Lucas Gonze wrote:\n| My resource handlers virtually all start with case statements on the \n| incoming URI and other parameters, and the amount of nesting leads to \n| unreadable code like this:\n[deletia]\n| What sort of idioms are other people using?  How do you keep the nesting \n| under control?\n\nHow about a declarative resource-space pattern mapping plus a dispatcher?\n\n  HEAD /foo stripBody( getFoo() )\n  GET /foo getFoo()\n  GET /foo?withArgs queryFoo( args )\n  POST /foo postFoo()\n  ...\n\nThough this is somewhat suited to a pretty flat resource space; some sort\nof prefixing/composing might be nice for more modular hierarchial spaces.\n\n\nDepending on how identifying the non-query-string part is, something like:\n\n  GET /foo/{id:0-9+} getFoo(id)\n  GET /foo/{fooId:0-9+}/bar/{barId:[a-zA-Z0-9]+} getBar( fooId, barId )\n\n\nThen, you can move a lot of the common handling into the dispatcher, like\nPOST-data -&gt; object mapping or GET object-&gt;XML mapping.  Plus, you can\nfigure out different ways of specifying groups of query params in the file,\nto further dispatch on the sub-type of query being done...\n\n  GET /foo?requiredArg1&requiredArg2&* fooQuery(...)\n  GET /foo?type2&* fooQuery2( ... )\n  ...\n\n...jsled\n\n-- \nhttp://asynchronous.org/jsled/ # a=jsled; b=asynchronous.org; echo ${a}@${b}\n\n"}}