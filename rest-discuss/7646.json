{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":184797058,"authorName":"Benjamin Carlyle","from":"Benjamin Carlyle &lt;benjamincarlyle@...&gt;","profile":"fuzzybsc","replyTo":"SENDER","senderId":"3s8__1LaQYOf10GrTH4PK82nZotGOf6l1xj5oxqGx68PNKJeoXP9NUJ6_Ca2clI_JWkroHtlKmhLAGffEdMsJQ7pKUWuX0MtChdFbxB7xmeraJ9xIuL9IS8","spamInfo":{"isSpam":false,"reason":"0"},"subject":"POST at most once","postDate":"1169297465","msgId":7646,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDExNjkyOTc0NjUuNTEzMC41NS5jYW1lbEBsb2NhbGhvc3QubG9jYWxkb21haW4+"},"prevInTopic":0,"nextInTopic":7650,"prevInTime":7645,"nextInTime":7647,"topicId":7646,"numMessagesInTopic":40,"msgSnippet":"G day, I have been thinking about the idempotency of POST lately, and the exchange with Steve Bjorg has prompted me to write about it. My current direction is","rawEmail":"Return-Path: &lt;benjamincarlyle@...&gt;\r\nX-Sender: benjamincarlyle@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nReceived: (qmail 95890 invoked from network); 20 Jan 2007 12:52:35 -0000\r\nReceived: from unknown (66.218.66.172)\n  by m37a.grp.scd.yahoo.com with QMQP; 20 Jan 2007 12:52:35 -0000\r\nReceived: from unknown (HELO mail12.syd.optusnet.com.au) (211.29.132.193)\n  by mta4.grp.scd.yahoo.com with SMTP; 20 Jan 2007 12:52:35 -0000\r\nReceived: from c210-49-93-69.rochd2.qld.optusnet.com.au (c210-49-93-69.rochd2.qld.optusnet.com.au [210.49.93.69])\n\tby mail12.syd.optusnet.com.au (8.13.1/8.13.1) with ESMTP id l0KCp59J017172\n\tfor &lt;rest-discuss@yahoogroups.com&gt;; Sat, 20 Jan 2007 23:51:11 +1100\r\nTo: REST Discuss &lt;rest-discuss@yahoogroups.com&gt;\r\nContent-Type: text/plain\r\nDate: Sat, 20 Jan 2007 22:51:05 +1000\r\nMessage-Id: &lt;1169297465.5130.55.camel@...&gt;\r\nMime-Version: 1.0\r\nX-Mailer: Evolution 2.6.3 \r\nContent-Transfer-Encoding: 7bit\r\nX-eGroups-Msg-Info: 1:0:0:0\r\nFrom: Benjamin Carlyle &lt;benjamincarlyle@...&gt;\r\nSubject: POST at most once\r\nX-Yahoo-Group-Post: member; u=184797058; y=_ZsD4X_OEo3r4o4QD8NRz7PXR-ino7BHOmG799xt9HcMVH4\r\nX-Yahoo-Profile: fuzzybsc\r\n\r\nG&#39;day,\n\nI have been thinking about the idempotency of POST lately, and the\nexchange with Steve Bjorg has prompted me to write about it. My current\ndirection is to treat a POST of null to a factory resource as\nidempotent.\n\nA null POST to a factory resource would create a resource that could be\nPUT to safely. Either the null POST or the PUT could be repeated safely\nif they time out. I&#39;m cautious about using the POE specification due to\nthe way that it seems to use up the POST method for the created\nresource, and doesn&#39;t really define a method for creating the temporary\nresource in the first place. Null POST idempotency seems to me to be an\nappropriate way of thinking about the problem: Add no state to be\ndemarcated by a temporary resource, then replace that null state with\nthe content I would have otherwise POSTed. The PUT also converts the\ntemporary resource into a resource with a normal lifetime.\n\nPotential issues:\n\n1. Idempotency of null POST\nMy biggest concern is about encoding the idempotency assumption into the\nclient. If it happened to be unsafe for a particular server, the client\ncould trigger unfortunate behaviour. For this reason it may be useful to\nintroduce a new method that performs this setup. I&#39;m thinking something\nlike PREPARE might be appropriate.\n\n2. Temporary Resource lifetime\nTemporary resources would need to expire after some time to allow the\nserver to reclaim memory and other... well... resources. I suggest that\na rough timer would be the simplest approach: Sweep every 40s and\ndestroy temporary resources that are still present from the last sweep.\nThe exact mechanism and timing would be up to the server.\n\n3. Temporary Resources cleaned up too soon\nThe client behaviour on seeing a 404 come back from PUT might be an\nissue. Did the PUT succeed and has the resource been destroyed by normal\nmeans, or did the resource timeout before a successful PUT? It may be\nnecessary to prevent a live resource from being converted to a 404 too\nquickly. Perhaps keeping a 410 up for at least the normal lifetime of\nthe temporary would indicate to the client that its earlier PUT was\nsuccessful. This temporary resource lifetime would have to be long\nenough to ensure all reasonable client activity worked correctly. If the\nclient sees a 404 it has no option but to return an error to its user\nindicating that it doesn&#39;t know whether the PUT occured or not.\n\n4. Overconsumption of server-side state\nThe final question is how to deal with clients that issue too many\nPREPARE requests, thereby consuming unreasonable quanitities of\nserver-side resources. It may be important to impose a maximum PREPARE\nrate based on source IP or other request characteristic.\n\nThoughts?\n\nBenjamin.\n\n\n"}}