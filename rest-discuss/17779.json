{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":69164307,"authorName":"mike amundsen","from":"mike amundsen &lt;mamund@...&gt;","profile":"mamund","replyTo":"SENDER","senderId":"2oak1A1DdJ0TzUgiD-6Ne0idBS9UtEnvUgdDFFKkGCUdxpbY0H1CWv74xJaUozcVs-Ir5yVS2W4HrGMz1_DA3q9N9b-Iw2g","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [rest-discuss] Conneg based on User-Agent","postDate":"1316157351","msgId":17779,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PENBUFdfOG01MU9DR3JURkdHT1V1WWtfTS1pVkJjalI3N1J2Q1RwPV9ua2NibUNMZHFqd0BtYWlsLmdtYWlsLmNvbT4=","inReplyToHeader":"PEE1REFBQjVGLTQ4NTAtNDYyMS05NERCLTIwN0ZBMTBCQkFDNkBub3Jkc2MuY29tPg==","referencesHeader":"PDNBRDk1QjVGLTdBNTgtNDMxMC05OTM0LTNFNkUwOTIzMjQzMUBub3Jkc2MuY29tPgk8Q0FEYkdaalpTak5vLUQ0Ym1ONU9zVEgrcmUrZ3AxMWtWeVQwLXprblRCTkVWdVZrY1RBQG1haWwuZ21haWwuY29tPgk8MEI4NDA2RjEtREU3NS00OEM4LUIzOUEtRTQ3NUEyQjEwMERGQG5vcmRzYy5jb20+CTw0MzgzNUU3RS0xMDU4LTRGNTgtQjM2OS0wOUE5RDlBNzlFMTBAZ21haWwuY29tPgk8QTVEQUFCNUYtNDg1MC00NjIxLTk0REItMjA3RkExMEJCQUM2QG5vcmRzYy5jb20+"},"prevInTopic":17778,"nextInTopic":17816,"prevInTime":17778,"nextInTime":17780,"topicId":17770,"numMessagesInTopic":13,"msgSnippet":"Jan: Not sure this is the same thing, but I have code that handles exceptions for conneg match results and those exceptions are based on UA reporting. here","rawEmail":"Return-Path: &lt;mca@...&gt;\r\nX-Sender: mca@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 27048 invoked from network); 16 Sep 2011 07:15:52 -0000\r\nX-Received: from unknown (98.137.35.162)\n  by m3.grp.sp2.yahoo.com with QMQP; 16 Sep 2011 07:15:52 -0000\r\nX-Received: from unknown (HELO mail-wy0-f181.google.com) (74.125.82.181)\n  by mta6.grp.sp2.yahoo.com with SMTP; 16 Sep 2011 07:15:52 -0000\r\nX-Received: by mail-wy0-f181.google.com with SMTP id 36so3375437wyg.12\n        for &lt;rest-discuss@yahoogroups.com&gt;; Fri, 16 Sep 2011 00:15:51 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.216.132.82 with SMTP id n60mr338003wei.35.1316157351488; Fri,\n 16 Sep 2011 00:15:51 -0700 (PDT)\r\nX-Received: by 10.216.88.148 with HTTP; Fri, 16 Sep 2011 00:15:51 -0700 (PDT)\r\nIn-Reply-To: &lt;A5DAAB5F-4850-4621-94DB-207FA10BBAC6@...&gt;\r\nReferences: &lt;3AD95B5F-7A58-4310-9934-3E6E09232431@...&gt;\n\t&lt;CADbGZjZSjNo-D4bmN5OsTH+re+gp11kVyT0-zknTBNEVuVkcTA@...&gt;\n\t&lt;0B8406F1-DE75-48C8-B39A-E475A2B100DF@...&gt;\n\t&lt;43835E7E-1058-4F58-B369-09A9D9A79E10@...&gt;\n\t&lt;A5DAAB5F-4850-4621-94DB-207FA10BBAC6@...&gt;\r\nDate: Fri, 16 Sep 2011 09:15:51 +0200\r\nX-Google-Sender-Auth: caX3JMZhEwEzxwFF-kT3ieyR4N4\r\nMessage-ID: &lt;CAPW_8m51OCGrTFGGOUuYk_M-iVBcjR77RvCTp=_nkcbmCLdqjw@...&gt;\r\nTo: Jan Algermissen &lt;jan.algermissen@...&gt;\r\nCc: Dilip Krishnan &lt;dilip.krishnan@...&gt;, Erik Mogensen &lt;erik@...&gt;, \n\tREST Discuss &lt;rest-discuss@yahoogroups.com&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: mike amundsen &lt;mamund@...&gt;\r\nSubject: Re: [rest-discuss] Conneg based on User-Agent\r\nX-Yahoo-Group-Post: member; u=69164307; y=gvcxSeOHLnv47mFXiSwWl87TeHlwjzN1iFQS-Jw2BjPm\r\nX-Yahoo-Profile: mamund\r\n\r\nJan:\n\nNot sure this is the same thing, but I have code that handles\n&quot;except=\r\nions&quot; for conneg match results and those exceptions are based\non UA reporti=\r\nng.\n\nhere are some real-world examples:\n\nWebKit conneg will always pick any=\r\n XML variant over any HTML variant\noffered. IOW, when given that chance, We=\r\nbKit conneg results in &quot;give\nme XML&quot; Turns out WebKit does not _render_ the=\r\n XML (just shows a blank\npage). I add an exception to make sure WebKit brow=\r\nsers (not\nXMLHttpRequest) get HTML if it&#39;s available.\n\nMirosoft Excel conne=\r\ng will favor HTML (assuming a table) over CSV. I\nadd an exception so that M=\r\nS-Excel clients get CSV if it is available.\n\nThere are (I think) some other=\r\ns, but those are ones that come up quite\noften and how i deal with them.\n\nm=\r\nca\nhttp://amundsen.com/blog/\nhttp://twitter.com@mamund\nhttp://mamund.com/fo=\r\naf.rdf#me\n\n\n\n\n\nOn Fri, Sep 16, 2011 at 08:30, Jan Algermissen\n&lt;jan.algermis=\r\nsen@...&gt; wrote:\n&gt;\n&gt; On Sep 16, 2011, at 5:00 AM, Dilip Krishnan wrot=\r\ne:\n&gt;\n&gt;&gt; Seems like &quot;soap&quot;-creep to me ... a la WS-addressing :)\n&gt;\n&gt; Why in =\r\nparticular?\n&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; One thing that doesn&#39;t feel right to me is the fact =\r\nthat the client is driving control flow.\n&gt;\n&gt; Is that any different from red=\r\nirecting a mobile UA to a dedicated server?\n&gt;\n&gt; ....\n&gt;\n&gt; I just remembered =\r\nthe Accept_Features header, which is somehow related: http://www.ietf.org/r=\r\nfc/rfc2295.txt\n&gt;\n&gt; Jan\n&gt;\n&gt;\n&gt;\n&gt;&gt; Also reminds of a Subbu&#39;s post on Media Typ=\r\nes, Plumbing and Democracy, in the issues that it brings up. I do like the =\r\nparametrized media types but its not widely supported; (atleast the last ti=\r\nme I checked)\n&gt;&gt;\n&gt;&gt; Regards,\n&gt;&gt; Dilip Krishnan\n&gt;&gt; dilip.krishnan@...\n=\r\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; On Sep 15, 2011, at 5:46 PM, Jan Algermissen wrote:\n&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; =\r\nOn Sep 16, 2011, at 12:20 AM, Erik Mogensen wrote:\n&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; On Thu, Sep 15,=\r\n 2011 at 7:54 PM, Jan Algermissen &lt;jan.algermissen@...&gt; wrote:\n&gt;&gt;&gt;&gt; =\r\nI think using the UserAgent header to negotiate representation features is =\r\na nice solution for non-human targeted situations, too. Essentially this me=\r\nans to negotiate incompatible media types based on Accept and the compatibl=\r\ne variations in a given media type based on UserAgent. This might include t=\r\nhe addition of certain Link headers.\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; I agree with the &quot;Avoid avoi=\r\nd&quot; here. =A0It sounds a lot like out-of-band knowledge, and in the opposite=\r\n direction than is usual. =A0&quot;I know that V3.1.3 of FooClient doesn&#39;t use t=\r\nhe xyzzy link relation, so I&#39;ll just save bandwidth by not sending it&quot;. =A0=\r\nThe server could end up with a large amount of knowledge. =A0See wurfl for =\r\nan example of this going bad.\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Why not stick to Accept (which is t=\r\nhat it&#39;s for) and use media type parameters?\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Accept: application/=\r\nprocurement;hypermediacontrols=3Dnew;q=3D1, application/procurement;hyperme=\r\ndiacontrols=3Dold;q=3D0.3\n&gt;&gt;&gt;\n&gt;&gt;&gt; Been there, done that :-) Too enteprisey =\r\nfor my taste. Leads to packaging up feature sets into version numbers. I&#39;d =\r\nalways let the Accept express the general capability of the client. (Which =\r\nI read as: &quot;If you hand me application/atom I am pretty sure I can fulfill =\r\nmy user&#39;s intent from there&quot;) Versioning makes the whole elegance go away :=\r\n-)\n&gt;&gt;&gt;\n&gt;&gt;&gt; I was thinking more in terms of &#39;hints&#39; or &#39;best effort&#39;. Sendin=\r\ng mobile devices different content (incl. bu way of a redirect) seems ok. S=\r\no why not &quot;direct that old legacy product we sold 5 years ago to that old (=\r\nset of) servers we keep around for these cases&quot;?\n&gt;&gt;&gt;\n&gt;&gt;&gt; My original issue,=\r\n BTW, was routing requests in a load balancer to direct clients that need a=\r\n new feature to those services that have the new feature installed and are =\r\nalready up and running. In general: situations where you have scaled to N s=\r\nervices behind one IP that run different versions of a service (e.g. becaus=\r\ne they are being upgraded one by one while keeping the site in operation).\n=\r\n&gt;&gt;&gt;\n&gt;&gt;&gt; Jan\n&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; &quot;new&quot; and &quot;old&quot; are obviously bad choices, but yo=\r\nu get the idea. =A0That way the media type can express the different &quot;varia=\r\nnts&quot; within compatibility, and clients can express their capabilities in a =\r\nheader designed for conneg. =A0Evolvability FTW!\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; --\n&gt;&gt;&gt;&gt; -=\r\nmogsie-\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; ------------------------------------\n&gt;&gt;&gt;\n&gt;&gt;&gt; Yahoo!=\r\n Groups Links\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;\n&gt;\n&gt;\n&gt; --------------------------------=\r\n----\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt;\n\n"}}