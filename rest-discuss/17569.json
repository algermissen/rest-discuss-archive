{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":266460716,"authorName":"Eric J. Bowman","from":"&quot;Eric J. Bowman&quot; &lt;eric@...&gt;","replyTo":"SENDER","senderId":"FXDBq6cicZY1-AyK4pBfehiKHHmhdR-M4TXVPqNksCErxcjXbUqmJu-_YA1RigRWEOx_B7T1cF72vqIFXwYh9t4io-_5L0n_ta_ZrR_EOw","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [rest-discuss] Paging Atom Feeds for Business Events","postDate":"1307562530","msgId":17569,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDIwMTEwNjA4MTM0ODUwLjRkNmFhNGU0LmVyaWNAYmlzb25zeXN0ZW1zLm5ldD4=","inReplyToHeader":"PDY4MzQwMS4yODkyNS5xbUB3ZWIxMTA3MTYubWFpbC5ncTEueWFob28uY29tPg==","referencesHeader":"PDY4MzQwMS4yODkyNS5xbUB3ZWIxMTA3MTYubWFpbC5ncTEueWFob28uY29tPg=="},"prevInTopic":17567,"nextInTopic":17570,"prevInTime":17568,"nextInTime":17570,"topicId":17567,"numMessagesInTopic":5,"msgSnippet":"... Bear in mind as I answer, I have different requirements; I acknowledge up-front that what I have to say may not apply to your situation.  But, I do agree","rawEmail":"Return-Path: &lt;eric@...&gt;\r\nX-Sender: eric@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 42424 invoked from network); 8 Jun 2011 19:49:13 -0000\r\nX-Received: from unknown (66.196.94.105)\n  by m16.grp.re1.yahoo.com with QMQP; 8 Jun 2011 19:49:13 -0000\r\nX-Received: from unknown (HELO mxout-08.mxes.net) (216.86.168.183)\n  by mta1.grp.re1.yahoo.com with SMTP; 8 Jun 2011 19:49:13 -0000\r\nX-Received: from bigbison (unknown [65.117.211.162])\n\t(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))\n\t(No client certificate requested)\n\tby smtp.mxes.net (Postfix) with ESMTPSA id 02CF7509F1;\n\tWed,  8 Jun 2011 15:49:12 -0400 (EDT)\r\nDate: Wed, 8 Jun 2011 13:48:50 -0600\r\nTo: Bryan Taylor &lt;bryan_w_taylor@...&gt;\r\nCc: rest-discuss@yahoogroups.com\r\nMessage-Id: &lt;20110608134850.4d6aa4e4.eric@...&gt;\r\nIn-Reply-To: &lt;683401.28925.qm@...&gt;\r\nReferences: &lt;683401.28925.qm@...&gt;\r\nOrganization: Bison Systems Corporation\r\nX-Mailer: Sylpheed 3.1.1 (GTK+ 2.10.14; i686-pc-mingw32)\r\nMime-Version: 1.0\r\nContent-Type: text/plain; charset=US-ASCII\r\nContent-Transfer-Encoding: 7bit\r\nFrom: &quot;Eric J. Bowman&quot; &lt;eric@...&gt;\r\nSubject: Re: [rest-discuss] Paging Atom Feeds for Business Events\r\nX-Yahoo-Group-Post: member; u=266460716\r\n\r\nBryan Taylor wrote:\n&gt;\n&gt; At my company, we are trying to find RESTful solutions to replace\n&gt; business eventing techniques. I wanted to describe our approach and\n&gt; the thought process to get there and get feedback from the group.\n&gt; \n\nBear in mind as I answer, I have different requirements; I acknowledge\nup-front that what I have to say may not apply to your situation.  But,\nI do agree that dealing with pagination is a bitch and a half.\n\n&gt;\n&gt; We&#39;ve focussed on using atom and/or atompub for this, but I think the\n&gt; issues I&#39;m about to describe would be the same if we rolled our own\n&gt; collection mechanism.\n&gt;\n\nYes.  In my case, the problem is synchronizing an HTML front-end&#39;s\npagination with the pagination of underlying Atom feeds, when presenting\nin ascending order via HTML.\n\n&gt; \n&gt; However, our servers still had to come up with URI schemes that allow\n&gt; them to understand what was requested. People tried several\n&gt; mechanisms. The first try was the ?page=$pagenumber way. I think this\n&gt; basically fails (it works for labeling static archives only), because\n&gt; the meaning of &quot;page=3&quot; isn&#39;t stateless when your first page shows\n&gt; the most recent entries.\n&gt;\n\nMy way, from the page showing the most-recent entries, rel=&#39;first&#39;\npoints to itself; @href for rel=&#39;last&#39; ends in ?page=1 if there are\nmultiple pages, and may also be rel=&#39;prev&#39; if there are only two pages.\nThe entry point doesn&#39;t have to be ?page=1, and there&#39;s nothing wrong\nwith ?page=1 returning 404 until it&#39;s created by necessity.\n\nThe link relations&#39; meanings stay constant, but the target URIs change\nover time.  When dynamically updating new posts (as opposed to reloading\nthe page), HEAD requests are used in conjunction with eTag to keep the\nUI synchronized with the server&#39;s pagination using the Link header.\n\nNavigating back to the most-recent entries is as simple as following\nrel=&#39;first&#39; from any other page in the collection.  The problem is rel=\n&#39;next|prev&#39; -- if you&#39;re on ?page=1, but no ?page=2 existed when the\ncurrent page was generated, rel=&#39;next&#39; points back to the latest-\nentries page; or, from the latest-entries page, rel=&#39;prev&#39; targets \n?page=1 because the server hadn&#39;t minted ?page=2 when it was generated.\n\nThe solution is 307 redirects, point rel=&#39;next&#39; at ?page=next and it\nwill work for any user-agent sending REFERER, with graceful degradation\ntargeting the latest-entries page for those user-agents which don&#39;t.\nFor rel=&#39;prev&#39; subtract 1 from REFERER when ?page=prev is requested,\nwith the assumption that only the latest-entries page needs it (rel=\n&#39;prev&#39; should target ?page=x in the HTML, but the server should be more\nliberal in what it accepts), if REFERER is not sent.\n\n&gt;\n&gt; There&#39;s a nice edge case where we view entries 1-100 on ?page=1 and\n&gt; if exactly 100 entries arrive as we stare at it, then when we\n&gt; resolve ?page=2, then surprise, we get the same entries again.\n&gt;\n\nThat doesn&#39;t happen if you reverse the numbering of your pages in your\nURIs, as I have.  There&#39;s nothing in Atom / AtomPub constraining in\nwhat order URIs are minted, only the order of entries.  My problem\ncomes when deleting entries -- if it causes a page delete, then that\npage&#39;s URI should go 410, or 307-redirect to the previous page (thus\nkeeping fragments intact).  Once a page has its own rel=&#39;next&#39; the\ntarget of rel=&#39;prev&#39; could be changed from ?page=prev to ?page={-1}.\n\n&gt;\n&gt; Then people tried offset and pagesize parameters, but again the offset\n&gt; breaks when we do things the atom way and order entries in descending\n&gt; edit date order. The same pathological case shows how this fails too.\n&gt; \n\nMy reason for not pursuing such parameters is degradation of cache-hit\nratio.  Pick one or two paginations for the system -- this is one of\nthose &quot;drawbacks&quot; to REST which is really a reflection of the realities\nof how cache retention algorithms work in the real world, and is better\nthan having to choose between no pagination or no public caching.\n\n&gt;\n&gt; Finally, we settled on the &quot;mark method&quot; for paging, where we\n&gt; construct a &quot;next&quot; page by using a ?before=$oldest parameter where\n&gt; $oldest is the unique key value for the oldest entry on the page we\n&gt; just showed...\n&gt;\n\nInteresting, but my devil&#39;s-advocate question is, is it worth all that\ntrouble to make your toilets flush in the &quot;proper, American direction&quot;\n(see Simpsons episode, &quot;Bart vs. Australia&quot;)?\n\n&gt; \n&gt; But repeated polling of previous links gives clients a way to get\n&gt; guaranteed in-order delivery.\n&gt;\n\nYou may have already answered my last question, but I&#39;d need to be more\nfamiliar with your use-case to know.\n\n-Eric\n\n"}}