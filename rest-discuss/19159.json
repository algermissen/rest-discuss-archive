{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":69164307,"authorName":"mike amundsen","from":"mike amundsen &lt;mamund@...&gt;","profile":"mamund","replyTo":"SENDER","senderId":"qIIThC8pJ3TYqeUZlBVidX2TYNKVTvt7r6xanG1VpdV9IoXIbvQJKs1y-fx0nWMk4l9joP1qGjsJLX28nmDhNLELCsdNpQ0","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Fwd: [rest-discuss] How to identify existing resource in a POST(a) request","postDate":"1351343887","msgId":19159,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PENBUFdfOG03MXE5Vld5Y3BZaHIzRzM2SEJtRW9CYVZTekprRTYtaUsrbjZzT2NXUGppZ0BtYWlsLmdtYWlsLmNvbT4=","inReplyToHeader":"PENBUFdfOG02cWhDbXpQRWtyd2kyYU5pZVM5cHFRaWs0eUVTd3NSclp6MDdqRHJlYjgwUUBtYWlsLmdtYWlsLmNvbT4=","referencesHeader":"PDJBMzdCNkIwLTgzMzUtNDQzRS1BM0ZFLTU4ODBGNDU4NkYzN0BsaW5lb25lLm5ldD4gPDUwOGFkY2FlLjkzYzVkODBhLjBiYTIuZmZmZmNmOGFTTVRQSU5fQURERURAbXguZ29vZ2xlLmNvbT4gPEI3RTNCMzIwLTJGNDItNEY1Mi05REY5LTJBRUU4MEIyMDE4OEBsaW5lb25lLm5ldD4gPENBUFdfOG02cWhDbXpQRWtyd2kyYU5pZVM5cHFRaWs0eUVTd3NSclp6MDdqRHJlYjgwUUBtYWlsLmdtYWlsLmNvbT4="},"prevInTopic":0,"nextInTopic":0,"prevInTime":19158,"nextInTime":19160,"topicId":19159,"numMessagesInTopic":1,"msgSnippet":"Paul:  My question is really regarding whether use of the Referer header is a sensible way to identify the URI of the representation that initiated the","rawEmail":"Return-Path: &lt;mca@...&gt;\r\nX-Sender: mca@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 37134 invoked from network); 27 Oct 2012 13:18:27 -0000\r\nX-Received: from unknown (98.137.34.45)\n  by m14.grp.sp2.yahoo.com with QMQP; 27 Oct 2012 13:18:27 -0000\r\nX-Received: from unknown (HELO mail-vb0-f52.google.com) (209.85.212.52)\n  by mta2.grp.sp2.yahoo.com with SMTP; 27 Oct 2012 13:18:27 -0000\r\nX-Received: by mail-vb0-f52.google.com with SMTP id k17so2594085vbj.25\n        for &lt;rest-discuss@yahoogroups.com&gt;; Sat, 27 Oct 2012 06:18:27 -0700 (PDT)\r\nX-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;\n        d=google.com; s=20120113;\n        h=mime-version:sender:in-reply-to:references:from:date\n         :x-google-sender-auth:message-id:subject:to:content-type\n         :x-gm-message-state;\n        bh=dHM7EkAkSb3P4nm++tF5R2mRRCJuSXkAwJVWYjU8ym4=;\n        b=XjwPls4WRptqAP1uy29UtqhVczbVx0utPoTEDOTQjQrO8TAc/YFaqVZzUotY4XsAqA\n         cOab03lQt1YdKfYCp6S7Qu2GGnMWbAlVNLwQZCh3TIA7lpox/W4120Xh/Qg0IA9CXvde\n         awWs+qq0yu6sxpD+LIuKXRNgDn9dMlNccnPBBozp+zhC7G0Uk6dyBoRr6TomLpoLQOSk\n         FD10DYuy2YgjhxHBAGhcB3QuolXnmYP27ffMvI6A4IsQq518HI+mF8likgjQIHbjyGLR\n         MnCqm8CE5OYEfRqW20nM9Vn1iZ22vXUyEwM2jYx7no/g6z8EqoIDe2cucJNRSqiliKi3\n         je3w==\r\nX-Received: by 10.52.67.44 with SMTP id k12mr33024233vdt.15.1351343907251; Sat,\n 27 Oct 2012 06:18:27 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.58.203.167 with HTTP; Sat, 27 Oct 2012 06:18:07 -0700 (PDT)\r\nIn-Reply-To: &lt;CAPW_8m6qhCmzPEkrwi2aNieS9pqQik4yESwsRrZz07jDreb80Q@...&gt;\r\nReferences: &lt;2A37B6B0-8335-443E-A3FE-5880F4586F37@...&gt;\n &lt;508adcae.93c5d80a.0ba2.ffffcf8aSMTPIN_ADDED@...&gt;\n &lt;B7E3B320-2F42-4F52-9DF9-2AEE80B20188@...&gt; &lt;CAPW_8m6qhCmzPEkrwi2aNieS9pqQik4yESwsRrZz07jDreb80Q@...&gt;\r\nDate: Sat, 27 Oct 2012 09:18:07 -0400\r\nX-Google-Sender-Auth: Vt4TqVO5s9_3vQMIayhChfWYsO4\r\nMessage-ID: &lt;CAPW_8m71q9VWycpYhr3G36HBmEoBaVSzJkE6-iK+n6sOcWPjig@...&gt;\r\nTo: rest-discuss &lt;rest-discuss@yahoogroups.com&gt;\r\nContent-Type: multipart/alternative; boundary=20cf307abeb58fa68b04cd0a4516\r\nX-Gm-Message-State: ALoCoQn7cwbfvOmrT5TyWJpHGerv6ea/Lbu38yCDzEsJDYpT+UJvmgKQJ1FuDINFM+5IjRboiuPl\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: mike amundsen &lt;mamund@...&gt;\r\nSubject: Fwd: [rest-discuss] How to identify existing resource in a POST(a) request\r\nX-Yahoo-Group-Post: member; u=69164307; y=Te8VfHFER4M0hQPU8f5UKuHlm0K4OqkAKrojdj-ezt5z\r\nX-Yahoo-Profile: mamund\r\n\r\n\r\n--20cf307abeb58fa68b04cd0a4516\r\nContent-Type: text/plain; charset=windows-1252\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nPaul:\n\n&lt;snip&gt;\nMy question is really regarding whether use of the &#39;Referer&#39; =\r\nheader is a\nsensible way to identify the URI of the representation that ini=\r\ntiated the\nrequest.  Additionally, whilst I note some security concerns in =\r\nRFC 2616, I\nsee no reference to &#39;Referer&#39; being restricted to any &quot;last pag=\r\ne&quot; notion.\n Whilst the &quot;referer as last-page&quot; scenario may an artefact of s=\r\nome web\nusage patterns, I don&#39;t think HTTP constrains it in this way.\n&lt;/sni=\r\np&gt;\n\nI recommend you do not implement your server such that is has a depende=\r\nncy\non the Refer header when processing a request. Consider the possibility=\r\n\nthat someone might bookmark a link and then start a new session w/ that\nli=\r\nnk (no refer). Also consider cases where the client application\n(user-agent=\r\n) does not provide a refer header.\n\nFinally consider the case where someone=\r\n discovers your use of refer in this\nway and uses that as a way to craft in=\r\ntentionally invalid requests to run\nagainst your server.\n\n\n\nmca\n+1.859.757.=\r\n1449\nskype: mca.amundsen\nhttp://amundsen.com/blog/\nhttp://twitter.com/mamun=\r\nd\nhttps://github.com/mamund\nhttp://www.linkedin.com/in/mikeamundsen\n\n\n\n\nOn =\r\nSat, Oct 27, 2012 at 8:53 AM, Paul Moore &lt;paul.k.moore@...&gt;wrote:\n\n=\r\n&gt;\n&gt;\n&gt; Markus,\n&gt;\n&gt; Thanks for the response.\n&gt;\n&gt; With regard to your &#39;URI per=\r\n representation&#39; dilemma, this is (as you\n&gt; suggest) a separate problem.\n&gt;\n=\r\n&gt; From my perspective, by declaring &#39;.../1.json&#39; and &#39;.../1.xml&#39; two\n&gt; sepa=\r\nrate resources have been defined.  There is no *need* to define a URI\n&gt; per=\r\n representation in this manner, as we have &#39;Content-Type&#39; and &#39;Accept&#39;\n&gt; he=\r\naders to deal with that.  The resource is simply &#39;.../1&#39; (or whatever)\n&gt; an=\r\nd it *may* have multiple representations (one per media type).\n&gt;  Irrespect=\r\nive, if a system (designer) chooses to make two (or more) URIs\n&gt; available =\r\nfor the same resource, then they are obliged to manage the\n&gt; &#39;mapping&#39; of m=\r\nultiple URIs back to the (canonical) resource.  Returning to\n&gt; your example=\r\n the &#39;self link&#39; for &#39;.../1.json&#39; should be to &#39;.../1.json&#39; -\n&gt; it&#39;s a serv=\r\ner responsibility to understand that &#39;.../1.json&#39; maps to\n&gt; resource &#39;1&#39;.  =\r\nThis is not an interface, but an implementation concern.\n&gt;\n&gt; My question is=\r\n really regarding whether use of the &#39;Referer&#39; header is a\n&gt; sensible way t=\r\no identify the URI of the representation that initiated the\n&gt; request.  Add=\r\nitionally, whilst I note some security concerns in RFC 2616, I\n&gt; see no ref=\r\nerence to &#39;Referer&#39; being restricted to any &quot;last page&quot; notion.\n&gt;  Whilst t=\r\nhe &quot;referer as last-page&quot; scenario may an artefact of some web\n&gt; usage patt=\r\nerns, I don&#39;t think HTTP constrains it in this way.\n&gt;\n&gt; Best regards\n&gt;\n&gt; Pa=\r\nul\n&gt;\n&gt; On 26 Oct 2012, at 18:50, Markus Lanthaler wrote:\n&gt;\n&gt; Paul,\n&gt;\n&gt; on t=\r\nhe Web resources  are identified by URIs, so that leaves us with your\n&gt; opt=\r\nions 2 and 3. I don=92t really see the problems you outline there but a\n&gt; d=\r\nifferent one. What if a system assigns multiple URLs to access the same\n&gt; r=\r\nesource but different representations thereof? For instance\n&gt; example.com/p=\r\nersons/1.json and example.com/persons/1.xml? Both return\n&gt; representations =\r\nof the same resource and both would likely contain just\n&gt; those URLs in the=\r\n self-link. So the right link relation to use would be\n&gt; canonical [1] and =\r\nnot self. That link can then either be embedded directly\n&gt; embedded into th=\r\ne representations or served as an HTTP link header [2].\n&gt; Using the referre=\r\nr won&#39;t work as that&#39;s the page that a user agent visited\n&gt; last which migh=\r\nt has nothing to do with that resource it is POSTing.\n&gt;\n&gt; Hope this helps,\n=\r\n&gt; Markus\n&gt;\n&gt;\n&gt; [1] http://tools.ietf.org/html/rfc6596\n&gt; [2] http://tools.ie=\r\ntf.org/html/rfc5988\n&gt;\n&gt;\n&gt; --\n&gt; Markus Lanthaler\n&gt; @markuslanthaler\n&gt;\n&gt;\n&gt;\n&gt;\n=\r\n&gt; \n&gt;\n\r\n--20cf307abeb58fa68b04cd0a4516\r\nContent-Type: text/html; charset=windows-1252\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nPaul:&lt;br&gt;&lt;div class=3D&quot;gmail_quote&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;snip&gt;&lt;/div&gt;&lt;=\r\ndiv class=3D&quot;im&quot;&gt;&lt;div&gt;&lt;div&gt;My question is really regarding whether use of t=\r\nhe &#39;Referer&#39; header is a sensible way to identify the URI of the re=\r\npresentation that initiated the request. =A0Additionally, whilst I note som=\r\ne security concerns in RFC 2616, I see no reference to &#39;Referer&#39; be=\r\ning restricted to any &quot;last page&quot; notion. =A0Whilst the &quot;ref=\r\nerer as last-page&quot; scenario may an artefact of some web usage patterns=\r\n, I don&#39;t think HTTP constrains it in this way.&lt;/div&gt;\n\n\n&lt;/div&gt;&lt;/div&gt;&lt;di=\r\nv&gt;&lt;/snip&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I recommend you do not implement y=\r\nour server such that is has a dependency on the Refer header when processin=\r\ng a request. Consider the possibility that someone might bookmark a link an=\r\nd then start a new session w/ that link (no refer). Also consider cases whe=\r\nre the client application (user-agent) does not provide a refer header.&lt;/di=\r\nv&gt;\n\n\n&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Finally consider the case where someone discovers =\r\nyour use of refer in this way and uses that as a way to craft intentionally=\r\n invalid requests to run against your server.&lt;/div&gt;&lt;span class=3D&quot;HOEnZb&quot;&gt;&lt;=\r\nfont color=3D&quot;#888888&quot;&gt;&lt;div&gt;\n\n&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;\n&lt;/font&gt;&lt;/span&gt;&lt;div&gt;=\r\n&lt;span class=3D&quot;HOEnZb&quot;&gt;&lt;font color=3D&quot;#888888&quot;&gt;&lt;br clear=3D&quot;all&quot;&gt;mca&lt;div&gt;&lt;a=\r\n href=3D&quot;tel:%2B1.859.757.1449&quot; value=3D&quot;+18597571449&quot; target=3D&quot;_blank&quot;&gt;+1=\r\n.859.757.1449&lt;/a&gt;&lt;br&gt;skype: mca.amundsen&lt;br&gt;&lt;a href=3D&quot;http://amundsen.com/=\r\nblog/&quot; target=3D&quot;_blank&quot;&gt;http://amundsen.com/blog/&lt;/a&gt;&lt;br&gt;\n\n&lt;a href=3D&quot;http=\r\n://twitter.com/mamund&quot; target=3D&quot;_blank&quot;&gt;http://twitter.com/mamund&lt;/a&gt;&lt;br&gt;\n=\r\n&lt;a href=3D&quot;https://github.com/mamund&quot; target=3D&quot;_blank&quot;&gt;https://github.com/=\r\nmamund&lt;/a&gt;&lt;br&gt;&lt;a href=3D&quot;http://www.linkedin.com/in/mikeamundsen&quot; target=3D=\r\n&quot;_blank&quot;&gt;http://www.linkedin.com/in/mikeamundsen&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/font&gt;&lt;/=\r\nspan&gt;&lt;div&gt;\n\n&lt;div class=3D&quot;h5&quot;&gt;&lt;br&gt;\n&lt;br&gt;&lt;br&gt;&lt;div class=3D&quot;gmail_quote&quot;&gt;On Sa=\r\nt, Oct 27, 2012 at 8:53 AM, Paul Moore &lt;span dir=3D&quot;ltr&quot;&gt;&lt;&lt;a href=3D&quot;mai=\r\nlto:paul.k.moore@...&quot; target=3D&quot;_blank&quot;&gt;paul.k.moore@...&lt;/a=\r\n&gt;&gt;&lt;/span&gt; wrote:&lt;br&gt;&lt;blockquote class=3D&quot;gmail_quote&quot; style=3D&quot;margin:0 =\r\n0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex&quot;&gt;\n\n\n\n\n\n\n\n\n\n        \n&lt;d=\r\niv style=3D&quot;word-wrap:break-word&quot;&gt;\n\n\n\n\n&lt;br&gt;&lt;br&gt;\n\n\n\n\nMarkus,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;=\r\ndiv&gt;Thanks for the response.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;With regard to your &=\r\n#39;URI per representation&#39; dilemma, this is (as you suggest) a separat=\r\ne problem.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;From my perspective, by declaring &#39;=\r\n.../1.json&#39; and &#39;.../1.xml&#39; two separate resources have been de=\r\nfined. =A0There is no *need* to define a URI per representation in this man=\r\nner, as we have &#39;Content-Type&#39; and &#39;Accept&#39; headers to deal=\r\n with that. =A0The resource is simply &#39;.../1&#39; (or whatever) and it =\r\n*may* have multiple representations (one per media type). =A0Irrespective, =\r\nif a system (designer) chooses to make two (or more) URIs available for the=\r\n same resource, then they are obliged to manage the &#39;mapping&#39; of mu=\r\nltiple URIs back to the (canonical) resource. =A0Returning to your example =\r\nthe &#39;self link&#39; for &#39;.../1.json&#39; should be to &#39;.../1.js=\r\non&#39; - it&#39;s a server responsibility to understand that &#39;.../1.js=\r\non&#39; maps to resource &#39;1&#39;. =A0This is not an interface, but an i=\r\nmplementation concern.&lt;/div&gt;\n\n\n&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My question is really re=\r\ngarding whether use of the &#39;Referer&#39; header is a sensible way to id=\r\nentify the URI of the representation that initiated the request. =A0Additio=\r\nnally, whilst I note some security concerns in RFC 2616, I see no reference=\r\n to &#39;Referer&#39; being restricted to any &quot;last page&quot; notion.=\r\n =A0Whilst the &quot;referer as last-page&quot; scenario may an artefact of=\r\n some web usage patterns, I don&#39;t think HTTP constrains it in this way.=\r\n&lt;/div&gt;\n\n\n&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Best regards&lt;/div&gt;&lt;span&gt;&lt;font color=3D&quot;#888888=\r\n&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Paul&lt;/div&gt;&lt;/font&gt;&lt;/span&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div=\r\n&gt;&lt;div&gt;On 26 Oct 2012, at 18:50, Markus Lanthaler wrote:&lt;/div&gt;\n&lt;br&gt;&lt;blockquo=\r\nte type=3D&quot;cite&quot;&gt;&lt;span style=3D&quot;border-collapse:separate;font-family:Helvet=\r\nica;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing=\r\n:normal;line-height:normal;text-align:-webkit-auto;text-indent:0px;text-tra=\r\nnsform:none;white-space:normal;word-spacing:0px;font-size:medium&quot;&gt;Paul,&lt;br&gt;=\r\n\n\n\n&lt;br&gt;on the Web resources =A0are identified by URIs, so that leaves us wi=\r\nth your&lt;br&gt;options 2 and 3. I don=92t really see the problems you outline t=\r\nhere but a&lt;br&gt;different one. What if a system assigns multiple URLs to acce=\r\nss the same&lt;br&gt;\n\n\nresource but different representations thereof? For insta=\r\nnce&lt;br&gt;&lt;a href=3D&quot;http://example.com/persons/1.json&quot; target=3D&quot;_blank&quot;&gt;exam=\r\nple.com/persons/1.json&lt;/a&gt;&lt;span&gt;=A0&lt;/span&gt;and&lt;span&gt;=A0&lt;/span&gt;&lt;a href=3D&quot;htt=\r\np://example.com/persons/1.xml?&quot; target=3D&quot;_blank&quot;&gt;example.com/persons/1.xml=\r\n?&lt;/a&gt;&lt;span&gt;=A0&lt;/span&gt;Both return&lt;br&gt;\n\n\nrepresentations of the same resource=\r\n and both would likely contain just&lt;br&gt;those URLs in the self-link. So the =\r\nright link relation to use would be&lt;br&gt;canonical [1] and not self. That lin=\r\nk can then either be embedded directly&lt;br&gt;\n\n\nembedded into the representati=\r\nons or served as an HTTP link header [2].&lt;br&gt;Using the referrer won&#39;t w=\r\nork as that&#39;s the page that a user agent visited&lt;br&gt;last which might ha=\r\ns nothing to do with that resource it is POSTing.&lt;br&gt;\n\n\n&lt;br&gt;Hope this helps=\r\n,&lt;br&gt;Markus&lt;br&gt;&lt;br&gt;&lt;br&gt;[1]&lt;span&gt;=A0&lt;/span&gt;&lt;a href=3D&quot;http://tools.ietf.org/=\r\nhtml/rfc6596&quot; target=3D&quot;_blank&quot;&gt;http://tools.ietf.org/html/rfc6596&lt;/a&gt;&lt;br&gt;[=\r\n2]&lt;span&gt;=A0&lt;/span&gt;&lt;a href=3D&quot;http://tools.ietf.org/html/rfc5988&quot; target=3D&quot;=\r\n_blank&quot;&gt;http://tools.ietf.org/html/rfc5988&lt;/a&gt;&lt;br&gt;\n\n\n&lt;br&gt;&lt;br&gt;--&lt;br&gt;Markus L=\r\nanthaler&lt;br&gt;@markuslanthaler&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;\n\n\n\n\n\n&lt;br&gt;\n=\r\n\n    \n    \n&lt;br&gt;\n\n\n\n\n&lt;div width=3D&quot;1&quot; style=3D&quot;color:white;clear:both&quot;&gt;&lt;/div=\r\n&gt;&lt;/div&gt;\n&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;/div&gt;&lt;br&gt;\n\r\n--20cf307abeb58fa68b04cd0a4516--\r\n\n"}}