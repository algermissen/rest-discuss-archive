{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":331949899,"authorName":"Sebastien Lambla","from":"Sebastien Lambla &lt;seb@...&gt;","profile":"serialseb","replyTo":"SENDER","senderId":"Ip-Hq4BCa_BnIVWXznUEquJ-DGz4-LQwAdh_dtQ0IzjGTNIOxoMbZxWflEXPAw7uyXAsS84bm_vXLhCIF9x94rfCzx-0sL3226nE","spamInfo":{"isSpam":false,"reason":"3"},"subject":"RE: [rest-discuss] Conneg based on User-Agent","postDate":"1317239002","msgId":17820,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDNEREQwQkU2NTU4NjlENEVBNTA2NjUyQjM4MDNBRUY2OENBMjEzRjZAUFJJU00uY2FmZmVpbmUtaXQubmV0Pg==","inReplyToHeader":"PENBUFdfOG00US1mNDFHUG5LWE1hY0tNQ085MkFQemY9WXBCNkRhZTNZcFBfRm10QmJpZ0BtYWlsLmdtYWlsLmNvbT4=","referencesHeader":"PDNBRDk1QjVGLTdBNTgtNDMxMC05OTM0LTNFNkUwOTIzMjQzMUBub3Jkc2MuY29tPgk8Q0FEYkdaalpTak5vLUQ0Ym1ONU9zVEgrcmUrZ3AxMWtWeVQwLXprblRCTkVWdVZrY1RBQG1haWwuZ21haWwuY29tPgk8MEI4NDA2RjEtREU3NS00OEM4LUIzOUEtRTQ3NUEyQjEwMERGQG5vcmRzYy5jb20+CTw0MzgzNUU3RS0xMDU4LTRGNTgtQjM2OS0wOUE5RDlBNzlFMTBAZ21haWwuY29tPgk8QTVEQUFCNUYtNDg1MC00NjIxLTk0REItMjA3RkExMEJCQUM2QG5vcmRzYy5jb20+CTxDQVBXXzhtNTFPQ0dyVEZHR09VdVlrX00taVZCY2pSNzdSdkNUcD1fbmtjYm1DTGRxandAbWFpbC5nbWFpbC5jb20+CTwzREREMEJFNjU1ODY5RDRFQTUwNjY1MkIzODAzQUVGNjhDQTIxMzk2QFBSSVNNLmNhZmZlaW5lLWl0Lm5ldD4gPENBUFdfOG00US1mNDFHUG5LWE1hY0tNQ085MkFQemY9WXBCNkRhZTNZcFBfRm10QmJpZ0BtYWlsLmdtYWlsLmNvbT4="},"prevInTopic":17819,"nextInTopic":0,"prevInTime":17819,"nextInTime":17821,"topicId":17770,"numMessagesInTopic":13,"msgSnippet":"Ah ok, not tested that scenario, any xhtml usually has html and xhtml conneg d on the server, with the html having a heavier weight so that anyone sending in","rawEmail":"Return-Path: &lt;seb@...&gt;\r\nX-Sender: seb@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 72323 invoked from network); 28 Sep 2011 19:43:25 -0000\r\nX-Received: from unknown (98.137.34.46)\n  by m15.grp.sp2.yahoo.com with QMQP; 28 Sep 2011 19:43:25 -0000\r\nX-Received: from unknown (HELO prism.caffeine-it.net) (109.169.48.57)\n  by mta3.grp.sp2.yahoo.com with SMTP; 28 Sep 2011 19:43:24 -0000\r\nX-Received: from PRISM.caffeine-it.net ([fe80::35e4:b04c:7dd0:3207]) by\n PRISM.caffeine-it.net ([fe80::35e4:b04c:7dd0:3207%14]) with mapi; Wed, 28 Sep\n 2011 20:43:23 +0100\r\nTo: mike amundsen &lt;mamund@...&gt;\r\nCc: Jan Algermissen &lt;jan.algermissen@...&gt;, Dilip Krishnan\n\t&lt;dilip.krishnan@...&gt;, Erik Mogensen &lt;erik@...&gt;, REST Discuss\n\t&lt;rest-discuss@yahoogroups.com&gt;\r\nThread-Topic: [rest-discuss] Conneg based on User-Agent\r\nThread-Index: AQHMc9CGwTBo024d1EKR4JnTk9C+KJVO8wqAgAAHNYCAAEbUgIAAOqiAgAAMzoCAE7KrMP//+TkAgAAQ4WA=\r\nDate: Wed, 28 Sep 2011 19:43:22 +0000\r\nMessage-ID: &lt;3DDD0BE655869D4EA506652B3803AEF68CA213F6@...-it.net&gt;\r\nReferences: &lt;3AD95B5F-7A58-4310-9934-3E6E09232431@...&gt;\n\t&lt;CADbGZjZSjNo-D4bmN5OsTH+re+gp11kVyT0-zknTBNEVuVkcTA@...&gt;\n\t&lt;0B8406F1-DE75-48C8-B39A-E475A2B100DF@...&gt;\n\t&lt;43835E7E-1058-4F58-B369-09A9D9A79E10@...&gt;\n\t&lt;A5DAAB5F-4850-4621-94DB-207FA10BBAC6@...&gt;\n\t&lt;CAPW_8m51OCGrTFGGOUuYk_M-iVBcjR77RvCTp=_nkcbmCLdqjw@...&gt;\n\t&lt;3DDD0BE655869D4EA506652B3803AEF68CA21396@...-it.net&gt;\n &lt;CAPW_8m4Q-f41GPnKXMacKMCO92APzf=YpB6Dae3YpP_FmtBbig@...&gt;\r\nIn-Reply-To: &lt;CAPW_8m4Q-f41GPnKXMacKMCO92APzf=YpB6Dae3YpP_FmtBbig@...&gt;\r\nAccept-Language: en-GB, en-US\r\nContent-Language: en-US\r\nX-MS-Has-Attach:\r\nX-MS-TNEF-Correlator:\r\nContent-Type: text/plain; charset=&quot;iso-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nMIME-Version: 1.0\r\nX-eGroups-Msg-Info: 2:3:4:0:0\r\nFrom: Sebastien Lambla &lt;seb@...&gt;\r\nSubject: RE: [rest-discuss] Conneg based on User-Agent\r\nX-Yahoo-Group-Post: member; u=331949899; y=E5kqN_qqokl56c8LcEix0Sm_sPsYSSCm57p0b7ujyTNDsvAw\r\nX-Yahoo-Profile: serialseb\r\n\r\nAh ok, not tested that scenario, any xhtml usually has html and xhtml conne=\r\ng&#39;d on the server, with the html having a heavier weight so that anyone sen=\r\nding in Accept: */* will get html, but anyone requesting xhtml specifically=\r\n will get the xhtml version first :)\n\n-----Original Message-----\nFrom: mca@=\r\namundsen.com [mailto:mca@...] On Behalf Of mike amundsen\nSent: 28 =\r\nSeptember 2011 20:40\nTo: Sebastien Lambla\nCc: Jan Algermissen; Dilip Krishn=\r\nan; Erik Mogensen; REST Discuss\nSubject: Re: [rest-discuss] Conneg based on=\r\n User-Agent\n\ni&#39;d have to dig it up, but my recollection is that when the se=\r\nrver has these possibilities for a resource:\n- text/html\n- application/xml\n=\r\n- application/json\n\nand i am using the mimeparse library [1] on the server,=\r\n and the client is Chrome browser (not sure if this the case for Safari, to=\r\no)...\n\nthe negotiated result is always the XML representation, not HTML.\n\nm=\r\noreover, Chrome does not _render_ the XML on screen, just displays a blank =\r\n(view source shows the XML).\nNOTE: my XML &quot;plugin&quot; can kick in to re-displa=\r\ny the XML, but that&#39;s a &quot;dev&quot; case on my workstation.\n\nit&#39;s been a while si=\r\nnce i slogged through this and i long ago added a &quot;shim&quot; that returns the H=\r\nTML variant to Chrome browsers by overriding this quirk. possibly the overr=\r\nide is no longer needed (due to changes in Chrome, changes in the MimeParse=\r\n lib, or some bone-headed coding bug i am still carrying around).\n\n\n[1] htt=\r\np://code.google.com/p/mimeparse/\n\nmca\nhttp://amundsen.com/blog/\nhttp://twit=\r\nter.com@mamund\nhttp://mamund.com/foaf.rdf#me\n\n\n\n\n\nOn Wed, Sep 28, 2011 at 1=\r\n5:04, Sebastien Lambla &lt;seb@...&gt; wrote:\n&gt; Mike,\n&gt;\n&gt; I have no iss=\r\nues getting webkit rendering application/xhtml+xml with chrome and safari. =\r\nWhere are you seeing the problem?\n&gt;\n&gt; -----Original Message-----\n&gt; From: re=\r\nst-discuss@yahoogroups.com \n&gt; [mailto:rest-discuss@yahoogroups.com] On Beha=\r\nlf Of mike amundsen\n&gt; Sent: 16 September 2011 08:16\n&gt; To: Jan Algermissen\n&gt;=\r\n Cc: Dilip Krishnan; Erik Mogensen; REST Discuss\n&gt; Subject: Re: [rest-discu=\r\nss] Conneg based on User-Agent\n&gt;\n&gt; Jan:\n&gt;\n&gt; Not sure this is the same thing=\r\n, but I have code that handles &quot;exceptions&quot; for conneg match results and th=\r\nose exceptions are based on UA reporting.\n&gt;\n&gt; here are some real-world exam=\r\nples:\n&gt;\n&gt; WebKit conneg will always pick any XML variant over any HTML vari=\r\nant \n&gt; offered. IOW, when given that chance, WebKit conneg results in &quot;give=\r\n \n&gt; me XML&quot; Turns out WebKit does not _render_ the XML (just shows a blank =\r\n\n&gt; page). I add an exception to make sure WebKit browsers (not\n&gt; XMLHttpReq=\r\nuest) get HTML if it&#39;s available.\n&gt;\n&gt; Mirosoft Excel conneg will favor HTML=\r\n (assuming a table) over CSV. I add an exception so that MS-Excel clients g=\r\net CSV if it is available.\n&gt;\n&gt; There are (I think) some others, but those a=\r\nre ones that come up quite often and how i deal with them.\n&gt;\n&gt; mca\n&gt; http:/=\r\n/amundsen.com/blog/\n&gt; http://twitter.com@mamund\n&gt; http://mamund.com/foaf.rd=\r\nf#me\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; On Fri, Sep 16, 2011 at 08:30, Jan Algermissen &lt;jan.algerm=\r\nissen@...&gt; wrote:\n&gt;&gt;\n&gt;&gt; On Sep 16, 2011, at 5:00 AM, Dilip Krishnan =\r\nwrote:\n&gt;&gt;\n&gt;&gt;&gt; Seems like &quot;soap&quot;-creep to me ... a la WS-addressing :)\n&gt;&gt;\n&gt;&gt;=\r\n Why in particular?\n&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; One thing that doesn&#39;t feel right to me =\r\nis the fact that the client is driving control flow.\n&gt;&gt;\n&gt;&gt; Is that any diff=\r\nerent from redirecting a mobile UA to a dedicated server?\n&gt;&gt;\n&gt;&gt; ....\n&gt;&gt;\n&gt;&gt; =\r\nI just remembered the Accept_Features header, which is somehow\n&gt;&gt; related: =\r\nhttp://www.ietf.org/rfc/rfc2295.txt\n&gt;&gt;\n&gt;&gt; Jan\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;&gt; Also reminds of =\r\na Subbu&#39;s post on Media Types, Plumbing and \n&gt;&gt;&gt; Democracy, in the issues t=\r\nhat it brings up. I do like the \n&gt;&gt;&gt; parametrized media types but its not w=\r\nidely supported; (atleast the \n&gt;&gt;&gt; last time I checked)\n&gt;&gt;&gt;\n&gt;&gt;&gt; Regards,\n&gt;&gt;=\r\n&gt; Dilip Krishnan\n&gt;&gt;&gt; dilip.krishnan@...\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; On Sep 15, 20=\r\n11, at 5:46 PM, Jan Algermissen wrote:\n&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; On Sep 16, 2011, at 12=\r\n:20 AM, Erik Mogensen wrote:\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; On Thu, Sep 15, 2011 at 7:54 PM, Ja=\r\nn Algermissen &lt;jan.algermissen@...&gt; wrote:\n&gt;&gt;&gt;&gt;&gt; I think using the U=\r\nserAgent header to negotiate representation features is a nice solution for=\r\n non-human targeted situations, too. Essentially this means to negotiate in=\r\ncompatible media types based on Accept and the compatible variations in a g=\r\niven media type based on UserAgent. This might include the addition of cert=\r\nain Link headers.\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; I agree with the &quot;Avoid avoid&quot; here. =A0It so=\r\nunds a lot like out-of-band knowledge, and in the opposite direction than i=\r\ns usual. =A0&quot;I know that V3.1.3 of FooClient doesn&#39;t use the xyzzy link rel=\r\nation, so I&#39;ll just save bandwidth by not sending it&quot;. =A0The server could =\r\nend up with a large amount of knowledge. =A0See wurfl for an example of thi=\r\ns going bad.\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; Why not stick to Accept (which is that it&#39;s for) a=\r\nnd use media type parameters?\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; Accept: application/procurement;h=\r\nypermediacontrols=3Dnew;q=3D1,\n&gt;&gt;&gt;&gt;&gt; application/procurement;hypermediacont=\r\nrols=3Dold;q=3D0.3\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Been there, done that :-) Too enteprisey for m=\r\ny taste. Leads to \n&gt;&gt;&gt;&gt; packaging up feature sets into version numbers. I&#39;d=\r\n always let the \n&gt;&gt;&gt;&gt; Accept express the general capability of the client. =\r\n(Which I read\n&gt;&gt;&gt;&gt; as: &quot;If you hand me application/atom I am pretty sure I =\r\ncan fulfill \n&gt;&gt;&gt;&gt; my user&#39;s intent from there&quot;) Versioning makes the whole =\r\nelegance \n&gt;&gt;&gt;&gt; go away :-)\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; I was thinking more in terms of &#39;hints=\r\n&#39; or &#39;best effort&#39;. Sending mobile devices different content (incl. bu way =\r\nof a redirect) seems ok. So why not &quot;direct that old legacy product we sold=\r\n 5 years ago to that old (set of) servers we keep around for these cases&quot;?\n=\r\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; My original issue, BTW, was routing requests in a load balancer t=\r\no direct clients that need a new feature to those services that have the ne=\r\nw feature installed and are already up and running. In general: situations =\r\nwhere you have scaled to N services behind one IP that run different versio=\r\nns of a service (e.g. because they are being upgraded one by one while keep=\r\ning the site in operation).\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Jan\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; &quot;new&quot; and &quot;old&quot; =\r\nare obviously bad choices, but you get the idea. =A0That way the media type=\r\n can express the different &quot;variants&quot; within compatibility, and clients can=\r\n express their capabilities in a header designed for conneg. =A0Evolvabilit=\r\ny FTW!\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; --\n&gt;&gt;&gt;&gt;&gt; -mogsie-\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; ---------=\r\n---------------------------\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; Yahoo! Groups Links\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;=\r\n&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; ------------------------------------\n&gt;&gt;\n&gt;&gt; Yahoo! Gro=\r\nups Links\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;\n&gt;\n&gt; ------------------------------------\n&gt;\n&gt; Yahoo!=\r\n Groups Links\n&gt;\n&gt;\n&gt;\n&gt;\n\n"}}