{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":244521818,"authorName":"toydi","from":"toydi &lt;teohuiming.work@...&gt;","profile":"teohuiming.work","replyTo":"SENDER","senderId":"m1XDHAiqohp8lxOP49MSGpkGYONrwiNea7RKEm2_i3JtDY4rDzRhqE_Yolc2EOWRUyraolY2l_8G784zPIf2-ML41flwGPBR","spamInfo":{"isSpam":false,"reason":"12"},"subject":"POST usage in Composite State Resource","postDate":"1147926781","msgId":6255,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDczZWM1OTlkMDYwNTE3MjEzM2kyMDAxNjZiNGg5YjllZTUxN2ZjZWI4NjJAbWFpbC5nbWFpbC5jb20+"},"prevInTopic":0,"nextInTopic":6257,"prevInTime":6254,"nextInTime":6256,"topicId":6255,"numMessagesInTopic":7,"msgSnippet":"Hi, Sometime we need to model a resource (i.e. a Bill Record) that has a primary state (i.e. unpaid , paid , invoiced ) and several encapsulated","rawEmail":"Return-Path: &lt;teohuiming.work@...&gt;\r\nX-Sender: teohuiming.work@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nReceived: (qmail 98820 invoked from network); 18 May 2006 04:33:43 -0000\r\nReceived: from unknown (66.218.66.172)\n  by m33.grp.scd.yahoo.com with QMQP; 18 May 2006 04:33:43 -0000\r\nReceived: from unknown (HELO py-out-1112.google.com) (64.233.166.182)\n  by mta4.grp.scd.yahoo.com with SMTP; 18 May 2006 04:33:36 -0000\r\nReceived: by py-out-1112.google.com with SMTP id f25so456622pyf\n        for &lt;rest-discuss@yahoogroups.com&gt;; Wed, 17 May 2006 21:33:01 -0700 (PDT)\r\nReceived: by 10.35.8.1 with SMTP id l1mr120569pyi;\n        Wed, 17 May 2006 21:33:01 -0700 (PDT)\r\nReceived: by 10.65.148.13 with HTTP; Wed, 17 May 2006 21:33:01 -0700 (PDT)\r\nMessage-ID: &lt;73ec599d0605172133i200166b4h9b9ee517fceb862@...&gt;\r\nDate: Thu, 18 May 2006 12:33:01 +0800\r\nTo: rest-discuss &lt;rest-discuss@yahoogroups.com&gt;\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=ISO-8859-1; format=flowed\r\nContent-Transfer-Encoding: quoted-printable\r\nContent-Disposition: inline\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: toydi &lt;teohuiming.work@...&gt;\r\nSubject: POST usage in Composite State Resource\r\nX-Yahoo-Group-Post: member; u=244521818; y=T9PKiKwzQjkYL1zlox5baq8o7IfoKIOnFy6XrK27VMnDtrXnGmwicOHJ\r\nX-Yahoo-Profile: teohuiming.work\r\n\r\nHi,\n\nSometime we need to model a resource (i.e. a Bill Record) that has a\np=\r\nrimary state (i.e. &#39;unpaid&#39;, &#39;paid&#39;, &#39;invoiced&#39;) and several\nencapsulated s=\r\nubordinates (i.e. bought items with quantity & price and\ntotal price).\n\n[Ex=\r\nample: Shopping mart bill record Use Case]\nRetrieving a Bill Record resourc=\r\ne for instance, we receive:\n&lt;bill-record id=3D&quot;000&quot;&gt;\n  &lt;customer-id&gt;11-111&lt;=\r\n/customer-id&gt;\n  &lt;status&gt;unpaid&lt;/status&gt;\n  &lt;dispensed-items&gt;\n    &lt;item type=\r\n=3D&quot;http://example.org/items/00-111&quot; quantity=3D&quot;2&quot;\npriceperunit=3D&quot;20.00&quot; =\r\n/&gt;\n    &lt;item type=3D&quot;http://example.org/items/00-222&quot; quantity=3D&quot;1&quot;\npricep=\r\nerunit=3D&quot;10.00&quot; /&gt;\n  &lt;/dispensed-items&gt;\n  &lt;!-- total with additional tax c=\r\nharge --&gt;\n  &lt;total&gt;50.21&lt;/total&gt;\n&lt;/bill-record&gt;\n\nNow, try to model three us=\r\ne cases below:\n1) If an &#39;unpaid&#39; bill has included incorrect item, Shopkeep=\r\ner sends\n(POST) a correct &lt;dispensed-items&gt; to Bill Record resource. It wil=\r\nl\nverify itself and recalculate the total.\n\n2) If a customer pays cash, Sho=\r\npkeeper sends (POST) the payment amount\nto that Bill Record resource, the s=\r\ntatus will change from &#39;unpaid&#39; to\n&#39;paid&#39;.\n\n3) Some customers prefer monthl=\r\ny invoice payment, Shopkeeper first\nverify the customer then stamp (POST) t=\r\nhe bill as &#39;invoiced&#39;, the\nstatus will change from &#39;unpaid&#39; to &#39;invoiced&#39;.\n=\r\n\n[Overload POST]\nIn this case, I overload the POST method to allow change o=\r\nn state\nimplicitly. Does the cases above align with &quot;Composite State Resour=\r\nce&quot;\n[1] and HTTP/1.1 POST definition?\n\nRecently, I find that in many cases =\r\nchanging a resource&#39;s state\nexplicitly is not a suitable design, especially=\r\n dealing with composite\nstate, or prior calculation is needed before a stat=\r\ne transition.\n(similar in OO model, see Venners&#39;s article[2]).\n\nIs there a =\r\nbetter design alternative in this case? Hope to get some\ncomments. :-)\n\n\n[1=\r\n] http://www.markbaker.ca/2001/09/draft-baker-http-resource-state-model-01.=\r\ntxt\n[2] http://www.artima.com/interfacedesign/ServiceOriented.html\n\nThanks,=\r\n\n-- \nTeo HuiMing (toydi)\nteohuiming.work at gmail dot com\n\n"}}