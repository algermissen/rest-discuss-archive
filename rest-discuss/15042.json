{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":101463285,"authorName":"jumeier@yahoo.com","from":"&lt;jumeier@...&gt;","profile":"jumeier","replyTo":"SENDER","senderId":"r6G_RjGFzuJUJlbC_ABAbiGNw0d0pWO745nOQKGSbH5XDAZa_9C709bOdqD8uUDlpOm3DeEUP06_iQ","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [rest-discuss] HTTP request and &quot;type safety&quot;","postDate":"1268774519","msgId":15042,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDQ0MDcyNy41NzU2Ny5xbUB3ZWIxMTI2MDQubWFpbC5ncTEueWFob28uY29tPg==","inReplyToHeader":"PGY4YjM5YWNlMTAwMzA5MTU0NWwxMTFmNjc2ZHRmODE5YzMwMzgxZmYzMjdiQG1haWwuZ21haWwuY29tPg=="},"prevInTopic":15039,"nextInTopic":15043,"prevInTime":15041,"nextInTime":15043,"topicId":15020,"numMessagesInTopic":18,"msgSnippet":"First, thanks to all for contributing so many ideas in this extensive thread! ... From: Craig McClanahan  Subject: Re: [rest-discuss] HTTP","rawEmail":"Return-Path: &lt;jumeier@...&gt;\r\nX-Sender: jumeier@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 67330 invoked from network); 16 Mar 2010 21:28:39 -0000\r\nX-Received: from unknown (98.137.34.44)\n  by m1.grp.sp2.yahoo.com with QMQP; 16 Mar 2010 21:28:39 -0000\r\nX-Received: from unknown (HELO web112604.mail.gq1.yahoo.com) (98.137.27.184)\n  by mta1.grp.sp2.yahoo.com with SMTP; 16 Mar 2010 21:28:39 -0000\r\nX-Received: (qmail 57602 invoked by uid 60001); 16 Mar 2010 21:21:59 -0000\r\nMessage-ID: &lt;440727.57567.qm@...&gt;\r\nX-YMail-OSG: 9zqthfsVM1n0TQRwAjCgLNktHh7g7DNIy4sWp3ej_DF.uFPFkuQeU0d0KasgOvX6rX3ifQDHl1HB3vDmTqm8EAYVXdhfnt0FgSx8e1_SOUjP4RZaODMPu1KknBu_Fxi7X8UK_nnySJOSbNm7bfzR7fW.axesXUMO9_MFSf9dte_B2hJIZ24Swixq03CMdPQJs3zLn4yRsBfnzTbAgYSrFk9LYud92BNi2q1PAHBqXtHK1zOwkieb_SBZEDvfyj_wQR3IxkbWmvICGX9CCbzyOAyNazPy0kQx.Dib3HRQGDFF54HSequbEv1SMVSyfvdUrptMORmjJu1bhMiSB7o7_iZXpSkeSTePULkOeeAPUqEqSXOUARJXTQ--\r\nX-Received: from [82.136.103.54] by web112604.mail.gq1.yahoo.com via HTTP; Tue, 16 Mar 2010 14:21:59 PDT\r\nX-Mailer: YahooMailClassic/10.0.8 YahooMailWebService/0.8.100.260964\r\nDate: Tue, 16 Mar 2010 14:21:59 -0700 (PDT)\r\nTo: craigmcc@..., rest-discuss@yahoogroups.com\r\nIn-Reply-To: &lt;f8b39ace1003091545l111f676dtf819c30381ff327b@...&gt;\r\nMIME-Version: 1.0\r\nContent-Type: multipart/alternative; boundary=&quot;0-459360646-1268774519=:57567&quot;\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: &lt;jumeier@...&gt;\r\nSubject: Re: [rest-discuss] HTTP request and &quot;type safety&quot;\r\nX-Yahoo-Group-Post: member; u=101463285; y=YmAxHN8YBso2rppdmSsM-3cuOZE7b-wcCeZZ-FiRIg1k2Q\r\nX-Yahoo-Profile: jumeier\r\n\r\n\r\n--0-459360646-1268774519=:57567\r\nContent-Type: text/plain; charset=iso-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\nFirst, thanks to all for contributing so many ideas in this extensive threa=\r\nd!\n\n--- On Wed, 3/10/10, Craig McClanahan &lt;craigmcc@...&gt; wrote:\n\nFrom=\r\n: Craig McClanahan &lt;craigmcc@...&gt;\nSubject: Re: [rest-discuss] HTTP re=\r\nquest and &quot;type safety&quot;\nTo: jumeier@...\nCc: rest-discuss@yahoogroups.=\r\ncom\nDate: Wednesday, March 10, 2010, 12:45 AM\n\n\n\nOn Tue, Mar 9, 2010 at 9:4=\r\n8 AM,  &lt;jumeier@...&gt; wrote:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n=A0\n\n\n\n  \n\n\n    \n      \n =\r\n     \n      Hi all,\n\n\n\nI have a customer who raised a concern about REST &quot;t=\r\nype safety&quot;. What he means may be best explained by a simple example.\n\n\n\nAs=\r\nsume we have a resource that represents a folder, and by issueing a POST re=\r\nquest, I can attach a file. What, however, if that post request wrongly goe=\r\ns to, let&#39;s say, another document resource instead of our folder, and the d=\r\nocument resource also accepts POST (for some reason)?\n\n\n\n\nIn a RPC world, t=\r\nhe document type would not understand an &quot;addDocument()&quot; call, and conseque=\r\nntly return an exception. But what about REST? Of course, the POST&#39;s attrib=\r\nutes most likely wouldn&#39;t be understood and something like 400 Bad Request =\r\nreturned. But what if they were understood?\n\n\n\n\nSo, are there means or patt=\r\nerns, to achieve (some sort) of type safety?\n\n\nThis is one of the reasons I=\r\n prefer to use specific media types, instead of generic things like &quot;applic=\r\nation/xml&quot; or &quot;application/json&quot;, for my resources.=A0 Then, if your &quot;folde=\r\nr&quot; resource accepts a media type that says &quot;here is a new document resource=\r\n&quot;, but your document resource doesn&#39;t (it accepts some other kind of POST r=\r\nequest like &quot;here is a comment to add to the discussion about this document=\r\n&quot; with a different media type), then you&#39;re fine ... a 4xx response would b=\r\ne appropriate (and, if you&#39;re using a framework like JAX-RS for Java, the f=\r\nramework will take care of this negotiation for you).=A0 An an extra for-fr=\r\nee bonus, you can set things up so that the same resource can accept differ=\r\nent POSTs (with different media types) to trigger different state changes a=\r\nnd server responses.=A0 No need to create 3 &quot;artificial&quot; resource URIs to s=\r\nupport 3 different POSTs that trigger state changes.\n\n\n&gt;&gt; Thanks for this i=\r\nnteresting ideas with the media type. I made a similar observation - and no=\r\nw Roy will probably throw yet another frisbee - I looked at the new OASIS C=\r\nMIS standard, more precisely at what they call &quot;restful binding&quot;. This is b=\r\nased on HTTP and ATOM, with extensions. In the ATOM feeds/entries are numbe=\r\nr of attributes, that give certain hints on consistency, e.g. the doctype. =\r\nBut the problem I mentioned is solved as cmis:folder supports POST and no P=\r\nUT, and document does exactly the contrary. Looks coherent to me.\n\n&gt;&gt; As I =\r\nam working mainly with Apache Sling, they introduced something called a &quot;se=\r\nlector&quot; as part of the URI. However, this controls renditions, thus applies=\r\n for GETs only. But it&#39;s a good twist if you need radically different rendi=\r\ntions from the same resource. E.g. /orders/123.list.html could provice a li=\r\nst with all line items, while /orders/123.tax.html may bring up information=\r\n regarding tax calculations.\n\nIf you use a generic media type, then your &quot;d=\r\nocument resource&quot; will need to validate the details of the received input t=\r\no make sure it obeys the rules for what kind of behavior a POST should trig=\r\nger on a document.=A0 Of course, you should be doing that anyway ... so it =\r\nshould be pretty obvious that the incoming data doesn&#39;t have the right set =\r\nof fields.=A0 This kind of &quot;form validation&quot; isn&#39;t really much different th=\r\nan what you should be doing in a browser-based webapp, where the same scena=\r\nrio is possible.\n\n&gt;&gt; Well, I definitely see that I can kiss goodbye the won=\r\nderful POST automisms from Sling...\n\n\n\nThanks so much,\n\nJuerg \nCraig\n\n\n\n\n\n =\r\n     \r\n--0-459360646-1268774519=:57567\r\nContent-Type: text/html; charset=iso-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;table cellspacing=3D&quot;0&quot; cellpadding=3D&quot;0&quot; border=3D&quot;0&quot; &gt;&lt;tr&gt;&lt;td valign=3D&quot;=\r\ntop&quot; style=3D&quot;font: inherit;&quot;&gt;First, thanks to all for contributing so many=\r\n ideas in this extensive thread!&lt;br&gt;&lt;br&gt;--- On &lt;b&gt;Wed, 3/10/10, Craig McCla=\r\nnahan &lt;i&gt;&lt;craigmcc@...&gt;&lt;/i&gt;&lt;/b&gt; wrote:&lt;br&gt;&lt;blockquote style=3D&quot;=\r\nborder-left: 2px solid rgb(16, 16, 255); margin-left: 5px; padding-left: 5p=\r\nx;&quot;&gt;&lt;br&gt;From: Craig McClanahan &lt;craigmcc@...&gt;&lt;br&gt;Subject: Re: [=\r\nrest-discuss] HTTP request and &quot;type safety&quot;&lt;br&gt;To: jumeier@...&lt;br&gt;Cc=\r\n: rest-discuss@yahoogroups.com&lt;br&gt;Date: Wednesday, March 10, 2010, 12:45 AM=\r\n&lt;br&gt;&lt;br&gt;&lt;div id=3D&quot;yiv2116279709&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div class=3D&quot;gmail_quote&quot;&gt;On Tue=\r\n, Mar 9, 2010 at 9:48 AM,  &lt;span dir=3D&quot;ltr&quot;&gt;&lt;&lt;a rel=3D&quot;nofollow&quot; ymailt=\r\no=3D&quot;mailto:jumeier@...&quot; target=3D&quot;_blank&quot; href=3D&quot;/mc/compose?to=3Dj=\r\numeier@...&quot;&gt;jumeier@...&lt;/a&gt;&gt;&lt;/span&gt; wrote:&lt;br&gt;&lt;blockquote cl=\r\nass=3D&quot;gmail_quote&quot; style=3D&quot;border-left: 1px solid rgb(204, 204, 204); mar=\r\ngin: 0pt 0pt 0pt 0.8ex;\n padding-left: 1ex;&quot;&gt;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;div style=3D&quot;b=\r\nackground-color: rgb(255, 255, 255);&quot;&gt;\n&lt;span&gt;&nbsp;&lt;/span&gt;\n\n\n&lt;div&gt;\n  &lt;div&gt;\n=\r\n\n\n    &lt;div&gt;\n      \n      \n      &lt;p&gt;Hi all,&lt;br&gt;\n&lt;br&gt;\nI have a customer who r=\r\naised a concern about REST &quot;type safety&quot;. What he means may be best explain=\r\ned by a simple example.&lt;br&gt;\n&lt;br&gt;\nAssume we have a resource that represents =\r\na folder, and by issueing a POST request, I can attach a file. What, howeve=\r\nr, if that post request wrongly goes to, let&#39;s say, another document resour=\r\nce instead of our folder, and the document resource also accepts POST (for =\r\nsome reason)?&lt;br&gt;\n\n&lt;br&gt;\nIn a RPC world, the document type would not underst=\r\nand an &quot;addDocument()&quot; call, and consequently return an exception. But what=\r\n about REST? Of course, the POST&#39;s attributes most likely wouldn&#39;t be under=\r\nstood and something like 400 Bad Request returned. But what if they were un=\r\nderstood?&lt;br&gt;\n\n&lt;br&gt;\nSo, are there means or patterns, to achieve (some sort)=\r\n of type safety?&lt;br&gt;\n&lt;br&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;This=\r\n is one of the reasons I prefer to use specific media types, instead of gen=\r\neric things like &quot;application/xml&quot; or &quot;application/json&quot;, for my resources.=\r\n&nbsp; Then, if your &quot;folder&quot; resource accepts a media type that says &quot;here=\r\n is a new document resource&quot;, but your document resource doesn&#39;t (it accept=\r\ns some other kind of POST request like &quot;here is a comment to add to the dis=\r\ncussion about this document&quot; with a different media type), then you&#39;re fine=\r\n ... a 4xx response would be appropriate (and, if you&#39;re using a framework =\r\nlike JAX-RS for Java, the framework will take care of this negotiation for =\r\nyou).&nbsp; An an extra for-free bonus, you can set things up so that the s=\r\name resource can accept different POSTs (with different media types) to tri=\r\ngger different state changes and server responses.&nbsp; No need to create =\r\n3 &quot;artificial&quot; resource URIs to support 3 different POSTs that trigger stat=\r\ne changes.&lt;br&gt;\n&lt;br&gt;&gt;&gt; Thanks for this interesting ideas with the medi=\r\na type. I made a similar observation - and now Roy will probably throw yet =\r\nanother frisbee - I looked at the new OASIS CMIS standard, more precisely a=\r\nt what they call &quot;restful binding&quot;. This is based on HTTP and ATOM, with ex=\r\ntensions. In the ATOM feeds/entries are number of attributes, that give cer=\r\ntain hints on consistency, e.g. the doctype. But the problem I mentioned is=\r\n solved as cmis:folder supports POST and no PUT, and document does exactly =\r\nthe contrary. Looks coherent to me.&lt;br&gt;&lt;br&gt;&gt;&gt; As I am working mainly =\r\nwith Apache Sling, they introduced something called a &quot;selector&quot; as part of=\r\n the URI. However, this controls renditions, thus applies for GETs only. Bu=\r\nt it&#39;s a good twist if you need radically different renditions from the sam=\r\ne resource. E.g. /orders/123.list.html could provice a list with all line i=\r\ntems, while /orders/123.tax.html may bring up information regarding tax\n ca=\r\nlculations.&lt;br&gt;&lt;br&gt;If you use a generic media type, then your &quot;document res=\r\nource&quot; will need to validate the details of the received input to make sure=\r\n it obeys the rules for what kind of behavior a POST should trigger on a do=\r\ncument.&nbsp; Of course, you should be doing that anyway ... so it should b=\r\ne pretty obvious that the incoming data doesn&#39;t have the right set of field=\r\ns.&nbsp; This kind of &quot;form validation&quot; isn&#39;t really much different than wh=\r\nat you should be doing in a browser-based webapp, where the same scenario i=\r\ns possible.&lt;br&gt;&lt;br&gt;&gt;&gt; Well, I definitely see that I can kiss goodbye =\r\nthe wonderful POST automisms from Sling...&lt;br&gt;&lt;br&gt;\n&lt;/div&gt;&lt;blockquote class=\r\n=3D&quot;gmail_quote&quot; style=3D&quot;border-left: 1px solid rgb(204, 204, 204); margin=\r\n: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;&quot;&gt;&lt;div style=3D&quot;background-color: rg=\r\nb(255, 255, 255);&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;p&gt;\nThanks so much,&lt;br&gt;\nJuerg &lt;br&gt;&lt;/p&gt;&lt;/d=\r\niv&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;Craig&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;\n&lt;/div&gt;&lt;/bl=\r\nockquote&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;br&gt;\n\n      \r\n--0-459360646-1268774519=:57567--\r\n\n"}}