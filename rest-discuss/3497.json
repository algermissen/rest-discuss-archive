{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":4849001,"authorName":"S. Alexander Jacobson","from":"&quot;S. Alexander Jacobson&quot; &lt;alex@...&gt;","profile":"shop2it","replyTo":"SENDER","senderId":"wJ2tb370dBXjssyqDYDMI9TBXWr8k-z29RZcgy8GZbmutrY6Lx7O2xBKDQu2hlSsdyMApty9pV0GXHg5YvRRssVWCvZGL-BLn-j20g","spamInfo":{"isSpam":false,"reason":"0"},"subject":"Re: [rest-discuss] Anyone interested? (long)","postDate":"1048757296","msgId":3497,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PFBpbmUuV05ULjQuNDMuMDMwMzI3MDQwNzEwMC4xMDc2LTEwMDAwMEBmYW5hdGljPg==","inReplyToHeader":"PDAwMGQwMWMyZjQxNyRjZTliZDcyMCRhODAwYThjMEBTZWFpcnRoQTMxPg=="},"prevInTopic":3496,"nextInTopic":3498,"prevInTime":3496,"nextInTime":3498,"topicId":3495,"numMessagesInTopic":5,"msgSnippet":"I am interested in this as well, but, as we discussed earlier, it faces the difficulty of retrieving only new messages. Assuming, we follow Roy Fielding s","rawEmail":"Return-Path: &lt;alex@...&gt;\r\nX-Sender: alex@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nReceived: (EGP: mail-8_2_6_5); 27 Mar 2003 09:21:25 -0000\r\nReceived: (qmail 36946 invoked from network); 27 Mar 2003 09:21:25 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m6.grp.scd.yahoo.com with QMQP; 27 Mar 2003 09:21:25 -0000\r\nReceived: from unknown (HELO mail.vo.com) (208.45.6.99)\n  by mta3.grp.scd.yahoo.com with SMTP; 27 Mar 2003 09:21:24 -0000\r\nX-Envelope-From: alex@...\r\nX-Envelope-To: rest-discuss@yahoogroups.com\r\nReceived: from fanatic (66-108-201-235.nyc.rr.com [66.108.201.235])\n\tby mail.vo.com (8.12.8/8.12.1) with ESMTP id h2R9LKRs009150\n\t(version=TLSv1/SSLv3 cipher=EXP1024-RC4-SHA bits=56 verify=NO);\n\tThu, 27 Mar 2003 04:21:21 -0500\r\nDate: Thu, 27 Mar 2003 04:28:16 -0500 (Eastern Standard Time)\r\nTo: Seairth Jacobs &lt;seairth@...&gt;\r\nCc: rest-discuss &lt;rest-discuss@yahoogroups.com&gt;\r\nSubject: Re: [rest-discuss] Anyone interested? (long)\r\nIn-Reply-To: &lt;000d01c2f417$ce9bd720$a800a8c0@SeairthA31&gt;\r\nMessage-ID: &lt;Pine.WNT.4.43.0303270407100.1076-100000@fanatic&gt;\r\nX-X-Sender: alex@...\r\nMIME-Version: 1.0\r\nContent-Type: TEXT/PLAIN; charset=US-ASCII\r\nX-eGroups-From: &quot;S. Alexander Jacobson&quot; &lt;alex@...&gt;\r\nFrom: &quot;S. Alexander Jacobson&quot; &lt;alex@...&gt;\r\nX-Yahoo-Group-Post: member; u=4849001\r\nX-Yahoo-Profile: shop2it\r\n\r\nI am interested in this as well, but, as we\ndiscussed earlier, it faces the difficulty of\nretrieving only &quot;new&quot; messages.\n\nAssuming, we follow Roy Fielding&#39;s reccomdendation\nand view a mailbox as a container for\nmessages/notifications, we need a way to query for\nall messages since the last time the client\nchecked.\n\nHere are some approaches and their issues:\n1. Modify the server&#39;s state each time the client\nchecks for messages, but that prevents multiple\nclients from sharing the same mailbox without\nproliferating server state and it also prevents\nthe same user from going back to a prior state\nwithout substantial added complexity.\n\n2. Use a parametrized URL, like:\n\n  GET /getNewNotifications?since=UID\n\nwhere UID is the unique identifier of the last\nmessage retrieved, but this seems unRESTful in\nthat this URL is not really opaque (In the\nWiki Jeff Bone appears to argue that this is ok,\nso I am not really sure, but to me it feels\nunRESTful)\n\n3. Use a single range headers against a single\nmailbox URL, but that prohibits you from changing\nthe representation of the underlying mailbox.  If\nwe want the server periodically to check\navailability of actual messages and update on that\nbasis, we can&#39;t use range headers.\n\n4. Use multipart-byteranges.\nI think this is the best option, but a. most\nclients don&#39;t suppport it and b. it verges on\nspecification abuse.\n\nA much more useful way to go would be for the HTTP\nauthors not to have used bytes as the only units\nfor range headers.  If HTTP allowed range headers\nto be specified in application units e.g. records,\nthen this would all be very easy.  Unfortunately,\nthey didn&#39;t and we have HTTP as it currently\nstands.\n\n-Alex-\n\n___________________________________________________________________\nS. Alexander Jacobson \t\t\t\ti2x Media\n1-212-787-1914 voice \t\t\t\t1-603-288-1280 fax\n\n\n\n\n\n\n\n\nOn Wed, 26 Mar 2003, Seairth Jacobs wrote:\n\n&gt; I have been kicking around the idea of creating a simple, distributed, message system using REST practices.  I know that there are some such things out there already, but I am looking for extreme simplicity.  The fundamental goal is to see if I can replace my SMTP/POP3 application with something RESTful.  It must be simple and easy to implement.  I expect to whip an initial version in PHP in a few evenings...\n&gt;\n&gt; And I&#39;m looking for a few good RESTifarians to join me.  For those of you who might be interested, read over the following initial noodlings of mine.  If I can build enough interest, I&#39;ll see about setting up a dedicated YahooGroup or site or something.\n&gt;\n&gt;\n&gt; Suppose two parties want to send each other messages.  Each party has a URI that identifies themselves.  This would be similar to an e-mail address.  For illustration purposes, the following URIs are used:\n&gt;\n&gt; http://example.invalid/users/seairth\n&gt; http://sample.invalid/members/bob\n&gt;\n&gt; Now, suppose I want to send a message to bob.  I would take the following steps:\n&gt;\n&gt; 1) Create a Message on my server and assign a URI to it. (e.g. http://example.invalid/users/seairth/msg/1234)\n&gt; 2) Send a POST request to bob&#39;s URI.  The content-type could be any number of formats, but I will use XML for readability sake:\n&gt;\n&gt;     &lt;notification&gt;\n&gt;         &lt;from uri=&quot;http://example.invalid/users/seairth&quot;\n&gt;               name=&quot;Seairth Jacobs&quot;/&gt;\n&gt;         &lt;message uri=&quot;http://example.invalid/users/seairth/msg/1234&quot;\n&gt;                  subject=&quot;Is this RESTful?&quot;\n&gt;                  reply-uri=&quot;http://example.invalid/users/seairth/msg/1234&quot;/&gt;\n&gt;     &lt;/notification&gt;\n&gt;\n&gt; 3) bob&#39;s server examines the notification and accepts or rejects it.  Acceptance would be performed with a 202 (Accepted) response, while rejection would happen with a 403 (Forbidden) response.  It would also be possible to return a 400 (Bad Request) if bob&#39;s server failed to understand the notification well enough to accept or reject it.\n&gt;\n&gt; 4) Suppose bob&#39;s server has accepted a URI from me.  Later, bob starts up his client and uses the URI to get the actual message.\n&gt;\n&gt; That&#39;s it.  Done.\n&gt;\n&gt; Now for some additional details:\n&gt;\n&gt; -------------------\n&gt; In the above notification, the following is optional:\n&gt;\n&gt; * The &quot;name&quot; attribute of the from element: the friendly name can be provided as an aid.  However, the only authoritative attribute is &quot;uri&quot;.\n&gt;\n&gt; * The &quot;reply-uri&quot; attribute of the message element: if not given, then the &quot;from&quot; element&#39;s &quot;uri&quot; attribute MUST be used for all replies to that message.  If given, then &quot;reply-uri&quot; MUST be used for all replies to that message.\n&gt;\n&gt; -------------------\n&gt; Additional notes:\n&gt;\n&gt; *   The value of the &quot;reply-uri&quot; attribute does not need to match either the &quot;from&quot; element&#39;s &quot;uri&quot; attribute or the &quot;message&quot; element&#39;s &quot;uri&quot; attribute.  In the above example reply-uri&quot; could have just as easily been &quot;http://example.invalid/users/seairth/reply/1234&quot;.  The purpose for a separate reply URI is to allow chaining of messages (i.e. message threads).\n&gt;\n&gt; * While there is no technical limit on any of the values, the recipient may reject a notification if any value is longer than can be handled. This should be done with the 400 (Bad Request) response, not 403 (Forbidden).\n&gt;\n&gt; * In order to validate that the message URI was in fact sent by the from-URI, the recipient MAY submit a specific POST message to the from-uri to validate it.  Further details below.\n&gt;\n&gt; * The recipient MUST NOT access the resource until the notification has been dealt with.  The sender MAY not provide access until the notification is accepted.\n&gt;\n&gt; * Acceptance of a notification does not mean that the recipient will retrieve the message.  It only indicates that the recipient acknowledged the request.\n&gt;\n&gt; * The subject is nothing more than a very short (one-liner) excerpt to give the recipient an idea of what the message is about.\n&gt;\n&gt; * The recipient may reject a notification due to a value given.  For instance, if the &quot;from&quot; element&#39;s &quot;uri&quot; attribute value is being &quot;blocked&quot;, the recipient may reject the notification outright.  Any such refusal MUST be done with the 403 (Forbidden) response.  The recipient may optionally choose to indicate in the response why the notification was rejected.\n&gt;\n&gt; * If the notification is accepted, a 202 (Accepted) response MUST be used.  The recipient may optionally choose to return an entity, but the sender is not required to process any such entity.\n&gt;\n&gt; * Note that it would be possible to send messages of URIs that the sender did not create.  For instance, I could have sent bob a link to an interesting CNN report or some such, as long as that thing has a URI.\n&gt;\n&gt; * Obviously, the message does not need to be HTML.  It could be any sort of format.  If desired, the recipient can use HEAD on the resource to determine specifics.\n&gt;\n&gt; * Because the resource (when created by the sender) is always on the sender&#39;s server, additional features are available that are not available in traditional &quot;push&quot; style message systems.  For instance, spelling mistakes can be corrected.  Messages can be deleted before your boss discovers what you really think of him, etc.  Obviously, once a recipient performs a GET on a resource, they have a copy... mistakes and all.\n&gt;\n&gt; -------------------\n&gt; Validating Notifications:\n&gt;\n&gt; Obviously, it would be possible from someone to submit a notification claiming to be someone they are not.  This is a common problem in SMTP, which is partly why spam is so wide-spread (no accountability).  However, this can be easily remedied by asking the supposed sender if they really did send the notification.  For instance, suppose bob were to be suspicious of my notification. He would then take the following steps:\n&gt;\n&gt; 1) Post to my URI the following (again in XML for convenience):\n&gt;\n&gt;     &lt;notification-query&gt;\n&gt;         &lt;message uri=&quot;http://example.invalid/users/seairth/msg/1234&quot;/&gt;\n&gt;         &lt;to uri=&quot;=&quot;http://sample.invalid/members/bob&quot; /&gt;\n&gt;     &lt;/notification-query&gt;\n&gt;\n&gt; 2) My server would either recognize the combination and return a 204 (No Content), or returned 400 (Bad Request) to indicate that it&#39;s not recognized.\n&gt;\n&gt;\n&gt; Note:  If the message URI contains the from URI as its root (as in my original example), the probability is pretty good that the sender really did create the messages.\n&gt;\n&gt; -------------------\n&gt; Notification Issues:\n&gt;\n&gt; One of the bits that I haven&#39;t yet worked out is how to ensure that only the intended recipient can retrieve the resource.  I have some thoughts on this (mostly using HTTP Authentication in various ways), but I&#39;ll put that off until I see if there&#39;s any interest out there...\n&gt;\n&gt;\n&gt; So...  Anyone interested?\n&gt;\n&gt; ---\n&gt; Seairth Jacobs\n&gt; seairth@...\n\n\n\n\n"}}