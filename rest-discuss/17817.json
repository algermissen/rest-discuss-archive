{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":498432483,"authorName":"Jan Algermissen","from":"Jan Algermissen &lt;jan.algermissen@...&gt;","profile":"algermissen1971","replyTo":"SENDER","senderId":"0ms_7FSle43NhU0hYMx7SxsPw5uuAA9aUwLi543Uh4a5i-9OmgJ4ljQ1FQOyfQ8yZbDYDHGQSZC2VxCY0aTjWKa52qn6RJ6yE7TDMxkftbilFoU","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [rest-discuss] Conneg based on User-Agent","postDate":"1317219135","msgId":17817,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDI4MzM2RDdGLTBFRjEtNDlEMC04Qzc1LUJFQUExQzVCQzAzNUBub3Jkc2MuY29tPg==","inReplyToHeader":"PDI1OTUyRDc2LUY0QjgtNEFGOS04NzI0LTkwNjRERUExMjUzREBnbWFpbC5jb20+","referencesHeader":"PDNBRDk1QjVGLTdBNTgtNDMxMC05OTM0LTNFNkUwOTIzMjQzMUBub3Jkc2MuY29tPiA8Q0FEYkdaalpTak5vLUQ0Ym1ONU9zVEgrcmUrZ3AxMWtWeVQwLXprblRCTkVWdVZrY1RBQG1haWwuZ21haWwuY29tPiA8MEI4NDA2RjEtREU3NS00OEM4LUIzOUEtRTQ3NUEyQjEwMERGQG5vcmRzYy5jb20+IDw0MzgzNUU3RS0xMDU4LTRGNTgtQjM2OS0wOUE5RDlBNzlFMTBAZ21haWwuY29tPiA8QTVEQUFCNUYtNDg1MC00NjIxLTk0REItMjA3RkExMEJCQUM2QG5vcmRzYy5jb20+IDwyNTk1MkQ3Ni1GNEI4LTRBRjktODcyNC05MDY0REVBMTI1M0RAZ21haWwuY29tPg=="},"prevInTopic":17816,"nextInTopic":17818,"prevInTime":17816,"nextInTime":17818,"topicId":17770,"numMessagesInTopic":13,"msgSnippet":"... HTTP 1.1 has this kind of behavior built-in. Caches must honor the Vary header which tells the cache what headers the selection of the representation","rawEmail":"Return-Path: &lt;jan.algermissen@...&gt;\r\nX-Sender: jan.algermissen@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 63360 invoked from network); 28 Sep 2011 14:12:16 -0000\r\nX-Received: from unknown (98.137.34.44)\n  by m16.grp.sp2.yahoo.com with QMQP; 28 Sep 2011 14:12:16 -0000\r\nX-Received: from unknown (HELO moutng.kundenserver.de) (212.227.126.187)\n  by mta1.grp.sp2.yahoo.com with SMTP; 28 Sep 2011 14:12:15 -0000\r\nX-Received: from [10.90.131.10] ([213.238.45.2])\n\tby mrelayeu.kundenserver.de (node=mrbap4) with ESMTP (Nemesis)\n\tid 0LqU2T-1QdztX2sz3-00drBx; Wed, 28 Sep 2011 16:12:14 +0200\r\nMime-Version: 1.0 (Apple Message framework v1084)\r\nContent-Type: text/plain; charset=us-ascii\r\nIn-Reply-To: &lt;25952D76-F4B8-4AF9-8724-9064DEA1253D@...&gt;\r\nDate: Wed, 28 Sep 2011 16:12:15 +0200\r\nCc: Erik Mogensen &lt;erik@...&gt;,\n REST Discuss &lt;rest-discuss@yahoogroups.com&gt;\r\nContent-Transfer-Encoding: quoted-printable\r\nMessage-Id: &lt;28336D7F-0EF1-49D0-8C75-BEAA1C5BC035@...&gt;\r\nReferences: &lt;3AD95B5F-7A58-4310-9934-3E6E09232431@...&gt; &lt;CADbGZjZSjNo-D4bmN5OsTH+re+gp11kVyT0-zknTBNEVuVkcTA@...&gt; &lt;0B8406F1-DE75-48C8-B39A-E475A2B100DF@...&gt; &lt;43835E7E-1058-4F58-B369-09A9D9A79E10@...&gt; &lt;A5DAAB5F-4850-4621-94DB-207FA10BBAC6@...&gt; &lt;25952D76-F4B8-4AF9-8724-9064DEA1253D@...&gt;\r\nTo: Dilip Krishnan &lt;dilip.krishnan@...&gt;\r\nX-Mailer: Apple Mail (2.1084)\r\nX-Provags-ID: V02:K0:nDiD/jD+np0PxoD4fAtNxhDJHKe29G+oWCvKNP6xW6e\n eNB+kJjm/ReMgu9lRU/tur8gBWF81bX7GYpavAM5S7pfZbbc2y\n KGiRpHN0qzGM9D8yTLUP5RnwfSOanVMHNdXkqVsw/kr8PK2yQW\n 5bzXSVObDCfafnQoF6Ha7w6PoxKiRbQugkMJgBBiumCNwG9aLR\n OvZA28/OSKlePbOmFcbJ+pDdMiKkFc4sSEudkFszXCyfmhCi3O\n 1bja5/dmLQW4z7XvsBmBppx84dmaPMDeyBxrpF43VtgUecHpu3\n JQ8DE32t1fpFdqrbOZs6qEU4mW32EKOUO3RY6XNO8ikBk2pC7K\n lH8ZVEMpgbJXoehIyleZ6zQS4nOfJQJINFg7/uiO7joOmCHTAd\n 9M5EHi9sONt6g==\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Jan Algermissen &lt;jan.algermissen@...&gt;\r\nSubject: Re: [rest-discuss] Conneg based on User-Agent\r\nX-Yahoo-Group-Post: member; u=498432483; y=On-SPnfyUFa6B0POkOogY4HDbIVYN-v6G9ERQLTfek0gJQRYGuPtBMzp\r\nX-Yahoo-Profile: algermissen1971\r\n\r\n\nOn Sep 28, 2011, at 3:41 PM, Dilip Krishnan wrote:\n\n&gt; \n&gt; \n&gt;&gt;&gt; Seems like &quot;=\r\nsoap&quot;-creep to me ... a la WS-addressing :)\n&gt;&gt; \n&gt;&gt; Why in particular?\n&gt; \n&gt; =\r\nBecause the representation is no longer cacheable based on the resource ide=\r\nntity/uri and caching headers alone. The resource identity is now a combina=\r\ntion of UA and uri. This makes it complicated for the intermediary\n\nHTTP 1.=\r\n1 has this kind of behavior built-in. Caches must honor the Vary header whi=\r\nch tells the cache what headers the selection of the representation depende=\r\nd upon. Accept, Accept-Language and Accept-Charset are the most common ones=\r\n. But a Vary: User-Agent would by equally suitable.\n\nJan\n\n\n\n\n&gt; and feels ki=\r\nnd of WS-*ish to me, specifically reminds me of WS-addressing with endpoint=\r\n references, reference parameters and properties.\n&gt; \n&gt;&gt; \n&gt;&gt;&gt; \n&gt;&gt;&gt; \n&gt;&gt;&gt; One =\r\nthing that doesn&#39;t feel right to me is the fact that the client is driving =\r\ncontrol flow.\n&gt;&gt; \n&gt;&gt; Is that any different from redirecting a mobile UA to =\r\na dedicated server?\n&gt; \n&gt; It is a little different in the sense that the ser=\r\nver responds with a different action to a given request. The intermediary i=\r\ns causing a different &quot;version&quot; of the representation to be rendered. \n&gt; \n&gt;=\r\n&gt; \n&gt;&gt; I just remembered the Accept_Features header, which is somehow relate=\r\nd: http://www.ietf.org/rfc/rfc2295.txt\n&gt;&gt; \n&gt;&gt; Jan\n&gt;&gt; \n&gt;&gt; \n&gt;&gt; \n&gt;&gt;&gt; Also remi=\r\nnds of a Subbu&#39;s post on Media Types, Plumbing and Democracy, in the issues=\r\n that it brings up. I do like the parametrized media types but its not wide=\r\nly supported; (atleast the last time I checked)\n&gt;&gt;&gt; \n&gt;&gt;&gt; Regards,\n&gt;&gt;&gt; Dilip=\r\n Krishnan\n&gt;&gt;&gt; dilip.krishnan@...\n&gt;&gt;&gt; \n&gt;&gt;&gt; \n&gt;&gt;&gt; \n&gt;&gt;&gt; On Sep 15, 2011, =\r\nat 5:46 PM, Jan Algermissen wrote:\n&gt;&gt;&gt; \n&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt; On Sep 16, 2011, at 12:2=\r\n0 AM, Erik Mogensen wrote:\n&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt;&gt; On Thu, Sep 15, 2011 at 7:54 PM, Jan=\r\n Algermissen &lt;jan.algermissen@...&gt; wrote:\n&gt;&gt;&gt;&gt;&gt; I think using the Us=\r\nerAgent header to negotiate representation features is a nice solution for =\r\nnon-human targeted situations, too. Essentially this means to negotiate inc=\r\nompatible media types based on Accept and the compatible variations in a gi=\r\nven media type based on UserAgent. This might include the addition of certa=\r\nin Link headers.\n&gt;&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt;&gt; I agree with the &quot;Avoid avoid&quot; here.  It soun=\r\nds a lot like out-of-band knowledge, and in the opposite direction than is =\r\nusual.  &quot;I know that V3.1.3 of FooClient doesn&#39;t use the xyzzy link relatio=\r\nn, so I&#39;ll just save bandwidth by not sending it&quot;.  The server could end up=\r\n with a large amount of knowledge.  See wurfl for an example of this going =\r\nbad.\n&gt;&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt;&gt; Why not stick to Accept (which is that it&#39;s for) and use =\r\nmedia type parameters?\n&gt;&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt;&gt; Accept: application/procurement;hyperme=\r\ndiacontrols=3Dnew;q=3D1, application/procurement;hypermediacontrols=3Dold;q=\r\n=3D0.3\n&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt; Been there, done that :-) Too enteprisey for my taste. Le=\r\nads to packaging up feature sets into version numbers. I&#39;d always let the A=\r\nccept express the general capability of the client. (Which I read as: &quot;If y=\r\nou hand me application/atom I am pretty sure I can fulfill my user&#39;s intent=\r\n from there&quot;) Versioning makes the whole elegance go away :-)\n&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt; I =\r\nwas thinking more in terms of &#39;hints&#39; or &#39;best effort&#39;. Sending mobile devi=\r\nces different content (incl. bu way of a redirect) seems ok. So why not &quot;di=\r\nrect that old legacy product we sold 5 years ago to that old (set of) serve=\r\nrs we keep around for these cases&quot;?\n&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt; My original issue, BTW, was =\r\nrouting requests in a load balancer to direct clients that need a new featu=\r\nre to those services that have the new feature installed and are already up=\r\n and running. In general: situations where you have scaled to N services be=\r\nhind one IP that run different versions of a service (e.g. because they are=\r\n being upgraded one by one while keeping the site in operation).\n&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt;=\r\n Jan\n&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt;&gt; &quot;new&quot; and &quot;old&quot; are obviously bad choices, but you =\r\nget the idea.  That way the media type can express the different &quot;variants&quot;=\r\n within compatibility, and clients can express their capabilities in a head=\r\ner designed for conneg.  Evolvability FTW!\n&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt;&gt; -- \n&gt;&gt;&gt;&gt;=\r\n&gt; -mogsie-\n&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt; ------------------------------------\n&gt;&gt;&gt;&gt;=\r\n \n&gt;&gt;&gt;&gt; Yahoo! Groups Links\n&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt; \n&gt;&gt;&gt;&gt; \n&gt;&gt;&gt; \n&gt;&gt;&gt; \n&gt;&gt;&gt; \n&gt;&gt; \n&gt; \n&gt; \n&gt; \n&gt; =\r\n------------------------------------\n&gt; \n&gt; Yahoo! Groups Links\n&gt; \n&gt; \n&gt; \n\n\n"}}