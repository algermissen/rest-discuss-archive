{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":113923099,"authorName":"Robert Leftwich","from":"Robert Leftwich &lt;robert@...&gt;","replyTo":"SENDER","senderId":"PMOfcDAgaZF2flSTetrWxQY6yir8MB8k7fliBA8pUpvN67TFozo4yDf0x5U-9LMS9ePtV_EgwcsQGAsCMQc-Ixm9I6v3fdX8bm_ESIw","spamInfo":{"isSpam":false,"reason":"0"},"subject":"REST and travel agents revisited","postDate":"1022676387","msgId":1358,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDUuMS4wLjE0LjAuMjAwMjA1MjkyMDU2NTguMDFjMGIzYzBAMTkyLjE2OC4wLjU+","inReplyToHeader":"PDIwMDIwNDI0MTAwNzE4LkMyNjI1QHd3dy5tYXJrYmFrZXIuY2E+","referencesHeader":"PDNDQzYzODI5LkE5MkNDOTg5QHByZXNjb2QubmV0PiA8NS4xLjAuMTQuMC4yMDAyMDQxOTIxNTgyNS4wMWM2MzAwOEAxOTIuMTY4LjAuNT4gPDUuMS4wLjE0LjAuMjAwMjA0MjAwODM0NDAuMDFhZTJhMzBAMTkyLjE2OC4wLjU+IDw1LjEuMC4xNC4wLjIwMDIwNDIxMDc1MjU2LjAxYzc5ZWMwQDE5Mi4xNjguMC41PiA8M0NDNjM4MjkuQTkyQ0M5ODlAcHJlc2NvZC5uZXQ+"},"prevInTopic":1082,"nextInTopic":1359,"prevInTime":1357,"nextInTime":1359,"topicId":1078,"numMessagesInTopic":37,"msgSnippet":"Bob s adding of the travel agent scenario to the State machine as hypertext wiki page along with the comment No attempts to RESTify this example have been","rawEmail":"Return-Path: &lt;robert@...&gt;\r\nX-Sender: robert@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nReceived: (EGP: mail-8_0_3_2); 29 May 2002 12:46:44 -0000\r\nReceived: (qmail 13697 invoked from network); 29 May 2002 12:46:44 -0000\r\nReceived: from unknown (66.218.66.216)\n  by m1.grp.scd.yahoo.com with QMQP; 29 May 2002 12:46:44 -0000\r\nReceived: from unknown (HELO mta04bw.bigpond.com) (139.134.6.87)\n  by mta1.grp.scd.yahoo.com with SMTP; 29 May 2002 12:46:44 -0000\r\nReceived: from localhost ([144.135.24.78]) by\n          mta04bw.bigpond.com (Netscape Messaging Server 4.15 mta04bw Apr\n          29 2002 13:22:02) with SMTP id GWVI5T00.914 for\n          &lt;rest-discuss@yahoogroups.com&gt;; Wed, 29 May 2002 22:46:41 +1000 \r\nReceived: from BPH-D2-p-233-56.tmns.net.au ([144.134.233.56]) by bwmam04.mailsvc.email.bigpond.com(MailRouter V3.0m 29/1053563); 29 May 2002 22:46:41\r\nReceived: from fastdual.leftwich.info ([192.168.0.1]) by localmail with ESMTP id 3855 for &lt;rest-discuss@yahoogroups.com&gt;; Wed, 29 May 2002 22:49:00 +1000\r\nX-Mail-Server: Eserv/2.97/Digital Innovations Pty Ltd\r\nMessage-Id: &lt;5.1.0.14.0.20020529205658.01c0b3c0@192.168.0.5&gt;\r\nX-Sender: robert@192.168.0.5 (Unverified)\r\nX-Mailer: QUALCOMM Windows Eudora Version 5.1\r\nDate: Wed, 29 May 2002 22:46:27 +1000\r\nTo: rest-discuss@yahoogroups.com\r\nSubject: REST and travel agents revisited\r\nIn-Reply-To: &lt;20020424100718.C2625@...&gt;\r\nReferences: &lt;3CC63829.A92CC989@...&gt;\n &lt;5.1.0.14.0.20020419215825.01c63008@192.168.0.5&gt;\n &lt;5.1.0.14.0.20020420083440.01ae2a30@192.168.0.5&gt;\n &lt;5.1.0.14.0.20020421075256.01c79ec0@192.168.0.5&gt;\n &lt;3CC63829.A92CC989@...&gt;\r\nMime-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;us-ascii&quot;\r\nFrom: Robert Leftwich &lt;robert@...&gt;\r\nX-Yahoo-Group-Post: member; u=113923099\r\n\r\nBob&#39;s adding of the travel agent scenario to the &#39;State machine as hypertext&#39; wiki page along with the comment &#39;No attempts to RESTify this example have been reported&#39; prompted me to try out my REST skills - be warned, the training wheels are still on:-)\n\nThe resources modelled are similar to those identified in the original document:\n\nTripIdentifier\n    Participants\n        Participant1\n        Participant2\n        ....\n        ParticipantN\n    Journey\n        Stage1\n        Stage2\n        ....\n        StageN\n\nA full uri could be http://www.mytravel.com/person_identifier/trips/planned/JulyHoliday for a planned but not yet requested (i.e. a sandbox) and http://www.mytravel.com/person_identifier/trips/requested/XML2002 for a started but not yet fully authorized trip (i.e. tickets issued) and http://www.mytravel.com/person_identifier/trips/issued/XML2001 for a trip whose tickets have been issued. \n\nThe traveller could play in his sandbox to his hearts content, adding participants in the REST manner (i.e. doing a POST to /JulyHoliday/Particpants to get a uri for a new participant - /JulyHoliday/Particpants/ParticipantN and then performing a PUT to that uri using the appropriate participant representation [an XML structure containing first-name, last-name, address and birthdate, where an address consists of a street, city, state, zip, email and phone]) and deleting participants by using an http DELETE. Similarly, the requisite stages could be added as required.\n\nOnce completed, the traveller could request the trip be organized , which could be done by the a POST/PUT combination to /requested/HulyHoliday/ using the composite xml structure obtained from a GET to /planned/JulyHoliday/ (note that optionally the planned version could be preserved, otherwise it is deleted via http DELETE - what about integrity issues here, i.e. the DELETE failing?)\n\nNow it gets interesting - how does the travel agent know that a new trip has been requested and start the ball rolling? One way would be to have a resource /trips/requested/new which the individual travel agents subscribe to using the techniques described in HttpEvents. When a new trip is requested a notification containing the new trip uri  is sent to all the subscribers. The difficulty with this approach is that in the case of multiple travel agents, how is the new trip assigned to one and only one agent and how are all the other agents notified that the trip is now assigned to an agent and is no longer available?\n\nOnce an agent accepts responsibility for a trip, they will add the requisite legs to the trip using POST/PUT to the uri /requested/JulyHoliday/legs/planned/ ending up with a uri /requested/JulyHoliday/legs/planned/leg1..n and once this is completed the agent could request the specified legs by moving them to the /requested/JulyHoliday/legs/requested/ uri. The airline could be notified of the requested legs (HttpEvents via email?) and it could POST to /requested/JulyHoliday/legs/confirmed/leg1...n with the relevant seat information, etc as each leg is confirmed. (Hmm... what happens to /legs/requested/...?).\n\nIt&#39;s getting late and my brain is shutting down. I hope this makes sense to someone else and can be used as the basis for a discussion.\n\nRobert\n\n\n"}}