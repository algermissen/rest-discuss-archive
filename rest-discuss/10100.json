{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":175757792,"authorName":"Roy T. Fielding","from":"&quot;Roy T. Fielding&quot; &lt;fielding@...&gt;","profile":"roy_fielding","replyTo":"SENDER","senderId":"WnNWhFp3LxtTTlTJSa-t7eE2ZXYeLPjGJJy1zmOqifQbTJUrlxqv4lAf-7pAiwDTR2nkHGaVOdDIOJ_oE7_85OZ4c7ScCnlYy0XXaA","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [rest-discuss] Re: Idempotency of PUT when using IF-MATCH","postDate":"1198875408","msgId":10100,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PEYzNUZFMkU0LTFDMjEtNDgyQy1BNjhBLTFDQzlGQzVBQUQ3NEBnYml2LmNvbT4=","inReplyToHeader":"PGU1YzZlY2FiMDcxMjI4MDgzN3g4NjQ2M2NjZzkyZjdlMTkyMTEyYzQxNTZAbWFpbC5nbWFpbC5jb20+","referencesHeader":"PGU1YzZlY2FiMDcxMjI3MjMyMHMzZGE1NGZwNmYwM2EwMDMwM2NiMGMxN0BtYWlsLmdtYWlsLmNvbT4gPDIwMDcxMjI4MTYwODQ3LkdBMTUyNTJAa2xhbmdyYXVtPiA8ZTVjNmVjYWIwNzEyMjgwODM3eDg2NDYzY2NnOTJmN2UxOTIxMTJjNDE1NkBtYWlsLmdtYWlsLmNvbT4="},"prevInTopic":10099,"nextInTopic":10117,"prevInTime":10099,"nextInTime":10101,"topicId":10088,"numMessagesInTopic":12,"msgSnippet":"... In that case, client A definitely wants to receive the 412, since otherwise it will never know about client B s changes. A more interesting question is","rawEmail":"Return-Path: &lt;fielding@...&gt;\r\nX-Sender: fielding@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 43218 invoked from network); 28 Dec 2007 20:56:55 -0000\r\nX-Received: from unknown (66.218.67.95)\n  by m55.grp.scd.yahoo.com with QMQP; 28 Dec 2007 20:56:55 -0000\r\nX-Received: from unknown (HELO spaceymail-a3.g.dreamhost.com) (208.113.200.5)\n  by mta16.grp.scd.yahoo.com with SMTP; 28 Dec 2007 20:56:55 -0000\r\nX-Received: from [192.168.0.160] (ip72-211-200-45.oc.oc.cox.net [72.211.200.45])\n\tby spaceymail-a3.g.dreamhost.com (Postfix) with ESMTP id 431581953FB;\n\tFri, 28 Dec 2007 12:56:54 -0800 (PST)\r\nIn-Reply-To: &lt;e5c6ecab0712280837x86463ccg92f7e192112c4156@...&gt;\r\nReferences: &lt;e5c6ecab0712272320s3da54fp6f03a00303cb0c17@...&gt; &lt;20071228160847.GA15252@klangraum&gt; &lt;e5c6ecab0712280837x86463ccg92f7e192112c4156@...&gt;\r\nMime-Version: 1.0 (Apple Message framework v753)\r\nContent-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed\r\nMessage-Id: &lt;F35FE2E4-1C21-482C-A68A-1CC9FC5AAD74@...&gt;\r\nCc: rest-discuss@yahoogroups.com\r\nContent-Transfer-Encoding: 7bit\r\nDate: Fri, 28 Dec 2007 12:56:48 -0800\r\nTo: Daniel Yokomizo &lt;daniel.yokomizo@...&gt;\r\nX-Mailer: Apple Mail (2.753)\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: &quot;Roy T. Fielding&quot; &lt;fielding@...&gt;\r\nSubject: Re: [rest-discuss] Re: Idempotency of PUT when using IF-MATCH\r\nX-Yahoo-Group-Post: member; u=175757792; y=MVYApzN4rkntNNFAD5WD5Q-uOztvrUELZfmt0uu51GA5Ng4-7ya4\r\nX-Yahoo-Profile: roy_fielding\r\n\r\nOn Dec 28, 2007, at 8:37 AM, Daniel Yokomizo wrote:\n&gt; On Dec 28, 2007 4:08 PM, Aristotle Pagaltzis &lt;pagaltzis@...&gt; wrote:\n&gt; &gt; * Daniel Yokomizo &lt;daniel.yokomizo@...&gt; [2007-12-28 14:30]:\n&gt; &gt; &gt; 1. Client A sents PUT ... (IF-MATCH: &quot;XXX&quot;) ... FOO ...\n&gt; &gt; &gt; 2. Server process the request and sends the new ETag: YYY\n&gt; &gt; &gt; 3. Client B sents PUT ... (IF-MATCH: &quot;YYY&quot;) ... BAR\n&gt; &gt; &gt; 4. Server process the request and sends the new ETag: ZZZ\n&gt; &gt; &gt; 5. Client A retries the first PUT (network problems, double  \n&gt; submit, it\n&gt; &gt; &gt; doesn&#39;t matter) sends ETag: YYY\n&gt; &gt;\n&gt; &gt; I don&#39;t understand this sequence. You say the client sends ETag\n&gt; &gt; XXX in step #1, but when it retries the request in step #5, it\n&gt; &gt; sends ETag YYY. Did you make a typo somewhere or did you omit\n&gt; &gt; things from your timeline?\n&gt;\n&gt; Ops, it&#39;s a typo indeed. It should be ETag XXX. I hope this clears\n&gt; remaining confusion for everyone. It&#39;s supposed to be a simple retry\n&gt; of the first PUT, (e.g. client A\n&gt; never saw the response and want to ensure everything is fine). In the\n&gt; meantime Client B saw A&#39;s changes (because he has the unforgeable YYY\n&gt; ETag) and submits it&#39;s own changes.\n&gt;\n\nIn that case, client A definitely wants to receive the 412, since\notherwise it will never know about client B&#39;s changes.\n\nA more interesting question is whether the spec over-constrains the\ncase where a PUT is successful but tried again.  In other words, should\nthe server be allowed to accept the PUT if the etag differs but the\ncurrent state matches what is being PUT?  Subversion handles such\ncases nicely because it is common for two developers to patch the\nsame bugs.  I think the &quot;MUST respond with 412&quot; is yet another case\nof a bogus requirement being added in 2616.\n\nNote: this is an HTTP spec issue, not a REST issue.\n\n....Roy\n\n\n"}}