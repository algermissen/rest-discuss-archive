{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":227453699,"authorName":"Griffin Caprio","from":"Griffin Caprio &lt;griffin.caprio@...&gt;","profile":"griffinc18","replyTo":"SENDER","senderId":"VS3Hx5AV9p73g8P-6u8P0P52zENKmqadgEXbqlh7z1KtYgZvtnbj2wvPMDmclGY4Tog7V5mH5P_zzMkYVS29rY7FrpydiVGv_mTvxnKnsuY","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Returning a Response Body for 400 errors","postDate":"1203002130","msgId":10385,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PEVDQ0NDNjc2LTU2NDUtNENGNi05OTg1LTUxQ0VCRTdBQzFGMUBnbWFpbC5jb20+","inReplyToHeader":"PDRGRTREQzFCLTNFQjktNEQ2QS04NzRCLTk0MTMzMEY0NDkwMEBnbWFpbC5jb20+","referencesHeader":"PGZvb2RlYStxYm9mQGVHcm91cHMuY29tPiA8NEZFNERDMUItM0VCOS00RDZBLTg3NEItOTQxMzMwRjQ0OTAwQGdtYWlsLmNvbT4="},"prevInTopic":10384,"nextInTopic":10386,"prevInTime":10384,"nextInTime":10386,"topicId":10381,"numMessagesInTopic":10,"msgSnippet":"Hi all, What s the best way to return specific errors to a client if they make a malformed request?  My company has a REST web service that accepts POSTed data","rawEmail":"Return-Path: &lt;griffin.caprio@...&gt;\r\nX-Sender: griffin.caprio@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 12978 invoked from network); 14 Feb 2008 15:15:56 -0000\r\nX-Received: from unknown (66.218.67.95)\n  by m50.grp.scd.yahoo.com with QMQP; 14 Feb 2008 15:15:56 -0000\r\nX-Received: from unknown (HELO py-out-1112.google.com) (64.233.166.178)\n  by mta16.grp.scd.yahoo.com with SMTP; 14 Feb 2008 15:15:56 -0000\r\nX-Received: by py-out-1112.google.com with SMTP id f31so434304pyh.18\n        for &lt;rest-discuss@yahoogroups.com&gt;; Thu, 14 Feb 2008 07:15:52 -0800 (PST)\r\nX-Received: by 10.35.34.19 with SMTP id m19mr1613855pyj.2.1203002152140;\n        Thu, 14 Feb 2008 07:15:52 -0800 (PST)\r\nReturn-Path: &lt;griffin.caprio@...&gt;\r\nX-Received: from ?10.0.1.103? ( [66.251.239.172])\n        by mx.google.com with ESMTPS id w38sm7329687pyg.17.2008.02.14.07.15.49\n        (version=TLSv1/SSLv3 cipher=OTHER);\n        Thu, 14 Feb 2008 07:15:50 -0800 (PST)\r\nMessage-Id: &lt;ECCCC676-5645-4CF6-9985-51CEBE7AC1F1@...&gt;\r\nTo: rest-discuss@yahoogroups.com\r\nIn-Reply-To: &lt;4FE4DC1B-3EB9-4D6A-874B-941330F44900@...&gt;\r\nContent-Type: multipart/alternative; boundary=Apple-Mail-2--790852093\r\nMime-Version: 1.0 (Apple Message framework v919.2)\r\nDate: Thu, 14 Feb 2008 09:15:30 -0600\r\nReferences: &lt;foodea+qbof@...&gt; &lt;4FE4DC1B-3EB9-4D6A-874B-941330F44900@...&gt;\r\nX-Mailer: Apple Mail (2.919.2)\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Griffin Caprio &lt;griffin.caprio@...&gt;\r\nSubject: Returning a Response Body for 400 errors\r\nX-Yahoo-Group-Post: member; u=227453699; y=te4hX_oSNCCOYYLVFGam7Mc4hp4SUc42VppTY5d3BHLC4kWJcA\r\nX-Yahoo-Profile: griffinc18\r\n\r\n\r\n--Apple-Mail-2--790852093\r\nContent-Type: text/plain;\n\tcharset=US-ASCII;\n\tformat=flowed;\n\tdelsp=yes\r\nContent-Transfer-Encoding: 7bit\r\n\r\nHi all,\n\nWhat&#39;s the best way to return specific errors to a client if they make  \na malformed request?  My company has a REST web service that accepts  \nPOSTed data to it.  We wanted to return a 400 response code in cases  \nwhere the data being sent is invalid for some reason ( invalid XML,  \ninvalid business rules, etc.. ) .  We also wanted to return specific  \nvalidation messages as part of the response body.\n\nHowever, we&#39;re running into problems with some java clients because  \napparently the HttpUrlConnection class in the JDK swallows the  \nresponse bodies when a 400 or higher return code is sent back:\n\n From HttpUrlConnection ( around line 970 )\n\nif (respCode &gt;= 400) {\n    if (respCode == 404 || respCode == 410) {\n        throw new FileNotFoundException(url.toString());\n    } else {\n       throw new java.io.IOException(\n                          &quot;Server returned HTTP&quot;\n                          + &quot; response code: &quot; + respCode\n                          + &quot; for URL: &quot; + url.toString());\n    }\n}\n\n\nSo my question: Is what we&#39;re trying to do not really correct?  I&#39;ve  \nlooked in the HTTP spec and it says that an Entity Body may be  \nreturned with a 400 error, so maybe it&#39;s just a bug in the Java  \nimplementation?\n\nAny input would be appreciated.\n\nThanks,\nGriffin\r\n--Apple-Mail-2--790852093\r\nContent-Type: text/html;\n\tcharset=US-ASCII\r\nContent-Transfer-Encoding: quoted-printable\r\n\r\n&lt;html&gt;&lt;body style=3D&quot;word-wrap: break-word; -webkit-nbsp-mode: space; -webk=\r\nit-line-break: after-white-space; &quot;&gt;Hi all,&lt;div&gt;&lt;br class=3D&quot;webkit-block-p=\r\nlaceholder&quot;&gt;&lt;/div&gt;&lt;div&gt;What&#39;s the best way to return specific errors to a c=\r\nlient if they make a malformed request? &nbsp;My company has a REST web ser=\r\nvice that accepts POSTed data to it. &nbsp;We wanted to return a 400 respon=\r\nse code in cases where the data being sent is invalid for some reason ( inv=\r\nalid XML, invalid business rules, etc.. ) . &nbsp;We also wanted to return =\r\nspecific validation messages as part of the response body. &nbsp;&lt;/div&gt;&lt;div=\r\n&gt;&lt;br class=3D&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;However, we&#39;re running i=\r\nnto problems with some java clients because apparently the HttpUrlConnectio=\r\nn class in the JDK swallows the response bodies when a 400 or higher return=\r\n code is sent back:&lt;/div&gt;&lt;div&gt;&lt;br class=3D&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;=\r\n&lt;div&gt;From HttpUrlConnection ( around line 970 )&lt;/div&gt;&lt;div&gt;&lt;br class=3D&quot;webk=\r\nit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&gt;&lt;span class=3D&quot;Apple-style-span&quot; style=3D&quot;=\r\ncolor: rgb(0, 0, 255); font-family: Arial; &quot;&gt;&lt;strong&gt;&lt;font color=3D&quot;#7f0055=\r\n&quot;&gt;if&lt;/font&gt;&lt;/strong&gt;&lt;font color=3D&quot;#000000&quot;&gt;&nbsp;(respCode &gt;=3D&nbsp;&lt;/=\r\nfont&gt;&lt;font color=3D&quot;#990000&quot;&gt;&lt;b&gt;400&lt;/b&gt;&lt;/font&gt;&lt;font color=3D&quot;#000000&quot;&gt;) {&lt;/=\r\nfont&gt;&lt;/span&gt;&lt;/div&gt;&lt;span class=3D&quot;Apple-style-span&quot; style=3D&quot;color: rgb(0, 0=\r\n, 255); font-family: Arial; &quot;&gt;&lt;font color=3D&quot;#7f0055&quot;&gt;&lt;b&gt;&nbsp;&nbsp; if&lt;/b=\r\n&gt;&lt;/font&gt;&lt;font color=3D&quot;#000000&quot;&gt;&nbsp;(respCode =3D=3D&nbsp;&lt;/font&gt;&lt;font co=\r\nlor=3D&quot;#990000&quot;&gt;&lt;b&gt;404&lt;/b&gt;&lt;/font&gt;&lt;font color=3D&quot;#000000&quot;&gt;&nbsp;|| respCode =\r\n=3D=3D&nbsp;&lt;/font&gt;&lt;font color=3D&quot;#990000&quot;&gt;&lt;b&gt;410&lt;/b&gt;&lt;/font&gt;&lt;font color=3D&quot;=\r\n#000000&quot;&gt;) {&lt;br&gt;&lt;/font&gt;&lt;font color=3D&quot;#000000&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=\r\np;&nbsp; throw&nbsp;&lt;/font&gt;&lt;font color=3D&quot;#7f0055&quot;&gt;&lt;b&gt;new&lt;/b&gt;&lt;/font&gt;&lt;font c=\r\nolor=3D&quot;#000000&quot;&gt;&nbsp;&lt;/font&gt;&lt;a href=3D&quot;http://www.java2s.com/Open-Source/=\r\nJava-Document/JDK-Core/io-nio/java/io/FileNotFoundException.java.htm&quot;&gt;&lt;b&gt;&lt;f=\r\nont color=3D&quot;#003399&quot;&gt;FileNotFoundException&lt;/font&gt;&lt;/b&gt;&lt;/a&gt;&lt;font color=3D&quot;#0=\r\n00000&quot;&gt;(url.toString());&lt;br&gt;&lt;/font&gt;&lt;font color=3D&quot;#000000&quot;&gt;&nbsp;&nbsp; }&n=\r\nbsp;&lt;/font&gt;&lt;font color=3D&quot;#7f0055&quot;&gt;&lt;b&gt;else&lt;/b&gt;&lt;/font&gt;&lt;font color=3D&quot;#000000=\r\n&quot;&gt;&nbsp;{&lt;br&gt;&lt;/font&gt;&lt;font color=3D&quot;#000000&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =\r\nthrow&nbsp;&lt;/font&gt;&lt;font color=3D&quot;#7f0055&quot;&gt;&lt;b&gt;new&lt;/b&gt;&lt;/font&gt;&lt;font color=3D&quot;#=\r\n000000&quot;&gt;&nbsp;&lt;/font&gt;&lt;a href=3D&quot;http://www.java2s.com/Open-Source/Java-Docu=\r\nment/JDK-Core/io-nio/java/io/IOException.java.htm&quot;&gt;&lt;b&gt;&lt;font color=3D&quot;#00339=\r\n9&quot;&gt;java.io.IOException&lt;/font&gt;&lt;/b&gt;&lt;/a&gt;&lt;font color=3D&quot;#000000&quot;&gt;(&lt;br&gt;&lt;/font&gt;&lt;f=\r\nont color=3D&quot;#000000&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=\r\n;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=\r\nbsp;&nbsp;&nbsp;&nbsp;&lt;/font&gt;&lt;font color=3D&quot;#2a00ff&quot;&gt;&quot;Server returned HTTP&quot;=\r\n&lt;/font&gt;&lt;br&gt;&lt;font color=3D&quot;#000000&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=\r\np;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=\r\nnbsp;&nbsp;&nbsp;&nbsp;&nbsp; +&nbsp;&lt;/font&gt;&lt;font color=3D&quot;#2a00ff&quot;&gt;&quot; respo=\r\nnse code: &quot;&lt;/font&gt;&lt;font color=3D&quot;#000000&quot;&gt;&nbsp;+ respCode&lt;br&gt;&lt;/font&gt;&lt;font =\r\ncolor=3D&quot;#000000&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=\r\nsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=\r\n&nbsp;&nbsp; +&nbsp;&lt;/font&gt;&lt;font color=3D&quot;#2a00ff&quot;&gt;&quot; for URL: &quot;&lt;/font&gt;&lt;font=\r\n color=3D&quot;#000000&quot;&gt;&nbsp;+ url.toString());&lt;br&gt;&lt;/font&gt;&lt;font color=3D&quot;#00000=\r\n0&quot;&gt;&nbsp;&nbsp; }&lt;br&gt;&lt;/font&gt;&lt;font color=3D&quot;#000000&quot;&gt;}&lt;/font&gt;&lt;/span&gt;&lt;div&gt;&lt;fo=\r\nnt class=3D&quot;Apple-style-span&quot; face=3D&quot;Arial&quot;&gt;&lt;br class=3D&quot;webkit-block-plac=\r\neholder&quot;&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font class=3D&quot;Apple-style-span&quot; face=3D&quot;Arial&quot;&gt;=\r\n&lt;br class=3D&quot;webkit-block-placeholder&quot;&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font class=3D&quot;App=\r\nle-style-span&quot; face=3D&quot;Arial&quot;&gt;So my question: Is what we&#39;re trying to do no=\r\nt really correct? &nbsp;I&#39;ve looked in the HTTP spec and it says that an En=\r\ntity Body may be returned with a 400 error, so maybe it&#39;s just a bug in the=\r\n Java implementation?&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font class=3D&quot;Apple-style-span&quot; fac=\r\ne=3D&quot;Arial&quot;&gt;&lt;br class=3D&quot;webkit-block-placeholder&quot;&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font =\r\nclass=3D&quot;Apple-style-span&quot; face=3D&quot;Arial&quot;&gt;Any input would be appreciated.&lt;/=\r\nfont&gt;&lt;/div&gt;&lt;div&gt;&lt;font class=3D&quot;Apple-style-span&quot; face=3D&quot;Arial&quot;&gt;&lt;br class=\r\n=3D&quot;webkit-block-placeholder&quot;&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font class=3D&quot;Apple-style-=\r\nspan&quot; face=3D&quot;Arial&quot;&gt;Thanks,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font class=3D&quot;Apple-style-sp=\r\nan&quot; face=3D&quot;Arial&quot;&gt;Griffin&lt;/font&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;\r\n--Apple-Mail-2--790852093--\r\n\n"}}