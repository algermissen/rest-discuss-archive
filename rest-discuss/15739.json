{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":28198498,"authorName":"Nina Jeliazkova","from":"Nina Jeliazkova &lt;nina@...&gt;","profile":"nina_n","replyTo":"SENDER","senderId":"SwkpoCpZ12zVgcldjrYVz4GqcUJHiFd6WI9LX5vnxGsQQz9kaeXCxxeH-uB-RSzfN3q7J0mZAK0I4v6wID4fVfbbH2CT","spamInfo":{"isSpam":false,"reason":"0"},"subject":"ClientResource  leaves inactive thread","postDate":"1277187649","msgId":15739,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRDMjA1NjQxLjgwMTAxMDlAYWNhZC5iZz4="},"prevInTopic":0,"nextInTopic":15740,"prevInTime":15738,"nextInTime":15740,"topicId":15739,"numMessagesInTopic":3,"msgSnippet":"Hello All, I am experiencing memory/thread leak ,with Restlet-2.0-RC4 and Restlet-2.0-SNAPSHOT , when using ClientResource . Basically, ClientResource doesn t","rawEmail":"Return-Path: &lt;nina@...&gt;\r\nX-Sender: nina@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 87977 invoked from network); 22 Jun 2010 06:20:55 -0000\r\nX-Received: from unknown (98.137.34.44)\n  by m2.grp.sp2.yahoo.com with QMQP; 22 Jun 2010 06:20:55 -0000\r\nX-Received: from unknown (HELO amigo.acad.bg) (194.141.0.3)\n  by mta1.grp.sp2.yahoo.com with SMTP; 22 Jun 2010 06:20:53 -0000\r\nX-Received: from [194.141.0.136] (nina-vpn.acad.bg [194.141.0.136])\n\tby amigo.acad.bg (8.14.2/8.14.2) with ESMTP id o5M6KoY9011293\n\tfor &lt;rest-discuss@yahoogroups.com&gt;; Tue, 22 Jun 2010 09:20:50 +0300\r\nMessage-ID: &lt;4C205641.8010109@...&gt;\r\nDate: Tue, 22 Jun 2010 09:20:49 +0300\r\nUser-Agent: Thunderbird 2.0.0.24 (Windows/20100228)\r\nMIME-Version: 1.0\r\nTo: Rest List &lt;rest-discuss@yahoogroups.com&gt;\r\nX-Enigmail-Version: 0.96.0\r\nContent-Type: multipart/alternative;\n boundary=&quot;------------080801000703080905010709&quot;\r\nFrom: Nina Jeliazkova &lt;nina@...&gt;\r\nReply-To: jeliazkova.nina@...\r\nSubject: ClientResource  leaves inactive thread\r\nX-Yahoo-Group-Post: member; u=28198498; y=Duhz6awppd936aTL2nQpQFx_RlhdBfyU2zD6SxHNjzzI\r\nX-Yahoo-Profile: nina_n\r\n\r\n\r\n--------------080801000703080905010709\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: 7bit\r\n\r\nHello All,\n\nI am experiencing memory/thread leak ,with Restlet-2.0-RC4 and\nRestlet-2.0-SNAPSHOT , when using ClientResource . Basically,\nClientResource doesn&#39;t close the thread it spawns and this result in\nnumber of inactive threads and  severe memory leak.\n\nHere is some very simple code to illustrate this behaviour.  The same\ncode runs fine in Restlet-2.0-M6 (which doesn&#39;t span new thread in\nClientResource).\n\n    public void run(int instances) throws Exception {       \n       \n        for (int i=0; i &lt; instances;i++) {\n            ClientResource clientResource = null;\n            Representation r = null;\n            try {\n                clientResource = new ClientResource(&quot;http://restlet.org&quot;);\n                r = clientResource.get();\n            } finally {\n                try { r.release(); } catch (Exception x) {}\n                try { clientResource.release(); } catch (Exception x) {}\n            }\n        }\n    }\n   \n    public static void main(String[] args) throws Exception {\n        ThreadTest test = new ThreadTest();\n        test.run(1000);\n    }\n\n\nI guess there might be something missing in the code to explicitly close\nthreads, but since the same code runs fine in M6, it is quite confusing\nto experience leaks after upgrade.\n\nBest regards,\nNina Jeliazkova\n\nP.S. Inactive threads while executing the example above.\n\n\n\r\n--------------080801000703080905010709\r\nContent-Type: multipart/related;\n boundary=&quot;------------090803060107080906000309&quot;\r\n\r\n\r\n--------------090803060107080906000309\r\nContent-Type: text/html; charset=ISO-8859-1\r\nContent-Transfer-Encoding: 7bit\r\n\r\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;/head&gt;\n&lt;body bgcolor=&quot;#ffffff&quot; text=&quot;#000000&quot;&gt;\nHello All,&lt;br&gt;\n&lt;br&gt;\nI am experiencing memory/thread leak ,with Restlet-2.0-RC4 and\nRestlet-2.0-SNAPSHOT , when using ClientResource . Basically,\nClientResource doesn&#39;t close the thread it spawns and this result in\nnumber of inactive threads and&nbsp; severe memory leak.&lt;br&gt;\n&lt;br&gt;\nHere is some very simple code to illustrate this behaviour.&nbsp; The same\ncode runs fine in Restlet-2.0-M6 (which doesn&#39;t span new thread in\nClientResource).&lt;br&gt;\n&lt;br&gt;\n&nbsp;&nbsp;&nbsp; public void run(int instances) throws Exception {&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; for (int i=0; i &lt; instances;i++) { &lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ClientResource clientResource = null;&lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Representation r = null;&lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; try {&lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; clientResource = new\nClientResource(&lt;a class=&quot;moz-txt-link-rfc2396E&quot; href=&quot;http://restlet.org&quot;&gt;&quot;http://restlet.org&quot;&lt;/a&gt;);&lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; r = clientResource.get();&lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; } finally {&lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; try { r.release(); } catch (Exception x) {}&lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; try { clientResource.release(); } catch (Exception x) {}&lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }&lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }&lt;br&gt;\n&nbsp;&nbsp;&nbsp; }&lt;br&gt;\n&nbsp;&nbsp;&nbsp; &lt;br&gt;\n&nbsp;&nbsp;&nbsp; public static void main(String[] args) throws Exception {&lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ThreadTest test = new ThreadTest();&lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; test.run(1000);&lt;br&gt;\n&nbsp;&nbsp;&nbsp; }&lt;br&gt;\n&lt;br&gt;\n&lt;br&gt;\nI guess there might be something missing in the code to explicitly\nclose threads, but since the same code runs fine in M6, it is quite\nconfusing to experience leaks after upgrade.&lt;br&gt;\n&lt;br&gt;\nBest regards,&lt;br&gt;\nNina Jeliazkova&lt;br&gt;\n&lt;br&gt;\nP.S. Inactive threads while executing the example above.&lt;br&gt;\n&lt;br&gt;\n&lt;img src=&quot;cid:part1.09020608.01080607@...&quot; alt=&quot;&quot;&gt;&lt;br&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n\r\n--------------090803060107080906000309\r\nContent-Type: image/jpeg;\n name=&quot;moz-screenshot-7.jpg&quot;\r\nContent-ID: &lt;part1.09020608.01080607@...&gt;\r\nContent-Disposition: inline;\n filename=&quot;moz-screenshot-7.jpg&quot;\r\n\r\n[ Attachment content not displayed ]\r\n--------------090803060107080906000309--\r\n\n\r\n--------------080801000703080905010709--\r\n\n"}}