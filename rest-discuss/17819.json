{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":69164307,"authorName":"mike amundsen","from":"mike amundsen &lt;mamund@...&gt;","profile":"mamund","replyTo":"SENDER","senderId":"acxecdWQFs-troS7qn1PntynyPrKVxclrLBiHkZY36S75rNQTBzI9Z1DeuFe1TnOauikedGD5xEsnG4Vc_Dn8qjpusHPmDw","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [rest-discuss] Conneg based on User-Agent","postDate":"1317238800","msgId":17819,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PENBUFdfOG00US1mNDFHUG5LWE1hY0tNQ085MkFQemY9WXBCNkRhZTNZcFBfRm10QmJpZ0BtYWlsLmdtYWlsLmNvbT4=","inReplyToHeader":"PDNEREQwQkU2NTU4NjlENEVBNTA2NjUyQjM4MDNBRUY2OENBMjEzOTZAUFJJU00uY2FmZmVpbmUtaXQubmV0Pg==","referencesHeader":"PDNBRDk1QjVGLTdBNTgtNDMxMC05OTM0LTNFNkUwOTIzMjQzMUBub3Jkc2MuY29tPgk8Q0FEYkdaalpTak5vLUQ0Ym1ONU9zVEgrcmUrZ3AxMWtWeVQwLXprblRCTkVWdVZrY1RBQG1haWwuZ21haWwuY29tPgk8MEI4NDA2RjEtREU3NS00OEM4LUIzOUEtRTQ3NUEyQjEwMERGQG5vcmRzYy5jb20+CTw0MzgzNUU3RS0xMDU4LTRGNTgtQjM2OS0wOUE5RDlBNzlFMTBAZ21haWwuY29tPgk8QTVEQUFCNUYtNDg1MC00NjIxLTk0REItMjA3RkExMEJCQUM2QG5vcmRzYy5jb20+CTxDQVBXXzhtNTFPQ0dyVEZHR09VdVlrX00taVZCY2pSNzdSdkNUcD1fbmtjYm1DTGRxandAbWFpbC5nbWFpbC5jb20+CTwzREREMEJFNjU1ODY5RDRFQTUwNjY1MkIzODAzQUVGNjhDQTIxMzk2QFBSSVNNLmNhZmZlaW5lLWl0Lm5ldD4="},"prevInTopic":17818,"nextInTopic":17820,"prevInTime":17818,"nextInTime":17820,"topicId":17770,"numMessagesInTopic":13,"msgSnippet":"i d have to dig it up, but my recollection is that when the server has these possibilities for a resource: - text/html - application/xml - application/json and","rawEmail":"Return-Path: &lt;mca@...&gt;\r\nX-Sender: mca@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 88746 invoked from network); 28 Sep 2011 19:40:02 -0000\r\nX-Received: from unknown (98.137.35.162)\n  by m8.grp.sp2.yahoo.com with QMQP; 28 Sep 2011 19:40:02 -0000\r\nX-Received: from unknown (HELO mail-ww0-f48.google.com) (74.125.82.48)\n  by mta6.grp.sp2.yahoo.com with SMTP; 28 Sep 2011 19:40:01 -0000\r\nX-Received: by wwe32 with SMTP id 32so7508782wwe.17\n        for &lt;rest-discuss@yahoogroups.com&gt;; Wed, 28 Sep 2011 12:40:00 -0700 (PDT)\r\nMIME-Version: 1.0\r\nX-Received: by 10.227.38.217 with SMTP id c25mr1922525wbe.60.1317238800435; Wed,\n 28 Sep 2011 12:40:00 -0700 (PDT)\r\nX-Received: by 10.180.94.136 with HTTP; Wed, 28 Sep 2011 12:40:00 -0700 (PDT)\r\nIn-Reply-To: &lt;3DDD0BE655869D4EA506652B3803AEF68CA21396@...-it.net&gt;\r\nReferences: &lt;3AD95B5F-7A58-4310-9934-3E6E09232431@...&gt;\n\t&lt;CADbGZjZSjNo-D4bmN5OsTH+re+gp11kVyT0-zknTBNEVuVkcTA@...&gt;\n\t&lt;0B8406F1-DE75-48C8-B39A-E475A2B100DF@...&gt;\n\t&lt;43835E7E-1058-4F58-B369-09A9D9A79E10@...&gt;\n\t&lt;A5DAAB5F-4850-4621-94DB-207FA10BBAC6@...&gt;\n\t&lt;CAPW_8m51OCGrTFGGOUuYk_M-iVBcjR77RvCTp=_nkcbmCLdqjw@...&gt;\n\t&lt;3DDD0BE655869D4EA506652B3803AEF68CA21396@...-it.net&gt;\r\nDate: Wed, 28 Sep 2011 15:40:00 -0400\r\nX-Google-Sender-Auth: 7y6CZo1IjtQNsEsAr96CwCreWGw\r\nMessage-ID: &lt;CAPW_8m4Q-f41GPnKXMacKMCO92APzf=YpB6Dae3YpP_FmtBbig@...&gt;\r\nTo: Sebastien Lambla &lt;seb@...&gt;\r\nCc: Jan Algermissen &lt;jan.algermissen@...&gt;, Dilip Krishnan &lt;dilip.krishnan@...&gt;, \n\tErik Mogensen &lt;erik@...&gt;, REST Discuss &lt;rest-discuss@yahoogroups.com&gt;\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: quoted-printable\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: mike amundsen &lt;mamund@...&gt;\r\nSubject: Re: [rest-discuss] Conneg based on User-Agent\r\nX-Yahoo-Group-Post: member; u=69164307; y=o-BPcU2KPBB2LkJonjMlwF8BfqEQ_aS30PfsROy75azM\r\nX-Yahoo-Profile: mamund\r\n\r\ni&#39;d have to dig it up, but my recollection is that when the server has\nthes=\r\ne possibilities for a resource:\n- text/html\n- application/xml\n- application=\r\n/json\n\nand i am using the mimeparse library [1] on the server,\nand the clie=\r\nnt is Chrome browser (not sure if this the case for Safari, too)...\n\nthe ne=\r\ngotiated result is always the XML representation, not HTML.\n\nmoreover, Chro=\r\nme does not _render_ the XML on screen, just displays a\nblank (view source =\r\nshows the XML).\nNOTE: my XML &quot;plugin&quot; can kick in to re-display the XML, bu=\r\nt that&#39;s a\n&quot;dev&quot; case on my workstation.\n\nit&#39;s been a while since i slogged=\r\n through this and i long ago added a\n&quot;shim&quot; that returns the HTML variant t=\r\no Chrome browsers by overriding\nthis quirk. possibly the override is no lon=\r\nger needed (due to changes\nin Chrome, changes in the MimeParse lib, or some=\r\n bone-headed coding\nbug i am still carrying around).\n\n\n[1] http://code.goog=\r\nle.com/p/mimeparse/\n\nmca\nhttp://amundsen.com/blog/\nhttp://twitter.com@mamun=\r\nd\nhttp://mamund.com/foaf.rdf#me\n\n\n\n\n\nOn Wed, Sep 28, 2011 at 15:04, Sebasti=\r\nen Lambla &lt;seb@...&gt; wrote:\n&gt; Mike,\n&gt;\n&gt; I have no issues getting w=\r\nebkit rendering application/xhtml+xml with chrome and safari. Where are you=\r\n seeing the problem?\n&gt;\n&gt; -----Original Message-----\n&gt; From: rest-discuss@ya=\r\nhoogroups.com [mailto:rest-discuss@yahoogroups.com] On Behalf Of mike amund=\r\nsen\n&gt; Sent: 16 September 2011 08:16\n&gt; To: Jan Algermissen\n&gt; Cc: Dilip Krish=\r\nnan; Erik Mogensen; REST Discuss\n&gt; Subject: Re: [rest-discuss] Conneg based=\r\n on User-Agent\n&gt;\n&gt; Jan:\n&gt;\n&gt; Not sure this is the same thing, but I have cod=\r\ne that handles &quot;exceptions&quot; for conneg match results and those exceptions a=\r\nre based on UA reporting.\n&gt;\n&gt; here are some real-world examples:\n&gt;\n&gt; WebKit=\r\n conneg will always pick any XML variant over any HTML variant offered. IOW=\r\n, when given that chance, WebKit conneg results in &quot;give me XML&quot; Turns out =\r\nWebKit does not _render_ the XML (just shows a blank page). I add an except=\r\nion to make sure WebKit browsers (not\n&gt; XMLHttpRequest) get HTML if it&#39;s av=\r\nailable.\n&gt;\n&gt; Mirosoft Excel conneg will favor HTML (assuming a table) over =\r\nCSV. I add an exception so that MS-Excel clients get CSV if it is available=\r\n.\n&gt;\n&gt; There are (I think) some others, but those are ones that come up quit=\r\ne often and how i deal with them.\n&gt;\n&gt; mca\n&gt; http://amundsen.com/blog/\n&gt; htt=\r\np://twitter.com@mamund\n&gt; http://mamund.com/foaf.rdf#me\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; On Fri, =\r\nSep 16, 2011 at 08:30, Jan Algermissen &lt;jan.algermissen@...&gt; wrote:\n=\r\n&gt;&gt;\n&gt;&gt; On Sep 16, 2011, at 5:00 AM, Dilip Krishnan wrote:\n&gt;&gt;\n&gt;&gt;&gt; Seems like =\r\n&quot;soap&quot;-creep to me ... a la WS-addressing :)\n&gt;&gt;\n&gt;&gt; Why in particular?\n&gt;&gt;\n&gt;&gt;=\r\n&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; One thing that doesn&#39;t feel right to me is the fact that the clie=\r\nnt is driving control flow.\n&gt;&gt;\n&gt;&gt; Is that any different from redirecting a =\r\nmobile UA to a dedicated server?\n&gt;&gt;\n&gt;&gt; ....\n&gt;&gt;\n&gt;&gt; I just remembered the Acc=\r\nept_Features header, which is somehow\n&gt;&gt; related: http://www.ietf.org/rfc/r=\r\nfc2295.txt\n&gt;&gt;\n&gt;&gt; Jan\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;&gt; Also reminds of a Subbu&#39;s post on Media T=\r\nypes, Plumbing and\n&gt;&gt;&gt; Democracy, in the issues that it brings up. I do lik=\r\ne the\n&gt;&gt;&gt; parametrized media types but its not widely supported; (atleast t=\r\nhe\n&gt;&gt;&gt; last time I checked)\n&gt;&gt;&gt;\n&gt;&gt;&gt; Regards,\n&gt;&gt;&gt; Dilip Krishnan\n&gt;&gt;&gt; dilip.k=\r\nrishnan@...\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; On Sep 15, 2011, at 5:46 PM, Jan Algermis=\r\nsen wrote:\n&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; On Sep 16, 2011, at 12:20 AM, Erik Mogensen wrote:=\r\n\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; On Thu, Sep 15, 2011 at 7:54 PM, Jan Algermissen &lt;jan.algermiss=\r\nen@...&gt; wrote:\n&gt;&gt;&gt;&gt;&gt; I think using the UserAgent header to negotiate=\r\n representation features is a nice solution for non-human targeted situatio=\r\nns, too. Essentially this means to negotiate incompatible media types based=\r\n on Accept and the compatible variations in a given media type based on Use=\r\nrAgent. This might include the addition of certain Link headers.\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;=\r\n&gt; I agree with the &quot;Avoid avoid&quot; here. =A0It sounds a lot like out-of-band =\r\nknowledge, and in the opposite direction than is usual. =A0&quot;I know that V3.=\r\n1.3 of FooClient doesn&#39;t use the xyzzy link relation, so I&#39;ll just save ban=\r\ndwidth by not sending it&quot;. =A0The server could end up with a large amount o=\r\nf knowledge. =A0See wurfl for an example of this going bad.\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; Why=\r\n not stick to Accept (which is that it&#39;s for) and use media type parameters=\r\n?\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; Accept: application/procurement;hypermediacontrols=3Dnew;q=3D=\r\n1,\n&gt;&gt;&gt;&gt;&gt; application/procurement;hypermediacontrols=3Dold;q=3D0.3\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;=\r\n Been there, done that :-) Too enteprisey for my taste. Leads to\n&gt;&gt;&gt;&gt; packa=\r\nging up feature sets into version numbers. I&#39;d always let the\n&gt;&gt;&gt;&gt; Accept e=\r\nxpress the general capability of the client. (Which I read\n&gt;&gt;&gt;&gt; as: &quot;If you=\r\n hand me application/atom I am pretty sure I can fulfill\n&gt;&gt;&gt;&gt; my user&#39;s int=\r\nent from there&quot;) Versioning makes the whole elegance go\n&gt;&gt;&gt;&gt; away :-)\n&gt;&gt;&gt;&gt;\n=\r\n&gt;&gt;&gt;&gt; I was thinking more in terms of &#39;hints&#39; or &#39;best effort&#39;. Sending mobi=\r\nle devices different content (incl. bu way of a redirect) seems ok. So why =\r\nnot &quot;direct that old legacy product we sold 5 years ago to that old (set of=\r\n) servers we keep around for these cases&quot;?\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; My original issue, BTW=\r\n, was routing requests in a load balancer to direct clients that need a new=\r\n feature to those services that have the new feature installed and are alre=\r\nady up and running. In general: situations where you have scaled to N servi=\r\nces behind one IP that run different versions of a service (e.g. because th=\r\ney are being upgraded one by one while keeping the site in operation).\n&gt;&gt;&gt;&gt;=\r\n\n&gt;&gt;&gt;&gt; Jan\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; &quot;new&quot; and &quot;old&quot; are obviously bad choices, but y=\r\nou get the idea. =A0That way the media type can express the different &quot;vari=\r\nants&quot; within compatibility, and clients can express their capabilities in a=\r\n header designed for conneg. =A0Evolvability FTW!\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;&gt; --\n&gt;=\r\n&gt;&gt;&gt;&gt; -mogsie-\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt; ------------------------------------\n&gt;&gt;&gt;&gt;=\r\n\n&gt;&gt;&gt;&gt; Yahoo! Groups Links\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt; ----------=\r\n--------------------------\n&gt;&gt;\n&gt;&gt; Yahoo! Groups Links\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;&gt;\n&gt;\n&gt;\n&gt; ----=\r\n--------------------------------\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n&gt;\n\n"}}