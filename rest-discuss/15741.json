{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":28198498,"authorName":"Nina Jeliazkova","from":"Nina Jeliazkova &lt;nina@...&gt;","profile":"nina_n","replyTo":"SENDER","senderId":"WL7TWW6aQL3pXTfzYTLREmQbVyGUPiL29u8BgMVkg3WywTxyeNhfzdrc7J0F510zWb6Dak0voPb0ctn9718UUiVO7OIy","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [rest-discuss] ClientResource leaves inactive thread","postDate":"1277200822","msgId":15741,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDRDMjA4OUI2LjUwNTA5MDJAYWNhZC5iZz4=","inReplyToHeader":"PEFBTkxrVGlsbXB5NEx0U0Y2QVh2UG9vVFlLOGhBYlR4SDQwcnRiaVgtbjdjbkBtYWlsLmdtYWlsLmNvbT4=","referencesHeader":"PDRDMjA1NjQxLjgwMTAxMDlAYWNhZC5iZz4gPEFBTkxrVGlsbXB5NEx0U0Y2QVh2UG9vVFlLOGhBYlR4SDQwcnRiaVgtbjdjbkBtYWlsLmdtYWlsLmNvbT4="},"prevInTopic":15740,"nextInTopic":0,"prevInTime":15740,"nextInTime":15742,"topicId":15739,"numMessagesInTopic":3,"msgSnippet":"Sorry, wrong list, my mistake! nina","rawEmail":"Return-Path: &lt;nina@...&gt;\r\nX-Sender: nina@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 6690 invoked from network); 22 Jun 2010 10:03:49 -0000\r\nX-Received: from unknown (98.137.34.45)\n  by m11.grp.re1.yahoo.com with QMQP; 22 Jun 2010 10:03:49 -0000\r\nX-Received: from unknown (HELO amigo.acad.bg) (194.141.0.3)\n  by mta2.grp.sp2.yahoo.com with SMTP; 22 Jun 2010 10:03:48 -0000\r\nX-Received: from [194.141.0.136] (nina-vpn.acad.bg [194.141.0.136])\n\tby amigo.acad.bg (8.14.2/8.14.2) with ESMTP id o5MA0M5l028673;\n\tTue, 22 Jun 2010 13:00:23 +0300\r\nMessage-ID: &lt;4C2089B6.5050902@...&gt;\r\nDate: Tue, 22 Jun 2010 13:00:22 +0300\r\nUser-Agent: Thunderbird 2.0.0.24 (Windows/20100228)\r\nMIME-Version: 1.0\r\nTo: craigmcc@...\r\nCc: Rest List &lt;rest-discuss@yahoogroups.com&gt;\r\nReferences: &lt;4C205641.8010109@...&gt; &lt;AANLkTilmpy4LtSF6AXvPooTYK8hAbTxH40rtbiX-n7cn@...&gt;\r\nIn-Reply-To: &lt;AANLkTilmpy4LtSF6AXvPooTYK8hAbTxH40rtbiX-n7cn@...&gt;\r\nX-Enigmail-Version: 0.96.0\r\nContent-Type: multipart/alternative;\n boundary=&quot;------------080809020909040203080601&quot;\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Nina Jeliazkova &lt;nina@...&gt;\r\nReply-To: jeliazkova.nina@...\r\nSubject: Re: [rest-discuss] ClientResource leaves inactive thread\r\nX-Yahoo-Group-Post: member; u=28198498; y=ddqhBVTJhgJofZz2Im4zHKS1Aa8okK1JYgjdaw_Ylitt\r\nX-Yahoo-Profile: nina_n\r\n\r\n\r\n--------------080809020909040203080601\r\nContent-Type: text/plain; charset=ISO-8859-1\r\nContent-Transfer-Encoding: 7bit\r\n\r\nSorry, wrong list, my mistake!\n\nnina\nCraig McClanahan wrote:\n&gt;\n&gt;\n&gt; Shouldn&#39;t you be asking about this kind of thing on the Restlet\n&gt; mailing lists?\n&gt;\n&gt; Craig\n&gt;\n&gt; On Mon, Jun 21, 2010 at 11:20 PM, Nina Jeliazkova &lt;nina@...\n&gt; &lt;mailto:nina@...&gt;&gt; wrote:\n&gt;\n&gt;     Hello All,\n&gt;\n&gt;     I am experiencing memory/thread leak ,with Restlet-2.0-RC4 and\n&gt;     Restlet-2.0-SNAPSHOT , when using ClientResource . Basically,\n&gt;     ClientResource doesn&#39;t close the thread it spawns and this result\n&gt;     in number of inactive threads and  severe memory leak.\n&gt;\n&gt;     Here is some very simple code to illustrate this behaviour.  The\n&gt;     same code runs fine in Restlet-2.0-M6 (which doesn&#39;t span new\n&gt;     thread in ClientResource).\n&gt;\n&gt;         public void run(int instances) throws Exception {       \n&gt;            \n&gt;             for (int i=0; i &lt; instances;i++) {\n&gt;                 ClientResource clientResource = null;\n&gt;                 Representation r = null;\n&gt;                 try {\n&gt;                     clientResource = new\n&gt;     ClientResource(&quot;http://restlet.org&quot; &lt;http://restlet.org&gt;);\n&gt;                     r = clientResource.get();\n&gt;                 } finally {\n&gt;                     try { r.release(); } catch (Exception x) {}\n&gt;                     try { clientResource.release(); } catch (Exception\n&gt;     x) {}\n&gt;                 }\n&gt;             }\n&gt;         }\n&gt;        \n&gt;         public static void main(String[] args) throws Exception {\n&gt;             ThreadTest test = new ThreadTest();\n&gt;             test.run(1000);\n&gt;         }\n&gt;\n&gt;\n&gt;     I guess there might be something missing in the code to explicitly\n&gt;     close threads, but since the same code runs fine in M6, it is\n&gt;     quite confusing to experience leaks after upgrade.\n&gt;\n&gt;     Best regards,\n&gt;     Nina Jeliazkova\n&gt;\n&gt;     P.S. Inactive threads while executing the example above.\n&gt;\n&gt;\n&gt;\n&gt;\n&gt;\n&gt; \n\n\r\n--------------080809020909040203080601\r\nContent-Type: multipart/related;\n boundary=&quot;------------020503000602030405080609&quot;\r\n\r\n\r\n--------------020503000602030405080609\r\nContent-Type: text/html; charset=ISO-8859-1\r\nContent-Transfer-Encoding: 7bit\r\n\r\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;meta content=&quot;text/html;charset=ISO-8859-1&quot; http-equiv=&quot;Content-Type&quot;&gt;\n  &lt;title&gt;&lt;/title&gt;\n&lt;/head&gt;\n&lt;body bgcolor=&quot;#ffffff&quot; text=&quot;#000000&quot;&gt;\nSorry, wrong list, my mistake!&lt;br&gt;\n&lt;br&gt;\nnina&lt;br&gt;\nCraig McClanahan wrote:\n&lt;blockquote\n cite=&quot;mid:AANLkTilmpy4LtSF6AXvPooTYK8hAbTxH40rtbiX-n7cn@...&quot;\n type=&quot;cite&quot;&gt;\n  &lt;style type=&quot;text/css&quot;&gt;\n&lt;!--\n\n/* start of attachment style */\n       .ygrp-photo-title{\n         clear: both;\n         font-size: smaller;\n         height: 15px;\n         overflow: hidden;\n         text-align: center;\n         width: 75px;\n       }\n       div.ygrp-photo{\n         background-position: center;\n         background-repeat: no-repeat;\n         background-color: white;\n         border: 1px solid black;\n         height: 62px;\n         width: 62px;\n       }\n\n       div.photo-title \n         a,\n         div.photo-title a:active,\n         div.photo-title a:hover,\n         div.photo-title a:visited {\n           text-decoration: none; \n       }\n\n       div.attach-table div.attach-row {\n         clear: both;\n       }\n\n       div.attach-table div.attach-row div {\n         float: left;\n         /* margin: 2px;*/\n       }\n\n       p {\n         clear: both;\n         padding: 15px 0 3px 0;\n\t overflow: hidden;\n       }\n\n       div.ygrp-file {\n         width: 30px;\n         valign: middle;\n       }\n       div.attach-table div.attach-row div div a {\n         text-decoration: none;\n       }\n\n       div.attach-table div.attach-row div div span {\n         font-weight: normal;\n       }\n\n       div.ygrp-file-title {\n         font-weight: bold;\n       }\n /* end of attachment style */\n        --&gt;\n        &lt;/style&gt;\n  &lt;style type=&quot;text/css&quot;&gt;\n&lt;!--\n#ygrp-mkp {\n  border: 1px solid #d8d8d8;\n  font-family: Arial;\n  margin: 10px 0;\n  padding: 0 10px;\n}\n\n#ygrp-mkp hr {\n  border: 1px solid #d8d8d8;\n}\n\n#ygrp-mkp #hd {\n  color: #628c2a;\n  font-size: 85%;\n  font-weight: 700;\n  line-height: 122%;\n  margin: 10px 0;\n}\n\n#ygrp-mkp #ads {\n  margin-bottom: 10px;\n}\n\n#ygrp-mkp .ad {\n  padding: 0 0;\n}\n\n#ygrp-mkp .ad a {\n  color: #0000ff;\n  text-decoration: none;\n}\n--&gt;\n  &lt;/style&gt;\nShouldn&#39;t you be asking about this kind of thing on the Restlet mailing\nlists?\n  &lt;div&gt;&lt;br&gt;\n  &lt;/div&gt;\n  &lt;div&gt;Craig&lt;br&gt;\n  &lt;br&gt;\n  &lt;div class=&quot;gmail_quote&quot;&gt;On Mon, Jun 21, 2010 at 11:20 PM, Nina\nJeliazkova &lt;span dir=&quot;ltr&quot;&gt;&lt;&lt;a moz-do-not-send=&quot;true&quot;\n href=&quot;mailto:nina@...&quot;&gt;nina@...&lt;/a&gt;&gt;&lt;/span&gt; wrote:&lt;br&gt;\n  &lt;blockquote class=&quot;gmail_quote&quot;\n style=&quot;border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;&quot;&gt;\n    &lt;div bgcolor=&quot;#ffffff&quot; text=&quot;#000000&quot;&gt;Hello All,&lt;br&gt;\n    &lt;br&gt;\nI am experiencing memory/thread leak ,with Restlet-2.0-RC4 and\nRestlet-2.0-SNAPSHOT , when using ClientResource . Basically,\nClientResource doesn&#39;t close the thread it spawns and this result in\nnumber of inactive threads and&nbsp; severe memory leak.&lt;br&gt;\n    &lt;br&gt;\nHere is some very simple code to illustrate this behaviour.&nbsp; The same\ncode runs fine in Restlet-2.0-M6 (which doesn&#39;t span new thread in\nClientResource).&lt;br&gt;\n    &lt;br&gt;\n&nbsp;&nbsp;&nbsp; public void run(int instances) throws Exception {&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; for (int i=0; i &lt; instances;i++) { &lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ClientResource clientResource = null;&lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Representation r = null;&lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; try {&lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; clientResource = new\nClientResource(&lt;a moz-do-not-send=&quot;true&quot; href=&quot;http://restlet.org&quot;\n target=&quot;_blank&quot;&gt;&quot;http://restlet.org&quot;&lt;/a&gt;);&lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; r = clientResource.get();&lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; } finally {&lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; try { r.release(); } catch (Exception x) {}&lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; try { clientResource.release(); } catch (Exception x) {}&lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }&lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }&lt;br&gt;\n&nbsp;&nbsp;&nbsp; }&lt;br&gt;\n&nbsp;&nbsp;&nbsp; &lt;br&gt;\n&nbsp;&nbsp;&nbsp; public static void main(String[] args) throws Exception {&lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ThreadTest test = new ThreadTest();&lt;br&gt;\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; test.run(1000);&lt;br&gt;\n&nbsp;&nbsp;&nbsp; }&lt;br&gt;\n    &lt;br&gt;\n    &lt;br&gt;\nI guess there might be something missing in the code to explicitly\nclose threads, but since the same code runs fine in M6, it is quite\nconfusing to experience leaks after upgrade.&lt;br&gt;\n    &lt;br&gt;\nBest regards,&lt;br&gt;\n    &lt;font color=&quot;#888888&quot;&gt;Nina Jeliazkova&lt;br&gt;\n    &lt;/font&gt;&lt;br&gt;\nP.S. Inactive threads while executing the example above.&lt;br&gt;\n    &lt;br&gt;\n    &lt;img src=&quot;cid:part1.03090600.01000000@...&quot; alt=&quot;&quot;&gt;&lt;br&gt;\n    &lt;/div&gt;\n  &lt;/blockquote&gt;\n  &lt;/div&gt;\n  &lt;br&gt;\n  &lt;/div&gt;\n\n  &lt;div width=&quot;1&quot; style=&quot;color: white; clear: both;&quot;&gt;&lt;/div&gt;\n&lt;/blockquote&gt;\n&lt;br&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n\r\n--------------020503000602030405080609\r\nContent-Type: image/jpeg\r\nContent-ID: &lt;part1.03090600.01000000@...&gt;\r\n\r\n[ Attachment content not displayed ]\r\n--------------020503000602030405080609--\r\n\n\r\n--------------080809020909040203080601--\r\n\n"}}