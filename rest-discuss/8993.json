{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":252643374,"authorName":"Yohanes Santoso","from":"Yohanes Santoso &lt;yahoo-rest-discuss@...&gt;","profile":"gnome_g","replyTo":"SENDER","senderId":"TXZS9xTJ-L4b3s-t89z52cbPAXbPxsq-Re2rFzUSo7m9JeWQcEnpuH2b4Nm3UqKDa797aK1bH6_JvMSz3wA2N-_Ylsa7D0J7nKO_3bOIZShrFmDnE0AC-w2eaA","spamInfo":{"isSpam":false,"reason":"3"},"subject":"Re: [rest-discuss] Message queues","postDate":"1181745974","msgId":8993,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDg3ZDR6ejlha3AuZnNmQG1pY3JvamV0LmF0aC5jeD4=","inReplyToHeader":"PDg3OHhhbzUydTYuZnNmQGthbmdhLnRhcHNlbGxmZXJyaWVyLmNvLnVrPiAoTmljIEphbWVzIEZlcnJpZXIncwltZXNzYWdlIG9mICJUdWUsIDEyIEp1biAyMDA3IDIxOjM0OjQxICswMTAwIik=","referencesHeader":"PDIwMDcwNjEyMjAwODIwLkdEOTgwN0BzbGlua3AuY29tPgk8ODc4eGFvNTJ1Ni5mc2ZAa2FuZ2EudGFwc2VsbGZlcnJpZXIuY28udWs+"},"prevInTopic":8992,"nextInTopic":8994,"prevInTime":8992,"nextInTime":8994,"topicId":8955,"numMessagesInTopic":70,"msgSnippet":"... Which may not be suitable when there are multiple consumers waiting. The problem here is snapshot preserves the view of the whole queue much like","rawEmail":"Return-Path: &lt;yahoo-rest-discuss@...&gt;\r\nX-Sender: yahoo-rest-discuss@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nReceived: (qmail 45308 invoked from network); 13 Jun 2007 14:50:16 -0000\r\nReceived: from unknown (66.218.67.35)\n  by m49.grp.scd.yahoo.com with QMQP; 13 Jun 2007 14:50:16 -0000\r\nReceived: from unknown (HELO microjet.ath.cx) (64.142.109.140)\n  by mta9.grp.scd.yahoo.com with SMTP; 13 Jun 2007 14:50:16 -0000\r\nReceived: (qmail 3476 invoked from network); 13 Jun 2007 14:43:19 -0000\r\nReceived: from unknown (HELO jenny-gnome.dyndns.org) (127.0.0.1)\n  by localhost.sonic.net with SMTP; 13 Jun 2007 14:43:19 -0000\r\nReceived: (qmail 15197 invoked by uid 1000); 13 Jun 2007 10:46:14 -0400\r\nTo: rest-discuss@yahoogroups.com\r\nReferences: &lt;20070612200820.GD9807@...&gt;\n\t&lt;878xao52u6.fsf@...&gt;\r\nDate: Wed, 13 Jun 2007 10:46:14 -0400\r\nIn-Reply-To: &lt;878xao52u6.fsf@...&gt; (Nic James Ferrier&#39;s\n\tmessage of &quot;Tue, 12 Jun 2007 21:34:41 +0100&quot;)\r\nMessage-ID: &lt;87d4zz9akp.fsf@...&gt;\r\nUser-Agent: Gnus/5.110006 (No Gnus v0.6) Emacs/21.4 (gnu/linux)\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=us-ascii\r\nX-eGroups-Msg-Info: 2:3:4:0\r\nFrom: Yohanes Santoso &lt;yahoo-rest-discuss@...&gt;\r\nSubject: Re: [rest-discuss] Message queues\r\nX-Yahoo-Group-Post: member; u=252643374; y=wpdo9zkY6PqlooaPMZILk-8-0efLWHr7l5w40zQgwNt6Ug\r\nX-Yahoo-Profile: gnome_g\r\n\r\nNic James Ferrier &lt;nferrier@...&gt; writes:\n\n&gt; - everything in the queue disappears when you create the snapshot.\n\nWhich may not be suitable when there are multiple consumers\nwaiting. The problem here is snapshot preserves the view of the whole\nqueue much like serializable isolation level in SQL. This makes\nsharing parts of the same view and allowing modifications to those\nparts tricky and may not even be possible without blocking other\nconsumers.\n\nBut Nic&#39;s solution prompts one to think about personalisation. A\nconsumer does not have to have a snapshot of the whole queue. Giving a\npesonalised URI which represent the next pending message for a\nconsumer accomplishes:\n\n- Allows concurrent queue popping.\n\n- No sharing parts of the same view. This allows each consumer to\n  modify the part presented to it, and also eases the server\n  implementation.\n\nThe only thing required is for the consumer to have its own consumer\nID. This is not an unreasonable requirement and can be implemented\neasily (GUID or other simpler mechanisms).\n\nA pop is implemented as a sequence of GET and DELETE. A GET causes the\nserver to returns a previously bound message to the consumer, if there is\nany. If there isn&#39;t any, return the next unbound message.\n\n\nGET /queue/pending_message?consumer_id=12345\n==&gt; 200, MSG #32\n\nGET /queue/pending_message?consumer_id=12345\n==&gt; 200, MSG #32\n\nGET /queue/message/32\n==&gt; 200, MSG #32\n\nDELETE /queue/message/32\n==&gt; 204\n\nGET /queue/pending_message?consumer_id=12345\n==&gt; 200, MSG #34\n\nDELETE /queue/message/34\n==&gt; 204\n\nPOST /queue/pending_message/filter?consumer_id=12345\n&lt;== &lt;filter&gt;Return oldest message first&lt;/filter&gt;\n==&gt; 204\n\nGET /queue/pending_message?consumer_id=12345\n==&gt; 200, MSG #1\n\n\nYS.\n\n"}}