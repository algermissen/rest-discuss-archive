{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":124664655,"authorName":"Mark Little","from":"Mark Little &lt;nmcl2001@...&gt;","profile":"nmcl2001","replyTo":"SENDER","senderId":"WC2quDCVDjIppbcMjPoj4oo_1ZGA3C3q6iBS8HH592_sQWWtiDnlG3UIxTeXcRBFj0NHS_gkpbQsX3iTgafWMFSrgtXFEV4A2w","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Re: [rest-discuss] rest transactions","postDate":"1244623251","msgId":12859,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDNFMDE3RkVCLTNDQUYtNEQ1My1CMEZCLTg4RjUyMjU0RkI3RkB5YWhvby5jby51az4=","inReplyToHeader":"PDM0M2VjYjNlMDkwNjA5MTIxMHEyMTIxZWQ1MnUxZDY2NWRhMjQxNzcwNjU0QG1haWwuZ21haWwuY29tPg==","referencesHeader":"PDRBMjU0OEZFLjgwOTAxMDVAcmVkaGF0LmNvbT4gPDM0M2VjYjNlMDkwNjAyMDkwN20yOWQ5OThjNWtlY2QzZTk1M2RhN2I2Y2Y5QG1haWwuZ21haWwuY29tPiA8Q0E4M0NGRTUtNUY0RC00MEEzLUEwOTYtQUYwODE1QTBFNzNEQHlhaG9vLmNvLnVrPiA8MzQzZWNiM2UwOTA2MDcwNTI5aDcyN2FhZDkxbDRiNDAzN2MxYmI0MzBlZEBtYWlsLmdtYWlsLmNvbT4gPEJCNUJEQjVDLUQyRkEtNDY2Ni1COUFBLTRENUFDRDMzRTQyREB5YWhvby5jby51az4gPDM0M2VjYjNlMDkwNjA5MDYyN3cxZjUzYTM5ZXFlZmRkNThjOTBlNTVhNDM5QG1haWwuZ21haWwuY29tPiA8REVENjUzNjgtRDk2Ny00MkY3LTk0NDUtNDY5ODRCMzE1QkREQHlhaG9vLmNvLnVrPiA8MjI4MjMxNDUtNDVCNi00NjQ4LTk3M0UtQ0Y3NzFDNjBCOUQyQGdiaXYuY29tPiA8QzhDOTc5OEUtREY3Ni00MDFDLUFBNzgtMjRDMzlBNkE0Qjc0QGlubm9xLmNvbT4gPDEwOEM2RDdBLUFBODktNEE1OS04MUYwLTA4RUNFM0JCQ0E0Q0BnYml2LmNvbT4gPDM0M2VjYjNlMDkwNjA5MTIxMHEyMTIxZWQ1MnUxZDY2NWRhMjQxNzcwNjU0QG1haWwuZ21haWwuY29tPg=="},"prevInTopic":12858,"nextInTopic":12860,"prevInTime":12858,"nextInTime":12860,"topicId":12727,"numMessagesInTopic":54,"msgSnippet":"First let s ignore ACID transactions. We can have a separate discussion about whether or not ACID makes sense in the context of REST in the same way there have","rawEmail":"Return-Path: &lt;nmcl2001@...&gt;\r\nX-Sender: nmcl2001@...\r\nX-Apparently-To: rest-discuss@yahoogroups.com\r\nX-Received: (qmail 57131 invoked from network); 10 Jun 2009 08:51:54 -0000\r\nX-Received: from unknown (69.147.108.201)\n  by m7.grp.re1.yahoo.com with QMQP; 10 Jun 2009 08:51:54 -0000\r\nX-Received: from unknown (HELO smtp103.mail.ukl.yahoo.com) (77.238.184.35)\n  by mta2.grp.re1.yahoo.com with SMTP; 10 Jun 2009 08:51:54 -0000\r\nX-Received: (qmail 7554 invoked from network); 10 Jun 2009 08:40:53 -0000\r\nX-Received: from unknown (HELO ?192.168.0.2?) (nmcl2001@212.139.108.223 with plain)\n  by smtp103.mail.ukl.yahoo.com with SMTP; 10 Jun 2009 08:40:52 -0000\r\nX-Yahoo-SMTP: LJ6YEv.swBBeP6.9.mQG3BbGpJci\r\nX-YMail-OSG: 2dqlOs4VM1kGKfalitG4UmOolGoQqIKC2LzihgwmArXLY861nuuV635cf_NRTbg_vKSS9rZfKfsoUVno8mpIsq9AJ0piJttwgpC_6Nhh9qHpwU1jXM8N2pcewXCoKlup3atf5gOcPKygB6YwqwJn67cFvJaDiX6_eer3bmoyvjnJYhEXHh4odBIKZIVLsgJoIY1R_r6vyhcFNTiFWKpuPw_zFUWubSYn5HoK_F9S36jHXNxr3rXns0OdwTPtfO2stV4FEUJrwIgiNLDt8HvCtAZLZN64NSrwh7tAoOi0owwsxtkMG2wqQ1Je_sqyzBPxQloZsQR0oQZwv3oLB.TyUKHMPjA35Trlarc-\r\nX-Yahoo-Newman-Property: ymail-3\r\nCc: &quot;Roy T. Fielding&quot; &lt;fielding@...&gt;,\n Stefan Tilkov &lt;stefan.tilkov@...&gt;,\n REST-Discuss Discussion Group &lt;rest-discuss@yahoogroups.com&gt;\r\nMessage-Id: &lt;3E017FEB-3CAF-4D53-B0FB-88F52254FB7F@...&gt;\r\nTo: Bob Haugen &lt;bob.haugen@...&gt;\r\nIn-Reply-To: &lt;343ecb3e0906091210q2121ed52u1d665da241770654@...&gt;\r\nContent-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes\r\nContent-Transfer-Encoding: 7bit\r\nMime-Version: 1.0 (Apple Message framework v935.3)\r\nDate: Wed, 10 Jun 2009 09:40:51 +0100\r\nReferences: &lt;4A2548FE.8090105@...&gt; &lt;343ecb3e0906020907m29d998c5kecd3e953da7b6cf9@...&gt; &lt;CA83CFE5-5F4D-40A3-A096-AF0815A0E73D@...&gt; &lt;343ecb3e0906070529h727aad91l4b4037c1bb430ed@...&gt; &lt;BB5BDB5C-D2FA-4666-B9AA-4D5ACD33E42D@...&gt; &lt;343ecb3e0906090627w1f53a39eqefdd58c90e55a439@...&gt; &lt;DED65368-D967-42F7-9445-46984B315BDD@...&gt; &lt;22823145-45B6-4648-973E-CF771C60B9D2@...&gt; &lt;C8C9798E-DF76-401C-AA78-24C39A6A4B74@...&gt; &lt;108C6D7A-AA89-4A59-81F0-08ECE3BBCA4C@...&gt; &lt;343ecb3e0906091210q2121ed52u1d665da241770654@...&gt;\r\nX-Mailer: Apple Mail (2.935.3)\r\nX-eGroups-Msg-Info: 1:12:0:0:0\r\nFrom: Mark Little &lt;nmcl2001@...&gt;\r\nSubject: Re: [rest-discuss] rest transactions\r\nX-Yahoo-Group-Post: member; u=124664655; y=Sa0UM-DzGD2fWa76JWdDPfwGwkkx25Qysot1BQQx_lp4AsU\r\nX-Yahoo-Profile: nmcl2001\r\n\r\nFirst let&#39;s ignore ACID transactions. We can have a separate  \ndiscussion about whether or not ACID makes sense in the context of  \nREST in the same way there have been long discussions about whether or  \nnot it makes sense in the concept of SOA or Web Services.\n\nSecond I think we&#39;re in agreement concerning not talking about the  \nclient having to be aware of anything to do with the transaction. The  \nact of &quot;start&quot; and &quot;commit&quot; (for want of some terms) is an implicit  \nact by the client visiting specific pages/traverses specific links.\n\nTherefore what we&#39;re talking about here are extended transactions,  \nwhere the various ACID properties have been relaxed in a controlled  \nmanner, e.g., no atomicity guarantees, no requirement for durability.  \nAlthough I think the scenario you outline is valid, here&#39;s another one  \nto throw out there (there are others). Let&#39;s consider a scenario where  \na client visits a number of different web sites, let&#39;s call them A, B  \nand C. Now the act of visiting A, B and C cause state changes within  \nthese services which may be reflected at the client in the form of  \ndifferent pages/links to then traverse. In fact let&#39;s assume that the  \nact of visiting A then causes the client to go to B and that  \nsubsequently causes the client to visit C. It&#39;s possible that if the  \nclient followed a different set of options then A may be followed by D  \nand then E. Further let&#39;s assume that the work done at A, B and C is  \nactually done, i.e., not provisional. One way to think about this is  \nthat visiting B is &quot;the result&quot; of &quot;doing&quot; A and C is the same for B.  \nAlso undoing the business transaction obviously doesn&#39;t have the same  \naffect as a rollback on an ACID transaction, where the work is  \nprovisional and typically we try hard not to expose dirty data to  \nconcurrent users.\n\nNow each of these individual state changes are not coordinated, so if  \nwe have a failure during C, the changes made at A and B remain in  \neffect and the user has to solicit some compensation through another  \nmedium if necessary, e.g., the phone or email (&quot;give me my money  \nback.&quot;) Let&#39;s assume that we want to undo everything at A, B and C if  \nwe don&#39;t get a success from C, but if we do get past C then failures  \nat B aren&#39;t important to us, i.e., the transaction can be considered  \nto &quot;commit&quot; as long as A and C are successfully applied, but it is  \nonly allowed to attempt to &quot;commit&quot;/complete if C is available.\n\nIt&#39;s possible that the state changes at A, B and C could be  \ncoordinated through some ad hoc approach, e.g., some session  \ninformation embedded opaquely in the client response that allows each  \nsite to know it&#39;s the same session (aka transaction in this case). In  \nthat case the state changes for A and B could be undone if C fails and  \nunder some well defined rules, e.g., that A and B don&#39;t hear from C  \nwithin some predetermined period of time. But that protocol needs to  \nbe defined. Another approach is to say that the coordinator/service  \ninteraction is entirely a back-end problem: somehow resources  \nrepresenting A, B and C need to interact with each other (and  \npresumably a coordinator) through some out-of-band protocol of which  \nthe client is unaware. There are various problems with this, including  \nthe fact that it means A, B and C somehow need to know they are within  \nthe same transaction, where the coordinator is located, etc. Nothing  \ninsurmountable, but maybe there&#39;s a better way?\n\nSo, another option is the following: when the client first visits A  \nthat implicitly starts the transaction and enlists a resource at A  \nwith some coordinator residing elsewhere (the way in which the  \ncoordinator is manipulated is RESTful too, creating a resource that  \nrepresents the transaction in question.) The client then gets to B,  \nwhich obtains the transaction URI through the client interaction and  \ndoes likewise with its own participant, before moving the state of the  \nsystem (and client) on to C. Finally when the client is finished it  \nclicks a &quot;complete&quot; link that ends the business transaction and as a  \nresult instructs the transaction resource to do nothing in this case  \n(success). However, if the client clicked the &quot;undo all&quot; or maybe  \n&quot;undo B&quot; then the state change at B is undone, ultimately driving the  \nclient to, say, C1. If there are failures, e.g., the client doesn&#39;t  \nget to C, then the transaction may undo all of the work done by A and  \nB automatically, or it may leave them as-is (typically defined by the  \ncontract defined within the business transaction, set, say, by A if  \nit&#39;s the initiator.)\n\nMark.\n\n\nOn 9 Jun 2009, at 20:10, Bob Haugen wrote:\n\n&gt; Here&#39;s a very sketchy version of what I had in mind:\n&gt;\n&gt; The scenario is an etailer getting bids, and then placing an order\n&gt; with the lowest bidder.\n&gt;\n&gt; The etailer POSTs a Request For Quotation (Amazon called these Request\n&gt; For Commitment in one meeting) to the appropriate URI of a few\n&gt; suppliers.  The RFQ contains a URI for the suppliers to POST a Quote\n&gt; in response.  Each Quote contains a URI (or two) for the etailer to\n&gt; follow up with an order or a rejection.\n&gt;\n&gt; The etailer then POSTs an order (still in a provisional state) to the\n&gt; successful bidder&#39;s URI. The order contains a URI for the supplier to\n&gt; accept the order, and maybe a URI for the supplier to decline the\n&gt; order if something has happened in the meantime that has made\n&gt; fulfillment impossible.\n&gt;\n&gt; When the etailer gets an acceptance from the supplier, the etailer\n&gt; might send rejection notices to the failed bidders.\n&gt;\n&gt; I&#39;m sure Mark Little could suggest several refinements, but this is\n&gt; just a sketch for discussion purposes.\n&gt;\n&gt; It&#39;s a 2-phase commit agreement scenario, but not ACID:  it&#39;s not\n&gt; Atomic, and the individual resources are not Isolated.\n&gt;\n&gt; Both the etailer and the suppliers play both client and server roles.\n&gt; Each message contains a URI or two for responses, where the recipient\n&gt; of a message will (possibly in a separate process) POST a response.\n&gt;\n&gt; My questions for Roy and this group:\n&gt;\n&gt; 1. Is this scenario RESTful?\n&gt;\n&gt; 2. If not, could it be made RESTful with some changes?\n&gt;\n&gt; 3. What else is wrong with it?\n&gt;\n&gt; Question for Mark:  what&#39;s wrong with it from a transaction protocol  \n&gt; viewpoint?\n&gt;\n&gt; Thanks,\n&gt; Bob Haugen\n&gt;\n&gt;\n&gt; ------------------------------------\n&gt;\n&gt; Yahoo! Groups Links\n&gt;\n&gt;\n&gt;\n\n\n"}}